define("home/config",[],function(){"use strict";return{appRoot:"/"}}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=!!e&&"length"in e&&e.length,n=se.type(e);return"function"===n||se.isWindow(e)?!1:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function i(e,t,n){if(se.isFunction(t))return se.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return se.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(fe.test(t))return se.filter(t,e,n);t=se.filter(t,e)}return se.grep(e,function(e){return Z.call(t,e)>-1!==n})}function a(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function s(e){var t={};return se.each(e.match(ye)||[],function(e,n){t[n]=!0}),t}function o(){J.removeEventListener("DOMContentLoaded",o),e.removeEventListener("load",o),se.ready()}function r(){this.expando=se.expando+r.uid++}function l(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(Fe,"-$&").toLowerCase(),n=e.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Ee.test(n)?se.parseJSON(n):n}catch(a){}Se.set(e,t,n)}else n=void 0;return n}function c(e,t,n,i){var a,s=1,o=20,r=i?function(){return i.cur()}:function(){return se.css(e,t,"")},l=r(),c=n&&n[3]||(se.cssNumber[t]?"":"px"),d=(se.cssNumber[t]||"px"!==c&&+l)&&Me.exec(se.css(e,t));if(d&&d[3]!==c){c=c||d[3],n=n||[],d=+l||1;do s=s||".5",d/=s,se.style(e,t,d+c);while(s!==(s=r()/l)&&1!==s&&--o)}return n&&(d=+d||+l||0,a=n[1]?d+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=d,i.end=a)),a}function d(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&se.nodeName(e,t)?se.merge([e],n):n}function u(e,t){for(var n=0,i=e.length;i>n;n++)Te.set(e[n],"globalEval",!t||Te.get(t[n],"globalEval"))}function h(e,t,n,i,a){for(var s,o,r,l,c,h,m=t.createDocumentFragment(),p=[],f=0,g=e.length;g>f;f++)if(s=e[f],s||0===s)if("object"===se.type(s))se.merge(p,s.nodeType?[s]:s);else if(Ie.test(s)){for(o=o||m.appendChild(t.createElement("div")),r=(Re.exec(s)||["",""])[1].toLowerCase(),l=Oe[r]||Oe._default,o.innerHTML=l[1]+se.htmlPrefilter(s)+l[2],h=l[0];h--;)o=o.lastChild;se.merge(p,o.childNodes),o=m.firstChild,o.textContent=""}else p.push(t.createTextNode(s));for(m.textContent="",f=0;s=p[f++];)if(i&&se.inArray(s,i)>-1)a&&a.push(s);else if(c=se.contains(s.ownerDocument,s),o=d(m.appendChild(s),"script"),c&&u(o),n)for(h=0;s=o[h++];)Ne.test(s.type||"")&&n.push(s);return m}function m(){return!0}function p(){return!1}function f(){try{return J.activeElement}catch(e){}}function g(e,t,n,i,a,s){var o,r;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=void 0);for(r in t)g(e,r,n,i,t[r],s);return e}if(null==i&&null==a?(a=n,i=n=void 0):null==a&&("string"==typeof n?(a=i,i=void 0):(a=i,i=n,n=void 0)),a===!1)a=p;else if(!a)return e;return 1===s&&(o=a,a=function(e){return se().off(e),o.apply(this,arguments)},a.guid=o.guid||(o.guid=se.guid++)),e.each(function(){se.event.add(this,t,a,i,n)})}function v(e,t){return se.nodeName(e,"table")&&se.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function b(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function w(e){var t=ze.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function x(e,t){var n,i,a,s,o,r,l,c;if(1===t.nodeType){if(Te.hasData(e)&&(s=Te.access(e),o=Te.set(t,s),c=s.events)){delete o.handle,o.events={};for(a in c)for(n=0,i=c[a].length;i>n;n++)se.event.add(t,a,c[a][n])}Se.hasData(e)&&(r=Se.access(e),l=se.extend({},r),Se.set(t,l))}}function y(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ve.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function _(e,t,n,i){t=X.apply([],t);var a,s,o,r,l,c,u=0,m=e.length,p=m-1,f=t[0],g=se.isFunction(f);if(g||m>1&&"string"==typeof f&&!ie.checkClone&&$e.test(f))return e.each(function(a){var s=e.eq(a);g&&(t[0]=f.call(this,a,s.html())),_(s,t,n,i)});if(m&&(a=h(t,e[0].ownerDocument,!1,e,i),s=a.firstChild,1===a.childNodes.length&&(a=s),s||i)){for(o=se.map(d(a,"script"),b),r=o.length;m>u;u++)l=a,u!==p&&(l=se.clone(l,!0,!0),r&&se.merge(o,d(l,"script"))),n.call(e[u],l,u);if(r)for(c=o[o.length-1].ownerDocument,se.map(o,w),u=0;r>u;u++)l=o[u],Ne.test(l.type||"")&&!Te.access(l,"globalEval")&&se.contains(c,l)&&(l.src?se._evalUrl&&se._evalUrl(l.src):se.globalEval(l.textContent.replace(Be,"")))}return e}function k(e,t,n){for(var i,a=t?se.filter(t,e):e,s=0;null!=(i=a[s]);s++)n||1!==i.nodeType||se.cleanData(d(i)),i.parentNode&&(n&&se.contains(i.ownerDocument,i)&&u(d(i,"script")),i.parentNode.removeChild(i));return e}function C(e,t){var n=se(t.createElement(e)).appendTo(t.body),i=se.css(n[0],"display");return n.detach(),i}function T(e){var t=J,n=Ge[e];return n||(n=C(e,t),"none"!==n&&n||(We=(We||se("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=We[0].contentDocument,t.write(),t.close(),n=C(e,t),We.detach()),Ge[e]=n),n}function S(e,t,n){var i,a,s,o,r=e.style;return n=n||Ke(e),o=n?n.getPropertyValue(t)||n[t]:void 0,""!==o&&void 0!==o||se.contains(e.ownerDocument,e)||(o=se.style(e,t)),n&&!ie.pixelMarginRight()&&Je.test(o)&&Ye.test(t)&&(i=r.width,a=r.minWidth,s=r.maxWidth,r.minWidth=r.maxWidth=r.width=o,o=n.width,r.width=i,r.minWidth=a,r.maxWidth=s),void 0!==o?o+"":o}function E(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function F(e){if(e in it)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=nt.length;n--;)if(e=nt[n]+t,e in it)return e}function P(e,t,n){var i=Me.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function M(e,t,n,i,a){for(var s=n===(i?"border":"content")?4:"width"===t?1:0,o=0;4>s;s+=2)"margin"===n&&(o+=se.css(e,n+Ae[s],!0,a)),i?("content"===n&&(o-=se.css(e,"padding"+Ae[s],!0,a)),"margin"!==n&&(o-=se.css(e,"border"+Ae[s]+"Width",!0,a))):(o+=se.css(e,"padding"+Ae[s],!0,a),"padding"!==n&&(o+=se.css(e,"border"+Ae[s]+"Width",!0,a)));return o}function A(e,t,n){var i=!0,a="width"===t?e.offsetWidth:e.offsetHeight,s=Ke(e),o="border-box"===se.css(e,"boxSizing",!1,s);if(0>=a||null==a){if(a=S(e,t,s),(0>a||null==a)&&(a=e.style[t]),Je.test(a))return a;i=o&&(ie.boxSizingReliable()||a===e.style[t]),a=parseFloat(a)||0}return a+M(e,t,n||(o?"border":"content"),i,s)+"px"}function D(e,t){for(var n,i,a,s=[],o=0,r=e.length;r>o;o++)i=e[o],i.style&&(s[o]=Te.get(i,"olddisplay"),n=i.style.display,t?(s[o]||"none"!==n||(i.style.display=""),""===i.style.display&&De(i)&&(s[o]=Te.access(i,"olddisplay",T(i.nodeName)))):(a=De(i),"none"===n&&a||Te.set(i,"olddisplay",a?n:se.css(i,"display"))));for(o=0;r>o;o++)i=e[o],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?s[o]||"":"none"));return e}function V(e,t,n,i,a){return new V.prototype.init(e,t,n,i,a)}function R(){return e.setTimeout(function(){at=void 0}),at=se.now()}function N(e,t){var n,i=0,a={height:e};for(t=t?1:0;4>i;i+=2-t)n=Ae[i],a["margin"+n]=a["padding"+n]=e;return t&&(a.opacity=a.width=e),a}function O(e,t,n){for(var i,a=(L.tweeners[t]||[]).concat(L.tweeners["*"]),s=0,o=a.length;o>s;s++)if(i=a[s].call(n,t,e))return i}function I(e,t,n){var i,a,s,o,r,l,c,d,u=this,h={},m=e.style,p=e.nodeType&&De(e),f=Te.get(e,"fxshow");n.queue||(r=se._queueHooks(e,"fx"),null==r.unqueued&&(r.unqueued=0,l=r.empty.fire,r.empty.fire=function(){r.unqueued||l()}),r.unqueued++,u.always(function(){u.always(function(){r.unqueued--,se.queue(e,"fx").length||r.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[m.overflow,m.overflowX,m.overflowY],c=se.css(e,"display"),d="none"===c?Te.get(e,"olddisplay")||T(e.nodeName):c,"inline"===d&&"none"===se.css(e,"float")&&(m.display="inline-block")),n.overflow&&(m.overflow="hidden",u.always(function(){m.overflow=n.overflow[0],m.overflowX=n.overflow[1],m.overflowY=n.overflow[2]}));for(i in t)if(a=t[i],ot.exec(a)){if(delete t[i],s=s||"toggle"===a,a===(p?"hide":"show")){if("show"!==a||!f||void 0===f[i])continue;p=!0}h[i]=f&&f[i]||se.style(e,i)}else c=void 0;if(se.isEmptyObject(h))"inline"===("none"===c?T(e.nodeName):c)&&(m.display=c);else{f?"hidden"in f&&(p=f.hidden):f=Te.access(e,"fxshow",{}),s&&(f.hidden=!p),p?se(e).show():u.done(function(){se(e).hide()}),u.done(function(){var t;Te.remove(e,"fxshow");for(t in h)se.style(e,t,h[t])});for(i in h)o=O(p?f[i]:0,i,u),i in f||(f[i]=o.start,p&&(o.end=o.start,o.start="width"===i||"height"===i?1:0))}}function U(e,t){var n,i,a,s,o;for(n in e)if(i=se.camelCase(n),a=t[i],s=e[n],se.isArray(s)&&(a=s[1],s=e[n]=s[0]),n!==i&&(e[i]=s,delete e[n]),o=se.cssHooks[i],o&&"expand"in o){s=o.expand(s),delete e[i];for(n in s)n in e||(e[n]=s[n],t[n]=a)}else t[i]=a}function L(e,t,n){var i,a,s=0,o=L.prefilters.length,r=se.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var t=at||R(),n=Math.max(0,c.startTime+c.duration-t),i=n/c.duration||0,s=1-i,o=0,l=c.tweens.length;l>o;o++)c.tweens[o].run(s);return r.notifyWith(e,[c,s,n]),1>s&&l?n:(r.resolveWith(e,[c]),!1)},c=r.promise({elem:e,props:se.extend({},t),opts:se.extend(!0,{specialEasing:{},easing:se.easing._default},n),originalProperties:t,originalOptions:n,startTime:at||R(),duration:n.duration,tweens:[],createTween:function(t,n){var i=se.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(a)return this;for(a=!0;i>n;n++)c.tweens[n].run(1);return t?(r.notifyWith(e,[c,1,0]),r.resolveWith(e,[c,t])):r.rejectWith(e,[c,t]),this}}),d=c.props;for(U(d,c.opts.specialEasing);o>s;s++)if(i=L.prefilters[s].call(c,e,d,c.opts))return se.isFunction(i.stop)&&(se._queueHooks(c.elem,c.opts.queue).stop=se.proxy(i.stop,i)),i;return se.map(d,O,c),se.isFunction(c.opts.start)&&c.opts.start.call(e,c),se.fx.timer(se.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function q(e){return e.getAttribute&&e.getAttribute("class")||""}function H(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,a=0,s=t.toLowerCase().match(ye)||[];if(se.isFunction(n))for(;i=s[a++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function j(e,t,n,i){function a(r){var l;return s[r]=!0,se.each(e[r]||[],function(e,r){var c=r(t,n,i);return"string"!=typeof c||o||s[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),a(c),!1)}),l}var s={},o=e===St;return a(t.dataTypes[0])||!s["*"]&&a("*")}function $(e,t){var n,i,a=se.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((a[n]?e:i||(i={}))[n]=t[n]);return i&&se.extend(!0,e,i),e}function z(e,t,n){for(var i,a,s,o,r=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(a in r)if(r[a]&&r[a].test(i)){l.unshift(a);break}if(l[0]in n)s=l[0];else{for(a in n){if(!l[0]||e.converters[a+" "+l[0]]){s=a;break}o||(o=a)}s=s||o}return s?(s!==l[0]&&l.unshift(s),n[s]):void 0}function B(e,t,n,i){var a,s,o,r,l,c={},d=e.dataTypes.slice();if(d[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(s=d.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=d.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(o=c[l+" "+s]||c["* "+s],!o)for(a in c)if(r=a.split(" "),r[1]===s&&(o=c[l+" "+r[0]]||c["* "+r[0]])){o===!0?o=c[a]:c[a]!==!0&&(s=r[0],d.unshift(r[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(u){return{state:"parsererror",error:o?u:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}function W(e,t,n,i){var a;if(se.isArray(t))se.each(t,function(t,a){n||Mt.test(e)?i(e,a):W(e+"["+("object"==typeof a&&null!=a?t:"")+"]",a,n,i)});else if(n||"object"!==se.type(t))i(e,t);else for(a in t)W(e+"["+a+"]",t[a],n,i)}function G(e){return se.isWindow(e)?e:9===e.nodeType&&e.defaultView}var Y=[],J=e.document,K=Y.slice,X=Y.concat,Q=Y.push,Z=Y.indexOf,ee={},te=ee.toString,ne=ee.hasOwnProperty,ie={},ae="2.2.4",se=function(e,t){return new se.fn.init(e,t)},oe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,re=/^-ms-/,le=/-([\da-z])/gi,ce=function(e,t){return t.toUpperCase()};se.fn=se.prototype={jquery:ae,constructor:se,selector:"",length:0,toArray:function(){return K.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:K.call(this)},pushStack:function(e){var t=se.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return se.each(this,e)},map:function(e){return this.pushStack(se.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(K.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:Q,sort:Y.sort,splice:Y.splice},se.extend=se.fn.extend=function(){var e,t,n,i,a,s,o=arguments[0]||{},r=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[r]||{},r++),"object"==typeof o||se.isFunction(o)||(o={}),r===l&&(o=this,r--);l>r;r++)if(null!=(e=arguments[r]))for(t in e)n=o[t],i=e[t],o!==i&&(c&&i&&(se.isPlainObject(i)||(a=se.isArray(i)))?(a?(a=!1,s=n&&se.isArray(n)?n:[]):s=n&&se.isPlainObject(n)?n:{},o[t]=se.extend(c,s,i)):void 0!==i&&(o[t]=i));return o},se.extend({expando:"jQuery"+(ae+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw Error(e)},noop:function(){},isFunction:function(e){return"function"===se.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&""+e;return!se.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==se.type(e)||e.nodeType||se.isWindow(e))return!1;if(e.constructor&&!ne.call(e,"constructor")&&!ne.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||ne.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ee[te.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=se.trim(e),e&&(1===e.indexOf("use strict")?(t=J.createElement("script"),t.text=e,J.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(re,"ms-").replace(le,ce)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var i,a=0;if(n(e))for(i=e.length;i>a&&t.call(e[a],a,e[a])!==!1;a++);else for(a in e)if(t.call(e[a],a,e[a])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(oe,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?se.merge(i,"string"==typeof e?[e]:e):Q.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:Z.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,a=e.length;n>i;i++)e[a++]=t[i];return e.length=a,e},grep:function(e,t,n){for(var i,a=[],s=0,o=e.length,r=!n;o>s;s++)i=!t(e[s],s),i!==r&&a.push(e[s]);return a},map:function(e,t,i){var a,s,o=0,r=[];if(n(e))for(a=e.length;a>o;o++)s=t(e[o],o,i),null!=s&&r.push(s);else for(o in e)s=t(e[o],o,i),null!=s&&r.push(s);return X.apply([],r)},guid:1,proxy:function(e,t){var n,i,a;return"string"==typeof t&&(n=e[t],t=e,e=n),se.isFunction(e)?(i=K.call(arguments,2),a=function(){return e.apply(t||this,i.concat(K.call(arguments)))},a.guid=e.guid=e.guid||se.guid++,a):void 0},now:Date.now,support:ie}),"function"==typeof Symbol&&(se.fn[Symbol.iterator]=Y[Symbol.iterator]),se.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ee["[object "+t+"]"]=t.toLowerCase()});var de=function(e){function t(e,t,n,i){var a,s,o,r,l,c,u,m,p=t&&t.ownerDocument,f=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==f&&9!==f&&11!==f)return n;if(!i&&((t?t.ownerDocument||t:q)!==D&&A(t),t=t||D,R)){if(11!==f&&(c=ve.exec(e)))if(a=c[1]){if(9===f){if(!(o=t.getElementById(a)))return n;if(o.id===a)return n.push(o),n}else if(p&&(o=p.getElementById(a))&&U(t,o)&&o.id===a)return n.push(o),n}else{if(c[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((a=c[3])&&y.getElementsByClassName&&t.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(a)),n}if(!(!y.qsa||B[e+" "]||N&&N.test(e))){if(1!==f)p=t,m=e;else if("object"!==t.nodeName.toLowerCase()){for((r=t.getAttribute("id"))?r=r.replace(we,"\\$&"):t.setAttribute("id",r=L),u=T(e),s=u.length,l=he.test(r)?"#"+r:"[id='"+r+"']";s--;)u[s]=l+" "+h(u[s]);m=u.join(","),p=be.test(e)&&d(t.parentNode)||t}if(m)try{return Q.apply(n,p.querySelectorAll(m)),n}catch(g){}finally{r===L&&t.removeAttribute("id")}}}return E(e.replace(re,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>_.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[L]=!0,e}function a(e){var t=D.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var n=e.split("|"),i=n.length;i--;)_.attrHandle[n[i]]=t}function o(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||G)-(~e.sourceIndex||G);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function r(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return i(function(t){return t=+t,i(function(n,i){for(var a,s=e([],n.length,t),o=s.length;o--;)n[a=s[o]]&&(n[a]=!(i[a]=n[a]))})})}function d(e){return e&&void 0!==e.getElementsByTagName&&e}function u(){}function h(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function m(e,t,n){var i=t.dir,a=n&&"parentNode"===i,s=j++;return t.first?function(t,n,s){for(;t=t[i];)if(1===t.nodeType||a)return e(t,n,s)}:function(t,n,o){var r,l,c,d=[H,s];if(o){for(;t=t[i];)if((1===t.nodeType||a)&&e(t,n,o))return!0}else for(;t=t[i];)if(1===t.nodeType||a){if(c=t[L]||(t[L]={}),l=c[t.uniqueID]||(c[t.uniqueID]={}),(r=l[i])&&r[0]===H&&r[1]===s)return d[2]=r[2];if(l[i]=d,d[2]=e(t,n,o))return!0}}}function p(e){return e.length>1?function(t,n,i){for(var a=e.length;a--;)if(!e[a](t,n,i))return!1;return!0}:e[0]}function f(e,n,i){for(var a=0,s=n.length;s>a;a++)t(e,n[a],i);return i}function g(e,t,n,i,a){for(var s,o=[],r=0,l=e.length,c=null!=t;l>r;r++)(s=e[r])&&(!n||n(s,i,a))&&(o.push(s),c&&t.push(r));return o}function v(e,t,n,a,s,o){return a&&!a[L]&&(a=v(a)),s&&!s[L]&&(s=v(s,o)),i(function(i,o,r,l){var c,d,u,h=[],m=[],p=o.length,v=i||f(t||"*",r.nodeType?[r]:r,[]),b=!e||!i&&t?v:g(v,h,e,r,l),w=n?s||(i?e:p||a)?[]:o:b;if(n&&n(b,w,r,l),a)for(c=g(w,m),a(c,[],r,l),d=c.length;d--;)(u=c[d])&&(w[m[d]]=!(b[m[d]]=u));if(i){if(s||e){if(s){for(c=[],d=w.length;d--;)(u=w[d])&&c.push(b[d]=u);s(null,w=[],c,l)}for(d=w.length;d--;)(u=w[d])&&(c=s?ee(i,u):h[d])>-1&&(i[c]=!(o[c]=u))}}else w=g(w===o?w.splice(p,w.length):w),s?s(null,o,w,l):Q.apply(o,w)})}function b(e){for(var t,n,i,a=e.length,s=_.relative[e[0].type],o=s||_.relative[" "],r=s?1:0,l=m(function(e){return e===t},o,!0),c=m(function(e){return ee(t,e)>-1},o,!0),d=[function(e,n,i){var a=!s&&(i||n!==F)||((t=n).nodeType?l(e,n,i):c(e,n,i));return t=null,a}];a>r;r++)if(n=_.relative[e[r].type])d=[m(p(d),n)];else{if(n=_.filter[e[r].type].apply(null,e[r].matches),n[L]){for(i=++r;a>i&&!_.relative[e[i].type];i++);return v(r>1&&p(d),r>1&&h(e.slice(0,r-1).concat({value:" "===e[r-2].type?"*":""})).replace(re,"$1"),n,i>r&&b(e.slice(r,i)),a>i&&b(e=e.slice(i)),a>i&&h(e))}d.push(n)}return p(d)}function w(e,n){var a=n.length>0,s=e.length>0,o=function(i,o,r,l,c){var d,u,h,m=0,p="0",f=i&&[],v=[],b=F,w=i||s&&_.find.TAG("*",c),x=H+=null==b?1:Math.random()||.1,y=w.length;for(c&&(F=o===D||o||c);p!==y&&null!=(d=w[p]);p++){if(s&&d){for(u=0,o||d.ownerDocument===D||(A(d),r=!R);h=e[u++];)if(h(d,o||D,r)){l.push(d);break}c&&(H=x)}a&&((d=!h&&d)&&m--,i&&f.push(d))}if(m+=p,a&&p!==m){for(u=0;h=n[u++];)h(f,v,o,r);if(i){if(m>0)for(;p--;)f[p]||v[p]||(v[p]=K.call(l));v=g(v)}Q.apply(l,v),c&&!i&&v.length>0&&m+n.length>1&&t.uniqueSort(l)}return c&&(H=x,F=b),f};return a?i(o):o}var x,y,_,k,C,T,S,E,F,P,M,A,D,V,R,N,O,I,U,L="sizzle"+1*new Date,q=e.document,H=0,j=0,$=n(),z=n(),B=n(),W=function(e,t){return e===t&&(M=!0),0},G=1<<31,Y={}.hasOwnProperty,J=[],K=J.pop,X=J.push,Q=J.push,Z=J.slice,ee=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ae="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",se=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ae+")*)|.*)\\)|)",oe=RegExp(ne+"+","g"),re=RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),le=RegExp("^"+ne+"*,"+ne+"*"),ce=RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),de=RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),ue=RegExp(se),he=RegExp("^"+ie+"$"),me={ID:RegExp("^#("+ie+")"),CLASS:RegExp("^\\.("+ie+")"),TAG:RegExp("^("+ie+"|[*])"),ATTR:RegExp("^"+ae),PSEUDO:RegExp("^"+se),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:RegExp("^(?:"+te+")$","i"),needsContext:RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,fe=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,we=/'|\\/g,xe=RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),ye=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},_e=function(){A()};try{Q.apply(J=Z.call(q.childNodes),q.childNodes)}catch(ke){Q={apply:J.length?function(e,t){X.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}y=t.support={},C=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},A=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:q;return i!==D&&9===i.nodeType&&i.documentElement?(D=i,V=D.documentElement,R=!C(D),(n=D.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",_e,!1):n.attachEvent&&n.attachEvent("onunload",_e)),y.attributes=a(function(e){return e.className="i",!e.getAttribute("className")}),y.getElementsByTagName=a(function(e){return e.appendChild(D.createComment("")),!e.getElementsByTagName("*").length}),y.getElementsByClassName=ge.test(D.getElementsByClassName),y.getById=a(function(e){return V.appendChild(e).id=L,!D.getElementsByName||!D.getElementsByName(L).length}),y.getById?(_.find.ID=function(e,t){if(void 0!==t.getElementById&&R){var n=t.getElementById(e);return n?[n]:[]}},_.filter.ID=function(e){var t=e.replace(xe,ye);return function(e){return e.getAttribute("id")===t}}):(delete _.find.ID,_.filter.ID=function(e){var t=e.replace(xe,ye);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),_.find.TAG=y.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):y.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],a=0,s=t.getElementsByTagName(e);if("*"===e){for(;n=s[a++];)1===n.nodeType&&i.push(n);return i}return s},_.find.CLASS=y.getElementsByClassName&&function(e,t){return void 0!==t.getElementsByClassName&&R?t.getElementsByClassName(e):void 0},O=[],N=[],(y.qsa=ge.test(D.querySelectorAll))&&(a(function(e){V.appendChild(e).innerHTML="<a id='"+L+"'></a><select id='"+L+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&N.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||N.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+L+"-]").length||N.push("~="),e.querySelectorAll(":checked").length||N.push(":checked"),e.querySelectorAll("a#"+L+"+*").length||N.push(".#.+[+~]")}),a(function(e){var t=D.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&N.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||N.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),N.push(",.*:")})),(y.matchesSelector=ge.test(I=V.matches||V.webkitMatchesSelector||V.mozMatchesSelector||V.oMatchesSelector||V.msMatchesSelector))&&a(function(e){y.disconnectedMatch=I.call(e,"div"),I.call(e,"[s!='']:x"),O.push("!=",se)}),N=N.length&&RegExp(N.join("|")),O=O.length&&RegExp(O.join("|")),t=ge.test(V.compareDocumentPosition),U=t||ge.test(V.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return M=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!y.sortDetached&&t.compareDocumentPosition(e)===n?e===D||e.ownerDocument===q&&U(q,e)?-1:t===D||t.ownerDocument===q&&U(q,t)?1:P?ee(P,e)-ee(P,t):0:4&n?-1:1)}:function(e,t){if(e===t)return M=!0,0;var n,i=0,a=e.parentNode,s=t.parentNode,r=[e],l=[t];if(!a||!s)return e===D?-1:t===D?1:a?-1:s?1:P?ee(P,e)-ee(P,t):0;if(a===s)return o(e,t);for(n=e;n=n.parentNode;)r.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;r[i]===l[i];)i++;return i?o(r[i],l[i]):r[i]===q?-1:l[i]===q?1:0},D):D},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==D&&A(e),n=n.replace(de,"='$1']"),!(!y.matchesSelector||!R||B[n+" "]||O&&O.test(n)||N&&N.test(n)))try{var i=I.call(e,n);if(i||y.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(a){}return t(n,D,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==D&&A(e),U(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==D&&A(e);var n=_.attrHandle[t.toLowerCase()],i=n&&Y.call(_.attrHandle,t.toLowerCase())?n(e,t,!R):void 0;return void 0!==i?i:y.attributes||!R?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,a=0;if(M=!y.detectDuplicates,P=!y.sortStable&&e.slice(0),e.sort(W),M){for(;t=e[a++];)t===e[a]&&(i=n.push(a));for(;i--;)e.splice(n[i],1)}return P=null,e},k=t.getText=function(e){var t,n="",i=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=k(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[i++];)n+=k(t);return n},_=t.selectors={cacheLength:50,createPseudo:i,match:me,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(xe,ye),e[3]=(e[3]||e[4]||e[5]||"").replace(xe,ye),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return me.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ue.test(n)&&(t=T(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(xe,ye).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=$[e+" "];return t||(t=RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&$(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(a){var s=t.attr(a,e);return null==s?"!="===n:n?(s+="","="===n?s===i:"!="===n?s!==i:"^="===n?i&&0===s.indexOf(i):"*="===n?i&&s.indexOf(i)>-1:"$="===n?i&&s.slice(-i.length)===i:"~="===n?(" "+s.replace(oe," ")+" ").indexOf(i)>-1:"|="===n?s===i||s.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,a){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),r="of-type"===t;return 1===i&&0===a?function(e){return!!e.parentNode}:function(t,n,l){var c,d,u,h,m,p,f=s!==o?"nextSibling":"previousSibling",g=t.parentNode,v=r&&t.nodeName.toLowerCase(),b=!l&&!r,w=!1;if(g){if(s){for(;f;){for(h=t;h=h[f];)if(r?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;p=f="only"===e&&!p&&"nextSibling"}return!0}if(p=[o?g.firstChild:g.lastChild],o&&b){for(h=g,u=h[L]||(h[L]={}),d=u[h.uniqueID]||(u[h.uniqueID]={}),c=d[e]||[],m=c[0]===H&&c[1],w=m&&c[2],h=m&&g.childNodes[m];h=++m&&h&&h[f]||(w=m=0)||p.pop();)if(1===h.nodeType&&++w&&h===t){d[e]=[H,m,w];break}}else if(b&&(h=t,u=h[L]||(h[L]={}),d=u[h.uniqueID]||(u[h.uniqueID]={}),c=d[e]||[],m=c[0]===H&&c[1],w=m),w===!1)for(;(h=++m&&h&&h[f]||(w=m=0)||p.pop())&&((r?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++w||(b&&(u=h[L]||(h[L]={}),d=u[h.uniqueID]||(u[h.uniqueID]={}),d[e]=[H,w]),h!==t)););return w-=a,w===i||w%i===0&&w/i>=0}}},PSEUDO:function(e,n){var a,s=_.pseudos[e]||_.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return s[L]?s(n):s.length>1?(a=[e,e,"",n],_.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,a=s(e,n),o=a.length;o--;)i=ee(e,a[o]),e[i]=!(t[i]=a[o])}):function(e){return s(e,0,a)}):s}},pseudos:{not:i(function(e){var t=[],n=[],a=S(e.replace(re,"$1"));return a[L]?i(function(e,t,n,i){for(var s,o=a(e,null,i,[]),r=e.length;r--;)(s=o[r])&&(e[r]=!(t[r]=s))}):function(e,i,s){return t[0]=e,a(t,null,s,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(xe,ye),function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:i(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(xe,ye).toLowerCase(),function(t){var n;do if(n=R?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===V},focus:function(e){return e===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(6>e.nodeType)return!1;return!0},parent:function(e){return!_.pseudos.empty(e)},header:function(e){return fe.test(e.nodeName)},input:function(e){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[0>n?n+t:n]}),even:c(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:c(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e;
})}},_.pseudos.nth=_.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[x]=r(x);for(x in{submit:!0,reset:!0})_.pseudos[x]=l(x);return u.prototype=_.filters=_.pseudos,_.setFilters=new u,T=t.tokenize=function(e,n){var i,a,s,o,r,l,c,d=z[e+" "];if(d)return n?0:d.slice(0);for(r=e,l=[],c=_.preFilter;r;){(!i||(a=le.exec(r)))&&(a&&(r=r.slice(a[0].length)||r),l.push(s=[])),i=!1,(a=ce.exec(r))&&(i=a.shift(),s.push({value:i,type:a[0].replace(re," ")}),r=r.slice(i.length));for(o in _.filter)!(a=me[o].exec(r))||c[o]&&!(a=c[o](a))||(i=a.shift(),s.push({value:i,type:o,matches:a}),r=r.slice(i.length));if(!i)break}return n?r.length:r?t.error(e):z(e,l).slice(0)},S=t.compile=function(e,t){var n,i=[],a=[],s=B[e+" "];if(!s){for(t||(t=T(e)),n=t.length;n--;)s=b(t[n]),s[L]?i.push(s):a.push(s);s=B(e,w(a,i)),s.selector=e}return s},E=t.select=function(e,t,n,i){var a,s,o,r,l,c="function"==typeof e&&e,u=!i&&T(e=c.selector||e);if(n=n||[],1===u.length){if(s=u[0]=u[0].slice(0),s.length>2&&"ID"===(o=s[0]).type&&y.getById&&9===t.nodeType&&R&&_.relative[s[1].type]){if(t=(_.find.ID(o.matches[0].replace(xe,ye),t)||[])[0],!t)return n;c&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(a=me.needsContext.test(e)?0:s.length;a--&&(o=s[a],!_.relative[r=o.type]);)if((l=_.find[r])&&(i=l(o.matches[0].replace(xe,ye),be.test(s[0].type)&&d(t.parentNode)||t))){if(s.splice(a,1),e=i.length&&h(s),!e)return Q.apply(n,i),n;break}}return(c||S(e,u))(i,t,!R,n,!t||be.test(e)&&d(t.parentNode)||t),n},y.sortStable=L.split("").sort(W).join("")===L,y.detectDuplicates=!!M,A(),y.sortDetached=a(function(e){return 1&e.compareDocumentPosition(D.createElement("div"))}),a(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||s("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),y.attributes&&a(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||s("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),a(function(e){return null==e.getAttribute("disabled")})||s(te,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);se.find=de,se.expr=de.selectors,se.expr[":"]=se.expr.pseudos,se.uniqueSort=se.unique=de.uniqueSort,se.text=de.getText,se.isXMLDoc=de.isXML,se.contains=de.contains;var ue=function(e,t,n){for(var i=[],a=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&se(e).is(n))break;i.push(e)}return i},he=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},me=se.expr.match.needsContext,pe=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,fe=/^.[^:#\[\.,]*$/;se.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?se.find.matchesSelector(i,e)?[i]:[]:se.find.matches(e,se.grep(t,function(e){return 1===e.nodeType}))},se.fn.extend({find:function(e){var t,n=this.length,i=[],a=this;if("string"!=typeof e)return this.pushStack(se(e).filter(function(){for(t=0;n>t;t++)if(se.contains(a[t],this))return!0}));for(t=0;n>t;t++)se.find(e,a[t],i);return i=this.pushStack(n>1?se.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&me.test(e)?se(e):e||[],!1).length}});var ge,ve=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,be=se.fn.init=function(e,t,n){var i,a;if(!e)return this;if(n=n||ge,"string"==typeof e){if(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ve.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof se?t[0]:t,se.merge(this,se.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:J,!0)),pe.test(i[1])&&se.isPlainObject(t))for(i in t)se.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return a=J.getElementById(i[2]),a&&a.parentNode&&(this.length=1,this[0]=a),this.context=J,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):se.isFunction(e)?void 0!==n.ready?n.ready(e):e(se):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),se.makeArray(e,this))};be.prototype=se.fn,ge=se(J);var we=/^(?:parents|prev(?:Until|All))/,xe={children:!0,contents:!0,next:!0,prev:!0};se.fn.extend({has:function(e){var t=se(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(se.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,a=this.length,s=[],o=me.test(e)||"string"!=typeof e?se(e,t||this.context):0;a>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(o?o.index(n)>-1:1===n.nodeType&&se.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?se.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?Z.call(se(e),this[0]):Z.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(se.uniqueSort(se.merge(this.get(),se(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),se.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ue(e,"parentNode")},parentsUntil:function(e,t,n){return ue(e,"parentNode",n)},next:function(e){return a(e,"nextSibling")},prev:function(e){return a(e,"previousSibling")},nextAll:function(e){return ue(e,"nextSibling")},prevAll:function(e){return ue(e,"previousSibling")},nextUntil:function(e,t,n){return ue(e,"nextSibling",n)},prevUntil:function(e,t,n){return ue(e,"previousSibling",n)},siblings:function(e){return he((e.parentNode||{}).firstChild,e)},children:function(e){return he(e.firstChild)},contents:function(e){return e.contentDocument||se.merge([],e.childNodes)}},function(e,t){se.fn[e]=function(n,i){var a=se.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(a=se.filter(i,a)),this.length>1&&(xe[e]||se.uniqueSort(a),we.test(e)&&a.reverse()),this.pushStack(a)}});var ye=/\S+/g;se.Callbacks=function(e){e="string"==typeof e?s(e):se.extend({},e);var t,n,i,a,o=[],r=[],l=-1,c=function(){for(a=e.once,i=t=!0;r.length;l=-1)for(n=r.shift();++l<o.length;)o[l].apply(n[0],n[1])===!1&&e.stopOnFalse&&(l=o.length,n=!1);e.memory||(n=!1),t=!1,a&&(o=n?[]:"")},d={add:function(){return o&&(n&&!t&&(l=o.length-1,r.push(n)),function i(t){se.each(t,function(t,n){se.isFunction(n)?e.unique&&d.has(n)||o.push(n):n&&n.length&&"string"!==se.type(n)&&i(n)})}(arguments),n&&!t&&c()),this},remove:function(){return se.each(arguments,function(e,t){for(var n;(n=se.inArray(t,o,n))>-1;)o.splice(n,1),l>=n&&l--}),this},has:function(e){return e?se.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return a=r=[],o=n="",this},disabled:function(){return!o},lock:function(){return a=r=[],n||(o=n=""),this},locked:function(){return!!a},fireWith:function(e,n){return a||(n=n||[],n=[e,n.slice?n.slice():n],r.push(n),t||c()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d},se.extend({Deferred:function(e){var t=[["resolve","done",se.Callbacks("once memory"),"resolved"],["reject","fail",se.Callbacks("once memory"),"rejected"],["notify","progress",se.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var e=arguments;return se.Deferred(function(n){se.each(t,function(t,s){var o=se.isFunction(e[t])&&e[t];a[s[1]](function(){var e=o&&o.apply(this,arguments);e&&se.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[s[0]+"With"](this===i?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?se.extend(e,i):i}},a={};return i.pipe=i.then,se.each(t,function(e,s){var o=s[2],r=s[3];i[s[1]]=o.add,r&&o.add(function(){n=r},t[1^e][2].disable,t[2][2].lock),a[s[0]]=function(){return a[s[0]+"With"](this===a?i:this,arguments),this},a[s[0]+"With"]=o.fireWith}),i.promise(a),e&&e.call(a,a),a},when:function(e){var t,n,i,a=0,s=K.call(arguments),o=s.length,r=1!==o||e&&se.isFunction(e.promise)?o:0,l=1===r?e:se.Deferred(),c=function(e,n,i){return function(a){n[e]=this,i[e]=arguments.length>1?K.call(arguments):a,i===t?l.notifyWith(n,i):--r||l.resolveWith(n,i)}};if(o>1)for(t=Array(o),n=Array(o),i=Array(o);o>a;a++)s[a]&&se.isFunction(s[a].promise)?s[a].promise().progress(c(a,n,t)).done(c(a,i,s)).fail(l.reject):--r;return r||l.resolveWith(i,s),l.promise()}});var _e;se.fn.ready=function(e){return se.ready.promise().done(e),this},se.extend({isReady:!1,readyWait:1,holdReady:function(e){e?se.readyWait++:se.ready(!0)},ready:function(e){(e===!0?--se.readyWait:se.isReady)||(se.isReady=!0,e!==!0&&--se.readyWait>0||(_e.resolveWith(J,[se]),se.fn.triggerHandler&&(se(J).triggerHandler("ready"),se(J).off("ready"))))}}),(se.ready.promise=function(t){return _e||(_e=se.Deferred(),"complete"===J.readyState||"loading"!==J.readyState&&!J.documentElement.doScroll?e.setTimeout(se.ready):(J.addEventListener("DOMContentLoaded",o),e.addEventListener("load",o))),_e.promise(t)})();var ke=function(e,t,n,i,a,s,o){var r=0,l=e.length,c=null==n;if("object"===se.type(n)){a=!0;for(r in n)ke(e,t,r,n[r],!0,s,o)}else if(void 0!==i&&(a=!0,se.isFunction(i)||(o=!0),c&&(o?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(se(e),n)})),t))for(;l>r;r++)t(e[r],n,o?i:i.call(e[r],r,t(e[r],n)));return a?e:c?t.call(e):l?t(e[0],n):s},Ce=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};r.uid=1,r.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!Ce(e))return{};var t=e[this.expando];return t||(t={},Ce(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,a=this.cache(e);if("string"==typeof t)a[t]=n;else for(i in t)a[i]=t[i];return a},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?(i=this.get(e,t),void 0!==i?i:this.get(e,se.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,a,s=e[this.expando];if(void 0!==s){if(void 0===t)this.register(e);else{se.isArray(t)?i=t.concat(t.map(se.camelCase)):(a=se.camelCase(t),t in s?i=[t,a]:(i=a,i=i in s?[i]:i.match(ye)||[])),n=i.length;for(;n--;)delete s[i[n]]}(void 0===t||se.isEmptyObject(s))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!se.isEmptyObject(t)}};var Te=new r,Se=new r,Ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Fe=/[A-Z]/g;se.extend({hasData:function(e){return Se.hasData(e)||Te.hasData(e)},data:function(e,t,n){return Se.access(e,t,n)},removeData:function(e,t){Se.remove(e,t)},_data:function(e,t,n){return Te.access(e,t,n)},_removeData:function(e,t){Te.remove(e,t)}}),se.fn.extend({data:function(e,t){var n,i,a,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(a=Se.get(s),1===s.nodeType&&!Te.get(s,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&(i=o[n].name,0===i.indexOf("data-")&&(i=se.camelCase(i.slice(5)),l(s,i,a[i])));Te.set(s,"hasDataAttrs",!0)}return a}return"object"==typeof e?this.each(function(){Se.set(this,e)}):ke(this,function(t){var n,i;if(s&&void 0===t){if(n=Se.get(s,e)||Se.get(s,e.replace(Fe,"-$&").toLowerCase()),void 0!==n)return n;if(i=se.camelCase(e),n=Se.get(s,i),void 0!==n)return n;if(n=l(s,i,void 0),void 0!==n)return n}else i=se.camelCase(e),this.each(function(){var n=Se.get(this,i);Se.set(this,i,t),e.indexOf("-")>-1&&void 0!==n&&Se.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Se.remove(this,e)})}}),se.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=Te.get(e,t),n&&(!i||se.isArray(n)?i=Te.access(e,t,se.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=se.queue(e,t),i=n.length,a=n.shift(),s=se._queueHooks(e,t),o=function(){se.dequeue(e,t)};"inprogress"===a&&(a=n.shift(),i--),a&&("fx"===t&&n.unshift("inprogress"),delete s.stop,a.call(e,o,s)),!i&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Te.get(e,n)||Te.access(e,n,{empty:se.Callbacks("once memory").add(function(){Te.remove(e,[t+"queue",n])})})}}),se.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?se.queue(this[0],e):void 0===t?this:this.each(function(){var n=se.queue(this,e,t);se._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&se.dequeue(this,e)})},dequeue:function(e){return this.each(function(){se.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,a=se.Deferred(),s=this,o=this.length,r=function(){--i||a.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)n=Te.get(s[o],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(r));return r(),a.promise(t)}});var Pe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Me=RegExp("^(?:([+-])=|)("+Pe+")([a-z%]*)$","i"),Ae=["Top","Right","Bottom","Left"],De=function(e,t){return e=t||e,"none"===se.css(e,"display")||!se.contains(e.ownerDocument,e)},Ve=/^(?:checkbox|radio)$/i,Re=/<([\w:-]+)/,Ne=/^$|\/(?:java|ecma)script/i,Oe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Oe.optgroup=Oe.option,Oe.tbody=Oe.tfoot=Oe.colgroup=Oe.caption=Oe.thead,Oe.th=Oe.td;var Ie=/<|&#?\w+;/;!function(){var e=J.createDocumentFragment(),t=e.appendChild(J.createElement("div")),n=J.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),ie.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",ie.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Ue=/^key/,Le=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,qe=/^([^.]*)(?:\.(.+)|)/;se.event={global:{},add:function(e,t,n,i,a){var s,o,r,l,c,d,u,h,m,p,f,g=Te.get(e);if(g)for(n.handler&&(s=n,n=s.handler,a=s.selector),n.guid||(n.guid=se.guid++),(l=g.events)||(l=g.events={}),(o=g.handle)||(o=g.handle=function(t){return void 0!==se&&se.event.triggered!==t.type?se.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(ye)||[""],c=t.length;c--;)r=qe.exec(t[c])||[],m=f=r[1],p=(r[2]||"").split(".").sort(),m&&(u=se.event.special[m]||{},m=(a?u.delegateType:u.bindType)||m,u=se.event.special[m]||{},d=se.extend({type:m,origType:f,data:i,handler:n,guid:n.guid,selector:a,needsContext:a&&se.expr.match.needsContext.test(a),namespace:p.join(".")},s),(h=l[m])||(h=l[m]=[],h.delegateCount=0,u.setup&&u.setup.call(e,i,p,o)!==!1||e.addEventListener&&e.addEventListener(m,o)),u.add&&(u.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),se.event.global[m]=!0)},remove:function(e,t,n,i,a){var s,o,r,l,c,d,u,h,m,p,f,g=Te.hasData(e)&&Te.get(e);if(g&&(l=g.events)){for(t=(t||"").match(ye)||[""],c=t.length;c--;)if(r=qe.exec(t[c])||[],m=f=r[1],p=(r[2]||"").split(".").sort(),m){for(u=se.event.special[m]||{},m=(i?u.delegateType:u.bindType)||m,h=l[m]||[],r=r[2]&&RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=h.length;s--;)d=h[s],!a&&f!==d.origType||n&&n.guid!==d.guid||r&&!r.test(d.namespace)||i&&i!==d.selector&&("**"!==i||!d.selector)||(h.splice(s,1),d.selector&&h.delegateCount--,u.remove&&u.remove.call(e,d));o&&!h.length&&(u.teardown&&u.teardown.call(e,p,g.handle)!==!1||se.removeEvent(e,m,g.handle),delete l[m])}else for(m in l)se.event.remove(e,m+t[c],n,i,!0);se.isEmptyObject(l)&&Te.remove(e,"handle events")}},dispatch:function(e){e=se.event.fix(e);var t,n,i,a,s,o=[],r=K.call(arguments),l=(Te.get(this,"events")||{})[e.type]||[],c=se.event.special[e.type]||{};if(r[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(o=se.event.handlers.call(this,e,l),t=0;(a=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=a.elem,n=0;(s=a.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.rnamespace||e.rnamespace.test(s.namespace))&&(e.handleObj=s,e.data=s.data,i=((se.event.special[s.origType]||{}).handle||s.handler).apply(a.elem,r),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,a,s,o=[],r=t.delegateCount,l=e.target;if(r&&l.nodeType&&("click"!==e.type||isNaN(e.button)||1>e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(i=[],n=0;r>n;n++)s=t[n],a=s.selector+" ",void 0===i[a]&&(i[a]=s.needsContext?se(a,this).index(l)>-1:se.find(a,this,null,[l]).length),i[a]&&i.push(s);i.length&&o.push({elem:l,handlers:i})}return t.length>r&&o.push({elem:this,handlers:t.slice(r)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,a,s=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||J,i=n.documentElement,a=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||a&&a.scrollLeft||0)-(i&&i.clientLeft||a&&a.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||a&&a.scrollTop||0)-(i&&i.clientTop||a&&a.clientTop||0)),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[se.expando])return e;var t,n,i,a=e.type,s=e,o=this.fixHooks[a];for(o||(this.fixHooks[a]=o=Le.test(a)?this.mouseHooks:Ue.test(a)?this.keyHooks:{}),i=o.props?this.props.concat(o.props):this.props,e=new se.Event(s),t=i.length;t--;)n=i[t],e[n]=s[n];return e.target||(e.target=J),3===e.target.nodeType&&(e.target=e.target.parentNode),o.filter?o.filter(e,s):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==f()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&se.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return se.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},se.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},se.Event=function(e,t){return this instanceof se.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?m:p):this.type=e,t&&se.extend(this,t),this.timeStamp=e&&e.timeStamp||se.now(),void(this[se.expando]=!0)):new se.Event(e,t)},se.Event.prototype={constructor:se.Event,isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=m,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=m,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=m,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},se.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){se.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,a=e.relatedTarget,s=e.handleObj;return(!a||a!==i&&!se.contains(i,a))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),se.fn.extend({on:function(e,t,n,i){return g(this,e,t,n,i)},one:function(e,t,n,i){return g(this,e,t,n,i,1)},off:function(e,t,n){var i,a;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,se(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(a in e)this.off(a,t,e[a]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=p),this.each(function(){se.event.remove(this,e,n,t)})}});var He=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,je=/<script|<style|<link/i,$e=/checked\s*(?:[^=]|=\s*.checked.)/i,ze=/^true\/(.*)/,Be=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;se.extend({htmlPrefilter:function(e){return e.replace(He,"<$1></$2>")},clone:function(e,t,n){var i,a,s,o,r=e.cloneNode(!0),l=se.contains(e.ownerDocument,e);if(!(ie.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||se.isXMLDoc(e)))for(o=d(r),s=d(e),i=0,a=s.length;a>i;i++)y(s[i],o[i]);if(t)if(n)for(s=s||d(e),o=o||d(r),i=0,a=s.length;a>i;i++)x(s[i],o[i]);else x(e,r);return o=d(r,"script"),o.length>0&&u(o,!l&&d(e,"script")),r},cleanData:function(e){for(var t,n,i,a=se.event.special,s=0;void 0!==(n=e[s]);s++)if(Ce(n)){if(t=n[Te.expando]){if(t.events)for(i in t.events)a[i]?se.event.remove(n,i):se.removeEvent(n,i,t.handle);n[Te.expando]=void 0}n[Se.expando]&&(n[Se.expando]=void 0)}}}),se.fn.extend({domManip:_,detach:function(e){return k(this,e,!0)},remove:function(e){return k(this,e)},text:function(e){return ke(this,function(e){return void 0===e?se.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return _(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.appendChild(e)}})},prepend:function(){return _(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return _(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return _(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(se.cleanData(d(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return se.clone(this,e,t)})},html:function(e){return ke(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!je.test(e)&&!Oe[(Re.exec(e)||["",""])[1].toLowerCase()]){e=se.htmlPrefilter(e);try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(se.cleanData(d(t,!1)),t.innerHTML=e);t=0}catch(a){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return _(this,arguments,function(t){var n=this.parentNode;se.inArray(this,e)<0&&(se.cleanData(d(this)),n&&n.replaceChild(t,this))},e)}}),se.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){se.fn[e]=function(e){for(var n,i=[],a=se(e),s=a.length-1,o=0;s>=o;o++)n=o===s?this:this.clone(!0),se(a[o])[t](n),Q.apply(i,n.get());return this.pushStack(i)}});var We,Ge={HTML:"block",BODY:"block"},Ye=/^margin/,Je=RegExp("^("+Pe+")(?!px)[a-z%]+$","i"),Ke=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Xe=function(e,t,n,i){var a,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];a=n.apply(e,i||[]);for(s in t)e.style[s]=o[s];return a},Qe=J.documentElement;!function(){function t(){r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",r.innerHTML="",Qe.appendChild(o);var t=e.getComputedStyle(r);n="1%"!==t.top,s="2px"===t.marginLeft,i="4px"===t.width,r.style.marginRight="50%",a="4px"===t.marginRight,Qe.removeChild(o)}var n,i,a,s,o=J.createElement("div"),r=J.createElement("div");r.style&&(r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===r.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(r),se.extend(ie,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==i&&t(),i},pixelMarginRight:function(){return null==i&&t(),a},reliableMarginLeft:function(){return null==i&&t(),s},reliableMarginRight:function(){var t,n=r.appendChild(J.createElement("div"));return n.style.cssText=r.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",r.style.width="1px",Qe.appendChild(o),t=!parseFloat(e.getComputedStyle(n).marginRight),Qe.removeChild(o),r.removeChild(n),t}}))}();var Ze=/^(none|table(?!-c[ea]).+)/,et={position:"absolute",visibility:"hidden",display:"block"},tt={letterSpacing:"0",fontWeight:"400"},nt=["Webkit","O","Moz","ms"],it=J.createElement("div").style;se.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=S(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,s,o,r=se.camelCase(t),l=e.style;return t=se.cssProps[r]||(se.cssProps[r]=F(r)||r),o=se.cssHooks[t]||se.cssHooks[r],void 0===n?o&&"get"in o&&void 0!==(a=o.get(e,!1,i))?a:l[t]:(s=typeof n,"string"===s&&(a=Me.exec(n))&&a[1]&&(n=c(e,t,a),s="number"),null!=n&&n===n&&("number"===s&&(n+=a&&a[3]||(se.cssNumber[r]?"":"px")),ie.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,i))||(l[t]=n)),void 0)}},css:function(e,t,n,i){var a,s,o,r=se.camelCase(t);return t=se.cssProps[r]||(se.cssProps[r]=F(r)||r),o=se.cssHooks[t]||se.cssHooks[r],o&&"get"in o&&(a=o.get(e,!0,n)),void 0===a&&(a=S(e,t,i)),"normal"===a&&t in tt&&(a=tt[t]),""===n||n?(s=parseFloat(a),n===!0||isFinite(s)?s||0:a):a}}),se.each(["height","width"],function(e,t){se.cssHooks[t]={get:function(e,n,i){return n?Ze.test(se.css(e,"display"))&&0===e.offsetWidth?Xe(e,et,function(){return A(e,t,i)}):A(e,t,i):void 0},set:function(e,n,i){var a,s=i&&Ke(e),o=i&&M(e,t,i,"border-box"===se.css(e,"boxSizing",!1,s),s);return o&&(a=Me.exec(n))&&"px"!==(a[3]||"px")&&(e.style[t]=n,n=se.css(e,t)),P(e,n,o)}}}),se.cssHooks.marginLeft=E(ie.reliableMarginLeft,function(e,t){return t?(parseFloat(S(e,"marginLeft"))||e.getBoundingClientRect().left-Xe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),se.cssHooks.marginRight=E(ie.reliableMarginRight,function(e,t){return t?Xe(e,{display:"inline-block"},S,[e,"marginRight"]):void 0}),se.each({margin:"",padding:"",border:"Width"},function(e,t){se.cssHooks[e+t]={expand:function(n){for(var i=0,a={},s="string"==typeof n?n.split(" "):[n];4>i;i++)a[e+Ae[i]+t]=s[i]||s[i-2]||s[0];return a}},Ye.test(e)||(se.cssHooks[e+t].set=P)}),se.fn.extend({css:function(e,t){return ke(this,function(e,t,n){var i,a,s={},o=0;if(se.isArray(t)){for(i=Ke(e),a=t.length;a>o;o++)s[t[o]]=se.css(e,t[o],!1,i);return s}return void 0!==n?se.style(e,t,n):se.css(e,t)},e,t,arguments.length>1)},show:function(){return D(this,!0)},hide:function(){return D(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){De(this)?se(this).show():se(this).hide()})}}),se.Tween=V,V.prototype={constructor:V,init:function(e,t,n,i,a,s){this.elem=e,this.prop=n,this.easing=a||se.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=s||(se.cssNumber[n]?"":"px")},cur:function(){var e=V.propHooks[this.prop];return e&&e.get?e.get(this):V.propHooks._default.get(this)},run:function(e){var t,n=V.propHooks[this.prop];return this.pos=t=this.options.duration?se.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):V.propHooks._default.set(this),this}},V.prototype.init.prototype=V.prototype,V.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=se.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){se.fx.step[e.prop]?se.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[se.cssProps[e.prop]]&&!se.cssHooks[e.prop]?e.elem[e.prop]=e.now:se.style(e.elem,e.prop,e.now+e.unit)}}},V.propHooks.scrollTop=V.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},se.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},se.fx=V.prototype.init,se.fx.step={};var at,st,ot=/^(?:toggle|show|hide)$/,rt=/queueHooks$/;se.Animation=se.extend(L,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return c(n.elem,e,Me.exec(t),n),n}]},tweener:function(e,t){se.isFunction(e)?(t=e,e=["*"]):e=e.match(ye);for(var n,i=0,a=e.length;a>i;i++)n=e[i],L.tweeners[n]=L.tweeners[n]||[],L.tweeners[n].unshift(t)},prefilters:[I],prefilter:function(e,t){t?L.prefilters.unshift(e):L.prefilters.push(e)}}),se.speed=function(e,t,n){var i=e&&"object"==typeof e?se.extend({},e):{complete:n||!n&&t||se.isFunction(e)&&e,duration:e,easing:n&&t||t&&!se.isFunction(t)&&t};return i.duration=se.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in se.fx.speeds?se.fx.speeds[i.duration]:se.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){se.isFunction(i.old)&&i.old.call(this),i.queue&&se.dequeue(this,i.queue)},i},se.fn.extend({fadeTo:function(e,t,n,i){return this.filter(De).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var a=se.isEmptyObject(e),s=se.speed(t,n,i),o=function(){var t=L(this,se.extend({},e),s);(a||Te.get(this,"finish"))&&t.stop(!0)};return o.finish=o,a||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,a=null!=e&&e+"queueHooks",s=se.timers,o=Te.get(this);if(a)o[a]&&o[a].stop&&i(o[a]);else for(a in o)o[a]&&o[a].stop&&rt.test(a)&&i(o[a]);for(a=s.length;a--;)s[a].elem!==this||null!=e&&s[a].queue!==e||(s[a].anim.stop(n),t=!1,s.splice(a,1));(t||!n)&&se.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=Te.get(this),i=n[e+"queue"],a=n[e+"queueHooks"],s=se.timers,o=i?i.length:0;for(n.finish=!0,se.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;o>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),se.each(["toggle","show","hide"],function(e,t){var n=se.fn[t];se.fn[t]=function(e,i,a){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(N(t,!0),e,i,a)}}),se.each({slideDown:N("show"),slideUp:N("hide"),slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){se.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),se.timers=[],se.fx.tick=function(){var e,t=0,n=se.timers;for(at=se.now();n.length>t;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||se.fx.stop(),at=void 0},se.fx.timer=function(e){se.timers.push(e),e()?se.fx.start():se.timers.pop()},se.fx.interval=13,se.fx.start=function(){st||(st=e.setInterval(se.fx.tick,se.fx.interval));
},se.fx.stop=function(){e.clearInterval(st),st=null},se.fx.speeds={slow:600,fast:200,_default:400},se.fn.delay=function(t,n){return t=se.fx?se.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,i){var a=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(a)}})},function(){var e=J.createElement("input"),t=J.createElement("select"),n=t.appendChild(J.createElement("option"));e.type="checkbox",ie.checkOn=""!==e.value,ie.optSelected=n.selected,t.disabled=!0,ie.optDisabled=!n.disabled,e=J.createElement("input"),e.value="t",e.type="radio",ie.radioValue="t"===e.value}();var lt,ct=se.expr.attrHandle;se.fn.extend({attr:function(e,t){return ke(this,se.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){se.removeAttr(this,e)})}}),se.extend({attr:function(e,t,n){var i,a,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===e.getAttribute?se.prop(e,t,n):(1===s&&se.isXMLDoc(e)||(t=t.toLowerCase(),a=se.attrHooks[t]||(se.expr.match.bool.test(t)?lt:void 0)),void 0!==n?null===n?void se.removeAttr(e,t):a&&"set"in a&&void 0!==(i=a.set(e,n,t))?i:(e.setAttribute(t,n+""),n):a&&"get"in a&&null!==(i=a.get(e,t))?i:(i=se.find.attr(e,t),null==i?void 0:i))},attrHooks:{type:{set:function(e,t){if(!ie.radioValue&&"radio"===t&&se.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i,a=0,s=t&&t.match(ye);if(s&&1===e.nodeType)for(;n=s[a++];)i=se.propFix[n]||n,se.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)}}),lt={set:function(e,t,n){return t===!1?se.removeAttr(e,n):e.setAttribute(n,n),n}},se.each(se.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ct[t]||se.find.attr;ct[t]=function(e,t,i){var a,s;return i||(s=ct[t],ct[t]=a,a=null!=n(e,t,i)?t.toLowerCase():null,ct[t]=s),a}});var dt=/^(?:input|select|textarea|button)$/i,ut=/^(?:a|area)$/i;se.fn.extend({prop:function(e,t){return ke(this,se.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[se.propFix[e]||e]})}}),se.extend({prop:function(e,t,n){var i,a,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&se.isXMLDoc(e)||(t=se.propFix[t]||t,a=se.propHooks[t]),void 0!==n?a&&"set"in a&&void 0!==(i=a.set(e,n,t))?i:e[t]=n:a&&"get"in a&&null!==(i=a.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=se.find.attr(e,"tabindex");return t?parseInt(t,10):dt.test(e.nodeName)||ut.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ie.optSelected||(se.propHooks.selected={get:function(e){return null},set:function(e){}}),se.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){se.propFix[this.toLowerCase()]=this});var ht=/[\t\r\n\f]/g;se.fn.extend({addClass:function(e){var t,n,i,a,s,o,r,l=0;if(se.isFunction(e))return this.each(function(t){se(this).addClass(e.call(this,t,q(this)))});if("string"==typeof e&&e)for(t=e.match(ye)||[];n=this[l++];)if(a=q(n),i=1===n.nodeType&&(" "+a+" ").replace(ht," ")){for(o=0;s=t[o++];)i.indexOf(" "+s+" ")<0&&(i+=s+" ");r=se.trim(i),a!==r&&n.setAttribute("class",r)}return this},removeClass:function(e){var t,n,i,a,s,o,r,l=0;if(se.isFunction(e))return this.each(function(t){se(this).removeClass(e.call(this,t,q(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(ye)||[];n=this[l++];)if(a=q(n),i=1===n.nodeType&&(" "+a+" ").replace(ht," ")){for(o=0;s=t[o++];)for(;i.indexOf(" "+s+" ")>-1;)i=i.replace(" "+s+" "," ");r=se.trim(i),a!==r&&n.setAttribute("class",r)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(se.isFunction(e)?function(n){se(this).toggleClass(e.call(this,n,q(this),t),t)}:function(){var t,i,a,s;if("string"===n)for(i=0,a=se(this),s=e.match(ye)||[];t=s[i++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else(void 0===e||"boolean"===n)&&(t=q(this),t&&Te.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":Te.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+q(n)+" ").replace(ht," ").indexOf(t)>-1)return!0;return!1}});var mt=/\r/g,pt=/[\x20\t\r\n\f]+/g;se.fn.extend({val:function(e){var t,n,i,a=this[0];{if(arguments.length)return i=se.isFunction(e),this.each(function(n){var a;1===this.nodeType&&(a=i?e.call(this,n,se(this).val()):e,null==a?a="":"number"==typeof a?a+="":se.isArray(a)&&(a=se.map(a,function(e){return null==e?"":e+""})),t=se.valHooks[this.type]||se.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))});if(a)return t=se.valHooks[a.type]||se.valHooks[a.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(a,"value"))?n:(n=a.value,"string"==typeof n?n.replace(mt,""):null==n?"":n)}}}),se.extend({valHooks:{option:{get:function(e){var t=se.find.attr(e,"value");return null!=t?t:se.trim(se.text(e)).replace(pt," ")}},select:{get:function(e){for(var t,n,i=e.options,a=e.selectedIndex,s="select-one"===e.type||0>a,o=s?null:[],r=s?a+1:i.length,l=0>a?r:s?a:0;r>l;l++)if(n=i[l],!(!n.selected&&l!==a||(ie.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&se.nodeName(n.parentNode,"optgroup"))){if(t=se(n).val(),s)return t;o.push(t)}return o},set:function(e,t){for(var n,i,a=e.options,s=se.makeArray(t),o=a.length;o--;)i=a[o],(i.selected=se.inArray(se.valHooks.option.get(i),s)>-1)&&(n=!0);return n||(e.selectedIndex=-1),s}}}}),se.each(["radio","checkbox"],function(){se.valHooks[this]={set:function(e,t){return se.isArray(t)?e.checked=se.inArray(se(e).val(),t)>-1:void 0}},ie.checkOn||(se.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var ft=/^(?:focusinfocus|focusoutblur)$/;se.extend(se.event,{trigger:function(t,n,i,a){var s,o,r,l,c,d,u,h=[i||J],m=ne.call(t,"type")?t.type:t,p=ne.call(t,"namespace")?t.namespace.split("."):[];if(o=r=i=i||J,3!==i.nodeType&&8!==i.nodeType&&!ft.test(m+se.event.triggered)&&(m.indexOf(".")>-1&&(p=m.split("."),m=p.shift(),p.sort()),c=m.indexOf(":")<0&&"on"+m,t=t[se.expando]?t:new se.Event(m,"object"==typeof t&&t),t.isTrigger=a?2:3,t.namespace=p.join("."),t.rnamespace=t.namespace?RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:se.makeArray(n,[t]),u=se.event.special[m]||{},a||!u.trigger||u.trigger.apply(i,n)!==!1)){if(!a&&!u.noBubble&&!se.isWindow(i)){for(l=u.delegateType||m,ft.test(l+m)||(o=o.parentNode);o;o=o.parentNode)h.push(o),r=o;r===(i.ownerDocument||J)&&h.push(r.defaultView||r.parentWindow||e)}for(s=0;(o=h[s++])&&!t.isPropagationStopped();)t.type=s>1?l:u.bindType||m,d=(Te.get(o,"events")||{})[t.type]&&Te.get(o,"handle"),d&&d.apply(o,n),d=c&&o[c],d&&d.apply&&Ce(o)&&(t.result=d.apply(o,n),t.result===!1&&t.preventDefault());return t.type=m,a||t.isDefaultPrevented()||u._default&&u._default.apply(h.pop(),n)!==!1||!Ce(i)||c&&se.isFunction(i[m])&&!se.isWindow(i)&&(r=i[c],r&&(i[c]=null),se.event.triggered=m,i[m](),se.event.triggered=void 0,r&&(i[c]=r)),t.result}},simulate:function(e,t,n){var i=se.extend(new se.Event,n,{type:e,isSimulated:!0});se.event.trigger(i,null,t)}}),se.fn.extend({trigger:function(e,t){return this.each(function(){se.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?se.event.trigger(e,t,n,!0):void 0}}),se.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){se.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),se.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ie.focusin="onfocusin"in e,ie.focusin||se.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){se.event.simulate(t,e.target,se.event.fix(e))};se.event.special[t]={setup:function(){var i=this.ownerDocument||this,a=Te.access(i,t);a||i.addEventListener(e,n,!0),Te.access(i,t,(a||0)+1)},teardown:function(){var i=this.ownerDocument||this,a=Te.access(i,t)-1;a?Te.access(i,t,a):(i.removeEventListener(e,n,!0),Te.remove(i,t))}}});var gt=e.location,vt=se.now(),bt=/\?/;se.parseJSON=function(e){return JSON.parse(e+"")},se.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(i){n=void 0}return(!n||n.getElementsByTagName("parsererror").length)&&se.error("Invalid XML: "+t),n};var wt=/#.*$/,xt=/([?&])_=[^&]*/,yt=/^(.*?):[ \t]*([^\r\n]*)$/gm,_t=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,kt=/^(?:GET|HEAD)$/,Ct=/^\/\//,Tt={},St={},Et="*/".concat("*"),Ft=J.createElement("a");Ft.href=gt.href,se.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gt.href,type:"GET",isLocal:_t.test(gt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Et,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":se.parseJSON,"text xml":se.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?$($(e,se.ajaxSettings),t):$(se.ajaxSettings,e)},ajaxPrefilter:H(Tt),ajaxTransport:H(St),ajax:function(t,n){function i(t,n,i,r){var c,u,b,w,y,k=n;2!==x&&(x=2,l&&e.clearTimeout(l),a=void 0,o=r||"",_.readyState=t>0?4:0,c=t>=200&&300>t||304===t,i&&(w=z(h,_,i)),w=B(h,w,_,c),c?(h.ifModified&&(y=_.getResponseHeader("Last-Modified"),y&&(se.lastModified[s]=y),y=_.getResponseHeader("etag"),y&&(se.etag[s]=y)),204===t||"HEAD"===h.type?k="nocontent":304===t?k="notmodified":(k=w.state,u=w.data,b=w.error,c=!b)):(b=k,(t||!k)&&(k="error",0>t&&(t=0))),_.status=t,_.statusText=(n||k)+"",c?f.resolveWith(m,[u,k,_]):f.rejectWith(m,[_,k,b]),_.statusCode(v),v=void 0,d&&p.trigger(c?"ajaxSuccess":"ajaxError",[_,h,c?u:b]),g.fireWith(m,[_,k]),d&&(p.trigger("ajaxComplete",[_,h]),--se.active||se.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var a,s,o,r,l,c,d,u,h=se.ajaxSetup({},n),m=h.context||h,p=h.context&&(m.nodeType||m.jquery)?se(m):se.event,f=se.Deferred(),g=se.Callbacks("once memory"),v=h.statusCode||{},b={},w={},x=0,y="canceled",_={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!r)for(r={};t=yt.exec(o);)r[t[1].toLowerCase()]=t[2];t=r[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=w[n]=w[n]||e,b[e]=t),this},overrideMimeType:function(e){return x||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)v[t]=[v[t],e[t]];else _.always(e[_.status]);return this},abort:function(e){var t=e||y;return a&&a.abort(t),i(0,t),this}};if(f.promise(_).complete=g.add,_.success=_.done,_.error=_.fail,h.url=((t||h.url||gt.href)+"").replace(wt,"").replace(Ct,gt.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=se.trim(h.dataType||"*").toLowerCase().match(ye)||[""],null==h.crossDomain){c=J.createElement("a");try{c.href=h.url,c.href=c.href,h.crossDomain=Ft.protocol+"//"+Ft.host!=c.protocol+"//"+c.host}catch(k){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=se.param(h.data,h.traditional)),j(Tt,h,n,_),2===x)return _;d=se.event&&h.global,d&&0===se.active++&&se.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!kt.test(h.type),s=h.url,h.hasContent||(h.data&&(s=h.url+=(bt.test(s)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=xt.test(s)?s.replace(xt,"$1_="+vt++):s+(bt.test(s)?"&":"?")+"_="+vt++)),h.ifModified&&(se.lastModified[s]&&_.setRequestHeader("If-Modified-Since",se.lastModified[s]),se.etag[s]&&_.setRequestHeader("If-None-Match",se.etag[s])),(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&_.setRequestHeader("Content-Type",h.contentType),_.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Et+"; q=0.01":""):h.accepts["*"]);for(u in h.headers)_.setRequestHeader(u,h.headers[u]);if(h.beforeSend&&(h.beforeSend.call(m,_,h)===!1||2===x))return _.abort();y="abort";for(u in{success:1,error:1,complete:1})_[u](h[u]);if(a=j(St,h,n,_)){if(_.readyState=1,d&&p.trigger("ajaxSend",[_,h]),2===x)return _;h.async&&h.timeout>0&&(l=e.setTimeout(function(){_.abort("timeout")},h.timeout));try{x=1,a.send(b,i)}catch(k){if(!(2>x))throw k;i(-1,k)}}else i(-1,"No Transport");return _},getJSON:function(e,t,n){return se.get(e,t,n,"json")},getScript:function(e,t){return se.get(e,void 0,t,"script")}}),se.each(["get","post"],function(e,t){se[t]=function(e,n,i,a){return se.isFunction(n)&&(a=a||i,i=n,n=void 0),se.ajax(se.extend({url:e,type:t,dataType:a,data:n,success:i},se.isPlainObject(e)&&e))}}),se._evalUrl=function(e){return se.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},se.fn.extend({wrapAll:function(e){var t;return se.isFunction(e)?this.each(function(t){se(this).wrapAll(e.call(this,t))}):(this[0]&&(t=se(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(se.isFunction(e)?function(t){se(this).wrapInner(e.call(this,t))}:function(){var t=se(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=se.isFunction(e);return this.each(function(n){se(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){se.nodeName(this,"body")||se(this).replaceWith(this.childNodes)}).end()}}),se.expr.filters.hidden=function(e){return!se.expr.filters.visible(e)},se.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var Pt=/%20/g,Mt=/\[\]$/,At=/\r?\n/g,Dt=/^(?:submit|button|image|reset|file)$/i,Vt=/^(?:input|select|textarea|keygen)/i;se.param=function(e,t){var n,i=[],a=function(e,t){t=se.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=se.ajaxSettings&&se.ajaxSettings.traditional),se.isArray(e)||e.jquery&&!se.isPlainObject(e))se.each(e,function(){a(this.name,this.value)});else for(n in e)W(n,e[n],t,a);return i.join("&").replace(Pt,"+")},se.fn.extend({serialize:function(){return se.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=se.prop(this,"elements");return e?se.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!se(this).is(":disabled")&&Vt.test(this.nodeName)&&!Dt.test(e)&&(this.checked||!Ve.test(e))}).map(function(e,t){var n=se(this).val();return null==n?null:se.isArray(n)?se.map(n,function(e){return{name:t.name,value:e.replace(At,"\r\n")}}):{name:t.name,value:n.replace(At,"\r\n")}}).get()}}),se.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var Rt={0:200,1223:204},Nt=se.ajaxSettings.xhr();ie.cors=!!Nt&&"withCredentials"in Nt,ie.ajax=Nt=!!Nt,se.ajaxTransport(function(t){var n,i;return ie.cors||Nt&&!t.crossDomain?{send:function(a,s){var o,r=t.xhr();if(r.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)r[o]=t.xhrFields[o];t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),t.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest");for(o in a)r.setRequestHeader(o,a[o]);n=function(e){return function(){n&&(n=i=r.onload=r.onerror=r.onabort=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?s(0,"error"):s(r.status,r.statusText):s(Rt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=n(),i=r.onerror=n("error"),void 0!==r.onabort?r.onabort=i:r.onreadystatechange=function(){4===r.readyState&&e.setTimeout(function(){n&&i()})},n=n("abort");try{r.send(t.hasContent&&t.data||null)}catch(l){if(n)throw l}},abort:function(){n&&n()}}:void 0}),se.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return se.globalEval(e),e}}}),se.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),se.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,a){t=se("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&a("error"===e.type?404:200,e.type)}),J.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Ot=[],It=/(=)\?(?=&|$)|\?\?/;se.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ot.pop()||se.expando+"_"+vt++;return this[e]=!0,e}}),se.ajaxPrefilter("json jsonp",function(t,n,i){var a,s,o,r=t.jsonp!==!1&&(It.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&It.test(t.data)&&"data");return r||"jsonp"===t.dataTypes[0]?(a=t.jsonpCallback=se.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,r?t[r]=t[r].replace(It,"$1"+a):t.jsonp!==!1&&(t.url+=(bt.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return o||se.error(a+" was not called"),o[0]},t.dataTypes[0]="json",s=e[a],e[a]=function(){o=arguments},i.always(function(){void 0===s?se(e).removeProp(a):e[a]=s,t[a]&&(t.jsonpCallback=n.jsonpCallback,Ot.push(a)),o&&se.isFunction(s)&&s(o[0]),o=s=void 0}),"script"):void 0}),se.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||J;var i=pe.exec(e),a=!n&&[];return i?[t.createElement(i[1])]:(i=h([e],t,a),a&&a.length&&se(a).remove(),se.merge([],i.childNodes))};var Ut=se.fn.load;se.fn.load=function(e,t,n){if("string"!=typeof e&&Ut)return Ut.apply(this,arguments);var i,a,s,o=this,r=e.indexOf(" ");return r>-1&&(i=se.trim(e.slice(r)),e=e.slice(0,r)),se.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(a="POST"),o.length>0&&se.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done(function(e){s=arguments,o.html(i?se("<div>").append(se.parseHTML(e)).find(i):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,s||[e.responseText,t,e])})}),this},se.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){se.fn[t]=function(e){return this.on(t,e)}}),se.expr.filters.animated=function(e){return se.grep(se.timers,function(t){return e===t.elem}).length},se.offset={setOffset:function(e,t,n){var i,a,s,o,r,l,c,d=se.css(e,"position"),u=se(e),h={};"static"===d&&(e.style.position="relative"),r=u.offset(),s=se.css(e,"top"),l=se.css(e,"left"),c=("absolute"===d||"fixed"===d)&&(s+l).indexOf("auto")>-1,c?(i=u.position(),o=i.top,a=i.left):(o=parseFloat(s)||0,a=parseFloat(l)||0),se.isFunction(t)&&(t=t.call(e,n,se.extend({},r))),null!=t.top&&(h.top=t.top-r.top+o),null!=t.left&&(h.left=t.left-r.left+a),"using"in t?t.using.call(e,h):u.css(h)}},se.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){se.offset.setOffset(this,e,t)});var t,n,i=this[0],a={top:0,left:0},s=i&&i.ownerDocument;if(s)return t=s.documentElement,se.contains(t,i)?(a=i.getBoundingClientRect(),n=G(s),{top:a.top+n.pageYOffset-t.clientTop,left:a.left+n.pageXOffset-t.clientLeft}):a},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===se.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),se.nodeName(e[0],"html")||(i=e.offset()),i.top+=se.css(e[0],"borderTopWidth",!0),i.left+=se.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-se.css(n,"marginTop",!0),left:t.left-i.left-se.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===se.css(e,"position");)e=e.offsetParent;return e||Qe})}}),se.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;se.fn[e]=function(i){return ke(this,function(e,i,a){var s=G(e);return void 0===a?s?s[t]:e[i]:void(s?s.scrollTo(n?s.pageXOffset:a,n?a:s.pageYOffset):e[i]=a)},e,i,arguments.length)}}),se.each(["top","left"],function(e,t){se.cssHooks[t]=E(ie.pixelPosition,function(e,n){return n?(n=S(e,t),Je.test(n)?se(e).position()[t]+"px":n):void 0})}),se.each({Height:"height",Width:"width"},function(e,t){se.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){se.fn[i]=function(i,a){var s=arguments.length&&(n||"boolean"!=typeof i),o=n||(i===!0||a===!0?"margin":"border");return ke(this,function(t,n,i){var a;return se.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===i?se.css(t,n,o):se.style(t,n,i,o)},t,s?i:void 0,s,null)}})}),se.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),se.fn.andSelf=se.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return se});var Lt=e.jQuery,qt=e.$;return se.noConflict=function(t){return e.$===se&&(e.$=qt),t&&e.jQuery===se&&(e.jQuery=Lt),se},t||(e.jQuery=e.$=se),se}),function(){function e(e){function t(t,n,i,a,s,o){for(;s>=0&&o>s;s+=e){var r=a?a[s]:s;i=n(i,t[r],r,t)}return i}return function(n,i,a,s){i=w(i,s,4);var o=!S(n)&&b.keys(n),r=(o||n).length,l=e>0?0:r-1;return arguments.length<3&&(a=n[o?o[l]:l],l+=e),t(n,i,a,o,l,r)}}function t(e){return function(t,n,i){n=x(n,i);for(var a=T(t),s=e>0?0:a-1;s>=0&&a>s;s+=e)if(n(t[s],s,t))return s;return-1}}function n(e,t,n){return function(i,a,s){var o=0,r=T(i);if("number"==typeof s)e>0?o=s>=0?s:Math.max(s+r,o):r=s>=0?Math.min(s+1,r):s+r+1;else if(n&&s&&r)return s=n(i,a),i[s]===a?s:-1;if(a!==a)return s=t(d.call(i,o,r),b.isNaN),s>=0?s+o:-1;for(s=e>0?o:r-1;s>=0&&r>s;s+=e)if(i[s]===a)return s;return-1}}function i(e,t){var n=A.length,i=e.constructor,a=b.isFunction(i)&&i.prototype||r,s="constructor";for(b.has(e,s)&&!b.contains(t,s)&&t.push(s);n--;)s=A[n],s in e&&e[s]!==a[s]&&!b.contains(t,s)&&t.push(s)}var a=this,s=a._,o=Array.prototype,r=Object.prototype,l=Function.prototype,c=o.push,d=o.slice,u=r.toString,h=r.hasOwnProperty,m=Array.isArray,p=Object.keys,f=l.bind,g=Object.create,v=function(){},b=function(e){return e instanceof b?e:this instanceof b?void(this._wrapped=e):new b(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=b),exports._=b):a._=b,b.VERSION="1.8.3";var w=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,a){return e.call(t,n,i,a)};case 4:return function(n,i,a,s){return e.call(t,n,i,a,s)}}return function(){return e.apply(t,arguments)}},x=function(e,t,n){return null==e?b.identity:b.isFunction(e)?w(e,t,n):b.isObject(e)?b.matcher(e):b.property(e)};b.iteratee=function(e,t){return x(e,t,1/0)};var y=function(e,t){return function(n){var i=arguments.length;if(2>i||null==n)return n;for(var a=1;i>a;a++)for(var s=arguments[a],o=e(s),r=o.length,l=0;r>l;l++){var c=o[l];t&&void 0!==n[c]||(n[c]=s[c])}return n}},_=function(e){if(!b.isObject(e))return{};if(g)return g(e);v.prototype=e;var t=new v;return v.prototype=null,t},k=function(e){return function(t){return null==t?void 0:t[e]}},C=Math.pow(2,53)-1,T=k("length"),S=function(e){var t=T(e);return"number"==typeof t&&t>=0&&C>=t};b.each=b.forEach=function(e,t,n){t=w(t,n);var i,a;if(S(e))for(i=0,a=e.length;a>i;i++)t(e[i],i,e);else{var s=b.keys(e);for(i=0,a=s.length;a>i;i++)t(e[s[i]],s[i],e)}return e},b.map=b.collect=function(e,t,n){t=x(t,n);for(var i=!S(e)&&b.keys(e),a=(i||e).length,s=Array(a),o=0;a>o;o++){var r=i?i[o]:o;s[o]=t(e[r],r,e)}return s},b.reduce=b.foldl=b.inject=e(1),b.reduceRight=b.foldr=e(-1),b.find=b.detect=function(e,t,n){var i;return i=S(e)?b.findIndex(e,t,n):b.findKey(e,t,n),void 0!==i&&-1!==i?e[i]:void 0},b.filter=b.select=function(e,t,n){var i=[];return t=x(t,n),b.each(e,function(e,n,a){t(e,n,a)&&i.push(e)}),i},b.reject=function(e,t,n){return b.filter(e,b.negate(x(t)),n)},b.every=b.all=function(e,t,n){t=x(t,n);for(var i=!S(e)&&b.keys(e),a=(i||e).length,s=0;a>s;s++){var o=i?i[s]:s;if(!t(e[o],o,e))return!1}return!0},b.some=b.any=function(e,t,n){t=x(t,n);for(var i=!S(e)&&b.keys(e),a=(i||e).length,s=0;a>s;s++){var o=i?i[s]:s;if(t(e[o],o,e))return!0}return!1},b.contains=b.includes=b.include=function(e,t,n,i){return S(e)||(e=b.values(e)),("number"!=typeof n||i)&&(n=0),b.indexOf(e,t,n)>=0},b.invoke=function(e,t){var n=d.call(arguments,2),i=b.isFunction(t);return b.map(e,function(e){var a=i?t:e[t];return null==a?a:a.apply(e,n)})},b.pluck=function(e,t){return b.map(e,b.property(t))},b.where=function(e,t){return b.filter(e,b.matcher(t))},b.findWhere=function(e,t){return b.find(e,b.matcher(t))},b.max=function(e,t,n){var i,a,s=-(1/0),o=-(1/0);if(null==t&&null!=e){e=S(e)?e:b.values(e);for(var r=0,l=e.length;l>r;r++)i=e[r],i>s&&(s=i)}else t=x(t,n),b.each(e,function(e,n,i){a=t(e,n,i),(a>o||a===-(1/0)&&s===-(1/0))&&(s=e,o=a)});return s},b.min=function(e,t,n){var i,a,s=1/0,o=1/0;if(null==t&&null!=e){e=S(e)?e:b.values(e);for(var r=0,l=e.length;l>r;r++)i=e[r],s>i&&(s=i)}else t=x(t,n),b.each(e,function(e,n,i){a=t(e,n,i),(o>a||a===1/0&&s===1/0)&&(s=e,o=a)});return s},b.shuffle=function(e){for(var t,n=S(e)?e:b.values(e),i=n.length,a=Array(i),s=0;i>s;s++)t=b.random(0,s),t!==s&&(a[s]=a[t]),a[t]=n[s];return a},b.sample=function(e,t,n){return null==t||n?(S(e)||(e=b.values(e)),e[b.random(e.length-1)]):b.shuffle(e).slice(0,Math.max(0,t))},b.sortBy=function(e,t,n){return t=x(t,n),b.pluck(b.map(e,function(e,n,i){return{value:e,index:n,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var E=function(e){return function(t,n,i){var a={};return n=x(n,i),b.each(t,function(i,s){var o=n(i,s,t);e(a,i,o)}),a}};b.groupBy=E(function(e,t,n){b.has(e,n)?e[n].push(t):e[n]=[t]}),b.indexBy=E(function(e,t,n){e[n]=t}),b.countBy=E(function(e,t,n){b.has(e,n)?e[n]++:e[n]=1}),b.toArray=function(e){return e?b.isArray(e)?d.call(e):S(e)?b.map(e,b.identity):b.values(e):[]},b.size=function(e){return null==e?0:S(e)?e.length:b.keys(e).length},b.partition=function(e,t,n){t=x(t,n);var i=[],a=[];return b.each(e,function(e,n,s){(t(e,n,s)?i:a).push(e)}),[i,a]},b.first=b.head=b.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:b.initial(e,e.length-t)},b.initial=function(e,t,n){return d.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},b.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:b.rest(e,Math.max(0,e.length-t))},b.rest=b.tail=b.drop=function(e,t,n){return d.call(e,null==t||n?1:t)},b.compact=function(e){return b.filter(e,b.identity)};var F=function(e,t,n,i){for(var a=[],s=0,o=i||0,r=T(e);r>o;o++){var l=e[o];if(S(l)&&(b.isArray(l)||b.isArguments(l))){t||(l=F(l,t,n));var c=0,d=l.length;for(a.length+=d;d>c;)a[s++]=l[c++]}else n||(a[s++]=l)}return a};b.flatten=function(e,t){return F(e,t,!1)},b.without=function(e){return b.difference(e,d.call(arguments,1))},b.uniq=b.unique=function(e,t,n,i){b.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=x(n,i));for(var a=[],s=[],o=0,r=T(e);r>o;o++){var l=e[o],c=n?n(l,o,e):l;t?(o&&s===c||a.push(l),s=c):n?b.contains(s,c)||(s.push(c),a.push(l)):b.contains(a,l)||a.push(l)}return a},b.union=function(){return b.uniq(F(arguments,!0,!0))},b.intersection=function(e){for(var t=[],n=arguments.length,i=0,a=T(e);a>i;i++){var s=e[i];if(!b.contains(t,s)){for(var o=1;n>o&&b.contains(arguments[o],s);o++);o===n&&t.push(s)}}return t},b.difference=function(e){var t=F(arguments,!0,!0,1);return b.filter(e,function(e){return!b.contains(t,e)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(e){for(var t=e&&b.max(e,T).length||0,n=Array(t),i=0;t>i;i++)n[i]=b.pluck(e,i);return n},b.object=function(e,t){for(var n={},i=0,a=T(e);a>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},b.findIndex=t(1),b.findLastIndex=t(-1),b.sortedIndex=function(e,t,n,i){n=x(n,i,1);for(var a=n(t),s=0,o=T(e);o>s;){var r=Math.floor((s+o)/2);n(e[r])<a?s=r+1:o=r}return s},b.indexOf=n(1,b.findIndex,b.sortedIndex),b.lastIndexOf=n(-1,b.findLastIndex),b.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),a=Array(i),s=0;i>s;s++,e+=n)a[s]=e;return a};var P=function(e,t,n,i,a){if(!(i instanceof t))return e.apply(n,a);var s=_(e.prototype),o=e.apply(s,a);return b.isObject(o)?o:s};b.bind=function(e,t){if(f&&e.bind===f)return f.apply(e,d.call(arguments,1));if(!b.isFunction(e))throw new TypeError("Bind must be called on a function");var n=d.call(arguments,2),i=function(){return P(e,i,t,this,n.concat(d.call(arguments)))};return i},b.partial=function(e){var t=d.call(arguments,1),n=function(){for(var i=0,a=t.length,s=Array(a),o=0;a>o;o++)s[o]=t[o]===b?arguments[i++]:t[o];for(;i<arguments.length;)s.push(arguments[i++]);return P(e,n,this,this,s)};return n},b.bindAll=function(e){var t,n,i=arguments.length;if(1>=i)throw Error("bindAll must be passed function names");for(t=1;i>t;t++)n=arguments[t],e[n]=b.bind(e[n],e);return e},b.memoize=function(e,t){var n=function(i){var a=n.cache,s=""+(t?t.apply(this,arguments):i);return b.has(a,s)||(a[s]=e.apply(this,arguments)),a[s]};return n.cache={},n},b.delay=function(e,t){var n=d.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},b.defer=b.partial(b.delay,b,1),b.throttle=function(e,t,n){var i,a,s,o=null,r=0;n||(n={});var l=function(){r=n.leading===!1?0:b.now(),o=null,s=e.apply(i,a),o||(i=a=null)};return function(){var c=b.now();r||n.leading!==!1||(r=c);var d=t-(c-r);return i=this,a=arguments,0>=d||d>t?(o&&(clearTimeout(o),o=null),r=c,s=e.apply(i,a),o||(i=a=null)):o||n.trailing===!1||(o=setTimeout(l,d)),s}},b.debounce=function(e,t,n){var i,a,s,o,r,l=function(){var c=b.now()-o;t>c&&c>=0?i=setTimeout(l,t-c):(i=null,n||(r=e.apply(s,a),i||(s=a=null)))};return function(){s=this,a=arguments,o=b.now();var c=n&&!i;return i||(i=setTimeout(l,t)),c&&(r=e.apply(s,a),s=a=null),r}},b.wrap=function(e,t){return b.partial(t,e)},b.negate=function(e){return function(){return!e.apply(this,arguments)}},b.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},b.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},b.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}},b.once=b.partial(b.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),A=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(e){if(!b.isObject(e))return[];if(p)return p(e);var t=[];for(var n in e)b.has(e,n)&&t.push(n);return M&&i(e,t),t},b.allKeys=function(e){if(!b.isObject(e))return[];var t=[];for(var n in e)t.push(n);return M&&i(e,t),t},b.values=function(e){for(var t=b.keys(e),n=t.length,i=Array(n),a=0;n>a;a++)i[a]=e[t[a]];return i},b.mapObject=function(e,t,n){t=x(t,n);for(var i,a=b.keys(e),s=a.length,o={},r=0;s>r;r++)i=a[r],o[i]=t(e[i],i,e);return o},b.pairs=function(e){for(var t=b.keys(e),n=t.length,i=Array(n),a=0;n>a;a++)i[a]=[t[a],e[t[a]]];return i},b.invert=function(e){for(var t={},n=b.keys(e),i=0,a=n.length;a>i;i++)t[e[n[i]]]=n[i];return t},b.functions=b.methods=function(e){var t=[];for(var n in e)b.isFunction(e[n])&&t.push(n);return t.sort()},b.extend=y(b.allKeys),b.extendOwn=b.assign=y(b.keys),
b.findKey=function(e,t,n){t=x(t,n);for(var i,a=b.keys(e),s=0,o=a.length;o>s;s++)if(i=a[s],t(e[i],i,e))return i},b.pick=function(e,t,n){var i,a,s={},o=e;if(null==o)return s;b.isFunction(t)?(a=b.allKeys(o),i=w(t,n)):(a=F(arguments,!1,!1,1),i=function(e,t,n){return t in n},o=Object(o));for(var r=0,l=a.length;l>r;r++){var c=a[r],d=o[c];i(d,c,o)&&(s[c]=d)}return s},b.omit=function(e,t,n){if(b.isFunction(t))t=b.negate(t);else{var i=b.map(F(arguments,!1,!1,1),String);t=function(e,t){return!b.contains(i,t)}}return b.pick(e,t,n)},b.defaults=y(b.allKeys,!0),b.create=function(e,t){var n=_(e);return t&&b.extendOwn(n,t),n},b.clone=function(e){return b.isObject(e)?b.isArray(e)?e.slice():b.extend({},e):e},b.tap=function(e,t){return t(e),e},b.isMatch=function(e,t){var n=b.keys(t),i=n.length;if(null==e)return!i;for(var a=Object(e),s=0;i>s;s++){var o=n[s];if(t[o]!==a[o]||!(o in a))return!1}return!0};var D=function(e,t,n,i){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof b&&(e=e._wrapped),t instanceof b&&(t=t._wrapped);var a=u.call(e);if(a!==u.call(t))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var s="[object Array]"===a;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var o=e.constructor,r=t.constructor;if(o!==r&&!(b.isFunction(o)&&o instanceof o&&b.isFunction(r)&&r instanceof r)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],i=i||[];for(var l=n.length;l--;)if(n[l]===e)return i[l]===t;if(n.push(e),i.push(t),s){if(l=e.length,l!==t.length)return!1;for(;l--;)if(!D(e[l],t[l],n,i))return!1}else{var c,d=b.keys(e);if(l=d.length,b.keys(t).length!==l)return!1;for(;l--;)if(c=d[l],!b.has(t,c)||!D(e[c],t[c],n,i))return!1}return n.pop(),i.pop(),!0};b.isEqual=function(e,t){return D(e,t)},b.isEmpty=function(e){return null==e?!0:S(e)&&(b.isArray(e)||b.isString(e)||b.isArguments(e))?0===e.length:0===b.keys(e).length},b.isElement=function(e){return!(!e||1!==e.nodeType)},b.isArray=m||function(e){return"[object Array]"===u.call(e)},b.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){b["is"+e]=function(t){return u.call(t)==="[object "+e+"]"}}),b.isArguments(arguments)||(b.isArguments=function(e){return b.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(e){return"function"==typeof e||!1}),b.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},b.isNaN=function(e){return b.isNumber(e)&&e!==+e},b.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===u.call(e)},b.isNull=function(e){return null===e},b.isUndefined=function(e){return void 0===e},b.has=function(e,t){return null!=e&&h.call(e,t)},b.noConflict=function(){return a._=s,this},b.identity=function(e){return e},b.constant=function(e){return function(){return e}},b.noop=function(){},b.property=k,b.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},b.matcher=b.matches=function(e){return e=b.extendOwn({},e),function(t){return b.isMatch(t,e)}},b.times=function(e,t,n){var i=Array(Math.max(0,e));t=w(t,n,1);for(var a=0;e>a;a++)i[a]=t(a);return i},b.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},b.now=Date.now||function(){return(new Date).getTime()};var V={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},R=b.invert(V),N=function(e){var t=function(t){return e[t]},n="(?:"+b.keys(e).join("|")+")",i=RegExp(n),a=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(a,t):e}};b.escape=N(V),b.unescape=N(R),b.result=function(e,t,n){var i=null==e?void 0:e[t];return void 0===i&&(i=n),b.isFunction(i)?i.call(e):i};var O=0;b.uniqueId=function(e){var t=++O+"";return e?e+t:t},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,U={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\u2028|\u2029/g,q=function(e){return"\\"+U[e]};b.template=function(e,t,n){!t&&n&&(t=n),t=b.defaults({},t,b.templateSettings);var i=RegExp([(t.escape||I).source,(t.interpolate||I).source,(t.evaluate||I).source].join("|")+"|$","g"),a=0,s="__p+='";e.replace(i,function(t,n,i,o,r){return s+=e.slice(a,r).replace(L,q),a=r+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?s+="'+\n((__t=("+i+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),t}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=Function(t.variable||"obj","_",s)}catch(r){throw r.source=s,r}var l=function(e){return o.call(this,e,b)},c=t.variable||"obj";return l.source="function("+c+"){\n"+s+"}",l},b.chain=function(e){var t=b(e);return t._chain=!0,t};var H=function(e,t){return e._chain?b(t).chain():t};b.mixin=function(e){b.each(b.functions(e),function(t){var n=b[t]=e[t];b.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),H(this,n.apply(b,e))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];b.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],H(this,n)}}),b.each(["concat","join","slice"],function(e){var t=o[e];b.prototype[e]=function(){return H(this,t.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return b})}.call(this),define("home/utils/layoutUtils",["jquery","underscore"],function(e,t){"use strict";var n=t.memoize(function(){return e("[data-role=nav-view]").outerHeight()}),i={};return i.isElementInViewport=function(e){var t=n(),i=e[0].getBoundingClientRect(),a=i.top>0?i.top:0,s=i.left>0?i.left:0;return i.bottom>=t&&i.right>=0&&window.matchMedia("(min-height: "+a+"px) and (min-width: "+s+"px)").matches},i.isNarrowLayout=function(){return!window.matchMedia("(min-width: 480px)").matches},i}),window.Modernizr=function(e,t,n){function i(e){b.cssText=e}function a(e,t){return typeof e===t}function s(e,t){return!!~(""+e).indexOf(t)}function o(e,t){for(var i in e){var a=e[i];if(!s(a,"-")&&b[a]!==n)return"pfx"==t?a:!0}return!1}function r(e,t,i){for(var s in e){var o=t[e[s]];if(o!==n)return i===!1?e[s]:a(o,"function")?o.bind(i||t):o}return!1}function l(e,t,n){var i=e.charAt(0).toUpperCase()+e.slice(1),s=(e+" "+y.join(i+" ")+i).split(" ");return a(t,"string")||a(t,"undefined")?o(s,t):(s=(e+" "+_.join(i+" ")+i).split(" "),r(s,t,n))}var c,d,u,h="2.8.3",m={},p=!0,f=t.documentElement,g="modernizr",v=t.createElement(g),b=v.style,w=" -webkit- -moz- -o- -ms- ".split(" "),x="Webkit Moz O ms",y=x.split(" "),_=x.toLowerCase().split(" "),k={},C=[],T=C.slice,S=function(e,n,i,a){var s,o,r,l,c=t.createElement("div"),d=t.body,u=d||t.createElement("body");if(parseInt(i,10))for(;i--;)r=t.createElement("div"),r.id=a?a[i]:g+(i+1),c.appendChild(r);return s='&#173;<style id="s'+g+'">'+e+"</style>",c.id=g,(d?c:u).innerHTML+=s,u.appendChild(c),d||(u.style.background="",u.style.overflow="hidden",l=f.style.overflow,f.style.overflow="hidden",f.appendChild(u)),o=n(c,e),d?c.parentNode.removeChild(c):(u.parentNode.removeChild(u),f.style.overflow=l),!!o},E={}.hasOwnProperty;u=a(E,"undefined")||a(E.call,"undefined")?function(e,t){return t in e&&a(e.constructor.prototype[t],"undefined")}:function(e,t){return E.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=T.call(arguments,1),i=function(){if(this instanceof i){var a=function(){};a.prototype=t.prototype;var s=new a,o=t.apply(s,n.concat(T.call(arguments)));return Object(o)===o?o:s}return t.apply(e,n.concat(T.call(arguments)))};return i}),k.flexbox=function(){return l("flexWrap")},k.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:S("@media ("+w.join("touch-enabled),(")+g+"){#modernizr{top:9px;position:absolute}}",function(e){n=9===e.offsetTop}),n},k.history=function(){return!(!e.history||!history.pushState)},k.localstorage=function(){try{return localStorage.setItem(g,g),localStorage.removeItem(g),!0}catch(e){return!1}};for(var F in k)u(k,F)&&(d=F.toLowerCase(),m[d]=k[F](),C.push((m[d]?"":"no-")+d));return m.addTest=function(e,t){if("object"==typeof e)for(var i in e)u(e,i)&&m.addTest(i,e[i]);else{if(e=e.toLowerCase(),m[e]!==n)return m;t="function"==typeof t?t():t,n!==p&&p&&(f.className+=" "+(t?"":"no-")+e),m[e]=t}return m},i(""),v=c=null,function(e,t){function i(e,t){var n=e.createElement("p"),i=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",i.insertBefore(n.lastChild,i.firstChild)}function a(){var e=w.elements;return"string"==typeof e?e.split(" "):e}function s(e){var t=b[e[g]];return t||(t={},v++,e[g]=v,b[v]=t),t}function o(e,n,i){if(n||(n=t),u)return n.createElement(e);i||(i=s(n));var a;return a=i.cache[e]?i.cache[e].cloneNode():f.test(e)?(i.cache[e]=i.createElem(e)).cloneNode():i.createElem(e),!a.canHaveChildren||p.test(e)||a.tagUrn?a:i.frag.appendChild(a)}function r(e,n){if(e||(e=t),u)return e.createDocumentFragment();n=n||s(e);for(var i=n.frag.cloneNode(),o=0,r=a(),l=r.length;l>o;o++)i.createElement(r[o]);return i}function l(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return w.shivMethods?o(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+a().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(w,t.frag)}function c(e){e||(e=t);var n=s(e);return!w.shivCSS||d||n.hasCSS||(n.hasCSS=!!i(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),u||l(e,n),e}var d,u,h="3.7.0",m=e.html5||{},p=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,g="_html5shiv",v=0,b={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",d="hidden"in e,u=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return n===e.cloneNode||n===e.createDocumentFragment||n===e.createElement}()}catch(i){d=!0,u=!0}}();var w={elements:m.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:h,shivCSS:m.shivCSS!==!1,supportsUnknownElements:u,shivMethods:m.shivMethods!==!1,type:"default",shivDocument:c,createElement:o,createDocumentFragment:r};e.html5=w,c(t)}(this,t),m._version=h,m._prefixes=w,m._domPrefixes=_,m._cssomPrefixes=y,m.testProp=function(e){return o([e])},m.testAllProps=l,m.testStyles=S,f.className=f.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(p?" js "+C.join(" "):""),m}(this,this.document),function(e,t,n){function i(e){return"[object Function]"==g.call(e)}function a(e){return"string"==typeof e}function s(){}function o(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function r(){var e=v.shift();b=1,e?e.t?p(function(){("c"==e.t?h.injectCss:h.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),r()):b=0}function l(e,n,i,a,s,l,c){function d(t){if(!m&&o(u.readyState)&&(w.r=m=1,!b&&r(),u.onload=u.onreadystatechange=null,t)){"img"!=e&&p(function(){y.removeChild(u)},50);for(var i in S[n])S[n].hasOwnProperty(i)&&S[n][i].onload()}}var c=c||h.errorTimeout,u=t.createElement(e),m=0,g=0,w={t:i,s:n,e:s,a:l,x:c};1===S[n]&&(g=1,S[n]=[]),"object"==e?u.data=n:(u.src=n,u.type=e),u.width=u.height="0",u.onerror=u.onload=u.onreadystatechange=function(){d.call(this,g)},v.splice(a,0,w),"img"!=e&&(g||2===S[n]?(y.insertBefore(u,x?null:f),p(d,c)):S[n].push(u))}function c(e,t,n,i,s){return b=0,t=t||"j",a(e)?l("c"==t?k:_,e,t,this.i++,n,i,s):(v.splice(this.i++,0,e),1==v.length&&r()),this}function d(){var e=h;return e.loader={load:c,i:0},e}var u,h,m=t.documentElement,p=e.setTimeout,f=t.getElementsByTagName("script")[0],g={}.toString,v=[],b=0,w="MozAppearance"in m.style,x=w&&!!t.createRange().compareNode,y=x?m:f.parentNode,m=e.opera&&"[object Opera]"==g.call(e.opera),m=!!t.attachEvent&&!m,_=w?"object":m?"script":"img",k=m?"script":_,C=Array.isArray||function(e){return"[object Array]"==g.call(e)},T=[],S={},E={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};h=function(e){function t(e){var t,n,i,e=e.split("!"),a=T.length,s=e.pop(),o=e.length,s={url:s,origUrl:s,prefixes:e};for(n=0;o>n;n++)i=e[n].split("="),(t=E[i.shift()])&&(s=t(s,i));for(n=0;a>n;n++)s=T[n](s);return s}function o(e,a,s,o,r){var l=t(e),c=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(a&&(a=i(a)?a:a[e]||a[o]||a[e.split("/").pop().split("?")[0]]),l.instead?l.instead(e,a,s,o,r):(S[l.url]?l.noexec=!0:S[l.url]=1,s.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":n,l.noexec,l.attrs,l.timeout),(i(a)||i(c))&&s.load(function(){d(),a&&a(l.origUrl,r,o),c&&c(l.origUrl,r,o),S[l.url]=2})))}function r(e,t){function n(e,n){if(e){if(a(e))n||(u=function(){var e=[].slice.call(arguments);h.apply(this,e),m()}),o(e,u,t,0,c);else if(Object(e)===e)for(l in r=function(){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}(),e)e.hasOwnProperty(l)&&(!n&&!--r&&(i(u)?u=function(){var e=[].slice.call(arguments);h.apply(this,e),m()}:u[l]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),m()}}(h[l])),o(e[l],u,t,l,c))}else!n&&m()}var r,l,c=!!e.test,d=e.load||e.both,u=e.callback||s,h=u,m=e.complete||s;n(c?e.yep:e.nope,!!d),d&&n(d)}var l,c,u=this.yepnope.loader;if(a(e))o(e,0,u,0);else if(C(e))for(l=0;e.length>l;l++)c=e[l],a(c)?o(c,0,u,0):C(c)?h(c):Object(c)===c&&r(c,u);else Object(e)===e&&r(e,u)},h.addPrefix=function(e,t){E[e]=t},h.addFilter=function(e){T.push(e)},h.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",u=function(){t.removeEventListener("DOMContentLoaded",u,0),t.readyState="complete"},0)),e.yepnope=d(),e.yepnope.executeStack=r,e.yepnope.injectJs=function(e,n,i,a,l,c){var d,u,m=t.createElement("script"),a=a||h.errorTimeout;m.src=e;for(u in i)m.setAttribute(u,i[u]);n=c?r:n||s,m.onreadystatechange=m.onload=function(){!d&&o(m.readyState)&&(d=1,n(),m.onload=m.onreadystatechange=null)},p(function(){d||(d=1,n(1))},a),l?m.onload():f.parentNode.insertBefore(m,f)},e.yepnope.injectCss=function(e,n,i,a,o,l){var c,a=t.createElement("link"),n=l?r:n||s;a.href=e,a.rel="stylesheet",a.type="text/css";for(c in i)a.setAttribute(c,i[c]);o||(f.parentNode.insertBefore(a,f),p(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},Modernizr.addTest("contenteditable","contentEditable"in document.documentElement),define("modernizr",function(e){return function(){var t;return t||e.Modernizr}}(this)),function(e,t){if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,i,a){e.Backbone=t(e,a,n,i)});else if("undefined"!=typeof exports){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,i){var a=e.Backbone,s=[],o=s.slice;t.VERSION="1.1.2",t.$=i,t.noConflict=function(){return e.Backbone=a,this},t.emulateHTTP=!1,t.emulateJSON=!1;var r=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,i){if(!c(this,"once",e,[t,i])||!t)return this;var a=this,s=n.once(function(){a.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,i)},off:function(e,t,i){var a,s,o,r,l,d,u,h;if(!this._events||!c(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events=void 0,this;for(r=e?[e]:n.keys(this._events),l=0,d=r.length;d>l;l++)if(e=r[l],o=this._events[e]){if(this._events[e]=a=[],t||i)for(u=0,h=o.length;h>u;u++)s=o[u],(t&&t!==s.callback&&t!==s.callback._callback||i&&i!==s.context)&&a.push(s);a.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=o.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&d(n,t),i&&d(i,arguments),this},stopListening:function(e,t,i){var a=this._listeningTo;if(!a)return this;var s=!t&&!i;i||"object"!=typeof t||(i=this),e&&((a={})[e._listenId]=e);for(var o in a)e=a[o],e.off(t,i,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},l=/\s+/,c=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var a in n)e[t].apply(e,[a,n[a]].concat(i));return!1}if(l.test(n)){for(var s=n.split(l),o=0,r=s.length;r>o;o++)e[t].apply(e,[s[o]].concat(i));return!1}return!0},d=function(e,t){var n,i=-1,a=e.length,s=t[0],o=t[1],r=t[2];switch(t.length){case 0:for(;++i<a;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<a;)(n=e[i]).callback.call(n.ctx,s);return;case 2:for(;++i<a;)(n=e[i]).callback.call(n.ctx,s,o);return;case 3:for(;++i<a;)(n=e[i]).callback.call(n.ctx,s,o,r);return;default:for(;++i<a;)(n=e[i]).callback.apply(n.ctx,t);return}},u={listenTo:"on",listenToOnce:"once"};n.each(u,function(e,t){r[t]=function(t,i,a){var s=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId("l"));return s[o]=t,a||"object"!=typeof i||(a=this),t[e](i,a,this),this}}),r.bind=r.on,r.unbind=r.off,n.extend(t,r);var h=t.Model=function(e,t){var i=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(h.prototype,r,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,i){var a,s,o,r,l,c,d,u;if(null==e)return this;if("object"==typeof e?(s=e,i=t):(s={})[e]=t,i||(i={}),!this._validate(s,i))return!1;o=i.unset,l=i.silent,r=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={}),u=this.attributes,d=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(a in s)t=s[a],n.isEqual(u[a],t)||r.push(a),n.isEqual(d[a],t)?delete this.changed[a]:this.changed[a]=t,o?delete u[a]:u[a]=t;if(!l){r.length&&(this._pending=i);for(var h=0,m=r.length;m>h;h++)this.trigger("change:"+r[h],this,u[r[h]],i)}if(c)return this;if(!l)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,i=!1,a=this._changing?this._previousAttributes:this.attributes;for(var s in e)n.isEqual(a[s],t=e[s])||((i||(i={}))[s]=t);return i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,i=e.success;return e.success=function(n){return t.set(t.parse(n,e),e)?(i&&i(t,n,e),void t.trigger("sync",t,n,e)):!1},I(this,e),this.sync("read",this,e)},save:function(e,t,i){var a,s,o,r=this.attributes;if(null==e||"object"==typeof e?(a=e,i=t):(a={})[e]=t,i=n.extend({validate:!0},i),a&&!i.wait){if(!this.set(a,i))return!1}else if(!this._validate(a,i))return!1;a&&i.wait&&(this.attributes=n.extend({},r,a)),void 0===i.parse&&(i.parse=!0);var l=this,c=i.success;return i.success=function(e){l.attributes=r;var t=l.parse(e,i);return i.wait&&(t=n.extend(a||{},t)),n.isObject(t)&&!l.set(t,i)?!1:(c&&c(l,e,i),void l.trigger("sync",l,e,i))},I(this,i),s=this.isNew()?"create":i.patch?"patch":"update","patch"===s&&(i.attrs=a),o=this.sync(s,this,i),a&&i.wait&&(this.attributes=r),o},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,a=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&a(),i&&i(t,n,e),t.isNew()||t.trigger("sync",t,n,e)},this.isNew())return e.success(),!1;I(this,e);var s=this.sync("delete",this,e);return e.wait||a(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||O();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return i?(this.trigger("invalid",this,i,n.extend(t,{validationError:i})),!1):!0}});var m=["keys","values","pairs","invert","pick","omit"];n.each(m,function(e){h.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var p=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},f={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};n.extend(p.prototype,r,{model:h,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,g))},remove:function(e,t){var i=!n.isArray(e);e=i?[e]:n.clone(e),t||(t={});var a,s,o,r;for(a=0,s=e.length;s>a;a++)r=e[a]=this.get(e[a]),r&&(delete this._byId[r.id],delete this._byId[r.cid],o=this.indexOf(r),this.models.splice(o,1),this.length--,t.silent||(t.index=o,r.trigger("remove",r,this,t)),this._removeReference(r,t));return i?e[0]:e},set:function(e,t){t=n.defaults({},t,f),t.parse&&(e=this.parse(e,t));var i=!n.isArray(e);e=i?e?[e]:[]:n.clone(e);var a,s,o,r,l,c,d,u=t.at,m=this.model,p=this.comparator&&null==u&&t.sort!==!1,g=n.isString(this.comparator)?this.comparator:null,v=[],b=[],w={},x=t.add,y=t.merge,_=t.remove,k=!p&&x&&_?[]:!1;for(a=0,s=e.length;s>a;a++){if(l=e[a]||{},o=l instanceof h?r=l:l[m.prototype.idAttribute||"id"],c=this.get(o))_&&(w[c.cid]=!0),y&&(l=l===r?r.attributes:l,t.parse&&(l=c.parse(l,t)),c.set(l,t),p&&!d&&c.hasChanged(g)&&(d=!0)),e[a]=c;else if(x){if(r=e[a]=this._prepareModel(l,t),!r)continue;v.push(r),this._addReference(r,t)}r=c||r,!k||!r.isNew()&&w[r.id]||k.push(r),w[r.id]=!0}if(_){for(a=0,s=this.length;s>a;++a)w[(r=this.models[a]).cid]||b.push(r);b.length&&this.remove(b,t)}if(v.length||k&&k.length)if(p&&(d=!0),this.length+=v.length,null!=u)for(a=0,s=v.length;s>a;a++)this.models.splice(u+a,0,v[a]);else{k&&(this.models.length=0);var C=k||v;for(a=0,s=C.length;s>a;a++)this.models.push(C[a])}if(d&&this.sort({silent:!0}),!t.silent){for(a=0,s=v.length;s>a;a++)(r=v[a]).trigger("add",r,this,t);(d||k&&k.length)&&this.trigger("sort",this,t)}return i?e[0]:e},reset:function(e,t){t||(t={});for(var i=0,a=this.models.length;a>i;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return o.apply(this.models,arguments)},get:function(e){return null==e?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,i=this;return e.success=function(n){var a=e.reset?"reset":"set";i[a](n,e),t&&t(i,n,e),i.trigger("sync",i,n,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?n.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var i=this,a=t.success;return t.success=function(e,n){t.wait&&i.add(e,t),a&&a(e,n,t)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof h)return e;t=t?n.clone(t):{},t.collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_addReference:function(e){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(v,function(e){p.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var b=["groupBy","countBy","sortBy","indexBy"];n.each(b,function(e){p.prototype[e]=function(t,i){var a=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,a,i)}});var w=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,y)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},x=/^(\S+)\s*(.*)$/,y=["model","collection","el","id","attributes","className","tagName","events"];n.extend(w.prototype,r,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var i=e[t];if(n.isFunction(i)||(i=this[e[t]]),i){var a=t.match(x),s=a[1],o=a[2];i=n.bind(i,this),s+=".delegateEvents"+this.cid,""===o?this.$el.on(s,i):this.$el.on(s,o,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var i=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(i,!1)}}}),t.sync=function(e,i,a){var s=k[e];n.defaults(a||(a={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};if(a.url||(o.url=n.result(i,"url")||O()),null!=a.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(o.contentType="application/json",o.data=JSON.stringify(a.attrs||i.toJSON(a))),a.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),a.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){o.type="POST",a.emulateJSON&&(o.data._method=s);var r=a.beforeSend;a.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",s),r?r.apply(this,arguments):void 0}}"GET"===o.type||a.emulateJSON||(o.processData=!1),"PATCH"===o.type&&_&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=a.xhr=t.ajax(n.extend(o,a));return i.trigger("request",i,l,a),l};var _=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),k={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,S=/(\(\?)?:\w+/g,E=/\*\w+/g,F=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,r,{initialize:function(){},route:function(e,i,a){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(a=i,i=""),a||(a=this[i]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(a,o),s.trigger.apply(s,["route:"+i].concat(o)),s.trigger("route",i,o),t.history.trigger("route",s,i,o)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(F,"\\$&").replace(T,"(?:$1)?").replace(S,function(e,t){return t?e:"([^/?]+)"}).replace(E,"([^?]*?)"),RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null})}});var P=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,A=/^\/+|\/+$/g,D=/msie [\w.]+/,V=/\/$/,R=/#.*$/;P.started=!1,n.extend(P.prototype,r,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(V,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(P.started)throw Error("Backbone.history has already been started");P.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),a=document.documentMode,s=D.exec(navigator.userAgent.toLowerCase())&&(!a||7>=a);if(this.root=("/"+this.root+"/").replace(A,"/"),s&&this._wantsHashChange){
var o=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(i)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var r=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&r.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),P.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},navigate:function(e,t){if(!P.started)return!1;t&&t!==!0||(t={trigger:!!t});var n=this.root+(e=this.getFragment(e||""));if(e=e.replace(R,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new P;var N=function(e,t){var i,a=this;i=e&&n.has(e,"constructor")?e.constructor:function(){return a.apply(this,arguments)},n.extend(i,a,t);var s=function(){this.constructor=i};return s.prototype=a.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=a.prototype,i};h.extend=p.extend=C.extend=w.extend=P.extend=N;var O=function(){throw Error('A "url" property or function must be specified')},I=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}};return t}),function(e,t){if("function"==typeof define&&define.amd)define("backbone.wreqr",["backbone","underscore"],function(e,n){return t(e,n)});else if("undefined"!=typeof exports){var n=require("backbone"),i=require("underscore");module.exports=t(n,i)}else t(e.Backbone,e._)}(this,function(e,t){"use strict";var n=e.Wreqr,i=e.Wreqr={};return e.Wreqr.VERSION="1.3.6",e.Wreqr.noConflict=function(){return e.Wreqr=n,this},i.Handlers=function(e,t){var n=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events,{setHandlers:function(e){t.each(e,function(e,n){var i=null;t.isObject(e)&&!t.isFunction(e)&&(i=e.context,e=e.callback),this.setHandler(n,e,i)},this)},setHandler:function(e,t,n){var i={callback:t,context:n};this._wreqrHandlers[e]=i,this.trigger("handler:add",e,t,n)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(t)return function(){return t.callback.apply(t.context,arguments)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),n}(e,t),i.CommandStorage=function(){var n=function(e){this.options=e,this._commands={},t.isFunction(this.initialize)&&this.initialize(e)};return t.extend(n.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){var n=this.getCommands(e);n.instances.push(t)},clearCommands:function(e){var t=this.getCommands(e);t.instances=[]}}),n}(),i.Commands=function(e,t){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this),e.Handlers.prototype.constructor.apply(this,arguments)},execute:function(e){e=arguments[0];var n=t.rest(arguments);this.hasHandler(e)?this.getHandler(e).apply(this,n):this.storage.addCommand(e,n)},_executeCommands:function(e,n,i){var a=this.storage.getCommands(e);t.each(a.instances,function(e){n.apply(i,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var n,i=e.storageType||this.storageType;n=t.isFunction(i)?new i:i,this.storage=n}})}(i,t),i.RequestResponse=function(e,t){return e.Handlers.extend({request:function(e){return this.hasHandler(e)?this.getHandler(e).apply(this,t.rest(arguments)):void 0}})}(i,t),i.EventAggregator=function(e,t){var n=function(){};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events),n}(e,t),i.Channel=function(){var n=function(t){this.vent=new e.Wreqr.EventAggregator,this.reqres=new e.Wreqr.RequestResponse,this.commands=new e.Wreqr.Commands,this.channelName=t};return t.extend(n.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(e,t){return this._connect("vent",e,t),this},connectCommands:function(e,t){return this._connect("commands",e,t),this},connectRequests:function(e,t){return this._connect("reqres",e,t),this},_connect:function(e,n,i){if(n){i=i||this;var a="vent"===e?"on":"setHandler";t.each(n,function(n,s){this[e][a](s,t.bind(n,i))},this)}}}),n}(i),i.radio=function(e,t){var n=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};t.extend(n.prototype,{channel:function(e){if(!e)throw Error("Channel must receive a name");return this._getChannel(e)},_getChannel:function(t){var n=this._channels[t];return n||(n=new e.Channel(t),this._channels[t]=n),n},_proxyMethods:function(){t.each(["vent","commands","reqres"],function(e){t.each(i[e],function(t){this[e][t]=a(this,e,t)},this)},this)}});var i={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},a=function(e,n,i){return function(a){var s=e._getChannel(a)[n];return s[i].apply(s,t.rest(arguments))}};return new n}(i,t),e.Wreqr}),function(e,t){if("function"==typeof define&&define.amd)define("backbone.babysitter",["backbone","underscore"],function(e,n){return t(e,n)});else if("undefined"!=typeof exports){var n=require("backbone"),i=require("underscore");module.exports=t(n,i)}else t(e.Backbone,e._)}(this,function(e,t){"use strict";var n=e.ChildViewContainer;return e.ChildViewContainer=function(e,t){var n=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(n.prototype,{add:function(e,t){var n=e.cid;return this._views[n]=e,e.model&&(this._indexByModel[e.model.cid]=n),t&&(this._indexByCustom[t]=n),this._updateLength(),this},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var n=e.cid;return e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){return e===n?(delete this._indexByCustom[t],!0):void 0},this),delete this._views[n],this._updateLength(),this},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,n){t.each(this._views,function(i){t.isFunction(i[e])&&i[e].apply(i,n||[])})},_updateLength:function(){this.length=t.size(this._views)}});var i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce"];return t.each(i,function(e){n.prototype[e]=function(){var n=t.values(this._views),i=[n].concat(t.toArray(arguments));return t[e].apply(t,i)}}),n}(e,t),e.ChildViewContainer.VERSION="0.1.11",e.ChildViewContainer.noConflict=function(){return e.ChildViewContainer=n,this},e.ChildViewContainer}),function(e,t){if("object"==typeof exports){var n=require("underscore"),i=require("backbone"),a=require("backbone.wreqr"),s=require("backbone.babysitter");module.exports=t(n,i,a,s)}else"function"==typeof define&&define.amd&&define("backbone-marionette",["underscore","backbone","backbone.wreqr","backbone.babysitter"],t)}(this,function(e,t){(function(e,t,n){"use strict";function i(e,t){var n=Error(e);throw n.name=t||"Error",n}var a={};t.Marionette=a,a.$=t.$;var s=Array.prototype.slice;return a.extend=t.Model.extend,a.getOption=function(e,t){if(e&&t){var n;return n=e.options&&t in e.options&&void 0!==e.options[t]?e.options[t]:e[t]}},a.normalizeMethods=function(e){var t,i={};return n.each(e,function(e,a){t=e,n.isFunction(t)||(t=this[t]),t&&(i[a]=t)},this),i},a.normalizeUIKeys=function(e,t){return void 0!==e?(n.each(n.keys(e),function(n){var i=/@ui.[a-zA-Z_$0-9]*/g;n.match(i)&&(e[n.replace(i,function(e){return t[e.slice(4)]})]=e[n],delete e[n])}),e):void 0},a.triggerMethod=function(){function e(e,t,n){return n.toUpperCase()}var t=/(^|:)(\w)/gi,i=function(i){var a="on"+i.replace(t,e),s=this[a];return n.isFunction(this.trigger)&&this.trigger.apply(this,arguments),n.isFunction(s)?s.apply(this,n.tail(arguments)):void 0};return i}(),a.MonitorDOMRefresh=function(e){function t(e){e._isShown=!0,a(e)}function i(e){e._isRendered=!0,a(e)}function a(e){e._isShown&&e._isRendered&&s(e)&&n.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}function s(t){return e.contains(t.el)}return function(e){e.listenTo(e,"show",function(){t(e)}),e.listenTo(e,"render",function(){i(e)})}}(document.documentElement),function(e){function t(e,t,a,s){var o=s.split(/\s+/);n.each(o,function(n){var s=e[n];s||i("Method '"+n+"' was configured as an event handler, but does not exist."),e.listenTo(t,a,s)})}function a(e,t,n,i){e.listenTo(t,n,i)}function s(e,t,i,a){var s=a.split(/\s+/);n.each(s,function(n){var a=e[n];e.stopListening(t,i,a)})}function o(e,t,n,i){e.stopListening(t,n,i)}function r(e,t,i,a,s){t&&i&&(n.isFunction(i)&&(i=i.call(e)),n.each(i,function(i,o){n.isFunction(i)?a(e,t,o,i):s(e,t,o,i)}))}e.bindEntityEvents=function(e,n,i){r(e,n,i,a,t)},e.unbindEntityEvents=function(e,t,n){r(e,t,n,o,s)}}(a),a.Callbacks=function(){this._deferred=a.$.Deferred(),this._callbacks=[]},n.extend(a.Callbacks.prototype,{add:function(e,t){this._callbacks.push({cb:e,ctx:t}),this._deferred.done(function(n,i){t&&(n=t),e.call(n,i)})},run:function(e,t){this._deferred.resolve(t,e)},reset:function(){var e=this._callbacks;this._deferred=a.$.Deferred(),this._callbacks=[],n.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),a.Controller=function(e){this.triggerMethod=a.triggerMethod,this.options=e||{},n.isFunction(this.initialize)&&this.initialize(this.options)},a.Controller.extend=a.extend,n.extend(a.Controller.prototype,t.Events,{close:function(){this.stopListening();var e=Array.prototype.slice.call(arguments);this.triggerMethod.apply(this,["close"].concat(e)),this.unbind()}}),a.Region=function(e){if(this.options=e||{},this.el=a.getOption(this,"el"),this.el||i("An 'el' must be specified for a region.","NoElError"),this.initialize){var t=Array.prototype.slice.apply(arguments);this.initialize.apply(this,t)}},n.extend(a.Region,{buildRegion:function(e,t){var a=n.isString(e),s=n.isString(e.selector),o=n.isUndefined(e.regionType),r=n.isFunction(e);r||a||s||i("Region must be specified as a Region type, a selector string or an object with selector property");var l,c;a&&(l=e),e.selector&&(l=e.selector,delete e.selector),r&&(c=e),!r&&o&&(c=t),e.regionType&&(c=e.regionType,delete e.regionType),(a||r)&&(e={}),e.el=l;var d=new c(e);return e.parentEl&&(d.getEl=function(t){var i=e.parentEl;return n.isFunction(i)&&(i=i()),i.find(t)}),d}}),n.extend(a.Region.prototype,t.Events,{show:function(e){this.ensureEl();var t=e.isClosed||n.isUndefined(e.$el),i=e!==this.currentView;i&&this.close(),e.render(),a.triggerMethod.call(this,"before:show",e),a.triggerMethod.call(e,"before:show"),(i||t)&&this.open(e),this.currentView=e,a.triggerMethod.call(this,"show",e),a.triggerMethod.call(e,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(e){return a.$(e)},open:function(e){this.$el.empty().append(e.el)},close:function(){var e=this.currentView;e&&!e.isClosed&&(e.close?e.close():e.remove&&e.remove(),a.triggerMethod.call(this,"close",e),delete this.currentView)},attachView:function(e){this.currentView=e},reset:function(){this.close(),delete this.$el}}),a.Region.extend=a.extend,a.RegionManager=function(e){var t=e.Controller.extend({constructor:function(t){this._regions={},e.Controller.prototype.constructor.call(this,t)},addRegions:function(e,t){var i={};return n.each(e,function(e,a){n.isString(e)&&(e={selector:e}),e.selector&&(e=n.defaults({},e,t));var s=this.addRegion(a,e);i[a]=s},this),i},addRegion:function(t,i){var a,s=n.isObject(i),o=n.isString(i),r=!!i.selector;return a=o||s&&r?e.Region.buildRegion(i,e.Region):n.isFunction(i)?e.Region.buildRegion(i,e.Region):i,this._store(t,a),this.triggerMethod("region:add",t,a),a},get:function(e){return this._regions[e]},removeRegion:function(e){var t=this._regions[e];this._remove(e,t)},removeRegions:function(){n.each(this._regions,function(e,t){this._remove(t,e)},this)},closeRegions:function(){n.each(this._regions,function(e){e.close()},this)},close:function(){this.removeRegions(),e.Controller.prototype.close.apply(this,arguments)},_store:function(e,t){this._regions[e]=t,this._setLength()},_remove:function(e,t){t.close(),delete this._regions[e],this._setLength(),this.triggerMethod("region:remove",e,t)},_setLength:function(){this.length=n.size(this._regions)}}),i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return n.each(i,function(e){t.prototype[e]=function(){var t=n.values(this._regions),i=[t].concat(n.toArray(arguments));return n[e].apply(n,i)}}),t}(a),a.TemplateCache=function(e){this.templateId=e},n.extend(a.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];return t||(t=new a.TemplateCache(e),this.templateCaches[e]=t),t.load()},clear:function(){var e,t=s.call(arguments),n=t.length;if(n>0)for(e=0;n>e;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),n.extend(a.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e)},loadTemplate:function(e){var t=a.$(e).html();return t&&0!==t.length||i("Could not find template: '"+e+"'","NoTemplateError"),t},compileTemplate:function(e){return n.template(e)}}),a.Renderer={render:function(e,t){e||i("Cannot render the template since it's false, null or undefined.","TemplateNotFoundError");var n;return(n="function"==typeof e?e:a.TemplateCache.get(e))(t)}},a.View=t.View.extend({constructor:function(e){n.bindAll(this,"render"),n.isObject(this.behaviors)&&new a.Behaviors(this),this.options=n.extend({},n.result(this,"options"),n.isFunction(e)?e.call(this):e),this.events=this.normalizeUIKeys(n.result(this,"events")),t.View.prototype.constructor.apply(this,arguments),a.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled)},triggerMethod:a.triggerMethod,normalizeMethods:a.normalizeMethods,getTemplate:function(){return a.getOption(this,"template")},mixinTemplateHelpers:function(e){e=e||{};var t=a.getOption(this,"templateHelpers");return n.isFunction(t)&&(t=t.call(this)),n.extend(e,t)},normalizeUIKeys:function(e){var t=n.result(this,"ui");return a.normalizeUIKeys(e,t)},configureTriggers:function(){if(this.triggers){var e={},t=this.normalizeUIKeys(n.result(this,"triggers"));return n.each(t,function(t,i){var a=n.isObject(t),s=a?t.event:t;e[i]=function(e){if(e){var n=e.preventDefault,i=e.stopPropagation,o=a?t.preventDefault:n,r=a?t.stopPropagation:i;o&&n&&n.apply(e),r&&i&&i.apply(e)}var l={view:this,model:this.model,collection:this.collection};this.triggerMethod(s,l)}},this),e}},delegateEvents:function(e){this._delegateDOMEvents(e),a.bindEntityEvents(this,this.model,a.getOption(this,"modelEvents")),a.bindEntityEvents(this,this.collection,a.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(e){e=e||this.events,n.isFunction(e)&&(e=e.call(this));var i={},a=n.result(this,"behaviorEvents")||{},s=this.configureTriggers();n.extend(i,a,e,s),t.View.prototype.delegateEvents.call(this,i)},undelegateEvents:function(){var e=Array.prototype.slice.call(arguments);t.View.prototype.undelegateEvents.apply(this,e),a.unbindEntityEvents(this,this.model,a.getOption(this,"modelEvents")),a.unbindEntityEvents(this,this.collection,a.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var e=Array.prototype.slice.call(arguments),t=this.triggerMethod.apply(this,["before:close"].concat(e));t!==!1&&(this.isClosed=!0,this.triggerMethod.apply(this,["close"].concat(e)),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=n.result(this,"_uiBindings");this.ui={},n.each(n.keys(e),function(t){var n=e[t];this.ui[t]=this.$(n)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(n.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),a.ItemView=a.View.extend({constructor:function(){a.View.prototype.constructor.apply(this,arguments)},serializeData:function(){var e={};return this.model?e=this.model.toJSON():this.collection&&(e={items:this.collection.toJSON()}),e},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var t=this.getTemplate(),n=a.Renderer.render(t,e);return this.$el.html(n),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),a.View.prototype.close.apply(this,arguments),this.triggerMethod("item:closed"))}}),a.CollectionView=a.View.extend({itemViewEventPrefix:"itemview",constructor:function(){this._initChildViewStorage(),a.View.prototype.constructor.apply(this,arguments),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this.appendBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerShowBufferedChildren:function(){this._isShown&&(n.each(this._bufferedChildren,function(e){a.triggerMethod.call(e,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this.render))},addChildView:function(e){this.closeEmptyView();var t=this.getItemView(e),n=this.collection.indexOf(e);this.addItemView(e,t,n)},onShowCalled:function(){this.children.each(function(e){a.triggerMethod.call(e,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.startBuffering(),this.closeEmptyView(),this.closeChildren(),this.isEmpty(this.collection)?this.showEmptyView():this.showCollection(),this.endBuffering()},showCollection:function(){var e;this.collection.each(function(t,n){e=this.getItemView(t),this.addItemView(t,e,n)},this)},showEmptyView:function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this._showingEmptyView=!0;var n=new t.Model;this.addItemView(n,e,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return a.getOption(this,"emptyView")},getItemView:function(){var e=a.getOption(this,"itemView");return e||i("An `itemView` must be specified","NoItemViewError"),e},addItemView:function(e,t,i){var s=a.getOption(this,"itemViewOptions");n.isFunction(s)&&(s=s.call(this,e,i));var o=this.buildItemView(e,t,s);return this.addChildViewEventForwarding(o),this.triggerMethod("before:item:added",o),this.children.add(o),this.renderItemView(o,i),this._isShown&&!this.isBuffering&&a.triggerMethod.call(o,"show"),this.triggerMethod("after:item:added",o),o},addChildViewEventForwarding:function(e){var t=a.getOption(this,"itemViewEventPrefix");this.listenTo(e,"all",function(){var i=s.call(arguments),o=i[0],r=this.normalizeMethods(this.getItemEvents());i[0]=t+":"+o,i.splice(1,0,e),void 0!==r&&n.isFunction(r[o])&&r[o].apply(this,i),a.triggerMethod.apply(this,i)},this)},getItemEvents:function(){return n.isFunction(this.itemEvents)?this.itemEvents.call(this):this.itemEvents},renderItemView:function(e,t){e.render(),this.appendHtml(this,e,t)},buildItemView:function(e,t,i){var a=n.extend({model:e},i);return new t(a)},removeItemView:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},removeChildView:function(e){e&&(this.stopListening(e),e.close?e.close():e.remove&&e.remove(),this.children.remove(e)),this.triggerMethod("item:removed",e)},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},appendBuffer:function(e,t){e.$el.append(t)},appendHtml:function(e,t){e.isBuffering?(e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t)):e.$el.append(t.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),a.View.prototype.close.apply(this,arguments))},closeChildren:function(){this.children.each(function(e){this.removeChildView(e)},this),this.checkEmpty()}}),a.CompositeView=a.CollectionView.extend({constructor:function(){a.CollectionView.prototype.constructor.apply(this,arguments)},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this._renderChildren))})},getItemView:function(){var e=a.getOption(this,"itemView")||this.constructor;return e||i("An `itemView` must be specified","NoItemViewError"),e},serializeData:function(){var e={};return this.model&&(e=this.model.toJSON()),e},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var e=this.renderModel();return this.$el.html(e),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(this.triggerMethod("composite:collection:before:render"),a.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e);var t=this.getTemplate();return a.Renderer.render(t,e)},appendBuffer:function(e,t){var n=this.getItemViewContainer(e);n.append(t)},appendHtml:function(e,t){if(e.isBuffering)e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t);else{var n=this.getItemViewContainer(e);n.append(t.el)}},getItemViewContainer:function(e){if("$itemViewContainer"in e)return e.$itemViewContainer;var t,s=a.getOption(e,"itemViewContainer");if(s){var o=n.isFunction(s)?s.call(this):s;t=e.$(o),0>=t.length&&i("The specified `itemViewContainer` was not found: "+e.itemViewContainer,"ItemViewContainerMissingError")}else t=e.$el;return e.$itemViewContainer=t,t},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),a.Layout=a.ItemView.extend({regionType:a.Region,constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),a.ItemView.prototype.constructor.call(this,e)},render:function(){return this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions(),a.ItemView.prototype.render.apply(this,arguments)},close:function(){this.isClosed||(this.regionManager.close(),a.ItemView.prototype.close.apply(this,arguments))},addRegion:function(e,t){var n={};return n[e]=t,this._buildRegions(n)[e]},addRegions:function(e){return this.regions=n.extend({},this.regions,e),this._buildRegions(e)},removeRegion:function(e){return delete this.regions[e],this.regionManager.removeRegion(e)},_buildRegions:function(e){var t=this,n={regionType:a.getOption(this,"regionType"),parentEl:function(){return t.$el}};return this.regionManager.addRegions(e,n)},_initializeRegions:function(e){var t;this._initRegionManager(),t=n.isFunction(this.regions)?this.regions(e):this.regions||{},this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(e){e.reset()})},_initRegionManager:function(){this.regionManager=new a.RegionManager,this.listenTo(this.regionManager,"region:add",function(e,t){this[e]=t,this.trigger("region:add",e,t)}),this.listenTo(this.regionManager,"region:remove",function(e,t){delete this[e],this.trigger("region:remove",e,t)})}}),a.Behavior=function(e,t){function n(t,n){this.view=n,this.defaults=e.result(this,"defaults")||{},this.options=e.extend({},this.defaults,t),this.$=function(){return this.view.$.apply(this.view,arguments)},this.initialize.apply(this,arguments)}return e.extend(n.prototype,{initialize:function(){},triggerMethod:a.triggerMethod}),e.extend(n,{extend:t.View.extend}),n}(n,t),a.Behaviors=function(e,t){function n(e){this.behaviors=n.parseBehaviors(e,e.behaviors),n.wrap(e,this.behaviors,["bindUIElements","unbindUIElements","delegateEvents","undelegateEvents","onShow","onClose","behaviorEvents","triggerMethod","setElement"])}var i={setElement:function(e,n){e.apply(this,t.tail(arguments,2)),t.each(n,function(e){e.$el=this.$el},this)},onShow:function(n,i){var a=t.tail(arguments,2);t.each(i,function(t){e.triggerMethod.apply(t,["show"].concat(a))}),t.isFunction(n)&&n.apply(this,a)},onClose:function(n,i){var a=t.tail(arguments,2);t.each(i,function(t){e.triggerMethod.apply(t,["close"].concat(a))}),t.isFunction(n)&&n.apply(this,a)},bindUIElements:function(e,n){e.apply(this),t.invoke(n,e)},unbindUIElements:function(e,n){e.apply(this),t.invoke(n,e)},triggerMethod:function(e,n){var i=t.tail(arguments,2);e.apply(this,i),t.each(n,function(t){e.apply(t,i)})},delegateEvents:function(n,i){var a=t.tail(arguments,2);n.apply(this,a),t.each(i,function(t){e.bindEntityEvents(this,this.model,e.getOption(t,"modelEvents")),e.bindEntityEvents(this,this.collection,e.getOption(t,"collectionEvents"))},this)},undelegateEvents:function(n,i){var a=t.tail(arguments,2);n.apply(this,a),t.each(i,function(t){e.unbindEntityEvents(this,this.model,e.getOption(t,"modelEvents")),e.unbindEntityEvents(this,this.collection,e.getOption(t,"collectionEvents"))},this)},behaviorEvents:function(n,i){var a={},s=t.result(this,"ui");return t.each(i,function(n,i){var o={},r=t.result(n,"events")||{},l=t.result(n,"ui"),c=t.extend({},s,l);r=e.normalizeUIKeys(r,c),t.each(t.keys(r),function(e){var a=Array(i+2).join(" "),s=e+a,l=t.isFunction(r[e])?r[e]:n[r[e]];o[s]=t.bind(l,n)}),a=t.extend(a,o)}),a}};return t.extend(n,{behaviorsLookup:function(){throw Error("You must define where your behaviors are stored. See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup")},getBehaviorClass:function(e,i){return e.behaviorClass?e.behaviorClass:t.isFunction(n.behaviorsLookup)?n.behaviorsLookup.apply(this,arguments)[i]:n.behaviorsLookup[i]},parseBehaviors:function(e,i){return t.map(i,function(t,i){var a=n.getBehaviorClass(t,i);return new a(t,e)})},wrap:function(e,n,a){t.each(a,function(a){e[a]=t.partial(i[a],e[a],n)})}}),n}(a,n),a.AppRouter=t.Router.extend({constructor:function(e){t.Router.prototype.constructor.apply(this,arguments),this.options=e||{};var n=a.getOption(this,"appRoutes"),i=this._getController();this.processAppRoutes(i,n)},appRoute:function(e,t){var n=this._getController();this._addAppRoute(n,e,t)},processAppRoutes:function(e,t){if(t){var i=n.keys(t).reverse();n.each(i,function(n){this._addAppRoute(e,n,t[n])},this)}},_getController:function(){return a.getOption(this,"controller")},_addAppRoute:function(e,t,a){var s=e[a];s||i("Method '"+a+"' was not found on the controller"),this.route(t,a,n.bind(s,e))}}),a.Application=function(e){this._initRegionManager(),this._initCallbacks=new a.Callbacks,this.vent=new t.Wreqr.EventAggregator,this.commands=new t.Wreqr.Commands,this.reqres=new t.Wreqr.RequestResponse,this.submodules={},n.extend(this,e),this.triggerMethod=a.triggerMethod},n.extend(a.Application.prototype,t.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("initialize:before",e),this._initCallbacks.run(e,this),this.triggerMethod("initialize:after",e),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(e){this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},module:function(e,t){var n=a.Module.getClass(t),i=s.call(arguments);return i.unshift(this),n.create.apply(n,i)},_initRegionManager:function(){this._regionManager=new a.RegionManager,this.listenTo(this._regionManager,"region:add",function(e,t){this[e]=t}),this.listenTo(this._regionManager,"region:remove",function(e){delete this[e]})}}),a.Application.extend=a.extend,a.Module=function(e,t,i){this.moduleName=e,this.options=n.extend({},this.options,i),this.initialize=i.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,this.startWithParent=!0,this.triggerMethod=a.triggerMethod,n.isFunction(this.initialize)&&this.initialize(this.options,e,t)},a.Module.extend=a.extend,n.extend(a.Module.prototype,t.Events,{initialize:function(){},addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){this._isInitialized||(n.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},stop:function(){this._isInitialized&&(this._isInitialized=!1,a.triggerMethod.call(this,"before:stop"),n.each(this.submodules,function(e){e.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),a.triggerMethod.call(this,"stop"))},addDefinition:function(e,t){
this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,i){if(e){var s=n.flatten([this,this.app,t,a,a.$,n,i]);e.apply(this,s)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new a.Callbacks,this._finalizerCallbacks=new a.Callbacks}}),n.extend(a.Module,{create:function(e,t,i){var a=e,o=s.call(arguments);o.splice(0,3),t=t.split(".");var r=t.length,l=[];return l[r-1]=i,n.each(t,function(t,n){var s=a;a=this._getModule(s,t,e,i),this._addModuleDefinition(s,a,l[n],o)},this),a},_getModule:function(e,t,i,a){var s=n.extend({},a),o=this.getClass(a),r=e[t];return r||(r=new o(t,i,s),e[t]=r,e.submodules[t]=r),r},getClass:function(e){var t=a.Module;return e?e.prototype instanceof t?e:e.moduleClass||t:t},_addModuleDefinition:function(e,t,n,i){var a=this._getDefine(n),s=this._getStartWithParent(n,t);a&&t.addDefinition(a,i),this._addStartWithParent(e,t,s)},_getStartWithParent:function(e,t){var i;return n.isFunction(e)&&e.prototype instanceof a.Module?(i=t.constructor.prototype.startWithParent,n.isUndefined(i)?!0:i):n.isObject(e)?(i=e.startWithParent,n.isUndefined(i)?!0:i):!0},_getDefine:function(e){return!n.isFunction(e)||e.prototype instanceof a.Module?n.isObject(e)?e.define:null:e},_addStartWithParent:function(e,t,n){t.startWithParent=t.startWithParent&&n,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)}))}}),a})(this,t,e);return t.Marionette}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("handlebars",[],t):"object"==typeof exports?exports.Handlebars=t():e.Handlebars=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(){var e=new r.HandlebarsEnvironment;return m.extend(e,r),e.SafeString=c["default"],e.Exception=u["default"],e.Utils=m,e.escapeExpression=m.escapeExpression,e.VM=f,e.template=function(t){return f.template(t,e)},e}var a=n(1)["default"],s=n(2)["default"];t.__esModule=!0;var o=n(3),r=a(o),l=n(17),c=s(l),d=n(5),u=s(d),h=n(4),m=a(h),p=n(18),f=a(p),g=n(19),v=s(g),b=i();b.create=i,v["default"](b),b["default"]=b,t["default"]=b,e.exports=t["default"]},function(e,t){"use strict";t["default"]=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t},t.__esModule=!0},function(e,t){"use strict";t["default"]=function(e){return e&&e.__esModule?e:{"default":e}},t.__esModule=!0},function(e,t,n){"use strict";function i(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},l.registerDefaultHelpers(this),c.registerDefaultDecorators(this)}var a=n(2)["default"];t.__esModule=!0,t.HandlebarsEnvironment=i;var s=n(4),o=n(5),r=a(o),l=n(6),c=n(14),d=n(16),u=a(d),h="4.0.5";t.VERSION=h;var m=7;t.COMPILER_REVISION=m;var p={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};t.REVISION_CHANGES=p;var f="[object Object]";i.prototype={constructor:i,logger:u["default"],log:u["default"].log,registerHelper:function(e,t){if(s.toString.call(e)===f){if(t)throw new r["default"]("Arg not supported with multiple helpers");s.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(s.toString.call(e)===f)s.extend(this.partials,e);else{if(void 0===t)throw new r["default"]('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(s.toString.call(e)===f){if(t)throw new r["default"]("Arg not supported with multiple decorators");s.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]}};var g=u["default"].log;t.log=g,t.createFrame=s.createFrame,t.logger=u["default"]},function(e,t){"use strict";function n(e){return d[e]}function i(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}function a(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1}function s(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return h.test(e)?e.replace(u,n):e}function o(e){return e||0===e?f(e)&&0===e.length?!0:!1:!0}function r(e){var t=i({},e);return t._parent=e,t}function l(e,t){return e.path=t,e}function c(e,t){return(e?e+".":"")+t}t.__esModule=!0,t.extend=i,t.indexOf=a,t.escapeExpression=s,t.isEmpty=o,t.createFrame=r,t.blockParams=l,t.appendContextPath=c;var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},u=/[&<>"'`=]/g,h=/[&<>"'`=]/,m=Object.prototype.toString;t.toString=m;var p=function(e){return"function"==typeof e};p(/x/)&&(t.isFunction=p=function(e){return"function"==typeof e&&"[object Function]"===m.call(e)}),t.isFunction=p;var f=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===m.call(e):!1};t.isArray=f},function(e,t){"use strict";function n(e,t){var a=t&&t.loc,s=void 0,o=void 0;a&&(s=a.start.line,o=a.start.column,e+=" - "+s+":"+o);for(var r=Error.prototype.constructor.call(this,e),l=0;i.length>l;l++)this[i[l]]=r[i[l]];Error.captureStackTrace&&Error.captureStackTrace(this,n),a&&(this.lineNumber=s,this.column=o)}t.__esModule=!0;var i=["description","fileName","lineNumber","message","name","number","stack"];n.prototype=Error(),t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){o["default"](e),l["default"](e),d["default"](e),h["default"](e),p["default"](e),g["default"](e),b["default"](e)}var a=n(2)["default"];t.__esModule=!0,t.registerDefaultHelpers=i;var s=n(7),o=a(s),r=n(8),l=a(r),c=n(9),d=a(c),u=n(10),h=a(u),m=n(11),p=a(m),f=n(12),g=a(f),v=n(13),b=a(v)},function(e,t,n){"use strict";t.__esModule=!0;var i=n(4);t["default"]=function(e){e.registerHelper("blockHelperMissing",function(t,n){var a=n.inverse,s=n.fn;if(t===!0)return s(this);if(t===!1||null==t)return a(this);if(i.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):a(this);if(n.data&&n.ids){var o=i.createFrame(n.data);o.contextPath=i.appendContextPath(n.data.contextPath,n.name),n={data:o}}return s(t,n)})},e.exports=t["default"]},function(e,t,n){"use strict";var i=n(2)["default"];t.__esModule=!0;var a=n(4),s=n(5),o=i(s);t["default"]=function(e){e.registerHelper("each",function(e,t){function n(t,n,s){c&&(c.key=t,c.index=n,c.first=0===n,c.last=!!s,d&&(c.contextPath=d+t)),l+=i(e[t],{data:c,blockParams:a.blockParams([e[t],t],[d+t,null])})}if(!t)throw new o["default"]("Must pass iterator to #each");var i=t.fn,s=t.inverse,r=0,l="",c=void 0,d=void 0;if(t.data&&t.ids&&(d=a.appendContextPath(t.data.contextPath,t.ids[0])+"."),a.isFunction(e)&&(e=e.call(this)),t.data&&(c=a.createFrame(t.data)),e&&"object"==typeof e)if(a.isArray(e))for(var u=e.length;u>r;r++)r in e&&n(r,r,r===e.length-1);else{var h=void 0;for(var m in e)e.hasOwnProperty(m)&&(void 0!==h&&n(h,r-1),h=m,r++);void 0!==h&&n(h,r-1,!0)}return 0===r&&(l=s(this)),l})},e.exports=t["default"]},function(e,t,n){"use strict";var i=n(2)["default"];t.__esModule=!0;var a=n(5),s=i(a);t["default"]=function(e){e.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new s["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var i=n(4);t["default"]=function(e){e.registerHelper("if",function(e,t){return i.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||i.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e){e.registerHelper("log",function(){for(var t=[void 0],n=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)t.push(arguments[i]);var a=1;null!=n.hash.level?a=n.hash.level:n.data&&null!=n.data.level&&(a=n.data.level),t[0]=a,e.log.apply(e,t)})},e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e){e.registerHelper("lookup",function(e,t){return e&&e[t]})},e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var i=n(4);t["default"]=function(e){e.registerHelper("with",function(e,t){i.isFunction(e)&&(e=e.call(this));var n=t.fn;if(i.isEmpty(e))return t.inverse(this);var a=t.data;return t.data&&t.ids&&(a=i.createFrame(t.data),a.contextPath=i.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:a,blockParams:i.blockParams([e],[a&&a.contextPath])})})},e.exports=t["default"]},function(e,t,n){"use strict";function i(e){o["default"](e)}var a=n(2)["default"];t.__esModule=!0,t.registerDefaultDecorators=i;var s=n(15),o=a(s)},function(e,t,n){"use strict";t.__esModule=!0;var i=n(4);t["default"]=function(e){e.registerDecorator("inline",function(e,t,n,a){var s=e;return t.partials||(t.partials={},s=function(a,s){var o=n.partials;n.partials=i.extend({},o,t.partials);var r=e(a,s);return n.partials=o,r}),t.partials[a.args[0]]=a.fn,s})},e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var i=n(4),a={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=i.indexOf(a.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=a.lookupLevel(e),"undefined"!=typeof console&&a.lookupLevel(a.level)<=e){var t=a.methodMap[e];console[t]||(t="log");for(var n=arguments.length,i=Array(n>1?n-1:0),s=1;n>s;s++)i[s-1]=arguments[s];console[t].apply(console,i)}}};t["default"]=a,e.exports=t["default"]},function(e,t){"use strict";function n(e){this.string=e}t.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){var t=e&&e[0]||1,n=v.COMPILER_REVISION;if(t!==n){if(n>t){var i=v.REVISION_CHANGES[n],a=v.REVISION_CHANGES[t];throw new g["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+a+").")}throw new g["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function a(e,t){function n(n,i,a){a.hash&&(i=p.extend({},i,a.hash),a.ids&&(a.ids[0]=!0)),n=t.VM.resolvePartial.call(this,n,i,a);var s=t.VM.invokePartial.call(this,n,i,a);if(null==s&&t.compile&&(a.partials[a.name]=t.compile(n,e.compilerOptions,t),s=a.partials[a.name](i,a)),null!=s){if(a.indent){for(var o=s.split("\n"),r=0,l=o.length;l>r&&(o[r]||r+1!==l);r++)o[r]=a.indent+o[r];s=o.join("\n")}return s}throw new g["default"]("The partial "+a.name+" could not be compiled when running in runtime-only mode")}function i(t){function n(t){return""+e.main(a,t,a.helpers,a.partials,o,l,r)}var s=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=s.data;i._setup(s),!s.partial&&e.useData&&(o=c(t,o));var r=void 0,l=e.useBlockParams?[]:void 0;return e.useDepths&&(r=s.depths?t!==s.depths[0]?[t].concat(s.depths):s.depths:[t]),(n=d(e.main,n,a,s.depths||[],o,l))(t,s)}if(!t)throw new g["default"]("No environment passed to template");if(!e||!e.main)throw new g["default"]("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var a={strict:function(e,t){if(!(t in e))throw new g["default"]('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var n=e.length,i=0;n>i;i++)if(e[i]&&null!=e[i][t])return e[i][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:p.escapeExpression,invokePartial:n,fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,i,a){var o=this.programs[e],r=this.fn(e);return t||a||i||n?o=s(this,e,r,t,n,i,a):o||(o=this.programs[e]=s(this,e,r)),o},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=p.extend({},t,e)),n},noop:t.VM.noop,compilerInfo:e.compiler};return i.isTop=!0,i._setup=function(n){n.partial?(a.helpers=n.helpers,a.partials=n.partials,a.decorators=n.decorators):(a.helpers=a.merge(n.helpers,t.helpers),e.usePartial&&(a.partials=a.merge(n.partials,t.partials)),(e.usePartial||e.useDecorators)&&(a.decorators=a.merge(n.decorators,t.decorators)))},i._child=function(t,n,i,o){if(e.useBlockParams&&!i)throw new g["default"]("must pass block params");if(e.useDepths&&!o)throw new g["default"]("must pass parent depths");return s(a,t,e[t],n,0,i,o)},i}function s(e,t,n,i,a,s,o){function r(t){var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=o;return o&&t!==o[0]&&(r=[t].concat(o)),n(e,t,e.helpers,e.partials,a.data||i,s&&[a.blockParams].concat(s),r)}return r=d(n,r,e,o,i,s),r.program=t,r.depth=o?o.length:0,r.blockParams=a||0,r}function o(e,t,n){return e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name],e}function r(e,t,n){n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var i=void 0;if(n.fn&&n.fn!==l&&(n.data=v.createFrame(n.data),i=n.data["partial-block"]=n.fn,i.partials&&(n.partials=p.extend({},n.partials,i.partials))),void 0===e&&i&&(e=i),void 0===e)throw new g["default"]("The partial "+n.name+" could not be found");return e instanceof Function?e(t,n):void 0}function l(){return""}function c(e,t){return t&&"root"in t||(t=t?v.createFrame(t):{},t.root=e),t}function d(e,t,n,i,a,s){if(e.decorator){var o={};t=e.decorator(t,o,n,i&&i[0],a,s,i),p.extend(t,o)}return t}var u=n(1)["default"],h=n(2)["default"];t.__esModule=!0,t.checkRevision=i,t.template=a,t.wrapProgram=s,t.resolvePartial=o,t.invokePartial=r,t.noop=l;var m=n(4),p=u(m),f=n(5),g=h(f),v=n(3)},function(e,t){(function(n){"use strict";t.__esModule=!0,t["default"]=function(e){var t=void 0!==n?n:window,i=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=i),e}},e.exports=t["default"]}).call(t,function(){return this}())}])}),define("handlebars.partials",["handlebars"],function(e){e.registerPartial("activityFooterDefaultActions",e.template({1:function(){return'<span class="icon-lock icon-tiny spacing-right-small"></span>\n'},3:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"1 Comment",{name:"gettext",hash:{},data:a}))+"\n"},5:function(e,t,n,i,a){var s;return e.escapeExpression(n.gettext.call(null!=t?t:{},"%(countOf)s Comments",{name:"gettext",hash:{countOf:null!=(s=null!=t?t.thread:t)?s.posts:s},data:a}))+"\n"},7:function(e,t,n,i,a){var s;return'<li class="action">\n'+(null!=(s=n["if"].call(null!=t?t:{},null!=t?t.favorited:t,{name:"if",hash:{},fn:e.program(8,a,0),inverse:e.program(10,a,0),data:a}))?s:"")+"</li>\n"},8:function(e,t,n,i,a){return'<a class="action-favorite active" href="#" data-action="favorite">'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Recommended",{name:"gettext",hash:{},data:a}))+' <span class="icon icon-heart"></span></a>\n'},10:function(e,t,n,i,a){return'<a class="action-favorite" href="#" data-action="favorite">'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Recommend",{name:"gettext",hash:{},data:a}))+' <span class="icon icon-heart"></span></a>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression,l=null!=t?t:{};return'<li class="action">\n<a class="action-comments"\nhref="'+r(o(null!=t?t.discussionRoute:t,t))+'"\ndata-link-name="comment_count"\ndata-thread-id="'+r(o(null!=(s=null!=t?t.thread:t)?s.id:s,t))+'">\n'+(null!=(s=n["if"].call(l,null!=(s=null!=t?t.thread:t)?s.isClosed:s,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+"\n"+(null!=(s=n["if"].call(l,n.eq.call(l,null!=(s=null!=t?t.thread:t)?s.posts:s,1,{name:"eq",hash:{},data:a}),{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.program(5,a,0),data:a}))?s:"")+'<span class="icon icon-comment"></span>\n</a>\n</li>\n'+(null!=(s=n["if"].call(l,null!=t?t.authenticated:t,{name:"if",hash:{},fn:e.program(7,a,0),inverse:e.noop,data:a}))?s:"")},useData:!0})),e.registerPartial("badges",e.template({1:function(e,t,n,i,a){return'<span class="badge -warning -inline">\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Marked as Spam",{name:"gettext",hash:{},data:a}))+"\n</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<span data-role="badges">\n'+(null!=(s=n.if_all.call(null!=t?t:{},null!=t?t.isSpam:t,null!=t?t.isAuthor:t,{name:"if_all",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+"</span>\n"},useData:!0})),e.registerPartial("boostTimeRemaining",e.template({1:function(e,t,n,i,a){var s=null!=t?t:{};return e.escapeExpression(n.gettext.call(s,"Boost ends in %(relativeTime)s",{name:"gettext",hash:{relativeTime:n.getPartial.call(s,"timeSelector",{name:"getPartial",hash:{},data:a})},data:a}))+"\n"},3:function(e,t,n,i,a){return'<span data-action="choose-boost-time" class="link">\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Boost ends %(relativeTime)s",{name:"gettext",hash:{relativeTime:null!=t?t.boostTimeRemaining:t},data:a}))+"\n</span>\n"},5:function(e,t,n,i,a){return'<span title="Remove Boost" class="link pull-right" data-action="unboost">\n<span class="icon icon-arrow"></span>\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Remove Boost",{name:"gettext",hash:{},data:a}))+"\n</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<span class="icon icon-megaphone"></span>\n'+(null!=(s=n["if"].call(o,null!=t?t.showBoostTimeSelector:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+(null!=(s=n["if"].call(o,null!=t?t.showUnboost:t,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a}))?s:"")},useData:!0})),e.registerPartial("cardContentImage",e.template({1:function(e,t){var n,i=e.lambda,a=e.escapeExpression;return'<a href="'+a(i(null!=(n=null!=t?t.thread:t)?n.link:n,t))+'"\nclass="card-content__media"\ndata-link-name="image"\ndata-link-out="'+a(i(null!=(n=null!=t?t.thread:t)?n.signedLink:n,t))+'"\ndata-thread-id="'+a(i(null!=(n=null!=t?t.thread:t)?n.id:n,t))+'">\n<div style="background-image: url('+a(i(null!=(n=null!=t?t.image:t)?n.src:n,t))+')" class="img-cards"></div>\n</a>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.image:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:""},useData:!0})),e.registerPartial("cardReasonDisqusPicks",e.template({1:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="card__reason link-inner-gray-dark">\n<span class="icon-heart icon__position -inline text-smaller text-gray-light"></span>\n'+o(n.gettext.call(s,"%(disqusTeamLink)s recommended",{name:"gettext",hash:{disqusTeamLink:n.tag.call(s,"a",{name:"tag",hash:{text:n.gettext.call(s,"%(disqus)s Team",{name:"gettext",hash:{disqus:"Disqus"},data:a}),"class":"text-semibold","data-channel-slug":"disquspicks","data-link-name":"forum_name",href:"/home/channel/disquspicks/"},data:a})},data:a}))+'\n\n<time class="bullet text-gray">'+o(e.lambda(null!=t?t.relativeTime:t,t))+"</time>\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.isBestOfDisqus:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:""},useData:!0})),e.registerPartial("cardReasonForum",e.template({1:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<a class="spacing-right align__item"\nhref="/home/channel/'+r(o(null!=(s=null!=t?t.channel:t)?s.slug:s,t))+'/"\ndata-link-name="forum_avatar"\ndata-forum-pk="'+r(o(null!=t?t.pk:t,t))+'">\n'+(null!=(s=n["if"].call(null!=t?t:{},null!=t?t.channelAvatar:t,{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.program(4,a,0),data:a}))?s:"")+"</a>\n"},2:function(e,t,n,i,a){var s;return'<img class="img-round-sm block__item" src="'+e.escapeExpression(e.lambda(null!=t?t.channelAvatar:t,t))+'" alt="'+(null!=(s=e.invokePartial(i.forumName,t,{name:"forumName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'">\n'},4:function(e,t){var n=e.lambda,i=e.escapeExpression;return'<div class="channel-avatar '+i(n(null!=t?t.bannerColorClass:t,t))+'">\n<p class="channel-avatar__name">'+i(n(null!=t?t.channelInitial:t,t))+"</p>\n</div>\n"},6:function(e,t,n,i,a){var s;return null!=(s=n["with"].call(null!=t?t:{},null!=(s=null!=t?t.thread:t)?s.forum:s,{name:"with",hash:{},fn:e.program(7,a,0),inverse:e.noop,data:a}))?s:""},7:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<a class="spacing-right align__item"\nhref="/home/forum/'+r(o(null!=t?t.id:t,t))+'/"\ndata-link-name="forum_avatar"\ndata-forum-pk="'+r(o(null!=t?t.pk:t,t))+'">\n<img src="'+r(o(null!=t?t.faviconImage:t,t))+'" alt="'+(null!=(s=e.invokePartial(i.forumName,t,{name:"forumName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'" class="img-round-sm block__item" />\n</a>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<div class="card__reason align align--middle">\n'+(null!=(s=n["if"].call(null!=t?t:{},null!=t?t.channel:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(6,a,0),data:a}))?s:"")+'<div class="align__item">\n<strong>'+(null!=(s=e.invokePartial(i.forumLink,null!=(s=null!=t?t.thread:t)?s.forum:s,{name:"forumLink",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</strong>\n</div>\n"+(null!=(s=e.invokePartial(i.badges,t,{name:"badges",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n"},usePartial:!0,useData:!0})),e.registerPartial("cardTitle",e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<div class="card-title">\n<h2 class="discussion-title">\n<a href="'+r(o(null!=(s=null!=t?t.thread:t)?s.link:s,t))+'"\nclass="link-gray-darker"\ndata-role="thread-link"\ndata-link-out="'+r(o(null!=(s=null!=t?t.thread:t)?s.signedLink:s,t))+'"\ndata-link-name="title"\ndata-thread-id="'+r(o(null!=(s=null!=t?t.thread:t)?s.id:s,t))+'">\n\n'+r(o(null!=(s=null!=t?t.thread:t)?s.clean_title:s,t))+'\n</a>\n</h2>\non\n<a href="/home/'+r(o(null!=(s=null!=(s=null!=t?t.thread:t)?s.forum:s)?s.forumRoute:s,t))+'"\nclass="link-gray-darker discussion-community"\ndata-link-name="forum_name"\ndata-forum-pk="'+r(o(null!=(s=null!=(s=null!=t?t.thread:t)?s.forum:s)?s.pk:s,t))+'">\n\n'+(null!=(s=e.invokePartial(i.forumName,null!=(s=null!=t?t.thread:t)?s.forum:s,{name:"forumName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</a>\n</div>\n"},usePartial:!0,useData:!0})),e.registerPartial("cardTitleInlineName",e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<span class="card-title-inline-name">\n<a href="/home/'+r(o(null!=(s=null!=(s=null!=t?t.thread:t)?s.forum:s)?s.forumRoute:s,t))+'"\nclass="discussion-community"\ndata-link-name="forum_name"\ndata-forum-pk="'+r(o(null!=(s=null!=(s=null!=t?t.thread:t)?s.forum:s)?s.pk:s,t))+'">\n'+(null!=(s=e.invokePartial(i.forumName,null!=(s=null!=t?t.thread:t)?s.forum:s,{name:"forumName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</a>\n</span>\n"},usePartial:!0,useData:!0})),e.registerPartial("cards",e.template({compiler:[7,">= 4.0.0"],main:function(){return"cards here\n"},useData:!0})),e.registerPartial("channelAvatar",e.template({1:function(e,t){var n,i=e.lambda,a=e.escapeExpression;return'<img class="favicon" src="'+a(i(null!=(n=null!=t?t.options:t)?n.favicon:n,t))+'" alt="'+a(i(null!=t?t.name:t,t))+'"/>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<a class="discussion-origin-name" href="/home/channel/'+e.escapeExpression(e.lambda(null!=t?t.slug:t,t))+'/">\n'+(null!=(s=n["if"].call(null!=t?t:{},null!=(s=null!=t?t.options:t)?s.favicon:s,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+"</a>\n"},useData:!0})),e.registerPartial("channelAvatarWithDefault",e.template({1:function(e,t,n,i,a){var s;return'<img class="forum-favicon" src="'+e.escapeExpression(e.lambda(null!=t?t.channelAvatar:t,t))+'" alt="'+(null!=(s=e.invokePartial(i.forumName,t,{name:"forumName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'">\n'},3:function(e,t,n,i,a){var s;return null!=(s=e.invokePartial(i.defaultChannelAvatar,t,{name:"defaultChannelAvatar",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:""},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.channelAvatar:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:""},usePartial:!0,useData:!0})),e.registerPartial("channelAwareForumLink",e.template({1:function(e,t,n,i,a){var s;return null!=(s=e.invokePartial(i.channelLink,null!=t?t.channelInfo:t,{name:"channelLink",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:""},3:function(e,t,n,i,a){var s;return null!=(s=e.invokePartial(i.forumLink,t,{name:"forumLink",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:""},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.channelInfo:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:""},usePartial:!0,useData:!0})),e.registerPartial("channelAwareForumName",e.template({1:function(e,t){var n;return e.escapeExpression(e.lambda(null!=(n=null!=t?t.channelInfo:t)?n.name:n,t))+"\n"},3:function(e,t,n,i,a){var s;return null!=(s=e.invokePartial(i.forumName,t,{name:"forumName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:""},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.channelInfo:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:""},usePartial:!0,useData:!0})),e.registerPartial("channelCardContent",e.template({1:function(){return" has-image"},3:function(){return" hidden-md"},5:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.forumFriendlyUrl:t,{name:"if",hash:{},fn:e.program(6,a,0),inverse:e.noop,data:a}))?s:""},6:function(e,t){var n,i=e.lambda,a=e.escapeExpression;return'<p class="spacing-narrow text-smaller">\n<a href="'+a(i(null!=(n=null!=t?t.thread:t)?n.link:n,t))+'"\ndata-link-out="'+a(i(null!=(n=null!=t?t.thread:t)?n.signedLink:n,t))+'"\nclass="link-gray"\ndata-link-name="external_thread"\ndata-thread-id="'+a(i(null!=(n=null!=t?t.thread:t)?n.id:n,t))+'">\n\n<span class="icon icon-communities icon__position -inline icon-tiny"></span>\n'+a(i(null!=t?t.forumFriendlyUrl:t,t))+"\n</a>\n</p>\n"},8:function(){return'<div class="card__additional">\n<div class="card-comment-band" data-role="posts"></div>\n</div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<div class="card__content -default'+(null!=(s=n["if"].call(o,null!=t?t.image:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'">\n'+(null!=(s=e.invokePartial(i.cardContentImage,t,{name:"cardContentImage",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<div class="card-content__body">\n<div class="card-content__topics">\n<div data-role="topics"></div>\n</div>\n'+(null!=(s=e.invokePartial(i.threadTitle,t,{name:"threadTitle",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<div class="card-content__summary'+(null!=(s=n["if"].call(o,null!=t?t.recentPostCount:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+'">\n<div class="truncate" data-truncate-lines="3" dir="auto">\n'+e.escapeExpression(e.lambda(null!=t?t.threadDescription:t,t))+"\n</div>\n</div>\n"+(null!=(s=n.unless.call(o,null!=t?t.channel:t,{name:"unless",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a}))?s:"")+'</div>\n</div>\n<div class="card__footer text-small" data-role="footer"></div>\n'+(null!=(s=n["if"].call(o,null!=t?t.recentPostCount:t,{name:"if",hash:{},fn:e.program(8,a,0),inverse:e.noop,data:a}))?s:"")},usePartial:!0,useData:!0})),e.registerPartial("channelCardMenu",e.template({1:function(){return" open"},3:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<li>\n<a href="#" class="dropdown--follow-lnk'+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.thread:t)?s.userSubscription:s,{name:"if",hash:{},fn:e.program(4,a,0),inverse:e.noop,data:a}))?s:"")+'"\ndata-action="menuitem-click" data-menu-item="toggle-subscription">\n<span class="text-default">'+r(n.gettext.call(o,"Subscribe to discussion",{name:"gettext",hash:{},data:a}))+'</span>\n<span class="text-following">'+r(n.gettext.call(o,"Unsubscribe from discussion",{name:"gettext",hash:{},data:a}))+"</span>\n</a>\n</li>\n"+(null!=(s=n["if"].call(o,null!=t?t.isBestOfDisqus:t,{name:"if",hash:{},fn:e.program(6,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=n["if"].call(o,null!=t?t.canModerate:t,{name:"if",hash:{},fn:e.program(8,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=n["if"].call(o,null!=t?t.canEdit:t,{name:"if",hash:{},fn:e.program(13,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=n["if"].call(o,null!=t?t.canDelete:t,{name:"if",hash:{},fn:e.program(15,a,0),inverse:e.noop,data:a}))?s:"")},4:function(){return" active"},6:function(e,t,n,i,a){return'<li>\n<a href="#" class="dropdown--follow-lnk" data-action="menuitem-click"\ndata-menu-item="toggle-follow-targetchannel">\n<span class="text-default">'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Unfollow %(disqus)s Team Picks",{name:"gettext",hash:{disqus:"Disqus"},data:a}))+"</span>\n</a>\n</li>\n"},8:function(e,t,n,i,a){var s;return'<li>\n<a href="#" class="dropdown--follow-lnk"\ndata-action="menuitem-click" data-menu-item="mark-spam">\n'+(null!=(s=n["if"].call(null!=t?t:{},null!=t?t.isSpam:t,{name:"if",hash:{},fn:e.program(9,a,0),inverse:e.program(11,a,0),data:a}))?s:"")+"</a>\n</li>\n"},9:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Discussion isn't spam",{name:"gettext",hash:{},data:a}))+"\n"},11:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Mark discussion as spam",{name:"gettext",hash:{},data:a}))+"\n"},13:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<li>\n<a href="/home/edit/'+r(o(null!=(s=null!=(s=null!=t?t.thread:t)?s.forum:s)?s.id:s,t))+"/"+r(o(null!=(s=null!=t?t.thread:t)?s.slug:s,t))+'/" class="dropdown--follow-lnk">\n'+r(n.gettext.call(null!=t?t:{},"Edit discussion",{name:"gettext",hash:{},data:a}))+"\n</a>\n</li>\n"},15:function(e,t,n,i,a){return'<li>\n<a href="#" class="dropdown--follow-lnk text-error" data-action="menuitem-click"\ndata-menu-item="delete-thread">\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Delete discussion",{name:"gettext",hash:{},data:a}))+"\n</a>\n</li>\n"},17:function(e,t,n,i,a){return'<li>\n<a href="#" class="dropdown--follow-lnk" data-action="menuitem-click"\ndata-menu-item="restore-thread">\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Undo delete",{name:"gettext",hash:{},data:a}))+"\n</a>\n</li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<div class="card__subnav pull-right dropdown'+(null!=(s=n["if"].call(o,null!=t?t.menuOpen:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'" data-role="menu">\n<a href="#" class="dropdown-toggle link-gray-light" data-toggle="dropdown">\n<span class="icon icon-show-more text-small"></span>\n</a>\n<ul class="dropdown-menu dropdown--card-actions" role="menu" aria-labeledby="drop-discover">\n'+(null!=(s=n.unless.call(o,null!=(s=null!=t?t.thread:t)?s.isDeleted:s,{name:"unless",hash:{},fn:e.program(3,a,0),inverse:e.program(17,a,0),data:a}))?s:"")+"</ul>\n</div>\n"},useData:!0})),e.registerPartial("channelCoverLogo",e.template({
1:function(e,t){var n;return'<div class="channel-cover__logo">\n<img src="'+e.escapeExpression(e.lambda(null!=(n=null!=(n=null!=t?t.options:t)?n.titleLogo:n)?n.cache:n,t))+'" class="img-responsive block__item" />\n</div>\n'},3:function(e,t){return'<h1 class="channel-cover__heading">'+e.escapeExpression(e.lambda(null!=t?t.name:t,t))+"</h1>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=(s=null!=t?t.options:t)?s.titleLogo:s,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:""},useData:!0})),e.registerPartial("channelLink",e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<a href="/home/channel/'+r(o(null!=t?t.slug:t,t))+'/"\nclass="link-community"\ndata-link-name="channel_name"\ndata-channel-slug="'+r(o(null!=t?t.slug:t,t))+'">\n\n'+(null!=(s=e.invokePartial(i.forumName,t,{name:"forumName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</a>\n"},usePartial:!0,useData:!0})),e.registerPartial("channelMetadataStats",e.template({1:function(e,t,n,i,a){var s;return'<div class="channel-stat__item -following">\n'+(null!=(s=e.invokePartial(i.genericFollowButton,t,{name:"genericFollowButton",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression,l=null!=t?t:{};return'<div class="channel-stat__item">\n<span class="text-semibold" data-role="discussion-count">'+r(o(null!=t?t.numThreads:t,t))+'</span>\n<small class="channel-stat__subtext">\n'+r(n.gettext.call(l,"Discussions",{name:"gettext",hash:{},data:a}))+'\n</small>\n</div>\n<div class="channel-stat__item">\n<span class="text-semibold" data-role="followers-count">'+r(o(null!=t?t.numFollowers:t,t))+'</span>\n<small class="channel-stat__subtext">\n'+r(n.gettext.call(l,"Followers",{name:"gettext",hash:{},data:a}))+"\n</small>\n</div>\n"+(null!=(s=n.unless.call(l,null!=(s=null!=t?t.channel:t)?s.isAggregation:s,{name:"unless",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")},usePartial:!0,useData:!0})),e.registerPartial("channelRules",e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<strong>tl;dr</strong>\n<ol class="list-num spacing-bottom">\n<li>'+o(n.gettext.call(s,"Follow the %(basicRules)s",{name:"gettext",hash:{basicRules:n.tag.call(s,"a",{name:"tag",hash:{text:"Basic Rules",href:"https://help.disqus.com/customer/en/portal/articles/1753105"},data:a})},data:a}))+"</li>\n<li>"+o(n.gettext.call(s,"Make It Specific",{name:"gettext",hash:{},data:a}))+"</li>\n<li>"+o(n.gettext.call(s,"No Spam",{name:"gettext",hash:{},data:a}))+"</li>\n<li>"+o(n.gettext.call(s,"No Hateful Topics",{name:"gettext",hash:{},data:a}))+"</li>\n<li>"+o(n.gettext.call(s,"Keep It Clean (And Legal)",{name:"gettext",hash:{},data:a}))+"</li>\n</ol>\n\n<p><strong>"+o(n.gettext.call(s,"Follow the Basic Rules",{name:"gettext",hash:{},data:a}))+"</strong></p>\n<p>"+o(n.gettext.call(s,"As a channel moderator, you are expected to enforce the %(basicRules)s in your community. If not followed, this can result in your channel being banned.",{name:"gettext",hash:{basicRules:n.tag.call(s,"a",{name:"tag",hash:{text:"Basic Rules",href:"https://help.disqus.com/customer/en/portal/articles/1753105"},data:a})},data:a}))+"</p>\n\n<p><strong>"+o(n.gettext.call(s,"Make It Specific",{name:"gettext",hash:{},data:a}))+"</strong></p>\n<p>"+o(n.gettext.call(s,"Choosing a specific topic will make it easier for others to join, and for you to keep people on topic once they start creating their own discussions on your channel.",{name:"gettext",hash:{},data:a}))+"</p>\n\n<p><strong>"+o(n.gettext.call(s,"No Spam",{name:"gettext",hash:{},data:a}))+"</strong></p>\n<p>"+o(n.gettext.call(s,"Channels are a place for discussion, not for selling or promoting websites, products, events or petitions.",{name:"gettext",hash:{},data:a}))+"</p>\n\n<p><strong>"+o(n.gettext.call(s,"No Hateful Topics",{name:"gettext",hash:{},data:a}))+"</strong></p>\n<p>"+o(n.gettext.call(s,"Channels created with the sole purpose of promoting sexist, racist, misogynist, homophobic, or generally offensive content are simply not allowed.",{name:"gettext",hash:{},data:a}))+"</p>\n\n<p><strong>"+o(n.gettext.call(s,"Keep It Clean (And Legal)",{name:"gettext",hash:{},data:a}))+"</strong></p>\n<p>"+o(n.gettext.call(s,"Explicit material and illegal content are not permitted. Channels supporting this type of content will be banned.",{name:"gettext",hash:{},data:a}))+"</p>"},useData:!0})),e.registerPartial("channelsModuleHeader",e.template({1:function(e,t){return e.escapeExpression(e.lambda(null!=t?t.moduleTitle:t,t))+"\n"},3:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Channels on %(disqus)s",{name:"gettext",hash:{disqus:"Disqus"},data:a}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<a href="/home/explore/" class="link-gray-darker">\n<div class="module-header__icon icon-colorful">\n<svg class="icon-discover" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 18 18" enable-background="new 0 0 18 18" xml:space="preserve" width="26" height="26"><rect x="14" width="4" height="4" class="dot"/><rect x="14" y="7" width="4" height="4" class="dot"/><rect x="14" y="14" width="4" height="4" class="dot"/><rect x="7" width="4" height="4" class="dot"/><rect x="7" y="7" width="4" height="4" class="dot"/><rect x="7" y="14" width="4" height="4" class="dot"/><rect width="4" height="4" class="dot"/><rect y="7" width="4" height="4" class="dot"/><rect y="14" width="4" height="4" class="dot"/></g></svg>\n</div>\n<div class="module-header__title">\n<h2 class="module-header__heading">\n'+(null!=(s=n["if"].call(null!=t?t:{},null!=t?t.moduleTitle:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+"</h2>\n</div>\n</a>\n"},useData:!0})),e.registerPartial("channelsModuleMoreFooter",e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){return'<footer class="module-footer">\n<a href="/home/explore/" class="nav-lnk -color-muted -flushed">\n<div class="nav-lnk__blk">'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Explore More Channels",{name:"gettext",hash:{},data:a}))+'</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</footer>\n'},useData:!0})),e.registerPartial("defaultChannelAvatar",e.template({compiler:[7,">= 4.0.0"],main:function(e,t){var n=e.lambda,i=e.escapeExpression;return'<div class="channel-avatar '+i(n(null!=t?t.bannerColorClass:t,t))+'">\n<p class="channel-avatar__name">'+i(n(null!=t?t.channelInitial:t,t))+"</p>\n</div>\n"},useData:!0})),e.registerPartial("defaultForumAvatar",e.template({compiler:[7,">= 4.0.0"],main:function(e,t){var n=e.lambda,i=e.escapeExpression;return'<a href="/home/forum/'+i(n(null!=t?t.id:t,t))+'/"\nclass="avatar"\ndata-link-name="forum_avatar"\ndata-forum-pk="'+i(n(null!=t?t.pk:t,t))+'">\n\n<svg class="art-forum-blank" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 50 50" enable-background="new 0 0 50 50" xml:space="preserve"><path d="M22.9 38c5.9 0 10.6-4.9 10.6-11s-4.8-11-10.6-11 s-10.6 4.9-10.6 11c0 1.6 0.3 3.2 1 4.6L11.5 36l4.5-0.6C17.9 37 20.3 38 22.9 38z" class="style0"/><path d="M31.2 29c-4.8 0-8.7-4-8.7-9s3.9-9 8.7-9s8.7 4 8.7 9 c0 1.3-0.3 2.6-0.8 3.7l1.4 3.7l-3.7-0.5C35.3 28.2 33.3 29 31.2 29z" class="style1"/></svg>\n</a>\n'},useData:!0})),e.registerPartial("discussionModerationActions",e.template({1:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression,l=e.lambda;return'<div class="align module__wrapper--moderation">\n<div class="link--moderation dropdown" data-role="menu">\n<button class="link-gray-dark text-medium" data-toggle="dropdown">\n<span class="block__item icon-cog"></span>\n<strong>'+r(n.gettext.call(o,"Moderate",{name:"gettext",hash:{},data:a}))+'</strong>\n</button>\n<ul class="dropdown-menu dropdown--cards dropdown--moderation-action" role="menu" aria-labeledby="drop-blacklist">\n<li>\n<a href="#" class="link text-semibold" data-action="blacklist-forum">\n'+r(n.gettext.call(o,"Ban %(author)s on %(forum)s",{name:"gettext",hash:{forum:null!=(s=null!=(s=null!=t?t.thread:t)?s.forum:s)?s.name:s,author:null!=(s=null!=(s=null!=t?t.thread:t)?s.author:s)?s.name:s},data:a}))+"\n</a>\n</li>\n"+(null!=(s=n["if"].call(o,null!=t?t.isGlobalAdmin:t,{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.noop,data:a}))?s:"")+'<li>\n<a href="#" class="link text-semibold '+(null!=(s=n["if"].call(o,null!=t?t.isSpam:t,{name:"if",hash:{},fn:e.program(7,a,0),inverse:e.noop,data:a}))?s:"")+'" data-action="mark-spam" data-role="spam-alert">\n<span class="spam-hidden">'+r(n.gettext.call(o,"Discussion isn't spam",{name:"gettext",hash:{},data:a}))+'</span>\n<span class="spam-visible">'+r(n.gettext.call(o,"Mark discussion as spam",{name:"gettext",hash:{},data:a}))+'</span>\n</a>\n</li>\n<li>\n<a href="https://'+r(l(null!=(s=null!=(s=null!=t?t.channel:t)?s.primaryForum:s)?s.id:s,t))+".disqus.com/admin/moderate/#/approved/search/thread:"+r(l(null!=(s=null!=t?t.thread:t)?s.id:s,t))+'" data-action="moderate-thread" class="link text-semibold">'+r(n.gettext.call(o,"Moderate comments",{name:"gettext",hash:{},data:a}))+"</a>\n</li>\n</ul>\n</div>\n"+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.thread:t)?s.isClosed:s,{name:"if",hash:{},fn:e.program(9,a,0),inverse:e.program(11,a,0),data:a}))?s:"")+'<a href="#" data-action="delete-thread" class="link--moderation link-gray-dark text-medium">\n<span class="icon icon-trash"></span>\n'+r(n.gettext.call(o,"Delete",{name:"gettext",hash:{},data:a}))+"\n</a>\n</div>\n"},2:function(e,t,n,i,a){var s;return'<li>\n<a href="#" class="link text-semibold" data-action="blacklist-global">\n'+(null!=(s=n["if"].call(null!=t?t:{},null!=(s=null!=(s=null!=t?t.thread:t)?s.author:s)?s.isOnGlobalBlacklist:s,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.program(5,a,0),data:a}))?s:"")+"</a>\n</li>\n"},3:function(e,t,n,i,a){var s;return e.escapeExpression(n.gettext.call(null!=t?t:{},"Remove ban on %(author)s across %(Disqus)s",{name:"gettext",hash:{Disqus:"Disqus",author:null!=(s=null!=(s=null!=t?t.thread:t)?s.author:s)?s.name:s},data:a}))+"\n"},5:function(e,t,n,i,a){var s;return e.escapeExpression(n.gettext.call(null!=t?t:{},"Ban %(author)s across %(Disqus)s",{name:"gettext",hash:{Disqus:"Disqus",author:null!=(s=null!=(s=null!=t?t.thread:t)?s.author:s)?s.name:s},data:a}))+"\n"},7:function(){return"is-spam"},9:function(e,t,n,i,a){return'<a href="#" data-action="open-thread" class="link--moderation link-gray-dark text-medium">\n<span class="icon icon-open"></span>\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Open Thread",{name:"gettext",hash:{},data:a}))+"\n</a>\n"},11:function(e,t,n,i,a){return'<a href="#" data-action="close-thread" class="link--moderation link-gray-dark text-medium">\n<span class="icon icon-close"></span>\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Close Thread",{name:"gettext",hash:{},data:a}))+"\n</a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.canModerate:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:""},useData:!0})),e.registerPartial("forumAvatar",e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<img class="forum-favicon" src="'+e.escapeExpression(e.lambda(null!=t?t.faviconImage:t,t))+'" alt="'+(null!=(s=e.invokePartial(i.forumName,t,{name:"forumName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'">\n'},usePartial:!0,useData:!0})),e.registerPartial("forumAvatarLink",e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<a href="/home/forum/'+r(o(null!=t?t.id:t,t))+'/"\nclass="avatar"\ndata-link-name="forum_avatar"\ndata-forum-pk="'+r(o(null!=t?t.pk:t,t))+'">\n\n'+(null!=(s=e.invokePartial(i.forumAvatar,t,{name:"forumAvatar",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</a>\n"},usePartial:!0,useData:!0})),e.registerPartial("forumLink",e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<a href="/home/forum/'+r(o(null!=t?t.id:t,t))+'/"\nclass="link-community"\ndata-link-name="forum_name"\ndata-forum-pk="'+r(o(null!=t?t.pk:t,t))+'">\n\n'+(null!=(s=e.invokePartial(i.forumName,t,{name:"forumName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</a>\n"},usePartial:!0,useData:!0})),e.registerPartial("forumName",e.template({1:function(e,t){return e.escapeExpression(e.lambda(null!=t?t.name:t,t))},3:function(e,t){return e.escapeExpression(e.lambda(null!=t?t.id:t,t))},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.name:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:""},useData:!0})),e.registerPartial("homeFooter",e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<strong>The web’s community of communities</strong>\n<span class="bullet">Disqus &copy; '+o(n.now.call(s,"YYYY",{name:"now",hash:{},data:a}))+'</span>\n<br />\n<a href="/company/" class="link-gray">'+o(n.gettext.call(s,"Company",{name:"gettext",hash:{},data:a}))+'</a>\n<span class="bullet"></span>\n<a href="/jobs/" class="link-gray">'+o(n.gettext.call(s,"Jobs",{name:"gettext",hash:{},data:a}))+'</a>\n<span class="bullet"></span>\n<a href="//help.disqus.com/" class="link-gray">'+o(n.gettext.call(s,"Help",{name:"gettext",hash:{},data:a}))+'</a>\n<span class="bullet"></span>\n<a href="//help.disqus.com/customer/portal/articles/466260-terms-of-service" class="link-gray">'+o(n.gettext.call(s,"Terms",{name:"gettext",hash:{},data:a}))+'</a>\n<span class="bullet"></span>\n<a href="//help.disqus.com/customer/portal/articles/466259-privacy-policy" class="link-gray">'+o(n.gettext.call(s,"Privacy",{name:"gettext",hash:{},data:a}))+'</a>\n<br />\n<a href="https://disqus.com/admin/create" class="link-gray">'+o(n.gettext.call(s,"Add Disqus to your site",{name:"gettext",hash:{},data:a}))+"</a>\n"},useData:!0})),e.registerPartial("homeRules",e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<p class="spacing-bottom">The following are not allowed on Disqus:</p>\n\n<ol class="list-num spacing-bottom">\n<li>'+o(n.gettext.call(s,"Targeted harassment or encouraging others to do so",{name:"gettext",hash:{},data:a}))+"</li>\n<li>"+o(n.gettext.call(s,"Spam",{name:"gettext",hash:{},data:a}))+"</li>\n<li>"+o(n.gettext.call(s,"Impersonation",{name:"gettext",hash:{},data:a}))+"</li>\n<li>"+o(n.gettext.call(s,"Direct threat of harm",{name:"gettext",hash:{},data:a}))+"</li>\n<li>"+o(n.gettext.call(s,"Posting personally identifiable information",{name:"gettext",hash:{},data:a}))+"</li>\n<li>"+o(n.gettext.call(s,"Inappropriate profile content",{name:"gettext",hash:{},data:a}))+"</li>\n</ol>\n\n<p><strong>"+o(n.gettext.call(s,"Targeted harassment or encouraging others to do so",{name:"gettext",hash:{},data:a}))+'</strong></p>\n<p class="spacing-bottom">'+o(n.gettext.call(s,"The targeted and systematic harassment of people has no place on Disqus, nor do we tolerate communities dedicated to fostering harassing behavior.",{name:"gettext",hash:{},data:a}))+"</p>\n\n<p><strong>"+o(n.gettext.call(s,"Spam",{name:"gettext",hash:{},data:a}))+'</strong></p>\n<p class="spacing-bottom">'+o(n.gettext.call(s,"Examples include 1) comments posted in large quantities to promote a product or service, 2) the exact same comment posted repeatedly to disrupt a thread. 3) following users multiple times",{name:"gettext",hash:{},data:a}))+"</p>\n\n<p><strong>"+o(n.gettext.call(s,"Impersonation",{name:"gettext",hash:{},data:a}))+'</strong></p>\n<p class="spacing-bottom">'+o(n.gettext.call(s,"You may not impersonate others in a manner that does or is intended to mislead, confuse, or deceive others.",{name:"gettext",hash:{},data:a}))+"</p>\n\n<p><strong>"+o(n.gettext.call(s,"Direct threat of harm",{name:"gettext",hash:{},data:a}))+'</strong></p>\n<p class="spacing-bottom">'+o(n.gettext.call(s,"This covers active threats of harm directed towards a specific person or defined group of individuals. Contact local authorities if you feel a crime has been committed or is imminent.",{name:"gettext",hash:{},data:a}))+"</p>\n\n<p><strong>"+o(n.gettext.call(s,"Posting personally identifiable information",{name:"gettext",hash:{},data:a}))+'</strong></p>\n<p class="spacing-bottom">'+o(n.gettext.call(s,"Examples of protected information: credit card number, home/work address, phone number, email address, social security number. Real name isn't currently covered.",{name:"gettext",hash:{},data:a}))+"</p>\n\n<p><strong>"+o(n.gettext.call(s,"Inappropriate profile content",{name:"gettext",hash:{},data:a}))+'</strong></p>\n<p class="spacing-bottom">'+o(n.gettext.call(s,"Graphic media containing violence and pornographic content are not allowed. Profile content allowed by Disqus may not be allowed on all communitie, so report such profiles to the site moderator.",{name:"gettext",hash:{},data:a}))+'</p>\n\n<p class="spacing-bottom">'+o(n.gettext.call(s,"Read the %(basicRules)s.",{name:"gettext",hash:{basicRules:n.tag.call(s,"a",{name:"tag",hash:{text:"Basic Rules",href:"https://help.disqus.com/customer/en/portal/articles/1753105"},data:a})},data:a}))+"</p>\n"},useData:!0})),e.registerPartial("navLogo",e.template({1:function(e,t,n,i,a){var s=e.escapeExpression;return'<img class="site-nav__logo"\nsrc="'+s(n.urlfor.call(null!=t?t:{},"cdn",{name:"urlfor",hash:{},data:a}))+'/img/disqus-logo-dev.svg"\nalt="Disqus" />\n<div class="site-nav__logo__debug">'+s(e.lambda(null!=t?t.customBase:t,t))+"</div>\n"},3:function(){return'<img class="site-nav__logo"\nsrc="//c.disquscdn.com/dotcom/d-9c2c241/img/brand/disqus-logo-blue-white.svg"\nalt="Disqus" />\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<a href="/">\n'+(null!=(s=n["if"].call(null!=t?t:{},null!=t?t.customBase:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+"</a>\n"},useData:!0})),e.registerPartial("navUserIcon",e.template({compiler:[7,">= 4.0.0"],main:function(e,t){var n,i=e.lambda,a=e.escapeExpression;return'<a href="/by/'+a(i(null!=t?t.username:t,t))+'/" class="nav__lnk" data-page-icon="/by/'+a(i(null!=t?t.username:t,t))+'/">\n<img src="'+a(i(null!=(n=null!=t?t.avatar:t)?n.cache:n,t))+'" alt="'+a(i(null!=t?t.username:t,t))+'" class="site-nav__avatar">\n</a>\n'},useData:!0})),e.registerPartial("onboardingBanner",e.template({1:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Email verified!",{name:"gettext",hash:{},data:a}))+"\n"},3:function(e,t,n,i,a){var s;return'<div class="onboard-banner__text-follow">\n<div class="text-larger text-bold">\n'+(null!=(s=e.invokePartial(i.onboardingBannerInstructions,t,{name:"onboardingBannerInstructions",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</div>\n<div class="spacing-top-narrow">\n'+(null!=(s=n["if"].call(null!=t?t:{},null!=t?t.canSkip:t,{name:"if",hash:{},fn:e.program(4,a,0),inverse:e.program(6,a,0),data:a}))?s:"")+"</div>\n</div>\n"},4:function(e,t,n,i,a){var s=null!=t?t:{};return e.escapeExpression(n.gettext.call(s,"There's a channel for anything you're into. Or you can %(skip)s.",{name:"gettext",hash:{skip:n.tag.call(s,"a",{name:"tag",hash:{text:n.gettext.call(s,"skip",{name:"gettext",hash:{},data:a}),"class":"link-inverted text-semibold","data-action":"skip-onboarding",href:"/home/"},data:a})},data:a}))+"\n"},6:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"There's a channel for anything you're into.",{name:"gettext",hash:{},data:a}))+"\n"},8:function(e,t,n,i,a){return'<div class="text-larger text-bold">\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"You're set!",{name:"gettext",hash:{},data:a}))+"\n</div>\n"},10:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<div class="hidden-md">\n<div class="onboard-banner__bubble text-large text-semibold">\n'+(null!=(s=n["if"].call(o,n.eq.call(o,null!=t?t.numTotalSteps:t,1,{name:"eq",hash:{},data:a}),{name:"if",hash:{},fn:e.program(11,a,0),inverse:e.program(13,a,0),data:a}))?s:"")+'</div>\n<img class="onboard-banner__pam" src="'+e.escapeExpression(n.urlfor.call(o,"cdn",{name:"urlfor",hash:{},data:a}))+'/img/pam.png" />\n</div>\n'},11:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"1 more!",{name:"gettext",hash:{},data:a}))+"\n"},13:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"%(numRemaining)s more!",{name:"gettext",hash:{numRemaining:null!=t?t.numRemainingSteps:t},data:a}))+"\n"},15:function(e,t,n,i,a){return'<button data-action="finish" class="button button-outline button-large button-padding-wider -border-light">\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Continue",{name:"gettext",hash:{},data:a}))+" &raquo;\n</button>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<div class="section-contained-narrow align align--between align--stretch">\n<div class="onboard-banner__body align align--column align--center">\n<div class="onboard-banner__text-welcome text-larger text-bold">\n'+(null!=(s=n["if"].call(o,null!=t?t.emailVerified:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+e.escapeExpression(n.gettext.call(o,"Welcome to %(Disqus)s, %(name)s!",{name:"gettext",hash:{name:null!=(s=null!=t?t.sessionUser:t)?s.name:s,Disqus:"Disqus"},data:a}))+"\n</div>\n"+(null!=(s=n["if"].call(o,null!=t?t.numRemainingSteps:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.program(8,a,0),data:a}))?s:"")+'</div>\n<div class="onboard-banner__media align align--column align--center relative__wrapper">\n'+(null!=(s=n["if"].call(o,null!=t?t.numRemainingSteps:t,{name:"if",hash:{},fn:e.program(10,a,0),inverse:e.program(15,a,0),data:a}))?s:"")+"</div>\n</div>\n"},usePartial:!0,useData:!0})),e.registerPartial("onboardingBannerInstructions",e.template({1:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Follow 1 channel to get started",{name:"gettext",hash:{},data:a}))+"\n"},3:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Follow %(numTotal)s channels to get started",{name:"gettext",hash:{numTotal:null!=t?t.numTotalSteps:t},data:a}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return null!=(s=n["if"].call(o,n.eq.call(o,null!=t?t.numTotalSteps:t,1,{name:"eq",hash:{},data:a}),{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:""},useData:!0})),e.registerPartial("profileCardReason",e.template({1:function(e,t,n,i,a){var s,o=null!=t?t:{};return e.escapeExpression(n.gettext.call(o,"Discussion on %(forum)s",{name:"gettext",hash:{forum:n.getPartial.call(o,"channelLink",null!=(s=null!=(s=null!=t?t.thread:t)?s.forum:s)?s.channelInfo:s,{name:"getPartial",hash:{},data:a})},data:a}))+"\n"},3:function(e,t,n,i,a){var s,o=null!=t?t:{};return e.escapeExpression(n.gettext.call(o,"Discussion on %(forum)s",{name:"gettext",hash:{forum:n.getPartial.call(o,"forumLink",null!=(s=null!=t?t.thread:t)?s.forum:s,{name:"getPartial",hash:{},data:a})},data:a}))+"\n"},5:function(){return'<span class="icon-lock icon-tiny spacing-right-small text-gray"></span>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.lambda,l=e.escapeExpression;return'<div class="card-reason">\n'+(null!=(s=n["if"].call(o,null!=(s=null!=(s=null!=t?t.thread:t)?s.forum:s)?s.channelInfo:s,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+'<a href="'+l(r(null!=t?t.discussionRoute:t,t))+'"\nclass="bullet link-discussion"\ndata-link-name="comment_count"\ndata-thread-id="'+l(r(null!=(s=null!=t?t.thread:t)?s.id:s,t))+'">\n'+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.thread:t)?s.isClosed:s,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a}))?s:"")+"\n"+(null!=(s=r(null!=(s=null!=t?t.thread:t)?s.posts:s,t))?s:"")+" comments\n</a>\n"+(null!=(s=e.invokePartial(i.badges,t,{name:"badges",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n"},usePartial:!0,useData:!0})),e.registerPartial("profileCoverAttributes",e.template({1:function(e,t,n,i,a){return'<a href="#" class="profile-cover-allstar" data-action="show-allstar-modal">\n<span class="allstar__label">\n<span class="icon-star allstar__icon -inverted icon__position -inline icon-small"></span>'+e.escapeExpression(n.gettext.call(null!=t?t:{},"All-Star",{name:"gettext",hash:{},data:a}))+"\n</span>\n</a>\n"},3:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<div class="profile-user-info">\n'+(null!=(s=n["if"].call(o,null!=t?t.about:t,{name:"if",hash:{},fn:e.program(4,a,0),inverse:e.noop,data:a}))?s:"")+'<ul class="profile-cover-list">\n'+(null!=(s=n["if"].call(o,null!=t?t.numLikesReceived:t,{name:"if",hash:{},fn:e.program(6,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=n["if"].call(o,null!=t?t.location:t,{name:"if",hash:{},fn:e.program(8,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=n["if"].call(o,null!=t?t.url:t,{name:"if",hash:{},fn:e.program(10,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=n["if"].call(o,null!=t?t.joinDate:t,{name:"if",hash:{},fn:e.program(12,a,0),inverse:e.noop,data:a}))?s:"")+"</ul>\n</div>\n"},4:function(e,t){var n=e.lambda,i=e.escapeExpression;return'<div class="text-medium profile-cover-about">\n<div class="truncate" data-truncate-lines="'+i(n(null!=t?t.numLines:t,t))+'">\n'+i(n(null!=t?t.about:t,t))+"\n</div>\n</div>\n"},6:function(e,t,n,i,a){var s=null!=t?t:{};return'<li class="truncate-line text-small">\n<span class="icon-arrow-up text-smaller icon__position -inline"></span>\n'+e.escapeExpression(n.gettext.call(s,"%(upvoteCount)s Upvotes",{name:"gettext",hash:{upvoteCount:n.tag.call(s,"strong",{name:"tag",hash:{text:null!=t?t.numLikesReceived:t},data:a})},data:a}))+"\n</li>\n"},8:function(e,t){return'<li class="truncate-line text-small hidden-cover">\n<span class="icon-location text-smaller icon__position -inline"></span>\n'+e.escapeExpression(e.lambda(null!=t?t.location:t,t))+"\n</li>\n"},10:function(e,t){var n=e.lambda,i=e.escapeExpression;return'<li class="truncate-line text-small">\n<span class="icon-link text-smaller icon__position -inline"></span>\n<a href="'+i(n(null!=t?t.url:t,t))+'" data-link-out="'+i(n(null!=t?t.signedUrl:t,t))+'" target="_blank" rel="noreferrer nofollow noopener">'+i(n(null!=t?t.url:t,t))+"</a>\n</li>\n"},12:function(e,t,n,i,a){return'<li class="truncate-line text-small">\n<span class="icon-clock text-smaller icon__position -inline"></span>\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Joined %(joinedAt)s",{name:"gettext",hash:{joinedAt:null!=t?t.joinDate:t},data:a}))+"\n</li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<p class="text-large text-gray profile-cover-username">\n@'+e.escapeExpression(e.lambda(null!=t?t.username:t,t))+"\n</p>\n"+(null!=(s=n["if"].call(o,null!=t?t.isPowerContributor:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=n.unless.call(o,null!=t?t.isBlocked:t,{name:"unless",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")},useData:!0})),e.registerPartial("profileCoverDropdown",e.template({1:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<li>\n<a href="#" class="dropdown__link" disabled>\n<div class="dropdown-cover-profile__title">\n<span class="text-medium icon-flag media-middle"></span>\n<strong>'+o(n.gettext.call(s,"Report User",{name:"gettext",hash:{},data:a}))+'</strong>\n</div>\n<p class="spacing-narrow">\n'+o(n.gettext.call(s,"You have reported this person to Disqus. We will take action against their account if they have violated our policies. Furthermore, you can block this person to stop seeing their comments.",{name:"gettext",hash:{},data:a}))+"\n</p>\n</a>\n</li>\n"},3:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<li>\n<a href="#" data-action="prompt-report-user" class="dropdown__link">\n<div class="dropdown-cover-profile__title">\n<span class="text-medium icon-flag media-middle"></span>\n<strong>'+o(n.gettext.call(s,"Report User",{name:"gettext",hash:{},data:a}))+'</strong>\n</div>\n<p class="spacing-narrow">\n'+o(n.gettext.call(s,"Report this user to Disqus for review. If they've been found to violate our policies their account will be removed.",{name:"gettext",hash:{},data:a}))+"\n</p>\n</a>\n</li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<span class="dropdown">\n<button class="button dropdown-toggle text-medium icon__rotate--right" data-toggle="dropdown">\n<span class="icon icon-show-more"></span>\n</button>\n<ul class="dropdown-menu dropdown-cover-profile">\n<li>\n<a href="#" data-action="block-user" class="dropdown__link border-bottom">\n<div class="dropdown-cover-profile__title">\n<span class="icon-small icon-cancel media-middle spacing-right-small"></span>\n<strong>'+r(n.gettext.call(o,"Block User",{name:"gettext",hash:{},data:a}))+'</strong>\n</div>\n<p class="spacing-narrow">\n'+r(n.gettext.call(o,"Never see this user again. None of their activity and comments will appear in any of your Disqus content, feeds, or notifications.",{name:"gettext",hash:{},data:a}))+"\n</p>\n</a>\n</li>\n"+(null!=(s=n["if"].call(o,null!=t?t.isFlagged:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+"</ul>\n</span>\n"},useData:!0})),e.registerPartial("replyOrEditLink",e.template({1:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<a href="'+r(o(null!=t?t.discussionRoute:t,t))+"#edit-"+r(o(null!=t?t.id:t,t))+'"\nclass="edit link-gray"\ndata-link-name="edit"\ndata-thread-id="'+r(o(null!=(s=null!=t?t.thread:t)?s.id:s,t))+'">\n\n'+r(n.gettext.call(null!=t?t:{},"Edit",{name:"gettext",hash:{},data:a}))+"\n</a>\n"},3:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.isLoggedIn:t,{name:"if",hash:{},fn:e.program(4,a,0),inverse:e.noop,data:a}))?s:""},4:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=(s=null!=t?t.thread:t)?s.isClosed:s,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.program(7,a,0),data:a}))?s:""},5:function(e,t,n,i,a){return'<a class="reply-disabled link-gray">\n<span class="icon icon-lock icon-tiny spacing-right-small text-gray"></span>\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Reply",{name:"gettext",hash:{},data:a}))+"\n</a>\n"},7:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<a href="'+r(o(null!=t?t.discussionRoute:t,t))+"#reply-"+r(o(null!=t?t.id:t,t))+'"\ndata-action="reply"\nclass="reply link-gray"\ndata-link-name="reply"\ndata-thread-id="'+r(o(null!=(s=null!=t?t.thread:t)?s.id:s,t))+'">\n\n'+r(n.gettext.call(null!=t?t:{},"Reply",{name:"gettext",hash:{},data:a}))+"\n</a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.wasAuthoredBySessionUser:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:""},useData:!0})),e.registerPartial("settingsAccountSocialLink",e.template({1:function(e,t,n,i,a){var s=null!=t?t:{};return e.escapeExpression(n.gettext.call(s,"Connected as %(displayName)s",{name:"gettext",hash:{displayName:n.tag.call(s,"a",{name:"tag",hash:{text:null!=t?t.display_name:t,target:"_blank",href:null!=t?t.url:t},data:a})},data:a}))+"\n"},3:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Connected as %(displayName)s",{name:"gettext",hash:{displayName:null!=t?t.display_name:t},data:a}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.url:t,{name:"if",hash:{},fn:e.program(1,a,0),
inverse:e.program(3,a,0),data:a}))?s:""},useData:!0})),e.registerPartial("spamActions",e.template({1:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.authorPendingSpamReview:t,{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.program(4,a,0),data:a}))?s:""},2:function(){return'<span class="text-small text-semibold">Thanks, we\'ll work on getting this corrected.</span>\n'},4:function(){return'<a href="#" class="text-small text-semibold spacing-left-small" data-action="request-spam-review">This isn\'t spam &raquo;</a>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<spam data-role="spam-actions">\n'+(null!=(s=n.if_all.call(null!=t?t:{},null!=t?t.isAuthor:t,null!=t?t.isSpam:t,{name:"if_all",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+"</spam>\n"},useData:!0})),e.registerPartial("strongTag",e.template({compiler:[7,">= 4.0.0"],main:function(e,t){return"<strong>"+e.escapeExpression(e.lambda(t,t))+"</strong>"},useData:!0})),e.registerPartial("threadImage",e.template({1:function(e,t){var n,i=e.lambda,a=e.escapeExpression;return'<a href="'+a(i(null!=(n=null!=t?t.thread:t)?n.link:n,t))+'"\nclass="discussion-image"\ndata-link-name="image"\ndata-link-out="'+a(i(null!=(n=null!=t?t.thread:t)?n.signedLink:n,t))+'"\ndata-thread-id="'+a(i(null!=(n=null!=t?t.thread:t)?n.id:n,t))+'">\n\n<img src="'+a(i(null!=(n=null!=t?t.image:t)?n.src:n,t))+'" alt="'+a(i(null!=(n=null!=t?t.image:t)?n.title:n,t))+'">\n</a>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.image:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:""},useData:!0})),e.registerPartial("threadLink",e.template({compiler:[7,">= 4.0.0"],main:function(e,t){var n,i=e.lambda,a=e.escapeExpression;return'<a href="'+a(i(null!=(n=null!=t?t.thread:t)?n.signedLink:n,t))+'"\nclass="name-thread"\ndata-role="article-link"\ndata-link-out="'+a(i(null!=(n=null!=t?t.thread:t)?n.signedLink:n,t))+'"\ndata-link-name="title"\ndata-thread-id="'+a(i(null!=(n=null!=t?t.thread:t)?n.id:n,t))+'">\n\n'+a(i(null!=(n=null!=t?t.thread:t)?n.clean_title:n,t))+"\n</a>\n"},useData:!0})),e.registerPartial("threadPostActivity",e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression,r=e.lambda;return'<div class="discussion-activity align align--between">\n<div data-role="thread-actions"></div>\n<div class="discussion-activity__nav">\n<a href="#" class="dropdown-toggle visible-md text-medium text-semibold link-gray" data-toggle="dropdown">\n<span data-action="switch-tab" data-tab="best" class="dropdown-toggle__selection">\n'+o(n.gettext.call(s,"Sort by Best",{name:"gettext",hash:{},data:a}))+'\n</span>\n<span data-action="switch-tab" data-tab="newest" class="dropdown-toggle__selection">\n'+o(n.gettext.call(s,"Sort by Newest",{name:"gettext",hash:{},data:a}))+'\n</span>\n<span data-action="switch-tab" data-tab="oldest" class="dropdown-toggle__selection">\n'+o(n.gettext.call(s,"Sort by Oldest",{name:"gettext",hash:{},data:a}))+'\n</span>\n<span class="icon-arrow icon__position -caret"></span>\n</a>\n<ul class="nav--discussion">\n<li data-action="switch-tab" data-tab="best" class="nav__item">\n<a href="'+o(r(null!=t?t.discussionRoute:t,t))+'best/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="button__text">'+o(n.gettext.call(s,"Best",{name:"gettext",hash:{},data:a}))+'</span>\n</div>\n<div class="nav-lnk__checkmark">\n<span class="icon icon-checkmark icon__position text-smaller"></span>\n</div>\n</a>\n</li>\n<li data-action="switch-tab" data-tab="newest" class="nav__item">\n<a href="'+o(r(null!=t?t.discussionRoute:t,t))+'newest/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="button__text">'+o(n.gettext.call(s,"Newest",{name:"gettext",hash:{},data:a}))+'</span>\n</div>\n<div class="nav-lnk__checkmark">\n<span class="icon icon-checkmark icon__position text-smaller"></span>\n</div>\n</a>\n</li>\n<li data-action="switch-tab" data-tab="oldest" class="nav__item">\n<a href="'+o(r(null!=t?t.discussionRoute:t,t))+'oldest/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="button__text">'+o(n.gettext.call(s,"Oldest",{name:"gettext",hash:{},data:a}))+'</span>\n</div>\n<div class="nav-lnk__checkmark">\n<span class="icon icon-checkmark icon__position text-smaller"></span>\n</div>\n</a>\n</li>\n</ul>\n</div>\n</div>\n'},useData:!0})),e.registerPartial("threadTitle",e.template({1:function(e,t){var n;return e.escapeExpression(e.lambda(null!=(n=null!=t?t.threadOverrides:t)?n.title:n,t))+"\n"},3:function(e,t){var n;return e.escapeExpression(e.lambda(null!=(n=null!=t?t.thread:t)?n.clean_title:n,t))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<h2 class="discussion-title" dir="auto">\n<a href="'+r(o(null!=(s=null!=t?t.thread:t)?s.link:s,t))+'"\nclass="link-gray-darker truncate"\ndata-truncate-lines="'+r(o(null!=t?t.numTitleLines:t,t))+'"\ndata-role="thread-link"\ndata-link-out="'+r(o(null!=(s=null!=t?t.thread:t)?s.signedLink:s,t))+'"\ndata-link-name="title"\ndata-thread-id="'+r(o(null!=(s=null!=t?t.thread:t)?s.id:s,t))+'">\n\n'+(null!=(s=n["if"].call(null!=t?t:{},null!=(s=null!=t?t.threadOverrides:t)?s.title:s,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+"</a>\n</h2>\n"},useData:!0})),e.registerPartial("timeSelector",e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<select name="time">\n<option></option>\n<option value="3600">'+o(n.gettext.call(s,"1 hour",{name:"gettext",hash:{},data:a}))+'</option>\n<option value="10800">'+o(n.gettext.call(s,"3 hours",{name:"gettext",hash:{},data:a}))+'</option>\n<option value="21600">'+o(n.gettext.call(s,"6 hours",{name:"gettext",hash:{},data:a}))+'</option>\n<option value="43200">'+o(n.gettext.call(s,"12 hours",{name:"gettext",hash:{},data:a}))+'</option>\n<option value="86400">'+o(n.gettext.call(s,"1 day",{name:"gettext",hash:{},data:a}))+'</option>\n<option value="259200">'+o(n.gettext.call(s,"3 days",{name:"gettext",hash:{},data:a}))+'</option>\n<option value="432000">'+o(n.gettext.call(s,"5 days",{name:"gettext",hash:{},data:a}))+'</option>\n<option value="604800">'+o(n.gettext.call(s,"1 week",{name:"gettext",hash:{},data:a}))+'</option>\n<option value="1209600">'+o(n.gettext.call(s,"2 weeks",{name:"gettext",hash:{},data:a}))+"</option>\n</select>\n"},useData:!0})),e.registerPartial("topicTag",e.template({1:function(e,t){return e.escapeExpression(e.lambda(null!=t?t.topicRoute:t,t))},3:function(){return"#"},5:function(){return'data-action="remove-tag"'},7:function(){return'<span class="icon icon-cancel"></span>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<a href="'+(null!=(s=n["if"].call(o,null!=t?t.topicRoute:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+'" '+(null!=(s=n.unless.call(o,null!=t?t.topicRoute:t,{name:"unless",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a}))?s:"")+'\nclass="button--tag">\n'+e.escapeExpression(e.lambda(null!=t?t.displayName:t,t))+"\n"+(null!=(s=n.unless.call(o,null!=t?t.topicRoute:t,{name:"unless",hash:{},fn:e.program(7,a,0),inverse:e.noop,data:a}))?s:"")+"</a>\n"},useData:!0})),e.registerPartial("userAvatar",e.template({1:function(e,t,n,i,a){var s;return'<a href="/by/'+e.escapeExpression(e.lambda(null!=t?t.username:t,t))+'/" class="avatar" data-link-name="user_avatar">\n'+(null!=(s=e.invokePartial(i.userAvatarNoLink,t,{name:"userAvatarNoLink",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</a>\n"},3:function(e,t,n,i,a){var s;return'<span class="avatar">\n'+(null!=(s=e.invokePartial(i.userAvatarNoLink,t,{name:"userAvatarNoLink",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.username:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:""},usePartial:!0,useData:!0})),e.registerPartial("userAvatarNoLink",e.template({compiler:[7,">= 4.0.0"],main:function(e,t){var n,i=e.lambda,a=e.escapeExpression;return'<img src="'+a(i(null!=(n=null!=t?t.avatar:t)?n.cache:n,t))+'" alt="'+a(i(null!=t?t.displayName:t,t))+'">\n'},useData:!0})),e.registerPartial("userCardBody",e.template({1:function(e,t){return'<p class="description truncate-line text-medium">'+e.escapeExpression(e.lambda(null!=t?t.about:t,t))+"</p>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return(null!=(s=e.invokePartial(i.userAvatar,t,{name:"userAvatar",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<div class="user-info">\n'+(null!=(s=e.invokePartial(i.userName,t,{name:"userName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+(null!=(s=n["if"].call(null!=t?t:{},null!=t?t.about:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+"</div>\n"},usePartial:!0,useData:!0})),e.registerPartial("userFollowButton",e.template({1:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.isPrivate:t,{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.program(4,a,0),data:a}))?s:""},2:function(e,t,n,i,a){return'<button class="button button-disabled button-small">\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Private",{name:"gettext",hash:{},data:a}))+'<span class="icon-lock icon-small spacing-left-small"></span>\n</button>\n'},4:function(e,t,n,i,a){var s;return'<span class="btn-follow--mobile">\n'+(null!=(s=e.invokePartial(i.genericFollowButton,t,{name:"genericFollowButton",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return null!=(s=n.unless.call(null!=t?t:{},null!=t?t.isSessionUser:t,{name:"unless",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:""},usePartial:!0,useData:!0})),e.registerPartial("userGroup",e.template({1:function(e,t,n,i,a){var s;return'<span class="actor">\n'+(null!=(s=e.invokePartial(i.userPreview,t,{name:"userPreview",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</span>\n"},3:function(e,t,n,i,a){return'<a href="#" class="actor name link-gray-darker" data-role="actors">\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"%(numUsers)s others",{name:"gettext",hash:{numUsers:null!=t?t.numRemainingActors:t},data:a}))+"\n</a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<span class="actors">\n'+(null!=(s=n.each.call(o,null!=t?t.shownActors:t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=n["if"].call(o,null!=t?t.numRemainingActors:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+"</span>\n"},usePartial:!0,useData:!0})),e.registerPartial("userGroupNames",e.template({1:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<span class="actor-group" data-role="actors">\n'+(null!=(s=n["if"].call(o,n.gt.call(o,null!=t?t.numRemainingActors:t,1,{name:"gt",hash:{},data:a}),{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.program(4,a,0),data:a}))?s:"")+"</span>\n"},2:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"%(numUsers)s others",{name:"gettext",hash:{numUsers:null!=t?t.numRemainingActors:t},data:a}))+"\n"},4:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"1 other",{name:"gettext",hash:{},data:a}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<span class="actors">\n<span class="actor">\n'+(null!=(s=e.invokePartial(i.userName,null!=t?t.firstActor:t,{name:"userName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</span>\n"+(null!=(s=n["if"].call(o,n.gt.call(o,null!=t?t.numRemainingActors:t,0,{name:"gt",hash:{},data:a}),{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+"</span>\n"},usePartial:!0,useData:!0})),e.registerPartial("userName",e.template({1:function(e,t,n,i,a){return'<a href="#"\nclass="tooltipped icon__position -inline -allstar"\ndata-action="show-allstar-modal"\ndata-toggle="tooltip"\ndata-placement="top"\ntitle="'+e.escapeExpression(n.gettext.call(null!=t?t:{},"All-Star",{name:"gettext",hash:{},data:a}))+'"><span class="icon-allstar allstar__icon"></span></a>'},3:function(e,t){var n=e.lambda,i=e.escapeExpression;return'<a href="/by/'+i(n(null!=t?t.username:t,t))+'/" class="name" data-link-name="user_name">'+i(n(null!=t?t.name:t,t))+"</a>\n"},5:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.name:t,{name:"if",hash:{},fn:e.program(6,a,0),inverse:e.program(8,a,0),data:a}))?s:""},6:function(e,t){return e.escapeExpression(e.lambda(null!=t?t.name:t,t))+"\n"},8:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Guest",{name:"gettext",hash:{},data:a}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return(null!=(s=n["if"].call(o,null!=t?t.isPowerContributor:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=n["if"].call(o,null!=t?t.username:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.program(5,a,0),data:a}))?s:"")},useData:!0})),e.registerPartial("userNameNoLink",e.template({1:function(e,t){return e.escapeExpression(e.lambda(null!=t?t.name:t,t))+"\n"},3:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.username:t,{name:"if",hash:{},fn:e.program(4,a,0),inverse:e.program(6,a,0),data:a}))?s:""},4:function(e,t){return e.escapeExpression(e.lambda(null!=t?t.username:t,t))+"\n"},6:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Guest",{name:"gettext",hash:{},data:a}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.name:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:""},useData:!0})),e.registerPartial("userPreview",e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return(null!=(s=e.invokePartial(i.userAvatar,t,{name:"userAvatar",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+(null!=(s=e.invokePartial(i.userName,t,{name:"userName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"\n"},usePartial:!0,useData:!0})),e.registerPartial("userSpan",e.template({compiler:[7,">= 4.0.0"],main:function(e,t){var n=e.lambda,i=e.escapeExpression;return'<span data-username="'+i(n(null!=t?t.username:t,t))+'" data-role="username">'+i(n(null!=t?t.name:t,t))+"</span>\n"},useData:!0})),e.registerPartial("welcomeOverlay",e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div class="onboard-overlay__inner text-center">\n<span class="onboard-overlay__forum">'+(null!=(s=e.invokePartial(i.forumAvatar,null!=t?t.forum:t,{name:"forumAvatar",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</span>\n<div class="text-larger text-semibold spacing-top">\n'+r(n.gettext.call(o,"Welcome to %(Disqus)s from %(Forum)s",{name:"gettext",hash:{Forum:n.getPartial.call(o,"forumName",null!=t?t.forum:t,{name:"getPartial",hash:{},data:a}),Disqus:"Disqus"},data:a}))+'\n</div>\n<div class="onboard-overlay__description text-gray-dark spacing-top-narrow spacing-bottom-large">\n'+r(n.gettext.call(o,"%(Disqus)s is more than comments. We're also about great conversations right here on %(disqusDotCom)s",{name:"gettext",hash:{disqusDotCom:"disqus.com",Disqus:"Disqus"},data:a}))+'\n</div>\n<button class="button button-fill--brand button-large" data-action="hide-welcome">\n'+r(n.gettext.call(o,"Got it! Let's join the fun",{name:"gettext",hash:{},data:a}))+"\n</button>\n</div>\n"},usePartial:!0,useData:!0})),e.registerPartial("cardGuestUpvoterText",e.template({1:function(e,t,n,i,a){return" "+e.escapeExpression(n.gettext.call(null!=t?t:{},"%(guestCount)s Guest Votes",{name:"gettext",hash:{guestCount:null!=t?t.guestCount:t},data:a}))+" "},3:function(e,t,n,i,a){return" "+e.escapeExpression(n.gettext.call(null!=t?t:{},"1 Guest Vote",{name:"gettext",hash:{},data:a}))+" "},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return(null!=(s=n["if"].call(o,n.gt.call(o,null!=t?t.guestCount:t,1,{name:"gt",hash:{},data:a}),{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+"\n"},useData:!0})),e.registerPartial("cardGuestUser",e.template({1:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.lambda,l=e.escapeExpression;return'<li class="user '+(null!=(s=n["if"].call(o,null!=t?t.highlight:t,{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.noop,data:a}))?s:"")+'" data-role="guest">\n<span class="avatar" title="'+l(r(null!=t?t.guestText:t,t))+'">\n<img src="'+l(r(null!=t?t.guestAvatarUrl:t,t))+'" alt="'+l(n.gettext.call(o,"Avatar",{name:"gettext",hash:{},data:a}))+'" />\n</span>\n<span class="username" title="'+l(r(null!=t?t.guestText:t,t))+'">\n'+l(r(null!=t?t.guestText:t,t))+"\n</span>\n</li>\n"},2:function(){return"highlight"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.guestCount:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:""},useData:!0})),e.registerPartial("cardOtherUserText",e.template({1:function(e,t,n,i,a){return" "+e.escapeExpression(n.gettext.call(null!=t?t:{},"%(guestCount)s Others",{name:"gettext",hash:{guestCount:null!=t?t.guestCount:t},data:a}))+" "},3:function(e,t,n,i,a){return" "+e.escapeExpression(n.gettext.call(null!=t?t:{},"1 Other",{name:"gettext",hash:{},data:a}))+" "},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return(null!=(s=n["if"].call(o,n.gt.call(o,null!=t?t.guestCount:t,1,{name:"gt",hash:{},data:a}),{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+"\n"},useData:!0})),e.registerPartial("cardUser",e.template({1:function(){return"highlight"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.lambda,l=e.escapeExpression;return'<li class="user '+(null!=(s=n["if"].call(o,null!=t?t.highlight:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'" data-action="profile" data-username="'+l(r(null!=t?t.username:t,t))+'">\n<a class="avatar" href="'+l(r(null!=t?t.profileUrl:t,t))+'" title="'+l(r(null!=t?t.name:t,t))+'">\n<img src="'+l(r(null!=(s=null!=t?t.avatar:t)?s.cache:s,t))+'" alt="'+l(n.gettext.call(o,"Avatar",{name:"gettext",hash:{},data:a}))+'" />\n</a>\n<a class="username" href="'+l(r(null!=t?t.profileUrl:t,t))+'" title="'+l(r(null!=t?t.name:t,t))+'">\n'+l(r(null!=t?t.name:t,t))+"\n</a>\n</li>\n"},useData:!0})),e.registerPartial("carouselArrowLeft",e.template({compiler:[7,">= 4.0.0"],main:function(){return'<button class="carousel-control carousel-control__previous"><span class="icon icon-right-bracket icon-flipped"></span></button>\n'},useData:!0})),e.registerPartial("carouselArrowRight",e.template({compiler:[7,">= 4.0.0"],main:function(){return'<button class="carousel-control carousel-control__next"><span class="icon icon-right-bracket"></span></button>\n'},useData:!0})),e.registerPartial("channelsHeader",e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="align-inline spacing-top">\n<div class="module-header__icon icon-colorful spacing-right">\n<svg class="icon-discover" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 18 18" enable-background="new 0 0 18 18" xml:space="preserve" width="26" height="26"><rect x="14" width="4" height="4" class="dot"/><rect x="14" y="7" width="4" height="4" class="dot"/><rect x="14" y="14" width="4" height="4" class="dot"/><rect x="7" width="4" height="4" class="dot"/><rect x="7" y="7" width="4" height="4" class="dot"/><rect x="7" y="14" width="4" height="4" class="dot"/><rect width="4" height="4" class="dot"/><rect y="7" width="4" height="4" class="dot"/><rect y="14" width="4" height="4" class="dot"/></g></svg>\n</div>\n<div class="module-header__title">\n<h1 class="text-larger text-darker">'+o(n.gettext.call(s,"Channels",{name:"gettext",hash:{},data:a}))+'</h1>\n</div>\n</div>\n<p class="text-medium text-gray spacing-bottom-narrow">'+o(n.gettext.call(s,"Places to start your own discussions.",{name:"gettext",hash:{},data:a}))+"</p>\n"},useData:!0})),e.registerPartial("genericFollowButton",e.template({1:function(){return" active"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<button class="btn-follow'+(null!=(s=n["if"].call(o,null!=t?t.isFollowing:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'" data-action="toggle-follow">\n<span class="symbol-default"><span class="icon-plus"></span></span><span class="text-default">'+r(n.gettext.call(o,"Follow",{name:"gettext",hash:{},data:a}))+'</span><span class="symbol-following"><span class="icon-checkmark"></span></span><span class="text-following">'+r(n.gettext.call(o,"Following",{name:"gettext",hash:{},data:a}))+"</span>\n</button>\n"},useData:!0}))}),define("core/extensions/helpers/eq",[],function(){"use strict";return function(e,t){return e===t}}),define("core/extensions/helpers/ne",[],function(){"use strict";return function(e,t){return e!==t}}),define("core/extensions/helpers/gt",[],function(){"use strict";return function(e,t){return e>t}}),define("core/extensions/helpers/lt",[],function(){"use strict";return function(e,t){return t>e}}),define("core/extensions/helpers/ge",[],function(){"use strict";return function(e,t){return e>=t}}),define("core/extensions/helpers/le",[],function(){"use strict";return function(e,t){return t>=e}}),define("core/extensions/helpers/typeof",[],function(){"use strict";return function(e,t){return typeof e===t}}),define("core/extensions/helpers/notNull",[],function(){"use strict";return function(e){return null!==e}}),define("core/extensions/helpers/any",[],function(){"use strict";return function(){for(var e=arguments.length,t=0;e-1>t;t++)if(arguments[t])return arguments[t]}}),define("core/extensions/helpers/if_any",[],function(){"use strict";return function(){for(var e=arguments.length,t=arguments[e-1],n=0;e-1>n;n++)if(arguments[n])return t.fn(this);return t.inverse(this)}}),define("core/extensions/helpers/if_all",[],function(){"use strict";return function(){for(var e=arguments.length,t=arguments[e-1],n=0;e-1>n;n++)if(!arguments[n])return t.inverse(this);return t.fn(this)}}),define("core/utils/cookies",["underscore"],function(e){"use strict";var t=window.document,n={create:function(n,i,a){a||(a={});var s=n+"="+i+"; path="+(a.path||"/"),o=a.domain,r=a.expiresIn;if(o&&(s+="; domain=."+o),e.isNumber(r)){var l=new Date((new Date).getTime()+r);s+="; expires="+l.toGMTString()}"https:"===t.location.protocol&&(s+="; secure"),t.cookie=s},read:function(e){for(var n,i=e+"=",a=t.cookie.split(";"),s=0;a.length>s;s++)if(n=a[s].replace(/^\s+/,""),0===n.indexOf(i))return n.substring(i.length);return null},erase:function(t,i){return n.create(t,"",e.extend({},i,{expiresIn:-1}))}};return n}),define("core/utils/fingerprint",[],function(){"use strict";function e(e){e=e||{};var t=e.Math||window.Math,n=e.Date||window.Date;try{var i=(new n).getTimezoneOffset(),a=1,s=window.screen;s&&s.availWidth?a=s.availWidth*s.availHeight+s.colorDepth:s&&s.width&&(a=s.width*s.height);var o=window.document.documentElement,r=o.clientWidth*o.clientHeight;return t.abs(17*i+25*a-r)}catch(l){return 1}}return{get:e}}),define("core/utils/guid",["core/utils/fingerprint"],function(e){"use strict";function t(e){e=e||{};var t=e.Uint32Array||window.Uint32Array,n=e.crypto||window.crypto,i=e.Math||window.Math;try{var a=new t(1);return n.getRandomValues(a),a[0]}catch(s){return i.floor(1e9*i.random())}}function n(){var e=window.performance,t=e&&e.timing;if(!t)return 1e5;var n=t.domainLookupEnd-t.domainLookupStart,i=t.connectEnd-t.connectStart,a=t.responseStart-t.navigationStart;return 11*n+13*i+17*a}function i(i){i=i||{};var a=i.Math||window.Math,s=+(""+(new Date).getTime()).substring(3),o=a.abs(s+n()-e.get()).toString(32);return o+=t(i).toString(32)}return{generate:i}}),define("core/utils/hash",[],function(){"use strict";var e=function(e){var t,n,i,a=0;if(0===e.length)return a;for(t=0,n=e.length;n>t;t++)i=e.charCodeAt(t),a=(a<<5)-a+i,a|=0;return a};return{calculate:e}}),define("core/analytics/identity",["exports","core/utils/cookies","core/utils/guid","core/utils/hash","core/utils/fingerprint"],function(e,t,n,i,a){"use strict";var s=e.ImpressionManager=function(){this.prevImp=t.read(this.COOKIE_NAME),this.setImpressionId(n.generate())};s.prototype.COOKIE_NAME="__jid",s.prototype.TTL=18e5,s.prototype.setImpressionId=function(e){this.impId=e,this.persist()},s.prototype.persist=function(){t.create(this.COOKIE_NAME,this.impId,{expiresIn:this.TTL})},e.impression=new s;var o=e.UniqueManager=function(){var e=t.read(this.COOKIE_NAME)||n.generate();t.create(this.COOKIE_NAME,e,{domain:window.location.host.split(":")[0],expiresIn:this.TTL}),this.value=e};o.prototype.COOKIE_NAME="disqus_unique",o.prototype.TTL=31536e6,o.prototype.isPersistent=function(){return t.read(this.COOKIE_NAME)===this.value},e.unique=new o,e.clientId=function(){var t,n=e.unique;return n.isPersistent()&&(t=n.value),t||""+a.get()},e.getPercentBucketForString=function(e){return Math.abs(i.calculate(e)%100)},e.clientPercent=function(){return e.getPercentBucketForString(e.clientId())}}),define("core/utils/storage",[],function(){"use strict";var e=function(e){var t="_dsqstorage_";try{return e.localStorage.setItem(t,t),e.localStorage.getItem(t),e.localStorage.removeItem(t),!0}catch(n){return!1}}(window),t=function(){var e={};return{getItem:function(t){return e.hasOwnProperty(t)?e[t]:null},setItem:function(t,n){e[t]=n+""},removeItem:function(t){delete e[t]},clear:function(){e={}}}}();return{get:function(e){var t=null;try{return t=this.backend.getItem(e),JSON.parse(t)}catch(n){return t}},set:function(e,t){try{this.backend.setItem(e,JSON.stringify(t))}catch(n){}},remove:function(e){try{this.backend.removeItem(e)}catch(t){}},clear:function(){try{this.backend.clear()}catch(e){}},backend:e?window.localStorage:t,isPersistent:e}}),define("core/utils/auth",["core/utils/cookies"],function(e){"use strict";var t={},n="disqusauth";return t.getFromCookie=function(){var t=(e.read(n)||"").replace(/"/g,"").split("|");!t||t[1]&&t[6]||(t=[],e.erase(n,{}));var i=parseInt(t[6]||"0",10);return{avatarUrl:t[7]?decodeURIComponent(t[7]):void 0,datetimeFormatting:parseInt(t[4],10)?"absolute":"relative",id:i,isModerator:parseInt(t[8],10)>0,staff:!!parseInt(t[2],10),tzOffset:t[5],username:t[1],isAuthenticated:!(!i||"0"===i)}},t}),define("core/switches",["underscore","remote/config","core/analytics/identity","core/utils/storage","core/utils/auth"],function(e,t,n,i,a){"use strict";var s="switch:",o={},r={};return r._getKey=function(e){return s+e},r.disableFeature=function(e){o[e]=!1},r.resetFeature=function(e){o[e]=null},r.forceFeature=function(e){o[e]=!0},r.getSwitchContext=function(e){var n=i.get(this._getKey(e));if(null!==n)return n;var a=o[e];return null!=a?a:(t.lounge&&t.lounge.switches||{})[e]},r.isFeatureActive=function(t,i){var s=r.getSwitchContext(t);if(e.isBoolean(s))return s;if(!s)return!1;var o=a.getFromCookie(),l={percent:n.clientPercent(),user_id:o.id,username:o.username,is_staff:o.staff,is_moderator:o.isModerator},c=e.defaults(i||{},l);return e.any(s,function(t,i){var a=c[i];return/percent$/.test(i)&&e.isNumber(t)?e.isNumber(a)?t>a:e.isString(a)?t>n.getPercentBucketForString(a):!1:e.isArray(t)?e.contains(t,a):t===a})},r}),define("core/extensions/helpers/switch",["core/switches"],function(e){"use strict";return function(t){return e.isFeatureActive(t)}}),define("core/extensions/helpers/partial",["handlebars"],function(e){"use strict";return function(t,n){e.registerPartial(t,n.fn)}}),define("core/extensions/helpers/getPartial",["handlebars"],function(e){"use strict";return function(t,n,i){return void 0===i&&(i=n,n=this,e.Utils.extend(n,i.hash)),new e.SafeString(e.partials[t](n,i))}}),function(e,t){"use strict";"object"==typeof module&&module.exports&&"function"==typeof require?module.exports=t():"function"==typeof define&&"object"==typeof define.amd?define("loglevel",t):e.log=t()}(this,function(){"use strict";function e(e){return typeof console===r?!1:void 0!==console[e]?t(console,e):void 0!==console.log?t(console,"log"):o}function t(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(i){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function n(e,t,n){return function(){typeof console!==r&&(i.call(this,t,n),this[e].apply(this,arguments))}}function i(e,t){for(var n=0;l.length>n;n++){var i=l[n];this[i]=e>n?o:this.methodFactory(i,e,t)}}function a(t){return e(t)||n.apply(this,arguments)}function s(e,t,n){function s(e){var t=(l[e]||"silent").toUpperCase();try{return void(window.localStorage[u]=t)}catch(n){}try{window.document.cookie=encodeURIComponent(u)+"="+t+";"}catch(n){}}function o(){var e;try{e=window.localStorage[u]}catch(t){}if(typeof e===r)try{var n=window.document.cookie,i=n.indexOf(encodeURIComponent(u)+"=");i&&(e=/^([^;]+)/.exec(n.slice(i))[1])}catch(t){}return void 0===d.levels[e]&&(e=void 0),e}var c,d=this,u="loglevel";e&&(u+=":"+e),d.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},d.methodFactory=n||a,d.getLevel=function(){return c},d.setLevel=function(t,n){if("string"==typeof t&&void 0!==d.levels[t.toUpperCase()]&&(t=d.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&d.levels.SILENT>=t))throw"log.setLevel() called with invalid level: "+t;return c=t,n!==!1&&s(t),i.call(d,t,e),typeof console===r&&d.levels.SILENT>t?"No console available for logging":void 0},d.setDefaultLevel=function(e){o()||d.setLevel(e,!1)},d.enableAll=function(e){d.setLevel(d.levels.TRACE,e)},d.disableAll=function(e){d.setLevel(d.levels.SILENT,e)};var h=o();null==h&&(h=null==t?"WARN":t),d.setLevel(h,!1)}var o=function(){},r="undefined",l=["trace","debug","info","warn","error"],c=new s,d={};c.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=d[e];return t||(t=d[e]=new s(e,c.getLevel(),c.methodFactory)),t};var u=typeof window!==r?window.log:void 0;return c.noConflict=function(){return typeof window!==r&&window.log===c&&(window.log=u),c},c}),define("core/strings",["loglevel","translations"],function(e,t){"use strict";var n={translations:t};return n.get=function(e){var t=n.translations[e];return void 0===t?e:t},n.interpolate=function(t,n){function i(i){var a="";return i in n?a=void 0!==n[i]&&null!==n[i]?""+n[i]:"":e.error("Key `"+i+"` not found in context for: ",t),a}return t.replace(/%\(\w+\)s/g,function(e){return i(e.slice(2,-2))})},n.gettext=function(t,i){return t=n.get(t),i=i||{},t.split(/(%\(\w+\)s)/g).map(function(n){var a=n.match(/%\((\w+)\)s/);return a&&(a[1]in i?n=i[a[1]]:e.error("Key `"+a[1]+"` not found in context for: "+t)),""===n?null:n})},n}),define("core/extensions/helpers/gettext",["handlebars","core/strings"],function(e,t){"use strict";return function(){var n,i,a,s,o=arguments.length,r=arguments[o-1],l=r.hash,c=arguments[0],d=e.partials;c=t.get(c);for(a in l)l.hasOwnProperty(a)&&(i=RegExp("%\\(("+a+")\\)s","gm"),n=l[a],s=n&&n.executePartial,s&&(n=d[n.partial].call(this,n.context,r)),void 0===n||null===n||"number"==typeof n&&isNaN(n)?n="":s||(n=e.Utils.escapeExpression(n)),c=c.replace(i,""+n));return new e.SafeString(c)}}),define("core/config/urls",[],function(){"use strict";return{jester:"https://referrer."+window.document.location.host+"/juggler",cdn:void 0}}),define("core/utils/object/get",[],function(){"use strict";return function(e,t,n){for(var i=0,a=t.length;e&&a>i;)e=e[t[i]],i+=1;return a>i||void 0===e?n:e}}),define("core/extensions/helpers/urlfor",["core/config/urls","core/utils/object/get"],function(e,t){"use strict";return function(n){
return t(e,n.split("."))}}),define("core/extensions/helpers/html",["handlebars"],function(e){"use strict";return function(t){return new e.SafeString(t||"")}}),define("core/extensions/helpers/with",[],function(){"use strict";return function(){var e=arguments.length,t=arguments[e-1],n=arguments[0];return 3===e?(n={},n[arguments[0]]=arguments[1]):"_window_"===n&&(n=window),t.fn(n)}}),define("core/extensions/helpers/each",["handlebars"],function(e){"use strict";return function(t,n){var i,a,s,o=n.fn,r=n.inverse,l=0,c="";if(n.data&&(i=e.createFrame(n.data)),t&&"object"==typeof t)if("[object Array]"===Object.prototype.toString.call(t))for(s=t.length;s>l;l++)i&&(i.index=l,i.length=t.length),c+=o(t[l],{data:i});else for(a in t)t.hasOwnProperty(a)&&(i&&(i.key=a),c+=o(t[a],{data:i}),l+=1);return 0===l&&(c=r(this)),c}}),define("core/extensions/helpers/log",[],function(){"use strict";return function(e){console.log(e,this)}}),define("core/extensions/helpers/debug",[],function(){"use strict";return function(){}}),define("core/extensions/helpers/geturl",[],function(){"use strict";return window.geturl||function(e){return e}}),define("core/extensions/helpers/truncate",["handlebars"],function(e){"use strict";return function(t,n){return n>=t.length?t:new e.SafeString(e.Utils.escapeExpression(t.slice(0,n))+"&hellip;")}}),define("core/extensions/helpers/tag",["handlebars"],function(e){"use strict";return function(t,n){var i=["<"+t],a=n.hash.text;delete n.hash.text;for(var s in n.hash)n.hash.hasOwnProperty(s)&&i.push(" "+s+'="'+e.escapeExpression(n.hash[s])+'"');return i.push(">"+e.escapeExpression(a)+"</"+t+">"),new e.SafeString(i.join(""))}}),function(e){function t(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw Error("Implement me")}}function n(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function i(e){ve.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function a(e,t){var n=!0;return u(function(){return n&&(i(e),n=!1),t.apply(this,arguments)},t)}function s(e,t){mt[e]||(i(t),mt[e]=!0)}function o(e,t){return function(n){return p(e.call(this,n),t)}}function r(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function l(){}function c(e,t){t!==!1&&M(e),h(this,e),this._d=new Date(+e._d)}function d(e){var t=k(e),n=t.year||0,i=t.quarter||0,a=t.month||0,s=t.week||0,o=t.day||0,r=t.hour||0,l=t.minute||0,c=t.second||0,d=t.millisecond||0;this._milliseconds=+d+1e3*c+6e4*l+36e5*r,this._days=+o+7*s,this._months=+a+3*i+12*n,this._data={},this._locale=ve.localeData(),this._bubble()}function u(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e}function h(t,n){var i,a,s;if(e!==n._isAMomentObject&&(t._isAMomentObject=n._isAMomentObject),e!==n._i&&(t._i=n._i),e!==n._f&&(t._f=n._f),e!==n._l&&(t._l=n._l),e!==n._strict&&(t._strict=n._strict),e!==n._tzm&&(t._tzm=n._tzm),e!==n._isUTC&&(t._isUTC=n._isUTC),e!==n._offset&&(t._offset=n._offset),e!==n._pf&&(t._pf=n._pf),e!==n._locale&&(t._locale=n._locale),Ae.length>0)for(i in Ae)a=Ae[i],s=n[a],e!==s&&(t[a]=s);return t}function m(e){return 0>e?Math.ceil(e):Math.floor(e)}function p(e,t,n){for(var i=""+Math.abs(e),a=e>=0;t>i.length;)i="0"+i;return(a?n?"+":"":"-")+i}function f(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function g(e,t){var n;return t=N(t,e),e.isBefore(t)?n=f(e,t):(n=f(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function v(e,t){return function(n,i){var a,o;return null===i||isNaN(+i)||(s(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),o=n,n=i,i=o),n="string"==typeof n?+n:n,a=ve.duration(n,i),b(this,a,e),this}}function b(e,t,n,i){var a=t._milliseconds,s=t._days,o=t._months;i=null==i?!0:i,a&&e._d.setTime(+e._d+a*n),s&&ue(e,"Date",de(e,"Date")+s*n),o&&ce(e,de(e,"Month")+o*n),i&&ve.updateOffset(e,s||o)}function w(e){return"[object Array]"===Object.prototype.toString.call(e)}function x(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function y(e,t,n){var i,a=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),o=0;for(i=0;a>i;i++)(n&&e[i]!==t[i]||!n&&T(e[i])!==T(t[i]))&&o++;return o+s}function _(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=ot[e]||rt[t]||t}return e}function k(e){var t,n,i={};for(n in e)e.hasOwnProperty(n)&&(t=_(n),t&&(i[t]=e[n]));return i}function C(t){var n,i;if(0===t.indexOf("week"))n=7,i="day";else{if(0!==t.indexOf("month"))return;n=12,i="month"}ve[t]=function(a,s){var o,r,l=ve._locale[t],c=[];if("number"==typeof a&&(s=a,a=e),r=function(e){var t=ve().utc().set(i,e);return l.call(ve._locale,t,a||"")},null!=s)return r(s);for(o=0;n>o;o++)c.push(r(o));return c}}function T(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function S(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function E(e,t,n){return se(ve([e,11,31+t-n]),t,n).week}function F(e){return P(e)?366:365}function P(e){return e%4===0&&e%100!==0||e%400===0}function M(e){var t;e._a&&-2===e._pf.overflow&&(t=0>e._a[Ce]||e._a[Ce]>11?Ce:1>e._a[Te]||e._a[Te]>S(e._a[ke],e._a[Ce])?Te:0>e._a[Se]||e._a[Se]>23?Se:0>e._a[Ee]||e._a[Ee]>59?Ee:0>e._a[Fe]||e._a[Fe]>59?Fe:0>e._a[Pe]||e._a[Pe]>999?Pe:-1,e._pf._overflowDayOfYear&&(ke>t||t>Te)&&(t=Te),e._pf.overflow=t)}function A(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&0>e._pf.overflow&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function D(e){return e?e.toLowerCase().replace("_","-"):e}function V(e){for(var t,n,i,a,s=0;e.length>s;){for(a=D(e[s]).split("-"),t=a.length,n=D(e[s+1]),n=n?n.split("-"):null;t>0;){if(i=R(a.slice(0,t).join("-")))return i;if(n&&n.length>=t&&y(a,n,!0)>=t-1)break;t--}s++}return null}function R(e){var t=null;if(!Me[e]&&De)try{t=ve.locale(),require("./locale/"+e),ve.locale(t)}catch(n){}return Me[e]}function N(e,t){return t._isUTC?ve(e).zone(t._offset||0):ve(e).local()}function O(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function I(e){var t,n,i=e.match(Oe);for(t=0,n=i.length;n>t;t++)i[t]=ht[i[t]]?ht[i[t]]:O(i[t]);return function(a){var s="";for(t=0;n>t;t++)s+=i[t]instanceof Function?i[t].call(a,e):i[t];return s}}function U(e,t){return e.isValid()?(t=L(t,e.localeData()),lt[t]||(lt[t]=I(t)),lt[t](e)):e.localeData().invalidDate()}function L(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(Ie.lastIndex=0;i>=0&&Ie.test(e);)e=e.replace(Ie,n),Ie.lastIndex=0,i-=1;return e}function q(e,t){var n,i=t._strict;switch(e){case"Q":return Ye;case"DDDD":return Ke;case"YYYY":case"GGGG":case"gggg":return i?Xe:qe;case"Y":case"G":case"g":return Ze;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?Qe:He;case"S":if(i)return Ye;case"SS":if(i)return Je;case"SSS":if(i)return Ke;case"DDD":return Le;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return $e;case"a":case"A":return t._locale._meridiemParse;case"X":return We;case"Z":case"ZZ":return ze;case"T":return Be;case"SSSS":return je;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?Je:Ue;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Ue;case"Do":return Ge;default:return n=RegExp(J(Y(e.replace("\\","")),"i"))}}function H(e){e=e||"";var t=e.match(ze)||[],n=t[t.length-1]||[],i=(n+"").match(at)||["-",0,0],a=+(60*i[1])+T(i[2]);return"+"===i[0]?-a:a}function j(e,t,n){var i,a=n._a;switch(e){case"Q":null!=t&&(a[Ce]=3*(T(t)-1));break;case"M":case"MM":null!=t&&(a[Ce]=T(t)-1);break;case"MMM":case"MMMM":i=n._locale.monthsParse(t),null!=i?a[Ce]=i:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(a[Te]=T(t));break;case"Do":null!=t&&(a[Te]=T(parseInt(t,10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=T(t));break;case"YY":a[ke]=ve.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":a[ke]=T(t);break;case"a":case"A":n._isPm=n._locale.isPM(t);break;case"H":case"HH":case"h":case"hh":a[Se]=T(t);break;case"m":case"mm":a[Ee]=T(t);break;case"s":case"ss":a[Fe]=T(t);break;case"S":case"SS":case"SSS":case"SSSS":a[Pe]=T(1e3*("0."+t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=H(t);break;case"dd":case"ddd":case"dddd":i=n._locale.weekdaysParse(t),null!=i?(n._w=n._w||{},n._w.d=i):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=T(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=ve.parseTwoDigitYear(t)}}function $(e){var n,i,a,s,o,r,l;n=e._w,null!=n.GG||null!=n.W||null!=n.E?(o=1,r=4,i=t(n.GG,e._a[ke],se(ve(),1,4).year),a=t(n.W,1),s=t(n.E,1)):(o=e._locale._week.dow,r=e._locale._week.doy,i=t(n.gg,e._a[ke],se(ve(),o,r).year),a=t(n.w,1),null!=n.d?(s=n.d,o>s&&++a):s=null!=n.e?n.e+o:o),l=oe(i,a,s,r,o),e._a[ke]=l.year,e._dayOfYear=l.dayOfYear}function z(e){var n,i,a,s,o=[];if(!e._d){for(a=W(e),e._w&&null==e._a[Te]&&null==e._a[Ce]&&$(e),e._dayOfYear&&(s=t(e._a[ke],a[ke]),e._dayOfYear>F(s)&&(e._pf._overflowDayOfYear=!0),i=te(s,0,e._dayOfYear),e._a[Ce]=i.getUTCMonth(),e._a[Te]=i.getUTCDate()),n=0;3>n&&null==e._a[n];++n)e._a[n]=o[n]=a[n];for(;7>n;n++)e._a[n]=o[n]=null==e._a[n]?2===n?1:0:e._a[n];e._d=(e._useUTC?te:ee).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm)}}function B(e){var t;e._d||(t=k(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],z(e))}function W(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function G(t){if(t._f===ve.ISO_8601)return X(t),e;t._a=[],t._pf.empty=!0;var n,i,a,s,o,r=""+t._i,l=r.length,c=0;for(a=L(t._f,t._locale).match(Oe)||[],n=0;a.length>n;n++)s=a[n],i=(r.match(q(s,t))||[])[0],i&&(o=r.substr(0,r.indexOf(i)),o.length>0&&t._pf.unusedInput.push(o),r=r.slice(r.indexOf(i)+i.length),c+=i.length),ht[s]?(i?t._pf.empty=!1:t._pf.unusedTokens.push(s),j(s,i,t)):t._strict&&!i&&t._pf.unusedTokens.push(s);t._pf.charsLeftOver=l-c,r.length>0&&t._pf.unusedInput.push(r),t._isPm&&12>t._a[Se]&&(t._a[Se]+=12),t._isPm===!1&&12===t._a[Se]&&(t._a[Se]=0),z(t),M(t)}function Y(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,a){return t||n||i||a})}function J(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function K(t){var i,a,s,o,r;if(0===t._f.length)return t._pf.invalidFormat=!0,t._d=new Date(NaN),e;for(o=0;t._f.length>o;o++)r=0,i=h({},t),i._pf=n(),i._f=t._f[o],G(i),A(i)&&(r+=i._pf.charsLeftOver,r+=10*i._pf.unusedTokens.length,i._pf.score=r,(null==s||s>r)&&(s=r,a=i));u(t,a||i)}function X(e){var t,n,i=e._i,a=et.exec(i);if(a){for(e._pf.iso=!0,t=0,n=nt.length;n>t;t++)if(nt[t][1].exec(i)){e._f=nt[t][0]+(a[6]||" ");break}for(t=0,n=it.length;n>t;t++)if(it[t][1].exec(i)){e._f+=it[t][0];break}i.match(ze)&&(e._f+="Z"),G(e)}else e._isValid=!1}function Q(e){X(e),e._isValid===!1&&(delete e._isValid,ve.createFromInputFallback(e))}function Z(t){var n,i=t._i;i===e?t._d=new Date:x(i)?t._d=new Date(+i):null!==(n=Ve.exec(i))?t._d=new Date(+n[1]):"string"==typeof i?Q(t):w(i)?(t._a=i.slice(0),z(t)):"object"==typeof i?B(t):"number"==typeof i?t._d=new Date(i):ve.createFromInputFallback(t)}function ee(e,t,n,i,a,s,o){var r=new Date(e,t,n,i,a,s,o);return 1970>e&&r.setFullYear(e),r}function te(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function ne(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function ie(e,t,n,i,a){return a.relativeTime(t||1,!!n,e,i)}function ae(e,t,n){var i=ve.duration(e).abs(),a=_e(i.as("s")),s=_e(i.as("m")),o=_e(i.as("h")),r=_e(i.as("d")),l=_e(i.as("M")),c=_e(i.as("y")),d=ct.s>a&&["s",a]||1===s&&["m"]||ct.m>s&&["mm",s]||1===o&&["h"]||ct.h>o&&["hh",o]||1===r&&["d"]||ct.d>r&&["dd",r]||1===l&&["M"]||ct.M>l&&["MM",l]||1===c&&["y"]||["yy",c];return d[2]=t,d[3]=+e>0,d[4]=n,ie.apply({},d)}function se(e,t,n){var i,a=n-t,s=n-e.day();return s>a&&(s-=7),a-7>s&&(s+=7),i=ve(e).add(s,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function oe(e,t,n,i,a){var s,o,r=te(e,0,1).getUTCDay();return r=0===r?7:r,n=null!=n?n:a,s=a-r+(r>i?7:0)-(a>r?7:0),o=7*(t-1)+(n-a)+s+1,{year:o>0?e:e-1,dayOfYear:o>0?o:F(e-1)+o}}function re(t){var n=t._i,i=t._f;return t._locale=t._locale||ve.localeData(t._l),null===n||i===e&&""===n?ve.invalid({nullInput:!0}):("string"==typeof n&&(t._i=n=t._locale.preparse(n)),ve.isMoment(n)?new c(n,!0):(i?w(i)?K(t):G(t):Z(t),new c(t)))}function le(e,t){var n,i;if(1===t.length&&w(t[0])&&(t=t[0]),!t.length)return ve();for(n=t[0],i=1;t.length>i;++i)t[i][e](n)&&(n=t[i]);return n}function ce(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),S(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function de(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function ue(e,t,n){return"Month"===t?ce(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function he(e,t){return function(n){return null!=n?(ue(this,e,n),ve.updateOffset(this,t),this):de(this,e)}}function me(e){return 400*e/146097}function pe(e){return 146097*e/400}function fe(e){ve.duration.fn[e]=function(){return this._data[e]}}function ge(e){"undefined"==typeof ender&&(be=ye.moment,ye.moment=e?a("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",ve):ve)}for(var ve,be,we,xe="2.8.1",ye="undefined"!=typeof global?global:this,_e=Math.round,ke=0,Ce=1,Te=2,Se=3,Ee=4,Fe=5,Pe=6,Me={},Ae=[],De="undefined"!=typeof module&&module.exports,Ve=/^\/?Date\((\-?\d+)/i,Re=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ne=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Oe=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Ie=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Ue=/\d\d?/,Le=/\d{1,3}/,qe=/\d{1,4}/,He=/[+\-]?\d{1,6}/,je=/\d+/,$e=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ze=/Z|[\+\-]\d\d:?\d\d/gi,Be=/T/i,We=/[\+\-]?\d+(\.\d{1,3})?/,Ge=/\d{1,2}/,Ye=/\d/,Je=/\d\d/,Ke=/\d{3}/,Xe=/\d{4}/,Qe=/[+-]?\d{6}/,Ze=/[+-]?\d+/,et=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,tt="YYYY-MM-DDTHH:mm:ssZ",nt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],it=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],at=/([\+\-]|\d\d)/gi,st=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),ot={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},rt={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},lt={},ct={s:45,m:45,h:22,d:26,M:11},dt="DDD w W M D d".split(" "),ut="M D H h m s w W".split(" "),ht={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return p(this.year()%100,2)},YYYY:function(){return p(this.year(),4)},YYYYY:function(){return p(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+p(Math.abs(e),6)},gg:function(){return p(this.weekYear()%100,2)},gggg:function(){return p(this.weekYear(),4)},ggggg:function(){return p(this.weekYear(),5)},GG:function(){return p(this.isoWeekYear()%100,2)},GGGG:function(){return p(this.isoWeekYear(),4)},GGGGG:function(){return p(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return T(this.milliseconds()/100)},SS:function(){return p(T(this.milliseconds()/10),2)},SSS:function(){return p(this.milliseconds(),3)},SSSS:function(){return p(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+p(T(e/60),2)+":"+p(T(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+p(T(e/60),2)+p(T(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},mt={},pt=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];dt.length;)we=dt.pop(),ht[we+"o"]=r(ht[we],we);for(;ut.length;)we=ut.pop(),ht[we+we]=o(ht[we],2);ht.DDDD=o(ht.DDD,3),u(l.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,n,i;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(n=ve.utc([2e3,t]),i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[t]=RegExp(i.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=ve([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return"function"==typeof n?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,i){var a=this._relativeTime[n];return"function"==typeof a?a(e,t,n,i):a.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return se(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),ve=function(t,i,a,s){var o;return"boolean"==typeof a&&(s=a,a=e),o={},o._isAMomentObject=!0,o._i=t,o._f=i,o._l=a,o._strict=s,o._isUTC=!1,o._pf=n(),re(o)},ve.suppressDeprecationWarnings=!1,ve.createFromInputFallback=a("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i)}),ve.min=function(){var e=[].slice.call(arguments,0);return le("isBefore",e)},ve.max=function(){var e=[].slice.call(arguments,0);return le("isAfter",e)},ve.utc=function(t,i,a,s){var o;return"boolean"==typeof a&&(s=a,a=e),o={},o._isAMomentObject=!0,o._useUTC=!0,o._isUTC=!0,o._l=a,o._i=t,o._f=i,o._strict=s,o._pf=n(),re(o).utc()},ve.unix=function(e){return ve(1e3*e)},ve.duration=function(e,t){var n,i,a,s,o=e,r=null;return ve.isDuration(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(o={},t?o[t]=e:o.milliseconds=e):(r=Re.exec(e))?(n="-"===r[1]?-1:1,o={y:0,d:T(r[Te])*n,h:T(r[Se])*n,m:T(r[Ee])*n,s:T(r[Fe])*n,ms:T(r[Pe])*n}):(r=Ne.exec(e))?(n="-"===r[1]?-1:1,a=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*n},o={y:a(r[2]),M:a(r[3]),d:a(r[4]),h:a(r[5]),m:a(r[6]),s:a(r[7]),w:a(r[8])}):"object"==typeof o&&("from"in o||"to"in o)&&(s=g(ve(o.from),ve(o.to)),o={},o.ms=s.milliseconds,o.M=s.months),i=new d(o),ve.isDuration(e)&&e.hasOwnProperty("_locale")&&(i._locale=e._locale),i},ve.version=xe,ve.defaultFormat=tt,ve.ISO_8601=function(){},ve.momentProperties=Ae,ve.updateOffset=function(){},ve.relativeTimeThreshold=function(t,n){return ct[t]===e?!1:n===e?ct[t]:(ct[t]=n,!0)},ve.lang=a("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return ve.locale(e,t)}),ve.locale=function(t,n){var i;return t&&(i=e!==n?ve.defineLocale(t,n):ve.localeData(t),i&&(ve.duration._locale=ve._locale=i)),ve._locale._abbr},ve.defineLocale=function(e,t){return null!==t?(t.abbr=e,Me[e]||(Me[e]=new l),Me[e].set(t),ve.locale(e),Me[e]):(delete Me[e],null)},ve.langData=a("moment.langData is deprecated. Use moment.localeData instead.",function(e){return ve.localeData(e)}),ve.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return ve._locale;if(!w(e)){if(t=R(e))return t;e=[e]}return V(e)},ve.isMoment=function(e){return e instanceof c||null!=e&&e.hasOwnProperty("_isAMomentObject")},ve.isDuration=function(e){return e instanceof d};for(we=pt.length-1;we>=0;--we)C(pt[we]);ve.normalizeUnits=function(e){return _(e)},ve.invalid=function(e){var t=ve.utc(NaN);return null!=e?u(t._pf,e):t._pf.userInvalidated=!0,t},ve.parseZone=function(){return ve.apply(null,arguments).parseZone()},ve.parseTwoDigitYear=function(e){return T(e)+(T(e)>68?1900:2e3)},u(ve.fn=c.prototype,{clone:function(){return ve(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=ve(this).utc();return 0<e.year()&&e.year()<=9999?U(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):U(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return A(this)},isDSTShifted:function(){return this._a?this.isValid()&&y(this._a,(this._isUTC?ve.utc(this._a):ve(this._a)).toArray())>0:!1},parsingFlags:function(){return u({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._d.getTimezoneOffset(),"m")),this},format:function(e){var t=U(this,e||ve.defaultFormat);return this.localeData().postformat(t)},add:v(1,"add"),subtract:v(-1,"subtract"),diff:function(e,t,n){var i,a,s=N(e,this),o=6e4*(this.zone()-s.zone());return t=_(t),"year"===t||"month"===t?(i=432e5*(this.daysInMonth()+s.daysInMonth()),a=12*(this.year()-s.year())+(this.month()-s.month()),a+=(this-ve(this).startOf("month")-(s-ve(s).startOf("month")))/i,a-=6e4*(this.zone()-ve(this).startOf("month").zone()-(s.zone()-ve(s).startOf("month").zone()))/i,"year"===t&&(a/=12)):(i=this-s,a="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-o)/864e5:"week"===t?(i-o)/6048e5:i),n?a:m(a)},from:function(e,t){return ve.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(ve(),e)},calendar:function(e){var t=e||ve(),n=N(t,this).startOf("day"),i=this.diff(n,"days",!0),a=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(this.localeData().calendar(a,this))},isLeapYear:function(){return P(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=ne(e,this.localeData()),this.add(e-t,"d")):t},month:he("Month",!0),startOf:function(e){switch(e=_(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return e=_(e),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},isAfter:function(t,n){return n=e!==n?n:"millisecond",+this.clone().startOf(n)>+ve(t).startOf(n)},isBefore:function(t,n){return n=e!==n?n:"millisecond",+this.clone().startOf(n)<+ve(t).startOf(n)},isSame:function(e,t){return t=t||"ms",+this.clone().startOf(t)===+N(e,this).startOf(t)},min:a("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=ve.apply(null,arguments),this>e?this:e}),max:a("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=ve.apply(null,arguments),e>this?this:e}),zone:function(e,t){var n,i=this._offset||0;return null==e?this._isUTC?i:this._d.getTimezoneOffset():("string"==typeof e&&(e=H(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(n=this._d.getTimezoneOffset()),this._offset=e,this._isUTC=!0,null!=n&&this.subtract(n,"m"),i!==e&&(!t||this._changeInProgress?b(this,ve.duration(i-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,ve.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?ve(e).zone():0,(this.zone()-e)%60===0},daysInMonth:function(){return S(this.year(),this.month())},dayOfYear:function(e){var t=_e((ve(this).startOf("day")-ve(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=se(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=se(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=se(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return E(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return E(this.year(),e.dow,e.doy)},get:function(e){return e=_(e),this[e]()},set:function(e,t){return e=_(e),"function"==typeof this[e]&&this[e](t),this},locale:function(t){return t===e?this._locale._abbr:(this._locale=ve.localeData(t),this)},lang:a("moment().lang() is deprecated. Use moment().localeData() instead.",function(t){return t===e?this.localeData():(this._locale=ve.localeData(t),this)}),localeData:function(){return this._locale}}),ve.fn.millisecond=ve.fn.milliseconds=he("Milliseconds",!1),ve.fn.second=ve.fn.seconds=he("Seconds",!1),ve.fn.minute=ve.fn.minutes=he("Minutes",!1),ve.fn.hour=ve.fn.hours=he("Hours",!0),ve.fn.date=he("Date",!0),ve.fn.dates=a("dates accessor is deprecated. Use date instead.",he("Date",!0)),ve.fn.year=he("FullYear",!0),ve.fn.years=a("years accessor is deprecated. Use year instead.",he("FullYear",!0)),ve.fn.days=ve.fn.day,ve.fn.months=ve.fn.month,ve.fn.weeks=ve.fn.week,ve.fn.isoWeeks=ve.fn.isoWeek,ve.fn.quarters=ve.fn.quarter,ve.fn.toJSON=ve.fn.toISOString,u(ve.duration.fn=d.prototype,{_bubble:function(){var e,t,n,i=this._milliseconds,a=this._days,s=this._months,o=this._data,r=0;o.milliseconds=i%1e3,e=m(i/1e3),o.seconds=e%60,t=m(e/60),o.minutes=t%60,n=m(t/60),o.hours=n%24,a+=m(n/24),r=m(me(a)),a-=m(pe(r)),s+=m(a/30),a%=30,r+=m(s/12),s%=12,o.days=a,o.months=s,o.years=r},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return m(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*T(this._months/12)},humanize:function(e){var t=ae(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=ve.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=ve.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=_(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;if(e=_(e),t=this._days+this._milliseconds/864e5,"month"===e||"year"===e)return n=this._months+12*me(t),"month"===e?n:n/12;switch(t+=pe(this._months/12),e){case"week":return t/7;case"day":return t;case"hour":return 24*t;case"minute":return 24*t*60;case"second":return 24*t*60*60;case"millisecond":return 24*t*60*60*1e3;default:throw Error("Unknown unit "+e)}},lang:ve.fn.lang,locale:ve.fn.locale,toIsoString:a("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),a=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);
return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(i||a||s?"T":"")+(i?i+"H":"")+(a?a+"M":"")+(s?s+"S":""):"P0D"},localeData:function(){return this._locale}});for(we in st)st.hasOwnProperty(we)&&fe(we.toLowerCase());ve.duration.fn.asMilliseconds=function(){return this.as("ms")},ve.duration.fn.asSeconds=function(){return this.as("s")},ve.duration.fn.asMinutes=function(){return this.as("m")},ve.duration.fn.asHours=function(){return this.as("h")},ve.duration.fn.asDays=function(){return this.as("d")},ve.duration.fn.asWeeks=function(){return this.as("weeks")},ve.duration.fn.asMonths=function(){return this.as("M")},ve.duration.fn.asYears=function(){return this.as("y")},ve.locale("en",{ordinal:function(e){var t=e%10,n=1===T(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),De?module.exports=ve:"function"==typeof define&&define.amd?(define("moment",["require","exports","module"],function(e,t,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(ye.moment=be),ve}),ge(!0)):ge()}.call(this),define("core/extensions/helpers/now",["moment"],function(e){"use strict";return function(t){return e().format(t)}}),define("core/extensions/handlebars.helpers",["require","handlebars","./helpers/eq","./helpers/ne","./helpers/gt","./helpers/lt","./helpers/ge","./helpers/le","./helpers/typeof","./helpers/notNull","./helpers/any","./helpers/if_any","./helpers/if_all","./helpers/switch","./helpers/partial","./helpers/getPartial","./helpers/gettext","./helpers/urlfor","./helpers/html","./helpers/with","./helpers/each","./helpers/log","./helpers/debug","./helpers/geturl","./helpers/truncate","./helpers/tag","./helpers/now"],function(e){"use strict";var t=e("handlebars");return t.registerHelper("eq",e("./helpers/eq")),t.registerHelper("ne",e("./helpers/ne")),t.registerHelper("gt",e("./helpers/gt")),t.registerHelper("lt",e("./helpers/lt")),t.registerHelper("ge",e("./helpers/ge")),t.registerHelper("le",e("./helpers/le")),t.registerHelper("typeof",e("./helpers/typeof")),t.registerHelper("notNull",e("./helpers/notNull")),t.registerHelper("any",e("./helpers/any")),t.registerHelper("if_any",e("./helpers/if_any")),t.registerHelper("if_all",e("./helpers/if_all")),t.registerHelper("switch",e("./helpers/switch")),t.registerHelper("partial",e("./helpers/partial")),t.registerHelper("getPartial",e("./helpers/getPartial")),t.registerHelper("gettext",e("./helpers/gettext")),t.registerHelper("urlfor",e("./helpers/urlfor")),t.registerHelper("html",e("./helpers/html")),t.registerHelper("with",e("./helpers/with")),t.registerHelper("each",e("./helpers/each")),t.registerHelper("log",e("./helpers/log")),t.registerHelper("debug",e("./helpers/debug")),t.registerHelper("geturl",e("./helpers/geturl")),t.registerHelper("truncate",e("./helpers/truncate")),t.registerHelper("tag",e("./helpers/tag")),t.registerHelper("now",e("./helpers/now")),t}),define("home/templates/preload",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(){return"<p></p>\n"},useData:!0})}),define("core/utils/urls",[],function(){"use strict";var e={},t=window.document.createElement("a");return e.getOrigin=function(e){t.href=e;var n=t.href.split("/");return n[0]+"//"+n[2]},e.getHostName=function(e){return t.href=e,t.hostname},e.getDomainPart=function(t,n){void 0===n&&(n=0);var i=e.getHostName(t),a=i.split(".").reverse();return a[n]},e.getQuery=function(e){return t.href=e,t.search},e.getPathname=function(e){return t.href=e,t.pathname},e}),define("core/frameBus",["jquery","underscore","backbone","core/utils/urls"],function(e,t,n,i){"use strict";var a=window.opener||window.parent,s=window.name,o=window.document.referrer,r={};r.client=i.getOrigin(window.document.location.href),r.secureClient=r.client.replace(/^\w+:\/\//,"https://"),r.host=o?i.getOrigin(o):r.client;var l={origins:r,messageHandler:function(e){e=e.originalEvent;var t;try{t=JSON.parse(e.data)}catch(n){return}t.name&&"!"===t.name[0]&&e.origin!==r.client&&e.origin!==r.secureClient||"client"===t.scope&&l.trigger(t.name,t.data)},postMessage:function(e){e=JSON.stringify(e),a.postMessage(e,"*")},sendHostMessage:function(e,t){t=t||[],l.postMessage({scope:"host",sender:s,name:e,data:t})}};return t.extend(l,n.Events),e(window).on("message",l.messageHandler),e(window).on("unload",function(){l.sendHostMessage("die")}),window.DISQUS=window.DISQUS||{},window.DISQUS.Bus=l,l}),define("core/bus",["backbone","underscore","core/frameBus"],function(e,t,n){"use strict";var i=t.extend({},e.Events);return i.frame=n,i}),define("core/utils/html",[],function(){"use strict";var e="...",t=e.length,n=function(e){var t;try{t=(new window.DOMParser).parseFromString("<!doctype html><meta charset=utf-8><title> </title>","text/html")}catch(n){}return t||(t=window.document.implementation.createHTMLDocument("")),t.body.innerHTML=e,t};return{stripTags:function(e){var t=n(e).body;return(t.textContent||t.innerText).replace(/\r?\n/g," ")},replaceAnchors:function(e,i){var a=n(e);return[].forEach.call(a.querySelectorAll("a"),function(e){var n=e.getAttribute("href")||"",a=e.innerHTML,s=i(e);0===n.indexOf(a.slice(0,-t))?a=s:n.length&&-1!==a.indexOf(n)?a=a.replace(n,s):a+=" "+s,e.insertAdjacentHTML("afterend",a),e.parentNode.removeChild(e)}),a.body.innerHTML.trim()}}}),define("core/utils/metatags",["jquery","underscore","backbone","core/utils/html","core/strings"],function(e,t,n,i,a){"use strict";var s=a.get,o={type:['property="og:type"'],title:['property="og:title"','name="twitter:title"'],description:['name="twitter:description"','property="og:description"','name="description"'],image:['property="og:image"','name="twitter:image"'],url:['property="og:url"','name="twitter:url"'],_card:['name="twitter:card"']},r=function(e){return 0===e.indexOf("//")&&(e="https:"+e),e},l={type:1,title:"Disqus",description:s("The web's community of communities now has one central hub."),image:r("//c.disquscdn.com/home/current/img/brand/favicon-192x192.png"),url:"https://disqus.com/",_card:"summary"},c=t.extend({DEFAULTS:l,META_TAGS:o,set:function(n){n=n||{},t.isString(n)&&(n={title:n}),n.title&&(n.title=i.stripTags(n.title)),n.title&&(n.title+=" · Disqus"),n.url||(n.url=(window.document.location+"").split("?")[0]),n.url=r(n.url),n.image&&(n.image=r(n.image)),n.description&&(n.description=i.stripTags(n.description));var a=e("head");t.each(o,function(i,s){t.each(i,function(t){var i=a.find("["+t+"]");i.length||(i=e("<meta "+t+">"),a.append(i)),i.attr("content",n[s]||l[s])})}),window.document.title=n.title||l.title,c.trigger("change:metatags")}},n.Events);return c}),define("core/config",[],function(){"use strict";var e=window.location.origin;return{urls:{avatar:{generic:"https://c.disquscdn.com/images/noavatar92.png"},api:e+"/api/3.0/",apiSettings:e+"/users/self/",login:e+"/next/login/",oauth:{twitter:e+"/_ax/twitter/begin/",google:e+"/_ax/google/begin/",facebook:e+"/_ax/facebook/begin/"},oauthDestroy:function(t){return e+"/_ax/"+t+"/unmerge/"},oauthStatus:function(t){return e+"/_ax/"+t+"/merged/"},userDelete:e+"/auth/json/user_delete/",verifyEmail:e+"/next/verify/"},keys:{api:"E8Uh5l5fHZ6gD8U3KycjAIAk46f68Zw7C6eW8WSjZvCLXebZ7p0r1yrYDrLilk2F"},feedApiVersion:"12",debug:!1}}),define("core/utils",["jquery","underscore","core/config"],function(e,t,n){"use strict";function i(e){return function(t){return t&&t.preventDefault&&t.preventDefault(),e.apply(this,arguments)}}function a(e){return function(t){return t&&t.stopPropagation&&t.stopPropagation(),e.apply(this,arguments)}}function s(e){return i(a(e))}function o(e){if(!e)return"";e="http://"+e.replace(/^([a-z+.-]+:)?\/+/i,"");var t=u.createElement("a");t.href=e;var n=t.hostname.replace(/^www\d*\./i,"");return n=n.toLowerCase()}function r(e){var n=[];return t.each(e,function(e,t){void 0!==e&&n.push(t+(null===e?"":"="+encodeURIComponent(e)))}),n.join("&")}function l(e,t,n){if(t&&(-1===e.indexOf("?")?e+="?":"&"!==e.charAt(e.length-1)&&(e+="&"),e+=this.serializeArgs(t)),n){var i={};return i[(new Date).getTime()]=null,this.serialize(e,i)}var a=e.length;return"&"===e.charAt(a-1)?e.slice(0,a-1):e}function c(e,n,i){i?t.extend(i,{location:1,status:1,resizable:1,scrollbars:1}):i={},i.width&&i.height&&t.defaults(i,{left:window.screen.width/2-i.width/2,top:window.screen.height/2-i.height/2});var a=t.map(i,function(e,t){return t+"="+e}).join(",");return window.open(e,n,a)}function d(e,t,n){0>t&&(t=0);var i=e.substring(0,t),a=e.substring(t);return i.length&&!/\s$/.test(i)&&(i+=" "),/^\s/.test(a)||(a=" "+a),i+n+a}var u=window.document,h=/^[a-zA-Z0-9.!#$%&'*+-\/=?\^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,m=function(e){return h.test(e)},p=n.TLDS||"zw|zuerich|zone|zm|zip|za|yt|youtube|yokohama|yoga|yodobashi|ye|yandex|yachts|xyz|xxx|xin|xerox|wtf|wtc|ws|world|works|work|wme|win|williamhill|wiki|wien|whoswho|wf|weir|wedding|wed|website|webcam|watch|wang|wales|vu|voyage|voto|voting|vote|vodka|vn|vlaanderen|vision|villas|video|viajes|vi|vg|vet|versicherung|ventures|vegas|ve|vc|vacations|va|uz|uy|us|uol|uno|university|uk|ug|ua|tz|tw|tv|tui|tt|trust|travel|training|trading|trade|tr|toys|town|tours|toshiba|toray|top|tools|tokyo|today|to|tn|tm|tl|tk|tj|tirol|tires|tips|tienda|tickets|theater|th|tg|tf|tennis|temasek|tel|technology|tech|team|td|tc|taxi|tax|tattoo|tatar|taipei|sz|systems|sydney|sy|sx|swiss|sv|suzuki|surgery|surf|support|supply|supplies|sucks|su|style|study|st|sr|spreadbetting|spiegel|space|soy|sony|solutions|solar|sohu|software|social|so|sn|sm|sl|sky|sk|sj|site|singles|si|shriram|show|shoes|shiksha|sh|sg|sexy|sex|sew|services|sener|seat|se|sd|scot|science|schwarz|schule|school|scholarships|schmidt|scb|sca|sc|sb|saxo|sarl|sap|samsung|sale|saarland|sa|ryukyu|rw|run|ruhr|ru|rsvp|rs|rodeo|rocks|ro|rip|rio|rich|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reit|reisen|reise|rehab|redstone|red|recipes|realtor|re|racing|quebec|qpon|qa|py|pw|pub|pt|ps|property|properties|prof|productions|prod|pro|press|praxi|pr|post|porn|poker|pohl|pn|pm|plus|plumbing|place|pl|pk|pizza|pink|pictures|pictet|pics|piaget|physio|photos|photography|photo|philips|pharmacy|ph|pg|pf|pe|party|parts|partners|paris|panerai|page|pa|ovh|otsuka|osaka|organic|org|oracle|ooo|online|onl|ong|one|om|okinawa|nz|nyc|nu|ntt|nrw|nra|nr|np|no|nl|nissan|ninja|nico|ni|nhk|ngo|ng|nf|nexus|news|new|neustar|network|net|nec|ne|nc|navy|name|nagoya|nadex|na|mz|my|mx|mw|mv|museum|mu|mtpc|mtn|mt|ms|mr|mq|mp|movie|mov|motorcycles|moscow|mortgage|mormon|money|monash|moe|moda|mobi|mo|mn|mma|mm|ml|mk|mini|mil|miami|mh|mg|menu|memorial|meme|melbourne|meet|media|me|md|mc|marriott|markets|marketing|market|mango|management|maison|maif|madrid|ma|ly|lv|luxury|luxe|lu|ltda|lt|ls|lr|love|lotto|lotte|london|lol|loans|loan|lk|link|limo|limited|lighting|life|lidl|liaison|li|lgbt|legal|leclerc|lease|lds|lc|lb|lawyer|latrobe|lat|land|lacaixa|la|kz|kyoto|ky|kw|kred|krd|kr|kp|komatsu|koeln|kn|km|kiwi|kitchen|kim|ki|kh|kg|ke|kddi|kaufen|juegos|jp|joburg|jobs|jo|jm|jewelry|jetzt|je|jcb|java|iwc|it|is|irish|ir|iq|io|investments|international|int|insure|institute|ink|ing|info|infiniti|industries|in|immobilien|immo|im|il|ifm|ie|id|icu|ibm|hu|ht|hr|how|house|hosting|host|horse|honda|homes|holiday|holdings|hockey|hn|hm|hk|hiv|hitachi|hiphop|hermes|here|help|healthcare|haus|hangout|hamburg|gy|gw|guru|guitars|guide|guge|gu|gt|gs|gripe|green|gratis|graphics|gr|gq|gp|gov|gop|google|goog|goo|golf|goldpoint|gold|gn|gmx|gmo|gmail|gm|globo|global|gle|glass|gl|gives|gifts|gift|gi|gh|ggee|gg|gf|gent|ge|gdn|gd|gbiz|gb|garden|gallery|gal|ga|futbol|furniture|fund|frogans|frl|fr|foundation|forsale|forex|football|foo|fo|fm|fly|flsmidth|flowers|florist|flights|fk|fj|fitness|fit|fishing|fish|firmdale|financial|finance|film|fi|feedback|fashion|farm|fans|fan|faith|fail|express|exposed|expert|exchange|everbank|events|eus|eurovision|eu|et|estate|esq|es|erni|er|equipment|epson|enterprises|engineering|engineer|energy|emerck|email|eg|ee|education|edu|ec|eat|dz|dvag|durban|download|doosan|domains|doha|dog|docs|do|dnp|dm|dk|dj|discount|directory|direct|digital|diet|diamonds|dev|design|desi|dentist|dental|democrat|delivery|degree|deals|de|dclk|day|datsun|dating|date|dance|dad|dabur|cz|cyou|cymru|cy|cx|cw|cv|cuisinella|cu|cruises|crs|cricket|creditcard|credit|cr|courses|country|coop|cool|cooking|contractors|consulting|construction|condos|computer|company|community|com|cologne|college|coffee|codes|coach|co|cn|cm|club|clothing|clinic|click|cleaning|claims|cl|ck|city|citic|ci|church|chrome|christmas|chloe|cheap|chat|channel|ch|cg|cfd|cfa|cf|cern|ceo|center|cd|cc|cbn|catering|cat|casino|cash|casa|cartier|cars|careers|career|care|cards|caravan|capital|capetown|canon|cancerresearch|camp|camera|cal|cafe|cab|ca|bzh|bz|by|bw|bv|buzz|business|builders|build|budapest|bt|bs|brussels|brother|broker|bridgestone|br|boutique|boo|bond|boats|bo|bnpparibas|bn|bmw|bm|blue|bloomberg|blackfriday|black|bj|biz|bio|bingo|bike|bid|bi|bh|bg|bf|best|berlin|beer|be|bd|bbc|bb|bayern|bauhaus|bargains|barclays|barclaycard|bar|bank|band|ba|az|axa|ax|aw|autos|auto|audio|auction|au|attorney|at|associates|asia|as|arpa|army|archi|ar|aquarelle|aq|apartments|ao|android|an|amsterdam|am|alsace|allfinanz|al|airforce|aig|ai|agency|ag|afl|af|aero|ae|adult|ads|ad|actor|active|accountants|accountant|accenture|academy|ac|abogado|abbott|abb",f=RegExp("([^@.]|^)\\b(?:\\w[\\w-]*:/{0,3}(?:(?:\\w+:)?\\w+@)?)?([\\w-]+\\.)+(?:"+p+')(?!\\.\\w)\\b(?::\\d+)?(?:[/?][^\\s\\{\\}\\|\\\\\\^\\[\\]`<>"\\x80-\\xFF\\x00-\\x1F\\x7F]*)?',"g"),g=function(e){return!!e.match(f)},v=/^[\w-]+:\/{0,3}/,b=/([\.,]+)$/g,w=function(e){var t,n,i,a,s,o=[];if(!e)return o;for(;t=f.exec(e);){n=t[0],s=t[1],n=n.slice(s.length),b.lastIndex=0,i=b.exec(n),i&&(n=n.slice(0,n.length-i[0].length)),a=v.test(n)?n:"http://"+n;var r=t.index+s.length;o.push({text:n,url:a,index:r,endIndex:r+n.length})}return o},x=RegExp("[\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E\\u00A1-\\u00BF\\u2010-\\u2027\\u2030-\\u205E\\u2300-\\u23FF\\u2E00-\\u2E7F\\u3001-\\u303F\\uFE10-\\uFE19\\uFE30-\\uFE4F\\uFE50-\\uFE6B\\uFF01-\\uFF0F\\uFF1A-\\uFF20\\uFF3B-\\uFF40\\uFF5B-\\uFF60\\uFF5F-\\uFF64]+$"),y=.5,_=function(e,t){if(t>=e.length)return e;e=e.slice(0,t-1);var n=e,i=/(^.*\S)\s/.exec(e);i&&(e=i[1]);var a=x.exec(e);return a&&(e=e.slice(0,e.length-a[0].length)),y*n.length>e.length&&(e=n),e+"…"},k=function(){var e=u.createElement("fakeelement");return function(t,n){return void 0!==e.style[n]}}(),C=function(){var e={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};return t.find(e,k)||null}(),T=function(){var e={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};return t.find(e,k)||null}(),S=function(e){return e=e||window,/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/i.test(e.navigator.userAgent||e.navigator.vendor||e.opera)},E=function(t,n){return n||(n=e(t.currentTarget)),"_blank"===n.attr("target")||t.ctrlKey||t.metaKey||t.shiftKey||t.altKey},F=500,P=function(){var e={},n=/#.*$/,i=function(e){var n=e.attr("data-tid");return n||(n=t.uniqueId(),e.attr("data-tid",n)),n};return function(t,a){if(t.isDefaultPrevented())return!1;if(!a.is("a"))return!1;var s=(a.attr("href")||"").replace(n,"");if(!s)return!1;var o=i(a),r=(new Date).getTime();return e[o]&&F>r-e[o]?!1:(e[o]=r,!0)}}();return{validateEmail:m,isUrl:g,bleachFindUrls:w,niceTruncate:_,transitionEndEvent:C,animationEndEvent:T,isMobileUserAgent:S,preventDefaultHandler:i,stopPropagationHandler:a,stopEventHandler:s,getDomain:o,serializeArgs:r,serialize:l,openWindow:c,insertWithWhitespace:d,willOpenNewWindow:E,clickShouldBeLogged:P}}),define("home/mixins/asEmbedLayout",["jquery","underscore","core/frameBus","core/utils"],function(e,t,n,i){"use strict";var a=function(){var a=this.events||{};this.events=t.extend({"click [data-action=close-drawer]":"closeDrawer","click .viewport":"closeDrawerOnClick","click [data-action=full-home]":"openFullHome","click [data-action=refresh-drawer]":"handleRefresh","wheel .scrollable-measure-selector":"handleScroll","wheel .viewport":"handleViewportScroll","mousewheel .scrollable-measure-selector":"handleScroll","mousewheel .viewport":"handleViewportScroll"},a),this.handleRefresh=function(t){t.preventDefault();var n=e(t.currentTarget);n.addClass("loading");var i=this.session.getOrCreateNotifications(),a=e.Deferred(),s=e.Deferred();e.when(a,s).done(function(){n.removeClass("loading"),i.all.trigger("clearUnreadCount")}),i.all.fetchItems({reset:!0,success:function(){a.resolve()}}),i.replies.fetchItems({reset:!0,success:function(){s.resolve()}})},this.openFullHome=function(e){e.preventDefault(),window.open(window.location.href,"_blank")},this.closeDrawerOnClick=function(t){e(t.target).hasClass("viewport")&&this.closeDrawer(t)},this.isIE10=function(){return 10===window.document.documentMode},this.closeDrawer=function(a){a.preventDefault();var s=e("body");s.removeClass("active"),this.isIE10()||!i.transitionEndEvent?t.delay(t.bind(n.sendHostMessage,this,"close"),300):s.one(i.transitionEndEvent,function(){n.sendHostMessage("close")})};var s=this.onRender;this.onRender=function(){s.apply(this,arguments),t.defer(t.bind(n.trigger,n,"mainlayoutRendered"))},this.getScrollableContainer=function(){return this.scrollableContainer&&e.contains(window.document.documentElement,this.scrollableContainer[0])||(this.scrollableContainer=this.$(".scrollable-measure-selector")),this.scrollableContainer},this.handleViewportScroll=function(e){e.preventDefault()},this.handleScroll=function(e){var t=e.originalEvent,n=t.wheelDeltaY||-t.deltaY,i=this.getScrollableContainer();i&&(0===i.scrollTop()&&n>0&&e.preventDefault(),i.scrollTop()+i.innerHeight()>=i[0].scrollHeight&&0>n&&e.preventDefault(),e.stopPropagation())}};return a}),define("home/mixins/withClickLinkTracking",["jquery","underscore","core/bus"],function(e,t,n){"use strict";var i=t.debounce(function(e,t){n.trigger("uiAction:clickLink",e,t)},500,!0);return function(t){this.trackClickLink=function(n){var a=e(n.currentTarget),s={adjective:a.attr("data-link-name")};s.area=t?t:a.closest("[data-jester-area]").attr("data-jester-area"),i(n,s)}}}),define("core/api",["jquery","underscore","backbone","core/config","core/utils"],function(e,t,n,i,a){"use strict";function s(e){return u.href=e,u.origin||u.protocol+"//"+u.hostname+(u.port?":"+u.port:"")}function o(e){return e.replace(/^(http:)?\/\//,"https://")}function r(n){n=t.defaults(n,h),n.traditional=!0,s(window.location.href)!==s(n.url)&&(n.xhrFields={withCredentials:!0}),n.omitDisqusApiKey||(n.data=n.data||{},window.FormData&&n.data instanceof window.FormData?n.url=a.serialize(n.url,{api_key:i.keys.api}):n.data.api_key=i.keys.api);var o=n.error;return n.error=function(e){m.trigger("error",e),t.isFunction(o)&&o(e)},e.ajax(n)}function l(e,n){return n=n||{},n.url=c(e),n.omitDisqusApiKey||(n.data=t.extend(n.data||{},{api_key:i.keys.api})),m.trigger("call",n),r(n).always(t.bind(this.trigger,this,"complete",n))}function c(e){return/(https?:)?\/\//.test(e)?o(e):i.urls.api+e}var d=window.document,u=d.createElement("a"),h={},m={ERROR_CODES:{OBJ_NOT_FOUND:8,MAX_ITEMS_REACHED:24},ajax:r,call:l,getURL:c,defaults:function(e){Object.keys(e).forEach(function(n){var i=e[n],a=h[n];t.isObject(i)&&t.isObject(a)?t.extend(a,i):h[n]=i})},headers:function(e){var n=t.extend({},h.headers,e);return h.headers=t.pick(n,Boolean)},makeHttps:o};return t.extend(m,n.Events),m}),define("core/time",[],function(){"use strict";function e(e){return e.indexOf("+")>=0?e:e+"+00:00"}var t="YYYY-MM-DDTHH:mm:ssZ";return{ISO_8601:t,assureTzOffset:e}}),define("core/models/BaseUser",["backbone","core/config"],function(e,t){"use strict";var n=e.Model.extend({defaults:{about:null,avatar:{cache:t.urls.avatar.generic,permalink:t.urls.avatar.generic},connections:{},email:null,isAnonymous:!0,isFollowedBy:null,isFollowing:null,joinedAt:null,name:null,profileUrl:null,url:null,username:null,numPosts:null,numFollowing:null,numForumsFollowing:null,numFollowers:null,numLikesReceived:null,isFlagged:null},hasValidAvatar:function(e){var t=e?e.avatar:this.get("avatar");return t&&t.cache},isAnonymous:function(){return!this.get("id")},isRegistered:function(){return!this.isAnonymous()},validate:function(e){return this.hasValidAvatar(e)?void 0:"None of the avatar related properties can be null, undefined or empty on User models."},toJSON:function(){var t=e.Model.prototype.toJSON.apply(this,arguments);return t.thread={},this.hasValidAvatar()||(t.avatar=this.defaults.avatar),t.isRegistered=this.isRegistered(),t}});return n}),define("core/models/User",["jquery","underscore","moment","core/config","core/time","core/utils","core/strings","core/api","core/models/BaseUser"],function(e,t,n,i,a,s,o,r,l){"use strict";function c(e,t,n){e[t]=e[t]||[],e[t].push(n)}var d=o.get,u=l.extend({url:r.getURL("users/details"),validate:function(n){var i={};return n.display_name&&(n.display_name=e.trim(n.display_name)),n.display_name||c(i,"display_name",d("Please enter your name.")),n.email||c(i,"email",d("Please enter your email address.")),s.validateEmail(n.email)||c(i,"email",d("Invalid email address.")),this.isNew()&&(n.password?u.MIN_PASSWORD_LEN>n.password.length&&c(i,"password",d("Password must have at least 6 characters.")):c(i,"password",d("Please enter a password."))),n.name&&(u.MIN_NAME_LEN>n.name.length&&c(i,"name",o.interpolate(d("Name must have at least %(minLength)s characters."),{minLength:u.MIN_NAME_LEN})),n.name.length>u.MAX_NAME_LEN&&c(i,"name",o.interpolate(d("Name must have less than %(maxLength)s characters."),{maxLength:u.MAX_NAME_LEN}))),n.location&&n.location.length>u.MAX_LOCATION_LEN&&c(i,"location",o.interpolate(d("Location must have less than %(maxLength)s characters."),{maxLength:u.MAX_LOCATION_LEN})),n.url&&(n.url.length>u.MAX_URL_LEN&&c(i,"url",o.interpolate(d("Site must have less than %(maxLength)s characters."),{maxLength:u.MAX_URL_LEN})),s.isUrl(n.url)||c(i,"url",d("Please enter a valid site."))),t.isEmpty(i)?void 0:i},prepareFetchOptions:function(e){e=e?t.clone(e):{};var n={};return this.get("id")?n.user=this.get("id"):this.get("username")&&(n.user="username:"+this.get("username")),t.extend(n,e.data),e.data=n,e},fetch:function(e){return e=this.prepareFetchOptions(e),l.prototype.fetch.call(this,e)},parse:function(e){return e.response||e},register:function(e){var t=this;return e=e||{},r.call("internal/users/register.json",{data:this.toRegisterJSON(),method:"POST",success:function(n){t.set(n.response),e.success&&e.success(n)},error:e.error})},saveAvatar:function(e){var t=new window.FormData;return t.append("avatar_file",e),t.append("api_key",i.keys.api),r.call("internal/users/updateAvatar.json",{method:"post",data:t,cache:!1,contentType:!1,processData:!1})},saveProfile:function(){return r.call("users/updateProfile.json",{method:"POST",data:{name:this.get("name"),about:this.get("about"),location:this.get("location"),url:this.get("url")}})},toRegisterJSON:function(){return t.pick(this.toJSON(),"display_name","email","password")},isSession:function(e){return e.user.id&&e.user.id===this.id},isEditable:function(e){return this.isSession(e)&&!this.get("remote")},toJSON:function(e){e=e||{};var t=l.prototype.toJSON.call(this),n=this.collection&&this.collection.thread;return t.thread.canModerate=!(!n||!n.isModerator(this)),e.session&&(t.isSession=this.isSession(e.session),t.isEditable=this.isEditable(e.session)),t},_changeFollowState:function(e){this.set({isFollowing:e,numFollowers:Math.max(0,this.get("numFollowers")+(e?1:-1))});var t="users/"+(e?"follow":"unfollow"),n=this;return r.call(t+".json",{data:{target:this.get("id")},method:"POST",success:function(e){n.trigger("sync",n,e,{})}})},follow:function(){return this._changeFollowState(!0)},unfollow:function(){return this._changeFollowState(!1)},_changeBlockState:function(e){var t="users/block/"+(e?"create":"delete"),n=this;return r.call(t+".json",{data:{user:this.get("id")},method:"POST",success:function(e){n.set(e.response)}})},block:function(){return this._changeBlockState(!0)},unblock:function(){return this._changeBlockState(!1)},report:function(e){var t=this;return r.call("users/report.json",{data:{reason:e,user:this.get("id")},method:"POST",success:function(){t.set("isFlagged",!0)}})},toggleFollowState:function(){return this._changeFollowState(!this.get("isFollowing"))},registeredLessThan:function(e,t){var i=a.assureTzOffset(this.get("joinedAt")),s=n().subtract(e,t);return n(i).isAfter(s)},registeredToday:function(){return this.registeredLessThan(1,"day")},registeredThisWeek:function(){return this.registeredLessThan(1,"week")},shouldHomeOnboard:function(){return!this.get("homeOnboardingComplete")},setHomeOnboardComplete:function(e){this.updateFlags({homeOnboardingComplete:e}),e&&this.listenTo(this,"change:homeOnboardingComplete",t.bind(this.set,this,"homeOnboardingComplete",e,{silent:!0}))},updateFlags:function(e){return this.set(e),r.call("internal/users/updateFlags.json",{data:t.mapObject(e,function(e){return e?1:0}),method:"POST"})}},{MIN_PASSWORD_LEN:6,MIN_NAME_LEN:2,MAX_NAME_LEN:30,MAX_LOCATION_LEN:255,MAX_URL_LEN:200});return u}),define("core/models/Session",["jquery","underscore","backbone","moment","core/api","core/bus","core/config","core/time","core/utils","core/utils/cookies","core/utils/guid","core/utils/auth","core/models/BaseUser","core/models/User"],function(e,t,n,i,a,s,o,r,l,c,d,u,h,m){"use strict";var p=function(){return u.getFromCookie()},f=n.Model.extend({initialize:function(){this.constructor.fromCookie=t.once(p),this.user=this.getAnonUserInstance()},setUser:function(e){this.user&&this.stopListening(this.user),this.user=e,this.setIfNewUser(),this.listenTo(e,"all",this.trigger),this.trigger("change:id",e)},isLoggedOut:function(){return!this.isLoggedIn()},isLoggedIn:function(){return!!this.user.get("id")},fetch:function(e){var n=e||{};return a.call("users/details.json",{data:n.data,success:t.bind(function(e){e=e.response,e.id&&this.setUser(this.getUserInstance(e)),n.success&&n.success(e),n.complete&&n.complete(e)},this),error:function(e){n.error&&n.error(e),n.complete&&n.complete(e)}})},getAnonUserInstance:function(e){return new h(e)},getUserInstance:function(e){return new m(e)},getCsrfToken:function(){var e=c.read("csrftoken");return e||(e=d.generate().replace(/\W/g,""),c.create("csrftoken",e,{expiresIn:31536e6})),e},authenticate:function(n){var i=this.authServices[n];if(i){if(t.isFunction(i))return i.call(this);s.trigger("uiAction:openLogin",n);var a=this.getAuthWindowArgs(i),o=i.url;o+=(o.indexOf("?")>-1?"&":"?")+e.param(a),this.openAuthWindow(o,i.width,i.height)}},authServices:{disqus:{url:o.urls.login,width:460,height:355},twitter:{url:o.urls.oauth.twitter,width:650,height:680,csrf:!0},facebook:{url:o.urls.oauth.facebook,width:550,height:300,csrf:!0},google:{url:o.urls.oauth.google,width:445,height:635,csrf:!0}},getAuthWindowArgs:function(e){var n={};return e.csrf&&(n.ctkn=this.getCsrfToken()),t.extend(n,e.params),n},openAuthWindow:function(e,t,n){return l.openWindow(e,"_blank",{width:t,height:n})},setIfNewUser:function(){var e=this.user.get("joinedAt");if(this.user.get("isAnonymous")||!e)return void this.user.set("joinedRecently",!1);var t=r.assureTzOffset(e);this.user.set("joinedRecently",i().subtract(10,"seconds").isBefore(t))}});return f.fromCookie=p,f.isKnownToBeLoggedOut=function(){return!f.fromCookie().id},f}),define("core/UniqueModel",["underscore"],function(e){"use strict";function t(e,n,i){var a=t.pool(e),s=n&&n[e.prototype.idAttribute];if(!s)return new e(n,i);var o=t.get(e,s);return o?a[s].set(n):a[s]=new e(n,i),a[s]}return t.pool={},t.pool=function(e){var n=t.pool[e.__type__];if(!n)throw Error("Model not registered. Use UniqueModel.addType");return n},t.get=function(e,n){return t.pool(e)[n]},t.set=function(e,n){var i=t.pool(e),a=n&&n.get(e.prototype.idAttribute);if(!a)return n;var s=t.get(e,a);return s?s.set(n.attributes):s=i[a]=n,s},t.addType=function(e,n){n.__type__&&t.pool[e]||(n.__type__=e,t.pool[e]={})},t.boundModel=function(n){var i=e.bind(t,t,n);return i.prototype=n.prototype,i},t.wrap=t.boundModel,t}),define("home/utils/backboneUtils",["jquery"],function(e){"use strict";return{memoizedFetch:function(){if(this.fetchPromise)return this.fetchPromise;var e=this;return this.fetchPromise=this.constructor.__super__.fetch.apply(this,arguments).then(function(){return e.fetchPromise=null,e.fetched=!0,arguments},function(t){return e.fetchPromise=null,t})},getPromiseFor:function(t,n){var i=e.Deferred();return t.has(n)?i.resolve(t.get(n)):t.once("change:"+n,function(e,t){i.resolve(t)}),i.promise()}}}),define("core/utils/object/has",[],function(){"use strict";return function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}),define("core/utils/collection/each",["core/utils/object/has"],function(e){"use strict";return function(t,n){var i=t.length,a=Array.prototype.forEach;if(isNaN(i))for(var s in t)e(t,s)&&n(t[s],s,t);else if(a)a.call(t,n);else for(var o=0;i>o;o++)n(t[o],o,t)}}),define("core/utils/url/serializeArgs",["require","exports","module","core/utils/collection/each"],function(e,t,n){"use strict";var i=e("core/utils/collection/each");n.exports=function(e){var t=[];return i(e,function(e,n){void 0!==e&&t.push(encodeURIComponent(n)+(null===e?"":"="+encodeURIComponent(e)))}),t.join("&")}}),define("core/utils/url/serialize",["require","exports","module","core/utils/url/serializeArgs"],function(e,t,n){"use strict";var i=e("core/utils/url/serializeArgs");n.exports=function a(e,t,n){if(t&&(-1===e.indexOf("?")?e+="?":"&"!==e.charAt(e.length-1)&&(e+="&"),e+=i(t)),n){var s={};return s[(new Date).getTime()]=null,a(e,s)}var o=e.length;return"&"===e.charAt(o-1)?e.slice(0,o-1):e}}),define("home/utils/sidebarUtils",[],function(){"use strict";var e={};return e.isSidebar=function(){try{return window.self!==window.top}catch(e){return!0}},e}),define("home/utils/navigationUtils",["jquery","underscore","backbone","core/utils/url/serialize","home/utils/sidebarUtils","home/config"],function(e,t,n,i,a,s){"use strict";var o,r=/^#/,l=/\/$/,c=!0,d=/^[#\/]|\s+$/g,u=function(){e("body").html('<div class="spinner"></div>');var t={next:"https://disqus.com"+window.location.pathname+window.location.search};o||(o=require("home/models/Session"));var n=o.get(),a=n.forum;a&&(t.forum=a.shortname);var s=i("https://disqus.com/profile/login/",t);window.top.location=s},h=function(){e("body").html('<div class="spinner"></div>'),window.top.location="https://disqus.com/"},m={scrollPositions:{},lastNavigateTime:null,handleLinkClicks:function(n){var i=n.currentTarget;if(!this.shouldNotHandleLinkClick(n,i)){var s=e(i),o=s.attr("href");if(r.test(o)&&i.hash)return void this.scrollToElement(n);if(a.isSidebar()||!this.matchesRoute(i)&&!this.isInternalLink(i)){var l=s.attr("data-link-out");if(l){var c=s.attr("href");t.delay(function(){s.attr("href",c)},500),s.attr("href",l)}return void s.attr("target","_blank")}(!this.isInternalLink(i)||this.matchesRoute(i))&&(n.preventDefault(),this.navigate(i,!0))}},coerceTrailingSlash:function(e){l.test(e.pathname)||this.navigate(decodeURI(e.pathname+"/"+e.search+e.hash),{replace:!0})},getFragmentFromLink:function(e){var t=decodeURI(e.pathname+e.search),n=s.appRoot.replace(l,"");return t.indexOf(n)||(t=t.slice(n.length)),t.replace(d,"")},isInternalLink:function(e){var t=window.location.host;return t===e.host||e.host.indexOf(t)>1},isInbound:function(e){return"#"===e.href[0]||this.matchesRoute(e)},matchesRoute:function(e){if(e.host!==window.location.host)return!1;var i=this.getFragmentFromLink(e);return t.any(n.history.handlers,function(e){return e.route.test(i)})},shouldNotHandleLinkClick:function(t,n){return t.isDefaultPrevented()||e(n).attr("target")||this.hasModifierKey(t)||e(n).closest("[data-view-type=react]").length},hasModifierKey:function(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey;
},linkClickChangesPage:function(t,n){return"_blank"===e(n).attr("target")?!1:this.hasModifierKey(t)?!1:!this.isInbound(n)&&!c},scrollToElement:function(t){if(t){var n=e(t.currentTarget).attr("href"),i=e(n);if(i.length){t.preventDefault();var a=e("header.site-nav--wrapper"),s=a.height();e("body").scrollTop(i.offset().top-s)}}},navigate:function(t,i){i=i||{};var a,s=i.trigger,o="";return t.pathname&&(o=t.hash,t=this.getFragmentFromLink(t)),-1!==t.indexOf("home/user")&&(t=t.replace("home/user","by")),this.storeScrollPosition(),i.replace||(m.lastNavigateTime=e.now()),a=n.history.navigate(t+o,i),s&&this.applyScrollPosition(),a},notFoundRouteHandler:function(){m.navigate("/",{trigger:!0,replace:!0})},storeScrollPosition:function(){this.scrollPositions[n.history.getFragment()]=window.pageYOffset||window.document.documentElement.scrollTop},applyScrollPosition:function(){window.scrollTo(0,this.scrollPositions[n.history.getFragment()])},navigateToLoginOnAuthFail:function(e){if(!e.responseText)return e;try{var t=JSON.parse(e.responseText);"/home/welcome"!==window.location.pathname&&(4===t.code||2===t.code&&/authenticate/.test(t.response))&&u()}catch(n){}return e},navigateToLogin:u,navigateToHomepage:h};return m}),define("home/templates/confirmModal",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return" modal-dialog--light"},3:function(){return'<button class="text-smaller modal-close" data-dismiss="modal">\n<span class="icon-cancel"></span>\n</button>\n'},5:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="modal-footer">\n<button type="button" class="button button-outline button-small" data-dismiss="modal">\n'+o(n.gettext.call(s,"Cancel",{name:"gettext",hash:{},data:a}))+'\n</button>\n<button type="button" class="button button-fill--brand button-small" data-dismiss="modal" data-action="confirm">\n'+o(n.gettext.call(s,"Confirm",{name:"gettext",hash:{},data:a}))+"\n</button>\n</div>\n"},7:function(e,t,n,i,a){return'<div class="modal-footer">\n<button type="button" class="button button-outline button-small" data-dismiss="modal">\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Close",{name:"gettext",hash:{},data:a}))+"\n</button>\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">\n<div class="modal-dialog'+(null!=(s=n["if"].call(o,n.eq.call(o,null!=t?t.type:t,null!=(s=null!=t?t.types:t)?s.CLOSE_LIGHT:s,{name:"eq",hash:{},data:a}),{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'">\n<div class="modal-content">\n'+(null!=(s=n["if"].call(o,n.eq.call(o,null!=t?t.type:t,null!=(s=null!=t?t.types:t)?s.CLOSE_ICON:s,{name:"eq",hash:{},data:a}),{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+'<div data-role="content">\n</div>\n</div>\n'+(null!=(s=n["if"].call(o,n.eq.call(o,null!=t?t.type:t,null!=(s=null!=t?t.types:t)?s.CONFIRM_CANCEL:s,{name:"eq",hash:{},data:a}),{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=n["if"].call(o,n.eq.call(o,null!=t?t.type:t,null!=(s=null!=t?t.types:t)?s.CLOSE:s,{name:"eq",hash:{},data:a}),{name:"if",hash:{},fn:e.program(7,a,0),inverse:e.noop,data:a}))?s:"")+"</div>\n</div>\n"},useData:!0})}),define("home/utils/confirmModal",["jquery","home/utils/navigationUtils","home/templates/confirmModal"],function(e,t,n){"use strict";function i(){var t=e("<div>").addClass("modal-scrollbar-measure")[0];e("body").append(t);var n=t.offsetWidth-t.clientWidth;return e(t).remove(),n}function a(t){var n=e("<style>").attr("type","text/css")[0];n.styleSheet?n.styleSheet.cssText=t:n.innerHTML=t,e("head").append(n)}function s(i){i=i||{},i.modal=i.modal||{};var a=e(n({type:i.modal.type||r.CLOSE_ICON,types:r}));return i.modal.content&&a.find("[data-role=content]").html(i.modal.content),a.on("shown.bs.modal",function(){e("body").addClass("scroll-fix")}).on("hidden.bs.modal",function(){e("body").removeClass("scroll-fix"),a.remove()}).on("click","a[data-action=close-and-navigate]",function(n){n.preventDefault();var i=e(n.target),s=i.attr("href");s&&t.navigate(s,{trigger:!0}),a.modal("hide")}),e("body").append(a),a}function o(t,n){t=t||r.CLOSE;var i=e.Deferred(),a=s({modal:{type:t,content:n}});return a.on("click","[data-action=confirm]",function(){i.resolve(!0,a)}).on("hidden.bs.modal",function(){i.resolve(!1,a)}),a.modal("show"),i.promise()}var r={CLOSE:1,CONFIRM_CANCEL:2,CLOSE_ICON:3,CLOSE_LIGHT:4};return e(function(){var e=i(),t=["@media only screen and (min-width: 480px) {","body.scroll-fix { margin-right: "+e+"px; }","body.scroll-fix .compensation { margin-right: "+e+"px; }","}"].join(" ");a(t)}),{TYPES:r,getModal:s,confirmationPromise:o}}),define("home/templates/confirmBlacklistUser",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="modal-header">\n<h4 class="modal-title">'+o(n.gettext.call(s,"Ban %(username)s?",{name:"gettext",hash:{username:n.tag.call(s,"b",{name:"tag",hash:{text:null!=t?t.username:t},data:a})},data:a}))+'</h4>\n</div>\n<div class="modal-body">\n<p>'+o(n.gettext.call(s,"Click Confirm to ban and remove this user's recent comments and discussions. This user will no longer be able to post comments.",{name:"gettext",hash:{},data:a}))+"</p>\n</div>\n"},useData:!0})}),define("home/models/User",["jquery","underscore","remote/config","core/api","core/strings","core/models/User","home/utils/backboneUtils","home/utils/confirmModal","home/templates/confirmBlacklistUser","core/UniqueModel"],function(e,t,n,i,a,s,o,r,l,c){"use strict";var d=s,u=d.prototype,h=a.get,m={forum:!0,channel:!0},p=d.extend({defaults:t.defaults({numChannelsFollowing:null},u.defaults),idAttribute:"username",initialize:function(e,t){u.initialize.call(this,e,t);var n=require("home/models/Session");this.session=n.get(),this.listenTo(this,"followed:user",this.handleFollowedUser),this.listenTo(this,"unfollowed:user",this.handleUnfollowedUser),this.listenTo(this,"followed:forum",this.handleFollowedForum),this.listenTo(this,"unfollowed:forum",this.handleUnfollowedForum),this.listenTo(this,"followed:channel",this.handleFollowedChannel),this.listenTo(this,"unfollowed:channel",this.handleUnfollowedChannel)},shouldFetch:function(){return!(this.get("name")&&this.has("numFollowers")&&this.has("numFollowing")&&this.has("numForumsFollowing"))},shouldFetchBasics:function(){return!this.get("name")},ensureFetchedBasics:function(){return this.shouldFetchBasics()&&this.fetch(),this.fetchPromise||e.Deferred().resolve().promise()},isSessionUser:function(){return this.isSession(this.session)},isDisqusNetMod:function(){return t.contains(n.lounge.NET_MOD_LIST,this.get("username"))},getUserReputationLabel:function(){var e=this.get("rep");return.25>e?"Low 1":.8>e?"Low 2":2.9>e?"Average":"High"},prepareFetchOptions:function(e){return e=e?t.clone(e):{},e.data=t.extend({attach:"userFlaggedUser"},e.data),u.prepareFetchOptions.call(this,e)},fetch:function(e){return e=this.prepareFetchOptions(e),o.memoizedFetch.call(this,e)},getNumTotalFollowing:function(){return this.get("numFollowing")+this.getNumCommunitiesFollowing()},getNumCommunitiesFollowing:function(){return this.get("numForumsFollowing")+this.get("numChannelsFollowing")},toggleFollowed:function(){return this.get("isFollowing")?this.unfollow():this.follow()},follow:function(){return this.session.user.trigger("followed:user",this),u.follow.call(this)},unfollow:function(){return this.session.user.trigger("unfollowed:user",this),u.unfollow.call(this)},removeFollower:function(e){if(this.isSessionUser()){var t=this.get("numFollowers")-1;return this.set("numFollowers",Math.max(0,t)),i.call("users/removeFollower",{type:"POST",data:{follower:e.get("id")}})}},handleFollowedUser:function(){this.set({numFollowing:this.get("numFollowing")+1})},handleUnfollowedUser:function(){this.set({numFollowing:Math.max(0,this.get("numFollowing")-1)})},handleFollowedForum:function(){this.set({numForumsFollowing:this.get("numForumsFollowing")+1})},handleUnfollowedForum:function(){this.set({numForumsFollowing:Math.max(0,this.get("numForumsFollowing")-1)})},handleFollowedChannel:function(){this.set({numChannelsFollowing:this.get("numChannelsFollowing")+1})},handleUnfollowedChannel:function(){this.set({numChannelsFollowing:Math.max(0,this.get("numChannelsFollowing")-1)})},moderate:function(n){if(m[n.type]){var a=n.shouldModerate?"addModerator":"removeModerator",s=n.endpoint+"/"+a,o={user:"username:"+this.get("username")};return o[n.type]=n.entity.id,e.when(this.ensureFetchedBasics(),i.call(s,{method:"POST",data:o})).done(t.bind(function(){var e=this.get("moderatedForums")||[];n.shouldModerate?e.push(n.forumId):e=t.reject(e,function(e){return e===n.forumId}),this.set("moderatedForums",e),n.entity.trigger(a,this)},this))}},moderateForum:function(e,t){return this.moderate({entity:e,type:"forum",endpoint:"forums",forumId:e.id,shouldModerate:t})},moderateChannel:function(e,t){return this.moderate({entity:e,type:"channel",endpoint:"channels",forumId:e.primaryForum.id,shouldModerate:t})},confirmBlacklist:function(e){r.confirmationPromise(r.TYPES.CONFIRM_CANCEL,l(this.toJSON())).then(t.bind(function(t){t&&this.addToBlacklist(e)},this))},addToBlacklist:function(e){e=e||{};var n=t.extend({},e,{user:this.get("id"),retroactive:e&&e.retroactive?1:0}),a=n.forum?"blacklists/add.json":"blacklists/global/add.json";i.call(a,{method:"POST",data:n}).done(t.bind(function(e){e&&(n.forum?this.trigger("blacklist:add",n.forum):this.set("isOnGlobalBlacklist",!0),window.alert(h("User was added to the ban list")))},this)).error(function(e){e&&e.responseJSON&&window.alert(e.responseJSON.response)})},removeFromBlacklist:function(e){e=e||{};var n=t.extend({},e,{user:this.get("id")}),a=n.forum?"blacklists/remove.json":"blacklists/global/remove.json";i.call(a,{method:"POST",data:n}).done(t.bind(function(e){e&&(n.forum?this.trigger("blacklist:remove",n.forum):this.set("isOnGlobalBlacklist",!1),window.alert(h("User was removed from the ban list")))},this)).error(function(e){e&&e.responseJSON&&window.alert(e.responseJSON.response)})},requestSpamReview:function(){this.get("flaggedForSpamReview")||i.call("internal/users/requestSpamReview",{method:"POST"}).done(t.bind(function(){this.set("flaggedForSpamReview",!0)},this))},getDisplayName:function(e){return e=e||this.attributes,e.name||e.username||"Guest"},toJSON:function(){var e=u.toJSON.apply(this,arguments);return e.displayName=this.getDisplayName(e),e}});return c.addType("User",p),p}),define("core/collections/PaginatedCollection",["underscore","backbone"],function(e,t){"use strict";var n=t.Collection.extend({PER_PAGE:30,initialize:function(t,n){this.cid=e.uniqueId("collection"),n=n||{},this.cursor=n.cursor||{}},ensureFetched:e.memoize(function(){return this.fetch()},function(){return this.cid}),fetch:function(n){return n=n||{},n.data=e.defaults(n.data||{},{cursor:n.cursor||"",limit:n.PER_PAGE||this.PER_PAGE}),t.Collection.prototype.fetch.call(this,n)},hasPrev:function(){return this.cursor.hasPrev},hasNext:function(){return this.cursor.hasNext},next:function(t){return this.cursor.hasNext?this.fetch(e.extend({},t,{add:!0,remove:!0,cursor:this.cursor.next})):void this.trigger("nodata")},prev:function(t){return this.cursor.hasPrev?this.fetch(e.extend({},t,{add:!0,remove:!0,cursor:this.cursor.prev})):void this.trigger("nodata")},more:function(t){function n(e){a.push(e)}var i=this;if(t=t||{},!this.cursor.hasNext)return void i.trigger("nodata");var a=[];return this.on("add",n),this.fetch(e.extend({},t,{add:!0,remove:!1,cursor:this.cursor.next,limit:this.PER_PAGE,success:function(){i.trigger("add:many",a,i,t),i.off("add",n),t.success&&t.success.apply(this,arguments)}}))},parse:function(e){return this.cursor=e.cursor||{hasNext:!1},e.response},getLength:function(){return this.length}});return n}),define("home/collections/PaginatedUserCollection",["core/collections/PaginatedCollection","core/UniqueModel","home/models/User"],function(e,t,n){"use strict";var i=e.extend({model:t.boundModel(n),initialize:function(e,t){t&&t.url&&(this.url=t.url)}});return i}),define("home/collections/common/ExtensibleCollection",["jquery","underscore","backbone","core/collections/PaginatedCollection"],function(e,t,n,i){"use strict";var a=i.extend({PER_PAGE:10,initialize:function(){i.prototype.initialize.call(this,arguments),this.once("sync",this.extendData,this),this.on("add:many",this.extendData,this),this.on("nodata",this.onNoData,this)},extendData:function(e){var t;if(e.models?t=e.models:e instanceof n.Model?(t=[e],this.once("sync",this.extendData,this)):t=e,!t.length)return this.cursor.hasNext=!1,void this.trigger("nodata");var i=0;this.extensionRequestsCount=0;do{var a=Math.min(i+10,t.length),s=t.slice(i,a);this.requestExData(s),i+=10,this.extensionRequestsCount+=1}while(t.length-1>=i)},getThreadFromModel:function(e){if(!e.getThread)throw Error("Any model that is in an ExtensibleCollection must define function getThread");return e.getThread()},requestExData:function(n,i){i=i||0;var s={};t.each(n,function(e){var t=this.getThreadFromModel(e),n=t&&t.getLinks()||[],i=1===n.length?n[0]:null;return this.shouldExtend(t,i)?(t.set({extending:!0}),void(s[i]=e)):void(t&&t.set({extending:!1}))},this);var o=t.keys(s);if(o.length){var r={url:o,words:200,image_width:320};e.ajax({url:a.EXTRACT_URL,data:r,traditional:!0,dataType:"jsonp",success:function(e){n.timeouts=0,this.onExtendData(e,s)},error:function(e){this.extendDataFailed(e,n,i)},context:this,timeout:3e3,complete:this.checkExtendDataComplete})}},shouldExtend:function(e,n){return e&&n&&!t.any(e.getMedia(),function(e){return e.url===n})},onExtendData:function(e,n){this.extensionRequestsCount-=1,t.each(e,function(e){var t=e&&n[e.original_url];if(t){var i=this.getThreadFromModel(t);i.setEmbedlyData(e),i.set({extending:!1})}},this)},extendDataFailed:function(e,n,i){return"timeout"===e.statusText&&3>i?void this.handleTimeout(n,i):(t.each(n,function(e){var t=this.getThreadFromModel(e);t.set({extending:!1})},this),void(this.extensionRequestsCount-=1))},handleTimeout:function(e,t){this.requestExData(e,t+1)},checkExtendDataComplete:function(){this.extensionRequestsCount||this.finalizeExtendingData(this.cursor.hasNext)},finalizeExtendingData:function(e){this.trigger("extend",e)},onNoData:function(){this.finalizeExtendingData()}},{EXTRACT_URL:"//extract.services.disqus.com"});return a}),define("core/advice",["underscore"],function(e){"use strict";function t(){e.each(["before","after","around"],function(e){this[e]=function(t,i){return this[t]="function"==typeof this[t]?n[e](this[t],i):i}},this)}var n={around:function(t,n){return function(){var i=e.toArray(arguments);return n.apply(this,[e.bind(t,this)].concat(i))}},before:function(t,i){return n.around(t,function(){var t=e.toArray(arguments),n=t.shift();return i.apply(this,t),n.apply(this,t)})},after:function(t,i){return n.around(t,function(){var t=e.toArray(arguments),n=t.shift(),a=n.apply(this,t);return i.apply(this,t),a})}};return{withAdvice:t}}),define("core/models/mixins",["underscore","moment","core/time"],function(e,t,n){"use strict";function i(){this._getCreatedMoment=e.memoize(function(){var e=this.get("createdAt");if(e)return t(n.assureTzOffset(e),n.ISO_8601)},function(){return this.get("createdAt")}),this.getRelativeCreatedAt=function(){var e=this._getCreatedMoment();return e&&e.from(+new Date)},this.getFormattedCreatedAt=e.memoize(function(){var e=this._getCreatedMoment();return e&&e.format("LLLL")},function(){return this.get("createdAt")})}return{withCreatedAt:i}}),define("core/collections/UserCollection",["jquery","backbone","core/models/User"],function(e,t,n){"use strict";var i=t.Collection.extend({model:n,initialize:function(e,n){t.Collection.prototype.initialize.apply(this,arguments),this.thread=n&&n.thread},fetch:function(){return e.when(!0)}});return i}),define("core/collections/UpvotersUserCollection",["underscore","backbone","core/api","core/collections/UserCollection"],function(e,t,n,i){"use strict";var a=i.extend({LIMIT:50,url:function(){return n.getURL("posts/listUsersVotedPost")},initialize:function(e,t){this.postId=t.postId,this.threadId=t.threadId},fetch:function(n){return t.Collection.prototype.fetch.call(this,e.extend({data:{post:this.postId,thread:this.threadId,vote:1,limit:this.LIMIT}},n))}});return a}),define("core/models/Vote",["backbone"],function(e){"use strict";var t=e.Model.extend({defaults:{score:0}});return t}),define("core/collections/VoteCollection",["backbone","core/models/Vote"],function(e,t){"use strict";var n=e.Collection.extend({model:t});return n}),define("core/models/Post",["jquery","underscore","backbone","moment","core/config/urls","core/api","core/strings","core/time","core/utils","core/utils/html","core/advice","core/models/mixins","core/collections/UpvotersUserCollection","core/collections/VoteCollection"],function(e,t,n,i,a,s,o,r,l,c,d,u,h,m){"use strict";var p=1e3,f=0,g=function(){var t=e.now();return p>t-f?!1:(f=t,!0)},v=o.get,b=n.Model.extend({upvotersCollectionClass:h,defaults:function(){return{createdAt:i().format(r.ISO_8601),dislikes:0,isApproved:!0,isDeleted:!1,isEdited:!1,isFlagged:!1,isFlaggedByUser:!1,isHighlighted:!1,isRealtime:!1,isImmediateReply:!1,isMinimized:null,hasMedia:!1,message:null,raw_message:null,likes:0,media:[],parent:null,points:0,depth:0,userScore:0}},initialize:function(){this.votes=new m},messageText:function(){var e=this.get("message");return e&&c.stripTags(e)},permalink:function(e,t){var n=this.id;if(!n||!e)return"";var i=t!==!1&&e.currentUrl||e.permalink(),a=window.document.createElement("a");return a.href=i,a.hash="#comment-"+n,a.href},shortLink:function(){return a.shortener+"/p/"+(+this.id).toString(36)},twitterText:function(e){var t=140,n=this.author.get("name")||this.author.get("username");t-=n.length+3,t-=e.length+1,t-=2;var i=l.niceTruncate(this.messageText(),t);return'"'+i+'" — '+n},toJSON:function(e){var t=n.Model.prototype.toJSON.call(this);if(e){var i=e.session,a=e.thread;t.canBeEdited=this.canBeEdited(i,a),t.canBeRepliedTo=this.canBeRepliedTo(i,a),t.canBeShared=this.canBeShared(),t.permalink=this.permalink(a)}return t.shortLink=this.shortLink(),t.isMinimized=this.isMinimized(),t.plaintext=this.messageText(),t.relativeCreatedAt=this.getRelativeCreatedAt(),t.formattedCreatedAt=this.getFormattedCreatedAt(),t.cid=this.cid,t},isPublic:function(){return this.get("isHighlighted")||this.get("isSponsored")?!0:this.get("isDeleted")?!1:this.get("isApproved")},isMinimized:function(){return this.get("isHighlighted")?!1:this.get("isMinimized")===!1?!1:!this.get("isApproved")},isAuthorSessionUser:function(){return!1},canBeEdited:function(){return!1},canBeRepliedTo:function(){return!1},canBeShared:function(){return!1},validateMessage:function(e){if(t.isString(e.raw_message)){if(""===e.raw_message)return v("Comments can't be blank.");if(2>e.raw_message.length)return v("Comments must have at least 2 characters.")}},validate:function(n){if(!this.id&&!n.id){var i=this.validateMessage(n);return i?i:(n.author_email&&(n.author_email=e.trim(n.author_email)),n.author_name&&(n.author_name=e.trim(n.author_name)),""===n.author_email&&""===n.author_name?v("Please sign in or enter a name and email address."):""===n.author_email||""===n.author_name?v("Please enter both a name and email address."):t.isString(n.author_email)&&!this.validateEmail(n.author_email)?v("Invalid email address format."):void 0)}},validateEmail:function(e){return l.validateEmail(e)},report:function(){this.set("isFlagged",!0),s.call("posts/report.json",{data:{post:this.id},method:"POST"})},_highlight:function(e){this.set("isHighlighted",e),s.call("posts/"+(e?"highlight":"unhighlight")+".json",{data:{post:this.id},method:"POST"})},highlight:function(){this._highlight(!0)},unhighlight:function(){this._highlight(!1)},getThreadId:function(){return this.get("thread")},getUpvotersUserCollection:t.memoize(function(){var e=this.upvotersCollectionClass;return new e(void 0,{postId:this.id,threadId:this.getThreadId()})},function(){return this.id}),_vote:function(e,t,n){var i=e-t,a={likes:this.get("likes"),dislikes:this.get("dislikes"),points:this.get("points")};return 0===i?i:(e>0?(a.likes+=e,a.dislikes+=t):0>e?(a.dislikes-=e,a.likes-=t):t>0?a.likes-=t:a.dislikes+=t,a.points+=i,n&&this.getUpvotersUserCollection()[e>0?"add":"remove"](n),this.set(a),i)},vote:function(e){if(!g())return 0;var t=this,n=t._vote(e,t.get("userScore"));0!==n&&(t.set("userScore",e),s.call("posts/vote.json",{data:{post:t.id,vote:e},method:"POST",success:function(n){t.votes.add({id:n.response.id,score:e},{merge:!0})}}))},_delete:function(){return this.set({isApproved:!1,isDeleted:!0}),s.call("posts/remove.json",{data:{post:this.id},method:"POST"})},spam:function(){this.set({isApproved:!1,isDeleted:!0,isSpam:!0}),this.trigger("spam"),s.call("posts/spam.json",{data:{post:this.id},method:"POST"})},_create:function(e,t){var n=this,i=e.attributes,a={thread:i.thread,message:i.raw_message};return i.parent&&(a.parent=i.parent),i.author_name&&(a.author_name=i.author_name,a.author_email=i.author_email),s.call("posts/create.json",{data:a,method:"POST",success:function(e){n.set(e.response),t.success&&t.success()},error:t.error})},_update:function(e,t){var n=this,i=e.attributes,a={post:i.id,message:i.raw_message};return s.call("posts/update.json",{data:a,method:"POST",success:function(e){n.set(e.response),t.success&&t.success()},error:t.error})},_read:function(e,t){var n=this;return t=t||{},s.call("posts/details.json",{data:{post:n.id},method:"GET",success:function(e){n.set(e.response),t.success&&t.success()},error:t.error})},sync:function(e,t,n){n=n||{};var i=n.error;switch(i&&(n.error=function(e){var t={};try{t=JSON.parse(e.responseText)}catch(n){}i(t)}),e){case"create":return this._create(t,n);case"update":return this._update(t,n);case"delete":return this._delete();case"read":return this._read(t,n)}},storageKey:function(){return this.isNew()&&this.getThreadId()?["drafts:thread",this.getThreadId(),"parent",this.get("parent")||0].join(":"):void 0}},{formatMessage:function(){var e=/(?:\r\n|\r|\n){2,}/,n=/\r\n|\r|\n/;return function(i){var a=t.chain(i.split(e)).compact().value(),s=t.map(a,function(e){return t.chain(e.split(n)).compact().map(t.escape).join("<br>").value()}).join("</p><p>");return"<p>"+s+"</p>"}}()});return u.withCreatedAt.call(b.prototype),d.withAdvice.call(b.prototype),b.withAuthor=function(e){this.around("set",function(n,i,a,s){var o;if(null==i)return this;"object"==typeof i?(o=i,s=a):(o={},o[i]=a);var r=o.author;if(r){if(t.isString(r)||t.isNumber(r)){var l=r;r={},r[e.prototype.idAttribute||"id"]=l}this.author=new e(r),this.trigger("changeRelated:author"),delete o.author}return n.call(this,o,s)}),this.around("toJSON",function(e){var n=e.apply(this,t.rest(arguments));return this.author&&(n.author=this.author.toJSON()),n})},b.withMediaCollection=function(e){this.after("set",function(n){n&&"string"!=typeof n&&(t.isUndefined(n.media)||(this.media?this.media.reset(n.media):this.media=new e(n.media),delete n.media))}),this.around("toJSON",function(e){var n=e.apply(this,t.rest(arguments));return this.media&&(n.media=this.media.toJSON()),n})},b}),define("core/models/Thread",["underscore","backbone","loglevel","core/config/urls","core/utils","core/api","core/config","core/advice","core/UniqueModel","core/models/User"],function(e,t,n,i,a,s,o,r,l,c){"use strict";var d=t.Model,u=d.prototype,h=d.extend({defaults:{author:null,category:null,createdAt:null,forum:null,identifiers:[],ipAddress:null,isClosed:!1,isDeleted:!1,hasStreaming:!1,link:null,message:null,slug:null,title:null,userSubscription:!1,posts:0,likes:0,dislikes:0,userScore:0},initialize:function(e,t){t=t||{},this.moderators=t.moderators,this.forum=t.forum,this.on("change:userScore",function(){var e=this.get("userScore");e>0&&0===this.get("likes")&&this.set("likes",e)},this)},_vote:function(e,t){var n=e-t;return 0===n?n:(this.set("likes",this.get("likes")+n),n)},vote:function(e){var t=this,n=t._vote(e,t.get("userScore"));0!==n&&(this.set("userScore",e),s.call("threads/vote.json",{data:{thread:this.id,vote:e},method:"POST",success:function(e){e.response.id&&t.trigger("vote:success",e)}}))},fetch:function(e){var t,i=this,a=i.attributes;e=e||{},t=a.identifier?"ident:"+a.identifier:"link:"+a.url,s.call("threads/details.json",{data:{thread:t,forum:a.forum},success:function(t){i.set(t.response),e.success&&e.success()},error:function(){o.debug?i.save({},{success:e.success}):n.info("Couldn't find thread; not creating in production.")}})},_toggleState:function(e,t){t||(t={});var n=e?"open.json":"close.json";return this.set("isClosed",!e),s.call("threads/"+n,{method:"POST",data:{thread:this.id},success:t.success,error:t.error})},open:function(e){return this._toggleState(!0,e)},close:function(e){return this._toggleState(!1,e)},sync:function(){var e=this,t=e.attributes;s.call("threads/create.json",{data:{title:t.title,forum:t.forum,identifier:t.identifier,url:t.url},method:"POST",success:function(t){e.set(t.response)}})},incrementPostCount:function(e){var t=this.get("posts")+e;this.set("posts",t>0?t:0)},isModerator:function(t){var n;if(this.moderators)return n=t instanceof c||e.isObject(t)?t.id:t,n=parseInt(n,10),e(this.moderators).contains(n)},subscribe:function(e,t){e=e!==!1;var n=this.get("userSubscription");if(n!==e){e?this.set("userSubscription",t||!0):this.set("userSubscription",!1);var i=e?"subscribe.json":"unsubscribe.json",a={thread:this.id};return t?a.email=t:e||"string"!=typeof n||(a.email=n),s.call("threads/"+i,{data:a,method:"POST"})}},twitterText:function(e){var t=140-(e.length+1),n=this.get("clean_title");return n=a.niceTruncate(n,t)},permalink:function(){return this.get("url")||this.get("link")||this.currentUrl},shortLink:function(){return i.shortener+"/t/"+(+this.id).toString(36)},toJSON:function(){var e=u.toJSON.call(this);return e.permalink=this.permalink(),e.shortLink=this.shortLink(),e},getDiscussionRoute:function(e){var t=["","home","discussion",this.forum.id,this.get("slug"),""];return e=e||this.forum.channel,e&&(e=e.attributes||e,t.splice(2,0,"channel",e.slug)),t.join("/")}});return r.withAdvice.call(h.prototype),h.withThreadVoteCollection=function(e){this.after("initialize",function(){this.votes=new e,this.on("vote:success",function(e){this.votes.get(e.response.id)||this.votes.add({id:e.response.id,score:e.response.vote,currentUser:!0})},this)})},h.withPostCollection=function(t){this.after("initialize",function(n){n=n||{},this.posts=new t(n.posts,{thread:this,cursor:n.postCursor,order:n.order,perPage:this.postsPerPage}),this.listenTo(this.posts,"add reset",function(t){t=t.models?t.models:[t],this.users&&e.each(t,function(e){this.users.get(e.author.id)||this.users.add(e.author)}),this.recalculatePostCount()}),this.listenTo(this.posts,"change:isDeleted change:isFlagged",function(e,t){t&&this.incrementPostCount(-1)})}),this.recalculatePostCount=function(){var e=this.get("posts");e>50||(e=this.posts.reduce(function(e,t){return t.isPublic()?e+1:e},0),this.set("posts",e))}},l.addType("Thread",h),h}),define("core/utils/releaseUtils",["underscore","exports","remote/config"],function(e,t,n){"use strict";t.DISQUS_ADMIN_USERNAMES=["Jason","danielha","ryanvalentin","kimskitchensink","TaltonFiggins","davidericfleck","NorthIsUp","mpattyfly","madBYK","iamfrancisyo","met48","Rsadi","kalail610","jimwaggoner","nicoleallard","sayshelen","wedamija","ryan04","ProductNate","tonyhue","Jameslm86","min_diesel","colekowalski","SteiNYSF","webrender","saeedoday","thesilkycat","menglan","lmars86","gwenbrin","phpham","sb_415","mariopaganini","trevorj","Gastove","the_etruscan","Blair0723","samholland00","darlenatran"],t.isDisqusAdmin=function(i){return e.contains(t.DISQUS_ADMIN_USERNAMES,i.get("username"))||e.contains(n.lounge.home_other_admin_accounts,i.get("username"))}}),define("home/models/Topic",["underscore","backbone","core/strings","core/UniqueModel"],function(e,t,n,i){"use strict";var a=n.get,s=t.Model.extend({idAttribute:"identifier",defaults:{identifier:null,displayName:null},validate:function(e){var t=e.displayName;if(!t)return{attrName:"displayName",message:a("Topic name cannot be empty.")};var i=s.TOPIC_NAME_RANGES;return t.length>i.maxLength||i.minLength>t.length?{attrName:"displayName",message:n.interpolate(a("A topic must be between %(minLength)s and %(maxLength)s characters."),{minLength:i.minLength,maxLength:i.maxLength})}:void 0}},{TOPIC_NAME_RANGES:{minLength:2,maxLength:30},cleanTopicName:function(e){return e.replace(/\s+/g," ").trim()},getOrCreateTopic:function(t){var n=s.cleanTopicName(t);if(!n)return null;var a=n.toLowerCase(),o=e.find(i.pool(s),function(e){return e.get("displayName").toLowerCase()===a});return o?o:new i(s,{displayName:n})}});return i.addType("Topic",s),s}),define("home/collections/TopicCollection",["underscore","backbone","home/models/Topic","core/UniqueModel","core/api","core/strings"],function(e,t,n,i,a,s){"use strict";var o=s.get,r=t.Collection.extend({model:i.boundModel(n),initialize:function(e,t){t&&t.thread&&(this.thread=t.thread)},getCategoryTopics:function(){var t=this.thread.forum.channel,i=t.getCategories();return i?(i=i&&e.keys(i),this.filter(function(t){var a=t.get("displayName").toLowerCase();return e.find(i,function(e){return n.cleanTopicName(e).toLowerCase()===a})})):[]},isValid:function(){var e=this.validationError=this.validate()||null;return e?(this.trigger("invalid",this,e,{validationError:e}),!1):!0},validate:function(){var t=this.find(function(e){return!e.isValid()});if(t)return t.validationError;if(this.thread){var n=this.countBy(function(e){return e.get("hidden")?"hidden":"visible"});if(n.visible>r.MAX_LENGTH)return{attrName:"topics",message:s.interpolate(o("You may not have more than %(num)s topics"),{num:r.MAX_LENGTH})};var i=this.thread.forum.channel,a=i&&i.getCategories();if(a){var l=this.getCategoryTopics();if(1>l.length)return{attrName:"category",message:o("You must choose a category")};var c=e.any(l,function(e){return!e.get("hidden")});if(c)return{attrName:"topics",message:o("You may not enter a category as a topic")}}}},_syncTopicsOnThread:function(n,i){var a={url:this.urls[i],type:"POST",processData:!0,emulateHTTP:!0,data:{thread:this.thread.id,topics:e.map(n,function(e){return e.get("displayName")})}};return t.sync(i,this,a)},urls:{addTopicsToThread:a.getURL("timelines/curation/addTopicsToThread"),removeTopicsFromThread:a.getURL("timelines/curation/removeTopicsFromThread")},save:function(){if(this.thread&&this.isValid()){var t=this.thread.topics.models,a=e.difference(this.models,t),s=e.difference(t,this.models),o=this.thread;a.length&&this._syncTopicsOnThread(a,"addTopicsToThread").then(function(t){t.response&&o.topics.add(e.map(t.response,function(e){return new i(n,e)}))}),s.length&&this._syncTopicsOnThread(s,"removeTopicsFromThread").then(function(){o.topics.remove(s)})}},parse:function(e){return e.response}},{MAX_LENGTH:5});return r}),define("core/models/Forum",["backbone","core/UniqueModel","core/api"],function(e,t,n){"use strict";var i=e.Model.extend({defaults:{settings:{},followUrl:"forums/follow",unfollowUrl:"forums/unfollow",isFollowing:!1},initialize:function(e,t){t&&t.channel&&(this.channel=t.channel)},_changeFollowingState:function(e){return n.call(e,{method:"POST",data:{target:this.get("id")}})},follow:function(){return this.set("isFollowing",!0),this._changeFollowingState(this.get("followUrl"))},unfollow:function(){return this.set("isFollowing",!1),this._changeFollowingState(this.get("unfollowUrl"))},toggleFollowed:function(){if(this.channel&&this.channel.get("options").isCurationOnlyChannel)return this.channel.toggleFollowed();var e=this.get("isFollowing")?this.unfollow():this.follow();return this.trigger("toggled:isFollowing"),e}});return t.addType("Forum",i),
i}),define("home/models/Forum",["jquery","underscore","backbone","require","core/utils/html","core/models/Forum","core/api","core/utils"],function(e,t,n,i,a,s,o,r){"use strict";var l=s.extend({getFriendlyUrl:function(){var e=r.getDomain(this.get("url"));return e.indexOf("disqus.com")>-1?"disqus.com":e},initialize:function(e,n){if(!this.get("id"))throw Error("Forum must be initialized with an id");s.prototype.initialize.call(this,e,n),this.fetch=t.memoize(t.bind(this.fetch,this)),this.buildChannel(n),this.listenTo(this,"change:channel",this.updateChannel),this.listenTo(this,"toggled:isFollowing",this.handleFollowingToggled)},buildChannel:function(n){if(!this.channel){var a=n&&n.channel||this.get("channel");if(a){e.isPlainObject(a)?a.primaryForum=this:n=t.defaults({primaryForum:this},n);var s=i("home/models/Channel");this.initializeRelated("channel",n,s)}}},updateChannel:function(){var e=this.get("channel");this.unset("channel"),e&&(this.channel?this.channel.shouldFetch()&&t.isObject(e)&&this.channel.set(e):this.buildChannel({channel:e}))},url:function(){return o.getURL("forums/details?forum="+this.get("id"))},parse:function(e){return e.response||e},shouldFetch:function(){return!this.get("name")},shouldFetchWithAttachments:function(e){return this.shouldFetch()||t.some(e,function(e){return!this.has(e)},this)},fetchWithAttachments:function(e){this.fetch({data:{attach:e}})},hasFavicon:function(){var e=this.getFavicon();return e&&!e.match(/favicon-default\.png/)},getFavicon:function(){var e=(this.get("favicon")||{}).cache;return this.channel&&this.channel.get("options").favicon||e},hasGuidelines:function(){return!!e(this.get("guidelines")).text().length},handleFollowingToggled:function(){var e,t;this.get("isFollowing")?(e="followed",t=1):(e="unfollowed",t=-1);var n=i("home/models/Session"),a=n.get().user;a.trigger(e+":forum",this),this.has("numFollowers")&&this.set("numFollowers",this.get("numFollowers")+t)},toJSON:function(){var e=n.Model.prototype.toJSON.apply(this,arguments),i=t.defaults({forumRoute:this.getForumRoute(),faviconImage:this.getFavicon()},e);return this.channel&&(i.channelInfo=t.pick(this.channel.attributes,["name","slug","options"])),i},getPlainDescription:function(){var e=this.get("description");if(e)return a.stripTags(e)},getForumRoute:function(){var e=this.channel?["channel",this.channel.id]:["forum",this.id];return e.join("/")}});return l}),define("home/templates/confirmDeleteThread",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="modal-header">\n<h4 class="modal-title">'+o(n.gettext.call(s,"Remove %(discussionTitle)s?",{name:"gettext",hash:{discussionTitle:n.tag.call(s,"b",{name:"tag",hash:{text:null!=t?t.title:t},data:a})},data:a}))+'</h4>\n</div>\n<div class="modal-body">\n<p>'+o(n.gettext.call(s,"Click Confirm to remove and close the discussion so it can't be easily found. This prevents new comments from being posted.",{name:"gettext",hash:{},data:a}))+"</p>\n</div>\n"},useData:!0})}),define("home/utils/datetimeUtils",["moment"],function(e){"use strict";var t="YYYY-MM-DDTHH:mm:ssZ",n=function(e){return e.indexOf("+")>=0?e:e+"+00:00"},i=function(i){return i&&i!==1/0?(i=n(i),e.utc(i,t).local().fromNow()):null};return{getRelativeDatetime:i}}),define("home/models/Thread",["jquery","underscore","backbone","core/api","core/bus","core/models/mixins","core/models/Thread","core/UniqueModel","core/utils","core/utils/html","core/utils/releaseUtils","home/collections/common/ExtensibleCollection","home/collections/TopicCollection","home/models/Forum","home/models/User","home/models/Post","home/templates/confirmDeleteThread","home/utils/backboneUtils","home/utils/datetimeUtils","home/utils/confirmModal","home/utils/navigationUtils"],function(e,t,n,i,a,s,o,r,l,c,d,u,h,m,p,f,g,v,b,w,x){"use strict";var y=36,_=/^https:\/\/[^.]+\.disqus\.com\/thread\//,k=o,C=k.prototype,T=k.extend({defaults:t.defaults({id:null,content:{title:"",description:"",keywords:[],image:{url:"",height:"",width:""}},message:void 0,canModerate:!1,canEdit:!1,isAuthor:!1},C.defaults),initialize:function(e,t){C.initialize.call(this,e,t),this.initializeRelated("forum",t,m,"name"),this.listenTo(this,"change:forum",function(e,t){t instanceof n.Model||this.forum.set(t)}),this.listenTo(this,"change:author",function(e,t){this.setAuthor(t)}),this.listenTo(this,"change:message",this._clearDescriptions),this.topics=new h([],{thread:this});var i=this;v.getPromiseFor(this,"topics").then(function(e){i.topics.add(e),i.unset("topics")}),this.checkUserGenerated(t),this.listenTo(this,"change:userSubscription",this.onChangeUserSubscription)},onChangeUserSubscription:function(e,n){var i=require("home/models/Session"),a=i.get();a.loadPromise().always(t.bind(function(){a.user.trigger(n?"subscribe:thread":"unsubscribe:thread",this)},this))},validate:function(e){if(!e.title||!e.title.trim())return{attrName:"title",message:"Please enter a title for your discussion."};if(e.title.length>200)return{attrName:"title",message:"Please shorten your title."};if(!e.message||e.message.trim().length<2)return{attrName:"message",message:"Please enter a longer discussion body"};var n=this.forum.channel&&this.forum.channel.getCategories();if(n){var i=t.chain(n).keys().find(function(t){return 0===e.title.indexOf(t)}).value();if(i&&!e.title.match(RegExp(i+".*\\w+")))return{attrName:"title",message:"Your title must contain more than just a category."}}},checkUserGenerated:function(e){return e=e||{},this.shouldFetch()?void this.listenToOnce(this,"sync",t.bind(this.checkUserGenerated,this,e)):this.forum.channel?(this.setAuthor(e.author),this.initializeRecentPosts(e),void this.set({isUserGenerated:!0})):void this.set({isUserGenerated:!1})},setAuthor:function(e){e=e||this.get("author"),this.author?t.isObject(e)&&this.author.set(e):t.isObject(e)?this.initializeRelated("author",{author:e},p):(e=this.getAuthorFromUniqueModel(e),e&&(this.author=e))},getAuthorFromUniqueModel:function(e){return t.isString(e)&&e.length?t.find(r.pool(p),function(t){return t.get("id")===e}):void 0},fetchAuthor:function(){var n,i=this.get("author");return(n=this.getAuthorFromUniqueModel(i))?(this.setAuthor(n),e.Deferred().resolve(n).promise()):(n=new p({id:i}),n.fetch().then(t.bind(function(){this.setAuthor(n.attributes)},this)))},initializeRecentPosts:function(e){f||(f=require("home/models/Post")),this.recentPosts=new n.Collection(t.map(e.recentPosts,function(e){return e instanceof f?e:new r(f,e,{thread:this})},this))},getLinks:function(){var e=[];return e=this.get("isUserGenerated")?this.getLinksFromMessage():[this.get("link")]},getFriendlySourceUrl:function(){var e=l.getDomain(this.get("link"));return e.indexOf("disqus.com")>-1?"disqus.com":e},getLinksFromMessage:t.memoize(function(){var t=e("<div>").html(this.get("message"));return t.find("a[href]").map(function(t,n){return e(n).attr("href")})},function(){return this.id}),shouldFetch:function(){return!this.get("clean_title")},url:function(e){return this.urls[e]||this.urls.read},urls:{read:i.getURL("threads/details"),create:i.getURL("threads/create"),update:i.getURL("threads/update"),"delete":i.getURL("threads/remove"),restore:i.getURL("threads/restore"),inviteUserGroup:i.getURL("threads/inviteUserGroup"),approve:i.getURL("threads/approve"),spam:i.getURL("threads/spam")},buildFetchData:function(e){var n;if(this.get("id"))n={thread:this.get("id")};else{if(!this.get("slug")||!this.forum.id)throw Error("Cannot fetch thread without an id or a slug plus forum");n={thread:"slug:"+this.get("slug"),forum:this.forum.id}}return t.extend(n,e)},fetch:function(e){if(this.fetchPromise)return this.fetchPromise;e=e||{},e.data=t.extend(this.buildFetchData(),e.data),e.data.attach=e.data.attach||[],e.data.attach.push("topics"),this.forum.shouldFetch()&&(e.data.related=e.data.related||[],e.data.related.push("forum")),this.fetchPromise=n.Model.prototype.fetch.call(this,e);var i=this;return this.fetchPromise.always(function(){i.fetchPromise=null}),this.fetchPromise},sync:function(e,i,a){var s=i.attributes;switch(a=a||{},a.url=this.url(e),a.processData=!0,a.emulateHTTP=!0,e){case"create":var o=s.forum;s.forum||(o=this.forum.id),a.data=t.extend({title:s.title,forum:o,message:s.message},a.data);break;case"update":var r={title:s.title,message:s.message};a.data=t.extend({thread:s.id},r);break;case"delete":a.data=t.extend({thread:s.id},a.data);break;case"restore":case"inviteUserGroup":case"spam":case"approve":a.data=t.extend({thread:s.id},a.data),a.type="POST"}return n.sync(e,i,a)},parse:function(e){return e.response||e},toJSON:function(){var e=C.toJSON.call(this);return t.extend(e,{forum:this.forum.toJSON(),author:this.author?this.author.toJSON():void 0}),e.link?_.test(e.link)&&(e.link=this.getDiscussionRoute()):e.slug&&(e.link=this.getDiscussionRoute()),e},getThread:function(){return this},getHostname:function(){var t=this.get("link");if(!t)return"";var n=e("<a>").attr("href",t)[0];return n.hostname||t},getRelativeCreatedAt:function(){return b.getRelativeDatetime(this.get("createdAt"))},getRelativeCommentTimestamp:function(){return b.getRelativeDatetime(this.get("most_recent_comment_timestamp"))},getMostRecentCommenter:function(){var e=this.get("most_recent_commenter");return e&&!e.isAnonymous?e:void 0},setEmbedlyData:function(e){this.set({content:{title:e.title,description:e.description,image:e.images&&e.images[0]||{},keywords:e.keywords.length?e.keywords.slice(0,3):[]}})},getImage:function(){var e;return this.get("isUserGenerated")&&(e=this.getUserGeneratedImage()),e||this.getEmbedlyImage()},getEmbedlyImage:function(){var e=this.get("content");return e&&e.image&&e.image.url?{src:e.image.url,title:this.get("title")}:void 0},getUserGeneratedImage:function(){var e=this.getMedia(),t=e&&e[0];return t&&t.thumbnailUrl?{src:t.thumbnailUrl,title:t.title}:void 0},getMedia:function(){return this.get("media")},hasPreview:function(){var e=this.get("content");return!(!e||!e.image.url&&!e.description)},toggleFavorited:function(){var e=this.get("userScore")?0:1;1===e&&a.trigger("threadFavorited",this),C.vote.call(this,e)},toggleIsSpam:function(){this.markAsSpam(!this.get("isSpam"))},markAsSpam:function(e){e=e!==!1;var n=t.bind(this.set,this,"isSpam",e);this.sync(e?"spam":"approve",this).then(n)},getDefaultDescription:function(){return this._getDescription(70)},getShortDescription:function(){return this._getDescription(50)},getLongDescription:function(){return this._getDescription(200)},getFullDescription:function(){return this._getDescription(1/0)},getPlainDescription:function(){return this._truncate(c.stripTags(this.getFullDescription()),50)},_getDescription:function(e){if(this.descriptions&&this.descriptions[e])return this.descriptions[e];var t;if(this.get("isUserGenerated")?t=this.get("message"):this.has("content")&&(t=this.get("content").description),!t||!e)return"";var n=this._truncate(t,e);return this._storeDescription(n,e),n},_truncate:function(e,t){var n=e.split(" "),i=n.length;if(t>=i)return e;var a,s,o;for(a=0;(t-1-a>=0||i>t+a-1)&&(s=t-1+a,o=n[s],!o||"."!==o.slice(-1))&&(s=t-1-a,o=n[s],!o||"."!==o.slice(-1));a++)s=i-1;return n.slice(0,s+1).join(" ")},_storeDescription:function(e,t){this.descriptions||(this.descriptions={}),this.descriptions[t]=e},_clearDescriptions:function(){this.descriptions={}},confirmDelete:function(e){w.confirmationPromise(w.TYPES.CONFIRM_CANCEL,g(this.toJSON())).then(t.bind(function(t){t&&(this.removeThread(),e||x.navigate("/home/channel/"+this.forum.channel.id+"/",{trigger:!0,replace:!0}))},this))},removeThread:function(){if(this.topics.length>0){var e=new h([],{thread:this});e.save()}this.get("isDeleted")||this.sync("delete",this).then(t.bind(this.set,this,{isDeleted:!0})),this.get("isClosed")||this.sync("close",this).then(t.bind(this.set,this,{isClosed:!0}))},restore:function(){(this.get("isDeleted")||this.get("isClosed"))&&(this.sync("restore",this).then(t.bind(this.set,this,{isDeleted:!1})),this.sync("open",this).then(t.bind(this.set,this,{isClosed:!1})))},toggleSubscription:function(){return this.subscribe(!this.get("userSubscription"))},inviteUserGroup:function(e){return this.sync("inviteUserGroup",this,{data:{userGroup:e}})},getEditPermissions:function(n){return this.get("isDeleted")?e.Deferred().resolve(!1).promise():e.when(this.isAuthorSessionUser(n),this.getModeratePermissions(n)).then(t.bind(function(e,t){var n=e||t;return this.set("canEdit",n),n},this))},getModeratePermissions:function(n){return this.get("canModerate")||d.isDisqusAdmin(n.user)?(this.set("canModerate",!0),e.Deferred().resolve(!0).promise()):n.loadModeratedForums().then(t.bind(function(){var e=t.contains(n.moderatedForums,this.forum.id);return this.set("canModerate",e),e},this))},isAuthorSessionUser:function(e){var n=this.author?this.author.get("id"):this.get("author");return e.loadPromise().then(t.bind(function(){var t=e.user.get("id")&&e.user.get("id")===n;return this.set("isAuthor",t),t},this))},getShareUrl:function(){return"https://disq.us/t/"+(+this.id).toString(y)},shareThread:function(e){var t,n,i=this.getShareUrl(),a=this.get("clean_title");switch(e){case"twitter":t="https://twitter.com/intent/tweet",n=t+"?text="+window.encodeURIComponent(a)+"&url="+window.encodeURIComponent(i);break;case"facebook":t="https://www.facebook.com/sharer.php",n=t+"?u="+window.encodeURIComponent(i);break;default:return}this._showSharePopup(n)},_showSharePopup:function(e){return l.openWindow(e,"_blank",{width:550,height:520})},storageKey:function(){return this.isNew()&&this.forum.id?["drafts:forum",this.forum.id].join(":"):void 0}},{CATEGORY_TITLE_SEPARATOR:": ",getOrCreateThread:function(e,n,i){var a=r.pool(T),s=t.find(a,function(t){return t.get("slug")===n&&t.forum.get("id")===e});if(!s){var o=new u;s=new T({slug:n,forum:{id:e}}),o.add(s),s.fetch(i).then(function(){r.set(T,s)})}return s}});return r.addType("Thread",T),s.withCreatedAt.call(T.prototype),T}),define("home/collections/UpvotersUserCollection",["core/UniqueModel","home/models/User","core/collections/UpvotersUserCollection"],function(e,t,n){"use strict";return n.extend({model:e.boundModel(t),parse:function(e){return e.response}})}),define("home/models/Post",["jquery","underscore","core/models/Post","core/UniqueModel","home/models/Thread","home/models/User","home/collections/UpvotersUserCollection"],function(e,t,n,i,a,s,o){"use strict";var r=n,l=r.prototype,c=n.extend({upvotersCollectionClass:o,initialize:function(e,n){l.initialize.call(this,e,n),this.set({state:this._getPostState()}),this.initializeRelated("thread",t.extend({forum:e.forum},n),a)},toJSON:function(){var e=l.toJSON.apply(this,arguments);return e.thread=this.thread.toJSON(),e},getLinks:t.memoize(function(){var t=e("<div>").html(this.get("message"));return t.find("a[href]").map(function(t,n){return e(n).attr("href")})},function(){return this.id}),getThreadId:function(){return this.thread.id},_getPostState:function(){return this.get("isSpam")?"spam":this.get("isDeleted")?"deleted":this.get("isFlagged")&&!this.get("isApproved")?"flagged":this.get("isApproved")?"visible":"pending"}});return n.withAuthor.call(c.prototype,i.boundModel(s)),i.addType("Post",c),c}),define("home/collections/PostCollection",["core/collections/PaginatedCollection","core/UniqueModel","home/models/Post"],function(e,t,n){"use strict";return e.extend({model:t.boundModel(n)})}),define("home/models/Feed",["underscore","jquery","backbone"],function(e,t,n){"use strict";var i=n.Model.extend({defaults:function(){return{fetching:!1,fetched:!1,hasNext:!0,error:!1,items:null,numPages:0,fetchOptions:{},active:!1}},initialize:function(t,n){if(!n||!n.collectionClass&&!n.collection)throw Error("Feed must specify the type of collection it maintains, or pass the collection");var i=n.collection||new n.collectionClass([],n.collectionOptions);i.cursor&&e.has(i.cursor,"hasNext")&&this.set("hasNext",i.cursor.hasNext),n.collectionUrl&&(i.url=n.collectionUrl),this.set({items:i}),this.items=i,i.on("extend",this.onExtendComplete,this),i.on("sync",this.onSync,this),this.listenTo(i,"all",this.propagateCollectionEvents),this.on("change:active",this.activeChanged,this)},propagateCollectionEvents:function(){var e=Array.prototype.slice.apply(arguments);e[0]="items:"+e[0],this.trigger.apply(this,e)},activeChanged:function(){this.get("active")&&!this.get("items").length&&this.fetchItems()},fetchItems:function(n){if(n=n||{},!n.reset&&!this.get("hasNext"))return t.Deferred().resolve();if(this.get("fetching")&&!this.get("timeouts"))return this.fetchPromise;this.set({fetching:!0}),n.reset&&this.set({fetched:!1}),n.data=n.data||{},e.extend(n.data,this.get("fetchOptions"));var i=n.error,a=n.success,s=this;n.error=function(e,t){return"timeout"===t.statusText&&(s.get("timeouts")||0)<3?(s.set({timeouts:(s.get("timeouts")||0)+1}),void s.fetchItems()):(s.set({fetching:!1,error:!0,hasNext:!1,timeouts:0}),void(i&&i.apply(this,arguments)))},n.success=function(){s.set({error:!1,timeouts:0,numPages:s.get("numPages")+1}),a&&a.apply(this,arguments)};var o=t.isEmptyObject(s.get("items").cursor)||n.reset;return this.fetchPromise=s.get("items")[o?"fetch":"more"](n)},onSync:function(e,t){this.set({fetched:!0,fetching:!1,hasNext:t.cursor&&t.cursor.hasNext})},ensureFetched:function(){return this.get("fetched")||this.get("fetching")||this.fetchPromise||this.fetchItems({reset:!0}),this.fetchPromise?this.fetchPromise:t.Deferred().resolve()},onExtendComplete:function(e){this.set({hasNext:e})}});return i}),define("home/models/ActivityFeedItem",["jquery","underscore","backbone","core/api","home/collections/PostCollection","home/models/Thread","home/models/Feed","home/utils/datetimeUtils"],function(e,t,n,i,a,s,o,r){"use strict";var l=n.Model.extend({initialize:function(e,t){t.thread&&this.initializeRelated("thread",t,s),this.activities=t.activities,this.id||(this.id=l.buildId(this.activities)),this.set({isUnread:this.activities[0].get("isUnread")}),this.handleBoostEnd(),this.on("change:fixedUntil",this.handleBoostEnd)},parse:function(e){var n=e.score;return n&&(n={score:n.value,naturalScore:n.calculated||n.value,boostedScore:n.boost,fixedUntil:n.fixedUntil}),t.extend(e,n)},url:function(e){return i.getURL("timelines/curation/"+this.urls[e])},urls:{boost:"boostThreadInChannel",unboost:"unboostThreadInChannel"},sync:function(e,i,a){switch(a=a||{},a.url=i.url(e),a.processData=!0,a.emulateHTTP=!0,e){case"boost":a.type="POST",a.data=t.extend({score:i.get("score"),fixedUntil:i.get("fixedUntil")},a.data);break;case"unboost":a.type="POST"}return a.data=t.defaults({thread:i.thread.id},a.data),n.sync(e,i,a)},toJSON:function(){return t.defaults({activities:t.invoke(this.activities,"toJSON"),actors:t.invoke(this.actors,"toJSON"),thread:this.thread&&this.thread.toJSON(),relativeTime:this.getRelativeTimestamp()},n.Model.prototype.toJSON.apply(this,arguments))},getThread:function(){return this.thread},getPosts:function(){if(!this.posts){var e={collectionClass:a,collectionUrl:i.getURL("threads/listPosts")};this.posts={desc:new o({fetchOptions:{thread:this.thread.id,order:"desc"}},e),asc:new o({fetchOptions:{thread:this.thread.id,order:"asc"}},e)}}return this.posts},hasThreadImage:function(){var t=e.Deferred(),n=this.thread;return n?n.getImage()?t.resolve(!0):n.get("extending")===!1?t.resolve(!1):n.on("change:extending",function(e,n){n===!1&&t.resolve(!!e.getImage())}):t.resolve(!1),t.promise()},getBackendId:function(){return this.activities[0].get("backendId")},getRelativeTimestamp:function(){return r.getRelativeDatetime(this.get("published"))},getRelativeBoostTimeRemaining:function(){var e=this.get("fixedUntil");return e&&r.getRelativeDatetime(e)},getSelectedPost:function(){return this.activities[0].get("selectedPost")},setSelectedPost:function(e){this.activities[0].set({selectedPost:e})},getThreadOverrides:function(){return this.activities[0].get("threadOverrides")||{}},setThreadOverrides:function(e){this.activities[0].set({threadOverrides:e})},getPostsPreviewCollection:function(){if(!this.previewPostsCollection){var e=this.getSelectedPost(),t=this.thread.recentPosts;this.previewPostsCollection=t.clone(),e&&this.previewPostsCollection.add(e,{at:0})}return this.previewPostsCollection},handleBoostEnd:function(){if(this.boostEndTimeout&&(clearTimeout(this.boostEndTimeout),this.boostEndTimeout=null),this.get("fixedUntil")){var e=new Date(this.get("fixedUntil")).getTime(),n=e-(new Date).getTime();1>n?this.unboost():this.boostEndTimeout=setTimeout(t.bind(this.unboost,this),n)}},boostInChannel:function(e,t,n){var i=n?new Date((new Date).getTime()+n).toISOString():this.get("fixedUntil");return this.set({boostedScore:t,fixedUntil:i,score:t}),i?this.sync("boost",this,{data:{channel:e,fixedUntil:i}}):void 0},unboost:function(){this.set({score:this.get("naturalScore"),boostedScore:null,fixedUntil:null})},unboostInChannel:function(e){return this.unboost(),this.sync("unboost",this,{data:{channel:e}})}},{buildId:function(e){return t.pluck(e,"id").join("|")},DEFAULT_BOOST_TIME_MS:36e5,DEFAULT_DECAY_RATE_SEC:1800});return l}),define("home/models/UnreadCounter",["backbone","core/api","core/config"],function(e,t,n){"use strict";var i=e.Model,a=i.prototype;return i.extend({initialize:function(e,t){t=t||{},this.uniqueTogether={type:t.type,index:t.index,target:t.target},this.prepareFetchOptions=t.prepareFetchOptions},defaults:{numUnread:void 0},url:t.getURL("timelines/getUnreadCount"),fetch:function(e){return this.prepareFetchOptions&&(e=this.prepareFetchOptions(e)),e.data.routingVersion=n.feedApiVersion,a.fetch.call(this,e)},parse:function(e,t){return t.initializeOnly&&this.has("numUnread")?void 0:{numUnread:e.response}}})}),define("core/models/Channel",["underscore","backbone","core/UniqueModel","core/api","core/models/Forum","core/strings"],function(e,t,n,i,a,s){"use strict";var o=s.get,r=t.Model.extend({defaults:{primaryForum:{},slug:null,name:null,options:{},followUrl:"channels/follow",unfollowUrl:"channels/unfollow"},idAttribute:"slug",initialize:function(e,t){this.buildPrimaryForum(t),this.listenTo(this,"change:primaryForum",this.updatePrimaryForum),this.listenTo(this,"change:primaryCategory",this.updatePrimaryCategory)},buildPrimaryForum:function(){if(!this.primaryForum){var e=this.get("primaryForum");e&&(this.primaryForum=new n(a,e,{channel:this}),this.unset("primaryForum"))}},updatePrimaryForum:function(){var e=this.get("primaryForum");e&&(this.primaryForum||this.buildPrimaryForum(),this.primaryForum.set(e),this.unset("primaryForum"))},updatePrimaryCategory:function(){var e=this.get("primaryCategory"),t=this.primaryCategory;null===e?this.primaryCategory=void 0:t?t.set(e):this.primaryCategory=new n(r,e),this.unset("primaryCategory"),this.trigger("changeRelated:primaryCategory")},fetch:function(n){return n=n?e.clone(n):{},n.data=this.buildFetchData(n.data),t.Model.prototype.fetch.call(this,n)},buildFetchData:function(t){var n=t?e.clone(t):{};return this.id&&(n.channel=this.id),n},url:function(e){return i.getURL(this.constructor.URLS[e]||this.constructor.URLS.read)},sync:function(n,i,a){var s=i.attributes;a=e.extend({url:this.url(n),emulateHTTP:!0},a);var o={bannerColor:s.bannerColor,description:s.description,primaryCategory:i.primaryCategory&&i.primaryCategory.get("slug")||""};switch("default"===a.avatarType?o.avatar="":s.avatar&&!e.isString(s.avatar)&&(o.avatar=s.avatar),"file"!==a.bannerType?o.banner="":s.banner&&!e.isString(s.banner)&&(o.banner=s.banner),n){case"create":a.processData=!1,a.contentType=!1,o.name=s.name,a.data=this.toFormData(e.extend({},o,a.data));break;case"update":a.processData=!1,a.contentType=!1,o.channel=s.slug,a.data=this.toFormData(e.extend({},o,a.data))}return t.sync(n,i,a)},toFormData:function(t){return e.reduce(t,function(t,n,i){return t.append(i,e.isString(n)?n.trim():n),t},new window.FormData)},parse:function(e){return e.response||e},shouldFetch:function(){return!this.get("name")||!this.get("dateAdded")},ensureFetched:function(){this.shouldFetch()&&this.fetch()},validate:function(t){var n=[],i=t.name.trim();this.constructor.MIN_NAME_LENGTH>i.length?n.push({attrName:"name",message:s.interpolate(o("Name must have at least %(minLength)s characters."),{minLength:this.constructor.MIN_NAME_LENGTH})}):i.length>this.constructor.MAX_NAME_LENGTH&&n.push({attrName:"name",message:s.interpolate(o("Name must have less than %(maxLength)s characters."),{maxLength:this.constructor.MAX_NAME_LENGTH})});var a=t.description.trim();return this.constructor.MIN_DESCRIPTION_LENGTH>a.length?n.push({attrName:"description",message:s.interpolate(o("Description must have at least %(minLength)s characters."),{minLength:this.constructor.MIN_DESCRIPTION_LENGTH})}):a.length>this.constructor.MAX_DESCRIPTION_LENGTH&&n.push({attrName:"description",message:s.interpolate(o("Description must have less than %(maxLength)s characters."),{maxLength:this.constructor.MAX_DESCRIPTION_LENGTH})}),this.constructor.BANNER_COLORS[t.bannerColor]||n.push({attrName:"bannerColor",message:s.interpolate(o("Banner color must be one of "+e.invoke(e.values(this.constructor.BANNER_COLORS),"toLowerCase").join(", "))+".")}),e.isEmpty(n)?void 0:n},_changeFollowingState:function(t,n){return n=n||{},n.type="POST",n.data=e.extend({target:this.get("slug")},n.data),i.call(t,n)},follow:function(e){return this.primaryForum.set("isFollowing",!0),this._changeFollowingState(this.get("followUrl"),e)},unfollow:function(e){return this.primaryForum.set("isFollowing",!1),this._changeFollowingState(this.get("unfollowUrl"),e)},toggleFollowed:function(){if(this.get("options").isCurationOnlyChannel&&this.primaryForum){var e=this.primaryForum.get("isFollowing")?this.unfollow():this.follow();return this.primaryForum.trigger("toggled:isFollowing"),e}},toJSON:function(){var n=t.Model.prototype.toJSON.call(this);return e.defaults({primaryCategory:this.primaryCategory?this.primaryCategory.toJSON():{}},n)}},{URLS:{read:"channels/details",create:"channels/create",update:"channels/update"},BANNER_COLORS:{gray:o("Gray"),blue:o("Blue"),green:o("Green"),yellow:o("Yellow"),orange:o("Orange"),red:o("Red"),purple:o("Purple")},MIN_NAME_LENGTH:3,MAX_NAME_LENGTH:100,MIN_DESCRIPTION_LENGTH:5,MAX_DESCRIPTION_LENGTH:200});return n.addType("Channel",r),r}),define("core/utils/objectExpander",["underscore","core/UniqueModel","core/models/Channel","core/models/Thread"],function(e,t,n,i){"use strict";return{Channel:n,Thread:i,parseObject:function(t,n){return e.isString(n)?t[n]:n},buildThread:function(n,i){if(i instanceof this.Thread)return i;if(i=this.parseObject(n,i),e.isString(i.author)){var a=i.author.replace("auth.User?id=","");i.author=n["auth.User?id="+a]||a}return new t(this.Thread,i,{forum:this.parseObject(n,i.forum),author:i.author})},buildChannel:function(e,n){return n instanceof this.Channel?n:(n=this.parseObject(e,n),new t(this.Channel,n))}}}),define("core/utils/models",["underscore"],function(e){"use strict";var t={extendJSON:function(t){var n=t.name||"";return e.defaults({channelAvatar:t.avatar||t.options.favicon,bannerColorClass:t.bannerColor?"-"+t.bannerColor:"",channelInitial:n.charAt(0)},t)}};return{channel:t}}),define("home/models/Channel",["underscore","core/UniqueModel","core/switches","core/models/Channel","core/utils/releaseUtils","core/utils/models","core/strings","home/models/Forum","remote/config"],function(e,t,n,i,a,s,o,r,l){"use strict";var c,d=o.get,u=i.extend({buildPrimaryForum:function(t){var n=t&&t.primaryForum||this.get("primaryForum");return e.isEmpty(n)?void this.listenToOnce(this,"change:primaryForum",e.bind(this.buildPrimaryForum,this,t)):(r||(r=require("home/models/Forum")),this.initializeRelated("primaryForum",e.defaults({channel:this},t),r),void this.trigger("changeRelated:primaryForum"))},getCategories:function(){var t=this.get("options"),n=t&&t.categories;return e.isEmpty(n)?null:n},shouldFetch:function(){return i.prototype.shouldFetch.call(this)||!this.primaryForum},userCanCreate:function(t){if(this.get("options").isCurationOnlyChannel)return!1;if(n.isFeatureActive("home_admin_channel",this.attributes))return a.isDisqusAdmin(t);var i=l.lounge&&l.lounge.home_channel_creator_whitelists&&l.lounge.home_channel_creator_whitelists[this.id];return!i||a.isDisqusAdmin(t)||e.contains(i,t.get("username"))},ensureFetchedWithCounters:function(){this.primaryForum&&this.primaryForum.has("numThreads")||this.fetch()},buildFetchData:function(t){var n=i.prototype.buildFetchData.call(this,t);return e.extend({attach:["counters","channel_categories"]},n)},validate:function(t){var n=i.prototype.validate.call(this,t)||[];c||(c=require("home/collections/CategoryCollection"));var a=c.get().pluck("slug");return t.primaryCategory?e.contains(a,t.primaryCategory.slug)||n.push({attrName:"primaryCategory",message:d("Invalid primary category")}):n.push({attrName:"primaryCategory",message:"Primary cateogry is required"}),e.isEmpty(n)?void 0:n},toJSON:function(){var t=i.prototype.toJSON.call(this);return s.channel.extendJSON(e.defaults({primaryForum:this.primaryForum?this.primaryForum.toJSON():{}},t))},follow:function(e){var t=i.prototype.follow.call(this,e),n=require("home/models/Session"),a=n.get().user;return a.trigger("followed:channel",this),t},unfollow:function(t){var n=require("home/models/Session"),a=n.get().user;t=t||{},t.success=e.bind(function(){this.get("options").isCurationOnlyChannel&&!this.primaryForum.get("isFollowing")&&a.trigger("unfollowed:curationchannel",this)},this);var s=i.prototype.unfollow.call(this,t);return a.trigger("unfollowed:channel",this),s}},{getOrCreate:function(e,n){var i=e[u.prototype.idAttribute];if(i){var a=t.get(u,i);if(a)return a}return new t(u,e,n)}});return u}),define("home/models/Announcement",["backbone"],function(e){"use strict";var t=e.Model.extend({defaults:{subject:null,title:null,body:null,name:null}});return t}),define("home/activityExpander",["underscore","core/UniqueModel","core/utils/objectExpander","home/models/User","home/models/Post","home/models/Thread","home/models/Forum","home/models/Channel","home/models/Announcement"],function(e,t,n,i,a,s,o,r,l){"use strict";return e.extend(n,{Channel:r,Thread:s,buildPost:function(e,n){if(n instanceof a)return n;n=this.parseObject(e,n);var i=this.parseObject(e,n.thread)||e["forums.Thread?id="+n.thread]||t.pool(s)[n.thread];return new t(a,n,{author:this.parseObject(e,n.author),thread:this.buildThread(e,i)})},buildAnnouncement:function(e,t){return new l(this.parseObject(e,t))},buildUser:function(e,n){return n instanceof i?n:(n=this.parseObject(e,n),new t(i,n))},buildForum:function(e,n){return n instanceof o?n:(n=this.parseObject(e,n),new t(o,n))}})}),define("home/models/Activity",["underscore","backbone","home/utils/datetimeUtils","core/UniqueModel"],function(e,t,n,i){"use strict";var a=t.Model.extend({defaults:{version:0,verb:null},buildId:function(e){return e=e||this.attributes,this.constructor.buildId(e.actor,e.verb||this.constructor.prototype.defaults.verb,e.target,e.object)},parse:function(e,t){return e.id&&t&&t.objects&&(e=this.parseRelatedModels(e,t.objects),e.backendId=e.id,e.id=this.buildId(e)),e},toJSON:function(){return e.defaults({actor:this.actor&&this.actor.toJSON(),target:this.target&&this.target.toJSON(),object:this.object&&this.object.toJSON(),thread:this.thread&&this.thread.toJSON(),forum:this.thread&&this.thread.forum.toJSON()},t.Model.prototype.toJSON.call(this))},getThread:function(){return this.thread},getRelativeCreatedAt:function(){return n.getRelativeDatetime(this.object.get("createdAt"))}},{buildId:function(e,t,n,i){return[e?e.id:"",t,n?n.id:"",i?i.id:""].join("|")}});return i.addType("Activity",a),a}),define("home/models/activities/ThreadActivity",["underscore","home/models/Activity","home/activityExpander"],function(e,t,n){"use strict";return t.extend({initialize:function(e){this.target=e.target,this.thread=this.target,this.targetChannel=e.targetChannel},parseRelatedModels:function(t,i){t.target&&"TrendingThreadOnChannel"===t.type&&(t.targetChannel=n.buildChannel(i,t.target)),
t.target=n.buildThread(i,t.object);var a=t.thread=t.target;if(t.selectedPost){var s=t.selectedPost.excerpt;t.selectedPost=n.buildPost(i,t.selectedPost.post),t.selectedPost.set({excerpt:s})}return a.initializeRecentPosts({recentPosts:e.map(t.recentPosts,e.bind(n.buildPost,n,i))}),t}})}),define("home/models/activities/FavoriteChannelThreadActivity",["home/models/activities/ThreadActivity","home/activityExpander"],function(e,t){"use strict";var n=e.extend({defaults:{verb:"recommend"},initialize:function(t){e.prototype.initialize.call(this,t),this.actor=t.actor},parseRelatedModels:function(n,i){return e.prototype.parseRelatedModels.call(this,n,i),n.actor=t.buildUser(i,n.actor),n}});return n}),define("home/models/activities/ChannelPostActivity",["home/models/Activity","home/activityExpander"],function(e,t){"use strict";var n=e.extend({defaults:{verb:"channel-post"},initialize:function(e){this.actor=e.actor,this.object=e.object,this.thread=this.object.thread},parseRelatedModels:function(e,n){return e.actor=t.buildUser(n,e.actor),e.object=t.buildPost(n,e.object),e}});return n}),define("home/models/activities/FavoriteThreadActivity",["home/models/activities/ThreadActivity","home/activityExpander"],function(e,t){"use strict";var n=e.extend({defaults:{verb:"favorite"},initialize:function(t){e.prototype.initialize.call(this,t),this.actor=t.actor},parseRelatedModels:function(n,i){return e.prototype.parseRelatedModels.call(this,n,i),n.actor=t.buildUser(i,n.actor),n}});return n}),define("home/models/activities/ReplyActivity",["home/models/Activity","home/activityExpander"],function(e,t){"use strict";return e.extend({defaults:{verb:"reply"},initialize:function(e){this.actor=e.actor,this.object=e.object,this.target=e.target,this.thread=this.object.thread},parseRelatedModels:function(e,n){return e.object=t.buildPost(n,e.object),e.actor=e.actor?t.buildUser(n,e.actor):e.object.author,e.target=t.buildPost(n,e.object.get("parent_post")),e}})}),define("home/models/activities/MentionActivity",["home/models/Activity","home/activityExpander"],function(e,t){"use strict";return e.extend({defaults:{verb:"mention"},initialize:function(e){this.actor=e.actor,this.object=e.object,this.target=e.target,this.thread=e.target.thread},parseRelatedModels:function(e,n){return e.object=t.buildUser(n,e.object),e.actor=t.buildUser(n,e.actor),e.target=t.buildPost(n,e.target),e}})}),define("home/models/activities/PostActivity",["home/models/Activity","home/activityExpander"],function(e,t){"use strict";var n=e.extend({defaults:{verb:"post"},initialize:function(e){this.actor=e.actor,this.object=e.object,this.target=this.object.thread,this.thread=this.object.thread},parseRelatedModels:function(e,n){return e.actor=t.buildUser(n,e.actor),e.object=t.buildPost(n,e.object),e.target=e.object.thread,e}});return n}),define("home/models/activities/LikePostActivity",["home/models/Activity","home/activityExpander"],function(e,t){"use strict";return e.extend({defaults:{verb:"favorite"},initialize:function(e){this.actor=e.actor,this.target=e.target,this.thread=this.target.thread},parseRelatedModels:function(e,n){return e.actor=t.buildUser(n,e.actor),e.target=t.buildPost(n,e.object),e}})}),define("home/models/activities/TrendingThreadActivity",["home/models/activities/ThreadActivity"],function(e){"use strict";return e.extend({defaults:{verb:"trending"}})}),define("home/models/activities/FollowUserActivity",["home/models/Activity","home/activityExpander"],function(e,t){"use strict";return e.extend({defaults:{verb:"follow"},initialize:function(e){this.actor=e.actor,this.target=e.target},parseRelatedModels:function(e,n){return e.actor=t.buildUser(n,e.actor),e.target=t.buildUser(n,e.object),e}})}),define("home/models/activities/AnnouncementActivity",["home/models/Activity","home/activityExpander"],function(e,t){"use strict";return e.extend({defaults:{verb:"send"},initialize:function(e){this.object=e.object},parseRelatedModels:function(e,n){return e.object=t.buildAnnouncement(n,e.object),e}})}),define("home/models/activities/CreateThreadActivity",["home/models/activities/ThreadActivity"],function(e){"use strict";return e.extend({defaults:{verb:"create"}})}),define("home/models/activities/ShareThreadActivity",["home/models/activities/ThreadActivity"],function(e){"use strict";return e.extend({defaults:{verb:"share"}})}),define("home/models/activities/ThreadInviteActivity",["home/models/Activity","home/activityExpander"],function(e,t){"use strict";return e.extend({defaults:{verb:"threadInvite"},initialize:function(e){this.actor=e.actor,this.thread=e.target},parseRelatedModels:function(e,n){return e.actor=t.buildUser(n,e.actor),e.target=t.buildThread(n,e.target),e}})}),define("home/models/activities/ChannelInviteActivity",["home/models/Activity","home/activityExpander"],function(e,t){"use strict";return e.extend({defaults:{verb:"channelInvite"},initialize:function(e){this.actor=e.actor,this.channel=e.target},parseRelatedModels:function(e,n){return e.actor=t.buildUser(n,e.actor),e.target=t.buildChannel(n,e.target),e}})}),define("home/models/activities/HighlightPostActivity",["home/models/Activity","home/activityExpander"],function(e,t){"use strict";return e.extend({defaults:{verb:"highlight"},initialize:function(e){this.actor=e.actor,this.target=e.target,this.thread=this.target.thread},parseRelatedModels:function(e,n){return e.actor=t.buildUser(n,e.actor),e.target=t.buildPost(n,e.object),e}})}),define("home/models/activities/AddModActivity",["home/models/Activity","home/activityExpander"],function(e,t){"use strict";return e.extend({defaults:{verb:"add-mod"},initialize:function(e){this.actor=e.actor,this.target=e.target},parseRelatedModels:function(e,n){return e.actor=t.buildUser(n,e.actor),e.target=t.buildForum(n,e.target),e}})}),define("home/ActivityFactory",["underscore","home/activityExpander","core/UniqueModel","home/models/Activity","home/models/activities/FavoriteChannelThreadActivity","home/models/activities/ChannelPostActivity","home/models/activities/FavoriteThreadActivity","home/models/activities/ReplyActivity","home/models/activities/MentionActivity","home/models/activities/PostActivity","home/models/activities/LikePostActivity","home/models/activities/TrendingThreadActivity","home/models/activities/FollowUserActivity","home/models/activities/AnnouncementActivity","home/models/activities/CreateThreadActivity","home/models/activities/ShareThreadActivity","home/models/activities/ThreadInviteActivity","home/models/activities/ChannelInviteActivity","home/models/activities/HighlightPostActivity","home/models/activities/AddModActivity"],function(e,t,n,i,a,s,o,r,l,c,d,u,h,m,p,f,g,v,b,w){"use strict";var x=function(){},y={createActivity:function(e,t){var a=this.getActivityClass(e,t);if(!a)return null;var s=new a(e,t);return n.set(i,s)},getActivityClass:function(e,n){switch(e.type){case"RegisteredUserFavoriteThread":case"AnonymousUserFavoriteThread":return"ThreadAuthorRelation"===e.routings[0].type?(e.verb=a.prototype.defaults.verb,a):(e.verb=o.prototype.defaults.verb,o);case"RegisteredUserSubmitPost":case"AnonymousUserSubmitPost":var i=t.buildPost(n.objects,e.object);return e.object=i,"ThreadAuthorRelation"===e.routings[0].type?(e.verb=s.prototype.defaults.verb,s):i.get("parent_post")?(e.verb=r.prototype.defaults.verb,r):(e.verb=c.prototype.defaults.verb,c);case"UserMentionUserOnPost":return e.verb=l.prototype.defaults.verb,l;case"RegisteredUserLikePost":case"AnonymousUserLikePost":return e.verb=d.prototype.defaults.verb,d;case"RegisteredUserCreateThread":return e.verb=p.prototype.defaults.verb,p;case"TrendingThread":case"TrendingThreadOnChannel":case"TrendingThreadOnForum":return e.verb=u.prototype.defaults.verb,u;case"UserFollowUser":return e.verb=h.prototype.defaults.verb,h;case"SendAnnouncementToUser":return e.verb=m.prototype.defaults.verb,m;case"UserShareThreadToChannel":return e.verb=f.prototype.defaults.verb,f;case"UserInviteUserToThread":case"UserInviteUserGroupToThread":return e.verb=g.prototype.defaults.verb,g;case"UserInviteUserToChannel":return e.verb=v.prototype.defaults.verb,v;case"UserAddModeratorToForum":return e.verb=w.prototype.defaults.verb,w;case"UserHighlightPost":return e.verb=b.prototype.defaults.verb,b;case"UserFollowForum":return null}}};return e.extend(x.prototype,y),x}),define("home/collections/FeedItemCollection",["underscore","home/collections/common/ExtensibleCollection","home/models/ActivityFeedItem","home/models/UnreadCounter","home/ActivityFactory","home/activityExpander","core/api"],function(e,t,n,i,a,s,o){"use strict";var r="timelines/activities",l=t,c=l.prototype,d=l.extend({url:o.getURL(r),initialize:function(t,n){c.initialize.call(this,t,n),n=n||{},this.uniqueTogether={type:n.type,index:n.index,target:n.target},this.unreadCounter=new i(null,e.extend({prepareFetchOptions:this.prepareFetchOptions},this.uniqueTogether))},prepareFetchOptions:function(t){return t=t?e.clone(t):{},t.data=e.extend({},this.uniqueTogether,t.data),t},fetch:function(e){return e=this.prepareFetchOptions(e),c.fetch.call(this,e)},canUpdate:function(){return this.length&&this.url.indexOf(r)>0},updateUnreadCount:function(){this.canUpdate()&&this.unreadCounter.fetch({data:{readPosition:this.latestPosition}}).then(e.bind(function(){this.fetchUnread(this.unreadCounter.get("numUnread"))},this))},fetchUnread:function(t){0>=t||(this.unreadQueue=this.unreadQueue||new this.constructor(null,e.clone(this.uniqueTogether)),this.unreadQueue.fetch({reset:!0,data:{limit:t}}).then(e.bind(function(){var e=this.unreadQueue.length;this.unreadCounter.set("numUnread",e),this.trigger("unreadItemsReady",e)},this)))},addUnread:function(){this.latestPosition=this.unreadQueue.latestPosition,this.unreadQueue.invoke("set","isFromUnreadQueue",!0),this.add(this.unreadQueue.models,{at:0}),this.unreadQueue.reset(),this.unreadCounter.set("numUnread",0)},parse:function(t,n){n=n||{},(!this.latestPosition||n.reset)&&(this.latestPosition=t.response.latestPosition);var i=e.bind(d.transform,d,t.response.objects);return t.response=e.chain(t.response.activities).map(i).compact().value(),c.parse.call(this,t,n)}},{activityFactory:new a,transform:function(e,t){return t.items?this.buildFeedItemFromGroupedActivities(e,t):this.buildFeedItemFromSingleActivity(e,t)},buildFeedItemFromGroupedActivities:function(t,i){i.actors=i.actors||{items:[]};var a=e.chain(i.items).map(e.bind(this.buildActivity,this,t)).compact().value(),o=e.map(i.actors.items,e.bind(s.buildUser,s,t)),r=a[0],l=r&&r.get("verb");if(r){!o.length&&r.actor&&(i.actors.totalItems=1,o=[r.actor]);var c=n.buildId(a),d=n.prototype.parse.call(null,{id:c,verb:"reply"===l&&a.length>1?"post":l,published:i.published,totalActors:i.actors&&i.actors.totalItems||0,totalActivities:i.totalItems,score:i.score}),u={activities:a,thread:r.thread},h=new n(d,u);return h.actors=o,h}},buildFeedItemFromSingleActivity:function(t,i){var a=this.buildActivity(t,i);if(a){var s=[a],o=n.buildId(s),r=e.defaults({id:o,totalActors:1,totalActivities:1,verb:a.get("verb")},i),l={activities:s,thread:a.thread},c=new n(r,l);return c.actors=a.actor?[a.actor]:[],c}},buildActivity:function(e,t){try{return this.activityFactory.createActivity(t,{objects:e,parse:!0})}catch(n){return void(window.Raven&&window.Raven.captureMessage("error parsing activity item",{extra:t}))}}});return d}),define("home/collections/ForumCollection",["core/collections/PaginatedCollection","core/UniqueModel","home/models/Forum"],function(e,t,n){"use strict";var i=e.extend({model:t.boundModel(n)});return i}),define("home/collections/FollowingForumCollection",["underscore","home/utils/backboneUtils","home/collections/ForumCollection","core/api"],function(e,t,n,i){"use strict";var a=n.extend({url:i.getURL("users/listFollowingForums"),initialize:function(){this.on("add",this.completeModel)},completeModel:function(e){e.get("name")||e.fetch()},fetch:function(n){return n=n||{},n.data=e.defaults({limit:100},n.data),t.memoizedFetch.call(this,n)}});return a}),define("core/collections/ChannelCollection",["underscore","core/collections/PaginatedCollection","core/UniqueModel","core/api","core/models/Channel","core/utils/objectExpander"],function(e,t,n,i,a,s){"use strict";var o=t.extend({url:i.getURL("channels/list"),model:n.boundModel(a),initialize:function(e,n){t.prototype.initialize.call(this,e,n),n=n||{},this.listName=n.listName},fetch:function(n){return n=n||{},this.listName&&(n.data=e.extend({listName:this.listName},n.data)),t.prototype.fetch.call(this,n)},parse:function(n){return n=t.prototype.parse.call(this,n),n.items?e.map(n.items,function(e){return s.buildChannel(n.objects,e.reference)}):n}});return o}),define("home/collections/ChannelCollection",["core/collections/ChannelCollection","core/UniqueModel","home/models/Channel"],function(e,t,n){"use strict";var i=e.extend({model:t.boundModel(n)});return i}),define("home/collections/FollowingChannelCollection",["underscore","home/utils/backboneUtils","home/collections/ChannelCollection","core/api"],function(e,t,n,i){"use strict";var a=n.extend({url:i.getURL("users/listFollowingChannels"),initialize:function(){this.on("add",this.completeModel)},completeModel:function(e){e.shouldFetch()&&e.fetch()},fetch:function(n){return n=n||{},n.data=e.defaults({limit:100},n.data),t.memoizedFetch.call(this,n)}});return a}),define("home/collections/FollowingUserCollection",["home/collections/PaginatedUserCollection","core/api"],function(e,t){"use strict";return e.extend({url:t.getURL("users/listFollowing")})}),define("home/collections/MostActiveForumCollection",["backbone","home/models/Forum","core/UniqueModel","core/api"],function(e,t,n,i){"use strict";var a=e.Collection.extend({url:i.getURL("users/listMostActiveForums"),model:n.boundModel(t),parse:function(e){return e.response}});return a}),define("home/collections/UserManagedChannelCollection",["underscore","core/api","home/collections/ChannelCollection"],function(e,t,n){"use strict";var i=n.extend({url:t.getURL("users/listModeratedChannels"),initialize:function(e,t){this.user=t.user,this.listenTo(this.user,"change:id",this.sort)},comparator:function(e,t){var n=this.user.get("id"),i=e.get("owner_id")===n,a=t.get("owner_id")===n;return i===a?e.get("name").toLowerCase()<t.get("name").toLowerCase()?-1:1:i?-1:1},fetch:function(t){return n.prototype.fetch.call(this,e.defaults({data:{user:"username:"+this.user.get("username"),excludeOwned:0}},t))}});return i}),define("home/models/UserModerationDetails",["backbone","home/utils/backboneUtils","core/api"],function(e,t,n){"use strict";var i=e.Model.extend({idAttribute:"username",url:n.getURL("internal/users/moderationDetails"),initialize:function(e){e=e||{},this.forum=e.forum,this.network=e.network},shouldFetch:function(){return!this.get("username")||!this.get("forumsPostedIn")},fetch:function(){var e={data:{user:"username:"+this.get("username"),forum:this.forum||null,network:this.network?"username:"+this.network:null}};return t.memoizedFetch.call(this,e)},ensureFetched:function(){this.shouldFetch()&&this.fetch()},parse:function(e){return e.response}});return i}),define("home/models/UserProfile",["jquery","underscore","backbone","home/utils/backboneUtils","home/collections/PaginatedUserCollection","home/collections/FeedItemCollection","home/collections/FollowingForumCollection","home/collections/FollowingChannelCollection","home/collections/FollowingUserCollection","home/collections/MostActiveForumCollection","home/collections/UserManagedChannelCollection","core/UniqueModel","home/models/User","home/models/Feed","home/models/UserModerationDetails","core/api"],function(e,t,n,i,a,s,o,r,l,c,d,u,h,m,p,f){"use strict";var g=n.Model.extend({idAttribute:"username",initialize:function(e,n){this.initializeRelated("user",t.defaults({user:{username:this.get("username")}},n),h),this.listenTo(this.user,"change:isFollowing",this.updateFollowers);var i="username:"+this.user.get("username"),u={user:i,order:"desc"};this.forumsFollowing=new m({fetchOptions:u},{collectionClass:o}),this.channelsFollowing=new m({fetchOptions:u},{collectionClass:r}),this.listenToOnce(this.channelsFollowing,"items:sync",function(){this.user.set({numChannelsFollowing:this.channelsFollowing.items.length})}),this.syncFollowingCommunities(),this.following=new m({fetchOptions:u},{collectionClass:l}),this.followers=new m({fetchOptions:u},{collectionClass:a,collectionUrl:f.getURL("users/listFollowers")}),this.mostActiveForums=new m({fetchOptions:{user:i,limit:5}},{collectionClass:c}),this.managedChannels=new m(void 0,{collectionClass:d,collectionOptions:{user:this.user}}),this.followedChannels=new m({fetchOptions:{user:i,includeFollowedPrimaryForums:1,excludeModerated:1,excludeOwned:1}},{collectionClass:r,collectionOptions:{url:f.getURL("users/listFollowingChannels")}});var g="user:"+i;this.posts=new m(void 0,{collectionClass:s,collectionOptions:{type:"profile",index:"comments",target:g}}),this.favorites=new m(void 0,{collectionClass:s,collectionOptions:{type:"profile",index:"favorites",target:g}}),this.threads=new m(void 0,{collectionClass:s,collectionOptions:{type:"profile",index:"threads",target:g}}),this.profileFeed=new m(void 0,{collectionClass:s,collectionOptions:{type:"profile",target:g}}),this.moderationDetails=new p({username:this.user.get("username")}),this.listenTo(this.user,"change:isOnGlobalBlacklist",this.handleChangeGlobalBlacklist),this.listenTo(this.user,"blacklist:add",this.removeUserDiscussions)},syncFollowingCommunities:function(){var e=this.forumsFollowing.items,n=this.channelsFollowing.items;this.listenTo(n,{reset:function(){e.add(t.pluck(n.models,"primaryForum"),{at:0})},add:function(t){e.add(t.primaryForum,{at:0})},remove:function(t){e.remove(t.primaryForum)}}),this.listenTo(e,"reset",function(){e.add(t.pluck(n.models,"primaryForum"),{at:0})})},handleChangeGlobalBlacklist:function(){this.user.get("isOnGlobalBlacklist")&&this.removeUserDiscussions()},removeUserDiscussions:function(e){var n=this.threads.get("fetched")?this.threads.fetchItems():this.threads.ensureFetched();n.then(t.bind(function(){this.threads.items.each(function(t){var n=t.thread;e&&n.forum.id!==e||n.removeThread()}),this.threads.get("hasNext")&&this.removeUserDiscussions(e)},this))},isPrivate:function(){return!this.user.isSessionUser()&&this.user.get("isPrivate")},isBlocked:function(){return!this.user.isSessionUser()&&this.user.get("isBlocked")},ensureFetched:function(){var n=require("home/models/Session"),a=n.get();a.loadPromise().always(t.bind(function(){var n=a.user.isDisqusNetMod();i.getPromiseFor(this.user,"isPrivate").then(t.bind(function(){if(!this.isPrivate()||n){this.favorites.ensureFetched(),this.posts.ensureFetched(),this.threads.ensureFetched(),this.mostActiveForums.ensureFetched(),this.channelsFollowing.ensureFetched();var t=this;n&&(t.moderationDetails.ensureFetched(),e.when(t.moderationDetails.fetchPromise).then(function(){t.trigger("moderationDetailsReady")}))}},this))},this)),this.fetchUser()},ensureFetchedAllChannels:function(){this.managedChannels.ensureFetched(),this.followedChannels.ensureFetched()},toJSON:function(){return t.defaults({user:this.user.toJSON(),following:this.following.toJSON(),followers:this.followers.toJSON(),mostActiveForums:this.mostActiveForums.toJSON(),posts:this.posts.toJSON(),threads:this.threads.toJSON(),profileFeed:this.profileFeed.toJSON(),moderationDetails:this.moderationDetails.toJSON()},n.Model.prototype.toJSON.call(this))},fetchUser:function(){if(!this.user.get("username"))throw Error("UserProfile requires a username or id in order to be fetched");this.user.shouldFetch()&&this.user.fetch({data:{user:"username:"+this.user.get("username")}})},fetchFollowing:function(){this.following.fetchItems({reset:!0})},fetchForumsFollowing:function(){this.forumsFollowing.fetchItems({reset:!0})},fetchChannelsFollowing:function(){this.channelsFollowing.fetchItems({reset:!0})},updateFollowers:function(){var e=require("home/models/Session"),t=e.get();if(!t.isAnonymous()){var n=this.followers.get("items");this.user.get("isFollowing")?n.add(t.user):n.remove(t.user)}}});return u.addType("UserProfile",g),g}),define("home/models/AnonUser",["core/models/BaseUser","home/utils/navigationUtils"],function(e,t){"use strict";var n=e.extend({initialize:function(){this.listenTo(this,"followed:user",this.promptLogin),this.listenTo(this,"unfollowed:user",this.promptLogin),this.listenTo(this,"followed:forum",this.promptLogin),this.listenTo(this,"unfollowed:forum",this.promptLogin),this.listenTo(this,"followed:channel",this.promptLogin),this.listenTo(this,"unfollowed:channel",this.promptLogin),this.listenTo(this,"subscribe:thread",this.promptLogin),this.listenTo(this,"unsubscribe:thread",this.promptLogin)},promptLogin:function(){t.navigateToLogin()},isDisqusNetMod:function(){return!1}});return function(){var e;return function(){return e||(e=new n),e}}()}),define("home/collections/NotificationCollection",["underscore","backbone","core/api","core/config","home/collections/FeedItemCollection"],function(e,t,n,i,a){"use strict";var s=a,o=s.prototype,r=s.extend({fetch:function(t){return t=t?e.clone(t):{},t.data=t.data?e.clone(t.data):{},t.data.readPosition=this.readPosition,t.data.routingVersion=i.feedApiVersion,o.fetch.call(this,t)},parse:function(t,n){(!this.readPosition||n.reset)&&(this.readPosition=t.response.readPosition);var i=o.parse.apply(this,arguments),a=require("home/views/NotificationCardCollectionView");return e.filter(i,function(t){return e.chain(a.ITEM_VIEWS).keys().contains(t.get("verb")).value()?!0:void(window.Raven&&window.Raven.captureMessage("unsupported activity item",{extra:t}))})},syncReadPosition:function(){var i=this.latestPosition;i&&i!==this.previousLatestPosition&&i!==this.readPosition&&(this.previousLatestPosition=i,t.ajax({url:n.getURL("timelines/setReadPosition"),type:"POST",data:e.extend({},this.uniqueTogether,{position:i})}))}});return r}),define("home/models/TimelineFilter",["backbone","core/api","core/config"],function(e,t,n){"use strict";return e.Model.extend({urls:{update:t.getURL("timelines/filters/add"),"delete":t.getURL("timelines/filters/remove")},parse:function(e){return e.response||e},serializeData:function(){return{filter:this.id,api_key:n.keys.api}},sync:function(t,n,i){return i.emulateHTTP=!0,i.emulateJSON=!1,i.processData=!0,("update"===t||"delete"===t)&&(i.data=n.serializeData()),i.url=this.urls[t],e.Model.prototype.sync.call(this,t,n,i)}},{FILTER_LIKEPOST:"likepost",FILTER_INVITE:"invite",FILTER_RECOMMEND:"favoritethread",FILTER_THREADREPLIES:"threadreplies",FILTER_MENTIONS:"mentions"})}),define("home/collections/TimelineFiltersCollection",["jquery","backbone","core/api","home/models/TimelineFilter"],function(e,t,n,i){"use strict";return t.Collection.extend({model:i,initialize:function(e,t){t=t||{},this.type=t.type},url:function(){return n.getURL("timelines/filters/list")+"?"+e.param({type:this.type})},addFilter:function(e){var t=this.get(e);return t||(t=this.add({id:e})),t.save()},removeFilter:function(e){var t=this.get(e);return t||(t=new i({id:e})),t.destroy()},parse:function(e){return e.response||e}})}),define("home/models/FollowRecommendation",["backbone","core/UniqueModel"],function(e,t){"use strict";var n=e.Model.extend({defaults:{reason:""},initialize:function(){this.object=this.get("object"),this.unset("object")}});return t.addType("FollowRecommendation",n),n}),define("home/collections/FollowRecommendationCollection",["underscore","backbone","core/UniqueModel","home/models/FollowRecommendation"],function(e,t,n,i){"use strict";return t.Collection.extend({model:n.boundModel(i),initialize:function(e,t){this.expander=t.expander},parse:function(t){return t=t.response,e.map(t.items,function(e){return{object:this.expander(t.objects,e.id),reason:e.reason}},this)}})}),define("home/models/FollowRecommendationFeed",["underscore","core/api","home/activityExpander","home/models/Feed","home/collections/FollowRecommendationCollection"],function(e,t,n,i,a){"use strict";var s=i.extend({defaults:{fetchOptions:{limit:3}},initialize:function(e,t){return t=t||{},t.collectionClass=a,i.prototype.initialize.call(this,e,t)}},{createUserFollowRecommendationFeed:function(i){return i=i||{},new s(i,{collectionOptions:{expander:e.bind(n.buildUser,n)},collectionUrl:t.getURL("users/interestingUsers")})},createForumFollowRecommendationFeed:function(i){return i=i||{},new s(i,{collectionOptions:{expander:e.bind(n.buildForum,n)},collectionUrl:t.getURL("forums/interestingForums")})}});return s}),define("home/models/Notifications",["backbone","home/models/Feed","home/collections/NotificationCollection","home/collections/TimelineFiltersCollection","home/models/FollowRecommendationFeed"],function(e,t,n,i,a){"use strict";var s,o=e.Model.extend({initialize:function(e){this.session=e.session;var s=function(e){return-1*new Date(e.get("published")).getTime()};this.all=new t({},{collectionClass:n,collectionOptions:{comparator:s,type:"notifications"}}),this.replies=new t({},{collectionClass:n,collectionOptions:{comparator:s,type:"notifications",index:"replies"}}),this.interestingForums=a.createForumFollowRecommendationFeed(),this.interestingUsers=a.createUserFollowRecommendationFeed(),this.unreadCounter=this.all.items.unreadCounter,this.filters=new i,this.listenTo(this.all,"clearUnreadCount",this.clearUnreadCount)},ensureFetchedRecommendations:function(){this.interestingForums.ensureFetched(),this.interestingUsers.ensureFetched()},ensureFetched:function(){s||(s=require("home/models/Session")),s.isKnownToBeLoggedOut()||this.all.fetched||(this.unreadCounter.fetch({initializeOnly:!0}),this.all.fetchItems())},clearUnreadCount:function(){this.unreadCounter.set({numUnread:0}),this.all.items.syncReadPosition()}});return o}),define("home/models/Session",["jquery","underscore","backbone","core/api","core/models/Session","core/UniqueModel","home/models/User","home/models/UserProfile","home/models/AnonUser","home/models/Notifications","home/utils/backboneUtils","home/utils/sidebarUtils"],function(e,t,n,i,a,s,o,r,l,c,d,u){"use strict";var h,m=a.extend({initialize:function(){a.prototype.initialize.apply(this,arguments),this.moderatedForums=[],this._load=e.Deferred(),this._loadPromise=this._load.promise(),this.load=t.once(this.load,this),this.loadModeratedForums=t.once(this.loadModeratedForums,this)},getAnonUserInstance:function(e){return new l(e)},isAnonymous:function(){return this.user.get("isAnonymous")},setUser:function(e){return this.user&&this.stopListening(this.user),this.listenTo(e,"all",this.trigger),a.prototype.setUser.apply(this,arguments)},loadModeratedForums:function(){var t=this.user,a=this;return m.fromCookie().isModerator?n.ajax({url:i.getURL("internal/users/details"),success:function(e){var n=e.response.moderated_forums;a.moderatedForums=n,a.trigger("setModeratedForums",n),t.set({isModerator:!!n.length,moderatedForums:n})},context:t}):e.Deferred().resolve().promise()},provider:function(){var e=m.fromCookie().username;return e?-1===e.indexOf("-")?"disqus":e.split("-")[0]:""},fromSessionStorage:function(){var e;try{e=JSON.parse(window.sessionStorage[m.STORAGE_KEY]),delete window.sessionStorage[m.STORAGE_KEY]}catch(n){}return t.isObject(e)?e:void 0},load:function(){var e=this._load,t=this.fromSessionStorage();if(u.isSidebar()&&t&&t.username&&t.id)this.setUser(this.getUserInstance(t)),this.fetched=!0,e.resolve(this);else if(a.isKnownToBeLoggedOut())e.reject(this);else{var n=this;n.fetch().done(function(){e.resolve(n)}).fail(function(){e.reject(n)})}},loadPromise:function(){return this._loadPromise},fetch:function(){if(this.fetchPromise)return this.fetchPromise;var e=this,t=d.memoizedFetch.apply(this,arguments);return t.then(function(){e.trigger("fetch:success")},function(){e.trigger("fetch:error")}),t},getUserInstance:function(e){return new s(o,e)},getUserProfile:function(){return this.isAnonymous()?void 0:this.userProfile},getOrCreateNotifications:function(){return this.notifications||(this.notifications=new c({session:this}),this.notifications.ensureFetched()),this.notifications},toJSON:function(){return this.user.toJSON.apply(this.user,arguments)},initUserProfile:function(e){if(e){this.userProfile&&this.userProfile.stopListening(this),this.userProfile=new s(r,{username:e});var i=function(e){e instanceof n.Model&&(e=t([e])),e.each(function(e){e.primaryForum&&(e=e.primaryForum),e.set("isFollowing",!0)})};this.userProfile.forumsFollowing.on("items:sync",i),this.userProfile.channelsFollowing.on("items:sync",i);var a=this.userProfile.following.get("items"),o=this.userProfile.forumsFollowing.get("items"),l=this.userProfile.channelsFollowing.get("items");this.userProfile.listenTo(this,"followed:user",t.bind(a.add,a)),this.userProfile.listenTo(this,"unfollowed:user",t.bind(a.remove,a)),this.userProfile.listenTo(this,"followed:forum",t.bind(o.add,o)),this.userProfile.listenTo(this,"unfollowed:forum",t.bind(o.remove,o)),this.userProfile.listenTo(this,"followed:channel",t.bind(l.add,l)),this.userProfile.listenTo(this,"unfollowed:channel",t.bind(l.remove,l)),this.fetchFollowedForums(),this.fetchFollowedChannels()}},fetchFollowedForums:function(){this.userProfile.fetchForumsFollowing()},fetchFollowedChannels:function(){this.userProfile.fetchChannelsFollowing()},logout:function(){this.setUser(this.getAnonUserInstance()),window.top.location="//disqus.com/logout/?redirect=http%3A%2F%2Fdisqus.com"}},{STORAGE_KEY:"home.session"});return m.get=function(){return h=h||new m},m.forget=function(){h&&(h.stopListening(),h.off(),h=null)},m}),define("core/analytics/jester",["jquery","underscore","backbone","core/analytics/identity","core/config/urls"],function(e,t,n,i,a){"use strict";var s=n.Model.extend({url:a.jester+"/event.js",defaults:{experiment:"default",variant:"control"},setHostReferrer:function(e){if(e){if(-1===e.indexOf("http"))return;this.set("page_referrer",e)}else this.set("page_referrer","direct")},decoratePayload:function(n){n.event||(n.event="activity"),n=t.extend(this.toJSON(),n),t.extend(n,{imp:i.impression.impId,prev_imp:i.impression.prevImp}),n.section||(n.section="default"),n.area||(n.area="n/a");var a=e.param(n).length;if(a>2048&&this.has("page_referrer")){var s=window.document.createElement("a");s.href=this.get("page_referrer");var o=s.hostname;o&&(n.page_referrer_domain=o),delete n.page_referrer}return n},emit:function(n){return e.ajax({url:t.result(this,"url"),data:this.decoratePayload(n),dataType:"script",cache:!0})}}),o=function(t){var n=new window.Image;return n.src=a.jester+"/stat.gif?"+e.param({event:t}),n},r=function(n,i){if(!t.any(i,function(e){return 0>e})){t.each(i,function(e,t){i[t]=Math.round(e)});var s=new window.Image;return s.src=a.jester+"/telemetry/"+n+".gif?"+e.param(i),s}},l=new s;return l.setHostReferrer(window.document.referrer),{ActivityClient:s,client:l,logStat:o,telemetry:r}}),define("home/utils/trackingUtils",["jquery","underscore","home/models/Session","home/utils/sidebarUtils","home/utils/navigationUtils","core/analytics/jester","core/bus"],function(e,t,n,i,a,s,o){"use strict";var r={},l={openSection:function(){m({verb:"open",object_type:"section",object_id:s.client.get("zone")+"/"+s.client.get("section")})},viewSection:function(){m({verb:"view",object_type:"section",object_id:s.client.get("zone")+"/"+s.client.get("section")})},viewFeed:function(e){var t={verb:"open",object_type:"section",object_id:s.client.get("zone")+"/"+s.client.get("section")+"/page-1"};e.isError()?t.adjective="error":e.collection.length||(t.adjective="empty"),m(t)},viewMoreFeed:function(e){m({verb:"open",object_type:"section",object_id:s.client.get("zone")+"/"+s.client.get("section")+"/page-"+e})},removeFollower:function(e){m({verb:"remove-follower",object_type:"user",object_id:e.get("id")})},"uiCallback:postCreated":function(e,n){n=n||{},t.extend(n,{object_type:"post",object_id:e.id,verb:"post"}),e.has("parent")&&(n.target_type="comment",n.target_id=e.get("parent")),m(n)},"uiAction:postUpvote":function(e){m({verb:"like",object_type:"post",object_id:e.id})},"uiAction:postUnvote":function(e){m({verb:"unlike",object_type:"post",
object_id:e.id})},"uiAction:postDownvote":function(e){m({verb:"dislike",object_type:"post",object_id:e.id})},"uiAction:clickLink":function(n,i){var s=e(n.currentTarget),o=a.isInbound(s[0]);t.each(c,function(e,t){var n=s.attr(e);n&&(i[t]=n)}),m(t.extend({verb:"click",object_type:"link",object_id:s.attr("href"),adverb:o?"internal":"external"},i))},threadFavorited:function(e){m({verb:"like",object_type:"thread",object_id:e.id})}},c={forum_id:"data-forum-pk",thread_id:"data-thread-id",channel_slug:"data-channel-slug"},d={user:"profile","/by/\\w+":"profile",inbox:"notifications","/welcome/?$":"welcome","/explore(/.+)?":"explore",discussion:"thread",discuss:"thread",edit:"thread",forum:"community",topic:"topic",settings:"settings",discover:"discover","/channels(\\/(yours|explore))?\\/?(\\?.+)?$":"discover","/channels?/\\w+":"channel","/home/?$":"activityfeed",preload:"DNT"},u=["channel_slug","forum"],h="n/a",m=function(n){"DNT"!==n.zone&&(n.zone||"DNT"!==s.client.get("zone"))&&e.when(r).then(function(e){s.client.emit(t.defaults(n,t.pick(e,u)))})};return{init:function(){var e={experiment:"V2",variant:"active",product:this.productName(),page_referrer_url:window.document.referrer};s.client.set(e),o.on(l)},productName:function(){return i.isSidebar()?"bridge":"home"},jesterEmit:m,pageChanged:function(){this.urlChanged(),this.setSection(),r={}},urlChanged:function(){var e=window.document.location.href,n=t.find(d,function(t,n){return RegExp(n).test(e)});s.client.set({page_url:e,zone:n||h})},setSection:function(e){s.client.set({section:e||"default"})},setPageParams:function(e){r=e},initUser:function(e){e&&s.client.set("user_id",e)},trackVisit:function(){s.client.has("zone")||this.urlChanged();var e=this.productName(),i=function(){m({verb:"view",object_type:"product",object_id:e})},a=n.get();a.loadPromise().always(t.bind(function(){this.initUser(a.user.get("id")),i()},this))}}}),define("home/collections/UserCollection",["backbone","core/UniqueModel","home/models/User"],function(e,t,n){"use strict";var i=e.Collection.extend({model:t.boundModel(n),initialize:function(e,t){t&&t.url&&(this.url=t.url)},parse:function(e){return e.response}});return i}),define("home/collections/ModeratorCollection",["underscore","home/collections/UserCollection"],function(e,t){"use strict";var n=t.extend({initialize:function(e,t){this.channel=t&&t.channel},parse:function(t){return e.pluck(t.response,"user")},comparator:function(e,t){var n=this.channel&&this.channel.get("owner_id"),i=e.get("id")===n,a=t.get("id")===n;return i===a?e.get("name").toLowerCase()<t.get("name").toLowerCase()?-1:1:i?-1:1}});return n}),define("home/collections/SourceForumCollection",["underscore","core/api","home/collections/ForumCollection"],function(e,t,n){"use strict";var i=n.extend({url:t.getURL("internal/channels/listSourceForums"),initialize:function(e,t){this.channelId=t&&t.channelId},fetch:function(t){return t=t||{},t.data=e.extend({channel:this.channelId,attach:"counters"},t.data),n.prototype.fetch.call(this,t)}});return i}),define("home/models/ChannelProfile",["underscore","backbone","core/utils/storage","core/UniqueModel","core/strings","home/models/Feed","home/models/Channel","home/collections/FeedItemCollection","home/collections/UserCollection","home/collections/ModeratorCollection","home/collections/TopicCollection","home/collections/SourceForumCollection","home/utils/backboneUtils","core/api"],function(e,t,n,i,a,s,o,r,l,c,d,u,h,m){"use strict";var p=a.get,f=t.Model.extend({defaults:{channel:void 0},initialize:function(t,i){i=i||{},this.initializeRelated("channel",i,o),this.listenTo(this.channel,"addModerator",function(e){this.moderators.items.add(e)}),this.listenTo(this.channel,"removeModerator",function(e){this.moderators.items.remove(e)});var a,h=this.channel.id,p="channel:"+h;this.recentActivities=new s(i.recentActivitiesOptions,{collectionClass:r,collectionOptions:{type:"profile",target:p}}),n.get("channelSort")&&(i.topActivitiesOptions=i.topActivitiesOptions||{},i.topActivitiesOptions.fetchOptions=e.defaults({sort:n.get("channelSort")},i.topActivitiesOptions.fetchOptions)),this.topActivities=new s(i.topActivitiesOptions,{collectionClass:r,collectionUrl:m.getURL("timelines/ranked"),collectionOptions:{type:"default",target:p}}),this.sourceForums=new u([],{channelId:this.channel.id}),a={channel:this.channel.id,limit:10},this.leaders=new s({fetchOptions:a},{collectionClass:l,collectionUrl:m.getURL("channels/communityLeaders")}),this.channel.primaryForum?a={forum:this.channel.primaryForum.id}:(this.listenToOnce(this.channel,"changeRelated:primaryForum",function(){this.moderators.set({fetchOptions:{forum:this.channel.primaryForum.id}})}),a=null),this.moderators=new s({fetchOptions:a},{collectionClass:c,collectionOptions:{channel:this.channel},collectionUrl:m.getURL("forums/listModerators")}),this.trendingTopics=new s({fetchOptions:{channel:this.channel.id,limit:15}},{collectionClass:d,collectionUrl:m.getURL("channels/listTrendingTopics")}),this.topicFilteredFeeds={}},toJSON:function(){var n=t.Model.prototype.toJSON.apply(this,arguments);return e.defaults({channel:this.channel.toJSON(),recentActivities:this.recentActivities.toJSON(),topActivities:this.topActivities.toJSON(),trendingTopics:this.trendingTopics&&this.trendingTopics.items.toJSON()},n)},getFetchedTopicFilteredFeed:function(e){if(this.trendingTopics){this.topicFilteredFeeds[e]||(this.topicFilteredFeeds[e]=new s({fetchOptions:{topic:e}},{collectionClass:r,collectionUrl:m.getURL("timelines/ranked"),collectionOptions:{type:"default",target:"channel:"+this.channel.id}}));var t=this.topicFilteredFeeds[e];return t.ensureFetched(),t}},ensureFetched:function(){this.channel.ensureFetchedWithCounters(),this.recentActivities.ensureFetched(),this.ensureFetchedTopActivities(),this.ensureFetchedLeaders(),this.ensureFetchedModerators(),this.ensureFetchedTrendingTopics()},ensureFetchedTrendingTopics:function(){this.trendingTopics&&this.trendingTopics.ensureFetched()},ensureFetchedTopActivities:function(){this.topActivities.ensureFetched()},ensureFetchedLeaders:function(){return this.leaders.ensureFetched(),this.leadersPromise=this.leaders.fetchPromise},ensureFetchedModerators:function(){if(this.moderatorsPromise)return this.moderatorsPromise;if(this.moderators.get("fetchOptions"))this.moderators.ensureFetched(),this.moderatorsPromise=this.moderators.fetchPromise;else{var t=this.moderators;this.moderatorsPromise=h.getPromiseFor(t,"fetchOptions").then(function(){return t.ensureFetched(),t.fetchPromise})}return this.moderatorsPromise.then(e.bind(this.markModerators,this))},ensureFetchedSourceForums:function(){return this.sourceForumsPromise||(this.sourceForumsPromise=this.sourceForums.fetch()),this.sourceForumsPromise},markModerators:function(){var t=this.channel.primaryForum.id;this.moderators.items.each(function(n){var i=n.get("moderatedForums")||[];n.set({moderatedForums:e.union(i,[t])})})},validateNewModerator:function(e){return e.get("username").trim().length?this.moderators.items.contains(e)?{attrName:"username",message:p("This user is already a moderator.")}:void 0:{attrName:"username",message:p("You must enter a username.")}}});return i.addType("ChannelProfile",f),f}),define("home/collections/ChannelProfileCollection",["underscore","core/collections/PaginatedCollection","core/UniqueModel","home/activityExpander","home/models/ChannelProfile"],function(e,t,n,i,a){"use strict";var s=a,o=t.extend({model:n.boundModel(s),parse:function(n){return n=t.prototype.parse.call(this,n),n.items?e.map(n.items,function(e){var t=i.buildChannel(n.objects,e.reference),a={channel:t};return a[s.prototype.idAttribute]=t.id,{id:t.id,channel:t}}):n}});return o}),define("home/models/ChannelProfileFeed",["underscore","core/api","core/UniqueModel","home/collections/ChannelProfileCollection","home/models/Feed"],function(e,t,n,i,a){"use strict";var s=a.extend({idAttribute:"listName",initialize:function(n,s){s=e.extend({collectionClass:i,collectionUrl:t.getURL("channels/list")},s),a.prototype.initialize.call(this,n,s),this.set("fetchOptions",e.extend({listName:this.get("listName"),attach:"counters"},this.get("fetchOptions")))}},{LIST_NAMES:{promoted:"promoted",explore:"explore"}});return n.addType("ChannelProfileFeed",s),s}),define("home/templates/nav",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t){return'<div class="site-nav__item text-center"\ndata-role="onboarding-steps-icon" data-onboarding-step="'+e.escapeExpression(e.lambda(t,t))+'">\n\n<div class="onboarding__bar"></div>\n</div>\n'},3:function(e,t,n,i,a){return'<div class="site-nav__item -skip site-nav--onboarding hidden-md">\n<a href="/home/" data-action="skip-onboarding">'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Skip",{name:"gettext",hash:{},data:a}))+"</a>\n</div>\n"},5:function(e,t,n,i,a){return'<a href="/admin/" data-action="admin-click">\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Admin",{name:"gettext",hash:{},data:a}))+"\n</a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<nav class="site-nav section-contained">\n<div class="align">\n<div class="site-nav__item -logo site-nav__logo--wrapper">\n'+(null!=(s=e.invokePartial(i.navLogo,t,{name:"navLogo",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</div>\n<div class="site-nav--secondary" data-role="icon-links">\n<div class="site-nav__item">\n<a href="/home/" class="site-nav__link" data-page-icon="home">\n<span class="site-nav__icon--wrapper">\n<svg class="icon-home site-nav__icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 16 18" enable-background="new 0 0 16 18" xml:space="preserve"><polygon points="6,18 6,12 10,12 10,18 16,18 16,7.9 8,0 0,7.9 0,18" class="fill" /></svg>\n'+r(n.gettext.call(o,"Home",{name:"gettext",hash:{},data:a}))+'\n</span>\n</a>\n</div>\n<div class="site-nav__item">\n<a class="site-nav__link" data-role="notifications" data-page-icon="inbox" href="/home/inbox/">\n<span class="site-nav__icon--wrapper">\n<div class="notif-count" data-role="unread-notification-count"></div>\n<svg class="icon-notif site-nav__icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"><path d="M10.4 20c5.3 0 9.6-4.5 9.6-10S15.7 0 10.4 0C5 0 0.7 4.5 0.7 10 c0 1.5 0.3 2.9 0.9 4.1L0 18.2l4.1-0.6C5.8 19.1 8 20 10.4 20z" class="icon-notif__fill" /><path d="M11 11.2v2.6l4-3.9L11 6v2.3C6.1 8.3 5 14 5 14 C6.4 11.4 8.3 11.2 11 11.2z" class="arrow"/></svg>\n'+r(n.gettext.call(o,"Notifications",{name:"gettext",hash:{},data:a}))+'\n</span>\n</a>\n</div>\n<div class="site-nav__item">\n<a class="site-nav__link" data-role="discover" data-page-icon="channels" href="/home/channels/">\n<span class="site-nav__icon--wrapper">\n<svg class="icon-discover site-nav__icon -discover" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 18 18" enable-background="new 0 0 18 18" xml:space="preserve"><rect x="14" width="4" height="4" class="dot"/><rect x="14" y="7" width="4" height="4" class="dot"/><rect x="14" y="14" width="4" height="4" class="dot"/><rect x="7" width="4" height="4" class="dot"/><rect x="7" y="7" width="4" height="4" class="dot"/><rect x="7" y="14" width="4" height="4" class="dot"/><rect width="4" height="4" class="dot"/><rect y="7" width="4" height="4" class="dot"/><rect y="14" width="4" height="4" class="dot"/></g></svg>\n'+r(n.gettext.call(o,"Channels",{name:"gettext",hash:{},data:a}))+'\n</span>\n</a>\n</div>\n<div class="site-nav__item">\n<a class="site-nav__link" data-role="explore" data-page-icon="explore exploreChannel" href="/home/explore/">\n<span class="site-nav__icon--wrapper">\n<svg class="icon-explore-svg site-nav__icon -explore" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 22 22" version="1.1" x="0px" y="0px"><g class="outline"><path d="M11,22 C17.0751325,22 22,17.0751325 22,11 C22,4.92486745 17.0751325,0 11,0 C4.92486745,0 0,4.92486745 0,11 C0,17.0751325 4.92486745,22 11,22 L11,22 Z M5.69559185,5.6975623 L9.23181625,12.7679396 L16.3021935,16.3041641 L12.7676954,9.2320604 L5.69559185,5.6975623 L5.69559185,5.6975623 Z M7.32147215,7.3591919 L11.9771118,10.0310669 L10.0346069,12.0039673 L7.32147215,7.3591919 L7.32147215,7.3591919 Z" class="fill"></path></g></svg>\n'+r(n.gettext.call(o,"Explore",{name:"gettext",hash:{},data:a}))+'\n</span>\n</a>\n</div>\n</div>\n</div>\n<div class="site-nav--onboarding" data-role="onboarding-steps">\n'+(null!=(s=n.each.call(o,null!=t?t.stepNumbers:t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'</div>\n<div class="align site-nav__user--wrapper">\n'+(null!=(s=n["if"].call(o,null!=t?t.userCanSkipOnboarding:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+'<div class="site-nav__item -discuss">\n<button class="button button-small button-outline" data-action="create-discussion">\n<span class="icon-create-discussion icon-small"></span>\n<span class="text-medium spacing-left-small hidden-lg">'+r(n.gettext.call(o,"Discuss",{name:"gettext",hash:{},data:a}))+'</span>\n</button>\n</div>\n<div class="tooltipped site-nav__item -profile"\ndata-role="user" data-page-icon="profile" data-toggle="tooltip" data-placement="bottom" title="'+r(n.gettext.call(o,"Profile",{name:"gettext",hash:{},data:a}))+'">\n'+(null!=(s=e.invokePartial(i.navUserIcon,t,{name:"navUserIcon",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</div>\n<div class="tooltipped bottom-right site-nav__item -settings"\ndata-toggle="tooltip" data-placement="bottom" title="'+r(n.gettext.call(o,"Settings",{name:"gettext",hash:{},data:a}))+'" data-role="settings">\n<div class="dropdown" data-action="toggle-dropdown" data-dropdown="settings">\n<a data-toggle="dropdown" class="dropdown-toggle nav__lnk--settings" href="#">\n<svg class="icon-settings site-nav__icon -settings" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"><path d="M10 13.8c2.1 0 3.8-1.7 3.8-3.8S12.1 6.2 10 6.2S6.2 7.9 6.2 10 S7.9 13.8 10 13.8z M20 8.8v2.5c0 0.3-0.2 0.6-0.5 0.6l-2.3 0.3c-0.1 0.5-0.3 0.9-0.6 1.4l1.4 1.8c0.2 0.2 0.2 0.6-0.1 0.8L16.2 18 c-0.1 0.1-0.3 0.2-0.5 0.2c-0.1 0-0.3 0-0.4-0.1l-1.8-1.4c-0.4 0.2-0.9 0.4-1.4 0.6l-0.3 2.3c0 0.3-0.3 0.5-0.6 0.5H8.8 c-0.3 0-0.6-0.2-0.6-0.5l-0.3-2.3c-0.5-0.1-0.9-0.3-1.4-0.6L4.6 18c-0.1 0.1-0.2 0.1-0.4 0.1c-0.2 0-0.3-0.1-0.4-0.2L2 16.2 C1.8 16 1.8 15.6 2 15.4l1.4-1.8c-0.2-0.4-0.4-0.9-0.6-1.4l-2.3-0.3c-0.3 0-0.5-0.3-0.5-0.6V8.8c0-0.3 0.2-0.6 0.5-0.6l2.3-0.3 C3 7.3 3.2 6.9 3.4 6.5L2 4.6C1.8 4.4 1.8 4 2 3.8L3.8 2c0.1-0.1 0.3-0.2 0.4-0.2c0.1 0 0.3 0 0.4 0.1l1.8 1.4 C6.9 3.2 7.3 3 7.8 2.8l0.3-2.3C8.2 0.2 8.4 0 8.8 0h2.5c0.3 0 0.6 0.2 0.6 0.5l0.3 2.3c0.5 0.2 0.9 0.3 1.4 0.6L15.4 2 c0.1-0.1 0.2-0.1 0.4-0.1c0.2 0 0.3 0.1 0.5 0.2L18 3.8C18.2 4 18.2 4.4 18 4.6l-1.4 1.8c0.2 0.4 0.4 0.9 0.6 1.4l2.3 0.3 C19.8 8.2 20 8.4 20 8.8z" class="fill"/></svg>\n</a>\n<ul class="dropdown-menu dropdown-settings">\n<li class="hidden-md">\n<a href="/home/settings/profile/">\n'+r(n.gettext.call(o,"Edit Profile",{name:"gettext",hash:{},data:a}))+'\n</a>\n</li>\n<li class="hidden-md">\n<a href="/home/settings/account/">\n'+r(n.gettext.call(o,"Settings",{name:"gettext",hash:{},data:a}))+'\n</a>\n</li>\n<li class="visible-md">\n<a href="/home/settings/">\n'+r(n.gettext.call(o,"Settings",{name:"gettext",hash:{},data:a}))+'\n</a>\n</li>\n<li>\n<a href="/follow/facebook/">\n'+r(n.gettext.call(o,"Find Friends",{name:"gettext",hash:{},data:a}))+'\n</a>\n</li>\n<li role="presentation" class="divider hidden-md"></li>\n<li>\n'+(null!=(s=n["if"].call(o,null!=t?t.isModerator:t,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a}))?s:"")+'</li>\n<li>\n<a href="https://publishers.disqus.com/engage?utm_source=Home-Nav" class="hidden-md">\n'+r(n.gettext.call(o,"Add %(disqus)s To Site",{name:"gettext",hash:{disqus:"Disqus"},data:a}))+'\n</a>\n</li>\n<li role="presentation" class="divider"></li>\n<li>\n<a href="https://disqus.com/about/" data-role="about">About</a>\n</li>\n<li>\n<a href="https://help.disqus.com/" data-role="help">\n'+r(n.gettext.call(o,"Help",{name:"gettext",hash:{},data:a}))+'\n</a>\n</li>\n<li>\n<a href="/logout/?redirect=https%3A%2F%2Fdisqus.com%2F">\n'+r(n.gettext.call(o,"Log Out",{name:"gettext",hash:{},data:a}))+"\n</a>\n</li>\n</ul>\n</div>\n\n</div>\n</div>\n</nav>\n"},usePartial:!0,useData:!0})}),define("home/templates/anonNav",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="spacing-top-narrow">\n<a href="/home/explore/"\nclass="button button-explore button-small hidden-md"\ndata-role="icon-links">\n<span class="icon-explore button-explore__icon"></span>\n'+o(n.gettext.call(s,"Explore",{name:"gettext",hash:{},data:a}))+'\n</a>\n<a href="https://disqus.com/profile/login/"\nclass="button button-outline button-small spacing-right-small"\ndata-action="navigate-return">\n'+o(n.gettext.call(s,"Log In",{name:"gettext",hash:{},data:a}))+'\n</a>\n<a href="https://disqus.com/profile/signup/"\nclass="button button-fill--brand button-small"\ndata-action="navigate-return">\n'+o(n.gettext.call(s,"Sign Up",{name:"gettext",hash:{},data:a}))+"\n</a>\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<nav class="site-nav section-contained">\n<div class="site-nav__item -logo">\n'+(null!=(s=e.invokePartial(i.navLogo,t,{name:"navLogo",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n"+(null!=(s=n.unless.call(null!=t?t:{},null!=t?t.sessionIsFetching:t,{name:"unless",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+"</nav>\n"},usePartial:!0,useData:!0})}),define("home/templates/createDiscussionNav",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<div class="discuss-tile__wrap align align--stretch">\n<a href="/home/discuss/'+r(o(null!=(s=null!=t?t.primaryForum:t)?s.id:s,t))+'/" data-action="confirm" alt="'+r(o(null!=t?t.name:t,t))+'"\nclass="discuss-tile__link text-center link-gray-dark align align--column">\n<div class="tile__wrapper">\n'+(null!=(s=n["if"].call(null!=t?t:{},null!=(s=null!=t?t.options:t)?s.tile:s,{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.program(4,a,0),data:a}))?s:"")+'</div>\n<div class="discuss-tile__description align align--middle">\n<p>'+r(o(null!=(s=null!=t?t.options:t)?s.description:s,t))+"</p>\n</div>\n</a>\n</div>\n"},2:function(e,t){var n;return'<img src="'+e.escapeExpression(e.lambda(null!=(n=null!=t?t.options:t)?n.tile:n,t))+'" class="img-responsive border-radius-sm block__item" />\n'},4:function(e,t){return'<div class="tile__overlay">\n<h1 class="tile__name">'+e.escapeExpression(e.lambda(null!=t?t.name:t,t))+'</h1>\n</div>\n<img src="https://media.disquscdn.com/home/blank_tile.png"\nclass="img-responsive border-radius-sm block__item" />\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<button class="text-smaller modal-close -light" data-dismiss="modal">\n<span class="icon-cancel"></span>\n</button>\n<div class="text-center padding-default">\n<h1 class="text-larger text-gray-darker spacing-top spacing-bottom-small">'+r(n.gettext.call(o,"Start a discussion",{name:"gettext",hash:{},data:a}))+'</h1>\n<p class="text-gray">'+r(n.gettext.call(o,"Pick the channel that best fits your discussion topic",{name:"gettext",hash:{},data:a}))+'</p>\n</div>\n<div class="padding-default align align--wrap">\n'+(null!=(s=n.each.call(o,null!=t?t.channels:t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+"</div>\n"},useData:!0})}),define("home/mixins/withOnboarding",["underscore","home/models/Session","home/utils/navigationUtils"],function(e,t,n){"use strict";var i=3,a=["explore","exploreChannel","exploreDiscussions"],s=function(){var s;return{events:{"click [data-action=skip-onboarding]":"completeOnboarding"},initialize:function(n){n.apply(this,e.rest(arguments));var i=t.get();i.loadPromise().then(e.bind(function(){var e=i.getUserProfile().forumsFollowing;this.listenTo(e.items,"add remove reset",this.updateStepNumber),this.updateStepNumber()},this))},getStepNumber:function(){return s},isInOnboarding:function(t,n){return n.isLoggedIn()&&n.user.shouldHomeOnboard()&&e.contains(a,t.getCurrentRouteName())},userCanSkip:function(){var e=t.get();return e.isLoggedIn()&&!e.user.registeredThisWeek()},updateStepNumber:function(){var e=this.getChannelsFollowing(),t=e.length||0,n=Math.min(t,i)+1,a=n!==s;s=n,a&&this.trigger("change:stepNumber")},getChannelsFollowing:function(){var e=t.get().getUserProfile().forumsFollowing;return e.items.filter(function(e){return e.channel})},completeOnboarding:function(e){e&&e.preventDefault();var i=t.get().user;i.setHomeOnboardComplete(!0),n.navigate("/home/",{trigger:!0})}}};return function(){var t=s();this.constructor.NUM_STEPS=i,this.initialize=e.wrap(this.initialize,t.initialize),this.events=e.extend(t.events,this.events),e.extend(this,e.pick(t,["getStepNumber","isInOnboarding","userCanSkip","updateStepNumber","getChannelsFollowing","completeOnboarding"]))}}),define("home/mixins/withSubviews",["underscore","jquery","backbone-marionette"],function(e,t,n){"use strict";function i(e){this.selector=e,this.el=null,this.currentView=null}function a(e){var n=e&&e.currentView;return n&&t.contains(this.el,n.el)&&n.$el.detach()}function s(e){var t=e.selector,n=this.$(t);if(!n.length)return void e.close();var i=e.currentView.$el;i.is(t)?(n.replaceWith(i),e.setElement(i)):(n.append(i),e.setElement(n))}function o(){n.triggerMethod.call(this,"show")}function r(e,t){e&&(e.close(),this._regions[t]=null)}i.prototype={setElement:function(e){this.$el=e instanceof t?e:t(e),this.el=this.$el[0]},render:function(e){if(!this.currentView){var t=this.el,n=this.$el;t&&(this.currentView=e,e.$el.is(t)||n.append(e.el),e.render())}},close:function(){var e=this.currentView;this.el=null,this.currentView=null,e&&(e.close?e.close():e.remove&&e.remove())}};var l={initialize:function(e,t){this._regions={},this.initializeRegions(),e.call(this,t)},initializeRegions:function(){e.each(this.regions,function(e,t){this[t]=this.addRegion(e)},this)},addRegion:function(e){var t=this._regions[e];return t||(t=new i(e),this._regions[e]=t),t},activateRegion:function(e,t){var n=e.currentView;return n?n:(e.setElement(this.$(e.selector)),n=t.call(this),e.render(n),n.listenTo(this,"show",o),this._isShown&&o.call(n),n)},render:function(t){var n=e.filter(this._regions,a,this);return t.call(this),e.each(n,s,this),this},close:function(t){return e.each(this._regions,r,this),t.call(this)}};return function(){this.initializeRegions&&this.addRegion||(this.initialize=e.wrap(this.initialize,l.initialize),this.render=e.wrap(this.render,l.render),this.close=e.wrap(this.close,l.close),e.extend(this,e.pick(l,"initializeRegions","addRegion","activateRegion")))}}),define("home/views/NavView",["underscore","jquery","backbone-marionette","core/UniqueModel","home/utils/confirmModal","home/models/Channel","home/models/Session","home/models/ChannelProfileFeed","home/templates/nav","home/templates/anonNav","home/templates/createDiscussionNav","home/mixins/withClickLinkTracking","home/mixins/withOnboarding","home/mixins/withSubviews"],function(e,t,n,i,a,s,o,r,l,c,d,u,h,m){"use strict";var p=n.ItemView,f=p.prototype,g=p.extend({className:"compensation",template:function(e){return e.id?l(e):c(e)},templateHelpers:function(){return{customBase:this.devBase,sessionIsFetching:this.session.fetchPromise,stepNumbers:e.range(1,this.constructor.NUM_STEPS+1),userCanSkipOnboarding:this.userCanSkip()}},events:{"show.bs.dropdown [data-action=toggle-dropdown]":"removeTooltip","hide.bs.dropdown [data-action=toggle-dropdown]":"addTooltip","click [data-role=settings] a[data-link-name]":"trackClickLinkWithArea","click [data-action=navigate-return]":"navigateAndReturn","click [data-action=create-discussion]":"handleCreateDiscussionNavClick"},initialize:function(e){this.session=o.get(),this.app=e.app,this.notifications=this.session.getOrCreateNotifications(),this.promotedChannels=new i(r,{listName:r.LIST_NAMES.promoted}),this.promotedChannels.ensureFetched(),this.listenTo(this.session,"change:id fetch:error fetch:success change:isModerator",this.debouncedRender),this.listenTo(this.notifications.unreadCounter,"change:numUnread",this.updateNotifications),this.listenTo(this.app,"route",this.activatePageIcon),this.listenTo(this.app,"route",this.toggleIconLinks),this.listenTo(this.app,"route",this.updateOnboardingSteps),this.listenTo(this,"change:stepNumber",this.updateOnboardingSteps),this.devBase=t("body").attr("data-disqus-dev-base")},debouncedRender:e.debounce(function(){this.render.apply(this,arguments)},300),render:function(){this.model=this.session.user;var e=f.render.apply(this,arguments);return this.updateOnboardingSteps(),this.updateNotifications(),e},onDomRefresh:function(){t(".tooltipped").tooltip()},updateNotifications:function(){var e=this.notifications.unreadCounter.get("numUnread");this.$("[data-role=notifications]").toggleClass("has-notifs",!!e),this.$("[data-role=unread-notification-count]").text(e>9?"9+":e)},navigateAndReturn:function(e){if(e){e.preventDefault();var n=t(e.currentTarget).attr("href");if(n){var i=/(\?|&)next=[^&]+/,a="next="+encodeURIComponent("https://disqus.com"+window.location.pathname),s=!1;n=n.replace(i,function(e,t){return s=!0,t+a}),s||(-1===n.indexOf("?")?n+="?":"&"!==n.charAt(n.length-1)&&(n+="&"),n+=a),window.top.location=n}}},getDiscussChannels:function(){return this.promotedChannels.ensureFetched().then(e.bind(function(){var t=this.promotedChannels.items.map(function(e){return e.channel}),n=this.session.getUserProfile(),i=e.pluck(n.forumsFollowing.items.models,"channel"),a=this.app.getCurrentView().model||{},o=a instanceof s?a:a.channel;o&&!o.id&&(o=null);var r=this.session.user;return e.chain([o,t,i]).flatten().compact().filter(function(e){return e.userCanCreate(r)}).uniq(!1,function(e){return e.id}).invoke("toJSON").value()},this))},handleCreateDiscussionNavClick:function(){this.getDiscussChannels().then(function(e){var n={channels:e};a.confirmationPromise(a.TYPES.CLOSE_LIGHT,d(n)).then(function(e){e&&t(".modal").remove()})},this)},activatePageIcon:function(t,n){this.reactivatePageIcon&&this.stopListening(this,"render",this.reactivatePageIcon),this.reactivatePageIcon=e.bind(this.activatePageIcon,this,t,n),this.listenTo(this,"render",this.reactivatePageIcon),this.$("[data-page-icon].active").removeClass("active"),("profile"!==t||n[0]===this.session.user.id)&&this.$('[data-page-icon~="'+t+'"]').addClass("active")},toggleIconLinks:function(e){"home"===e&&this.session.isLoggedOut()?t("[data-role=icon-links]").hide():t("[data-role=icon-links]").show()},updateOnboardingSteps:function(){e.defer(e.bind(function(){var t=this.isInOnboarding(this.app,this.session);if(this.$("[data-role=onboarding-steps-icon]").removeClass("is-complete"),this.$el.toggleClass("is-onboarding",t),t){var n=this.getStepNumber();e.each(e.range(1,n),function(e){this.$("[data-role=onboarding-steps-icon][data-onboarding-step="+e+"]").addClass("is-complete")},this)}},this))},completeHomeOnboarding:function(){this.session.user.setHomeOnboardComplete(!0)},removeTooltip:function(e){e&&t(e.currentTarget).closest(".tooltipped").tooltip("destroy")},addTooltip:function(e){e&&t(e.currentTarget).closest(".tooltipped").tooltip()}}),v=g.prototype;return u.call(v,"top_nav_user"),m.call(v),h.call(v),g}),define("home/templates/message",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=e.escapeExpression;return'<div class="alert-message-success">\n<div class="section-contained alert-message">\n'+s(e.lambda(null!=t?t.message:t,t))+'\n<button class="close" aria-hidden="true" title="'+s(n.gettext.call(null!=t?t:{},"Don't show this message again",{name:"gettext",hash:{},data:a}))+'" data-action="hide-message">\n<span class="icon-cancel"></span>\n</button>\n</div>\n</div>\n'},useData:!0})}),define("home/views/MessageView",["backbone-marionette","home/templates/message"],function(e,t){"use strict";var n=e.ItemView.extend({template:t,events:{"click [data-action=hide-message]":"close"},close:function(e){e.preventDefault(),this.remove()}});return n}),define("home/views/MessageCollectionView",["backbone-marionette","home/views/MessageView"],function(e,t){"use strict";var n=e.CollectionView.extend({itemView:t});return n}),define("home/templates/mainLayout",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="drawer-footer">\n<a href="/" data-action="full-root" target="_blank" class="nav-logo">\n<img src="//c.disquscdn.com/dotcom/d-9c2c241/img/brand/disqus-logo-blue-white.svg" alt="Disqus">\n</a>\n<button class="drawer-close button button-outline -border-muted" data-action="close-drawer"><span class="icon-cancel text-smaller"></span>'+o(n.gettext.call(s,"Close",{name:"gettext",hash:{},data:a}))+'</button>\n<div class="drawer-footer-right" data-jester-area="drawer_footer">\n<a class="nav-expand truncate-line" data-action="full-root" target="_blank" href="/home/">\n<svg class="icon-home" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve"><path d="M39.5 20.7L21.7 2.5c-0.9-1-2.4-1-3.3 0L0.5 20.7c-0.9 1-0.6 1.7 0.8 1.7H5v13.9c0 1 0 1.8 1.8 1.8h8.7v-14 h9.1v14h9.1c1.4 0 1.4-0.8 1.4-1.8V22.4h3.7C40.1 22.4 40.4 21.6 39.5 20.7z"/></svg>\n<span class="hidden-md">Disqus Home</span>\n</a>\n<a class="nav-feedback truncate-line" target="_blank" href="//www.surveymonkey.com/s/MMWLGSR?u='+o(e.lambda(null!=t?t.userId:t,t))+'" data-link-name="feedback">\n<span class="icon-checkmark"></span>\n<span class="hidden-md">'+o(n.gettext.call(s,"Feedback?",{name:"gettext",hash:{},data:a}))+'</span>\n</a>\n<a class="nav-help truncate-line" target="_blank" href="//help.disqus.com" data-link-name="help">\n<span class="icon-forward"></span>\n<span class="hidden-md">'+o(n.gettext.call(s,"Get Help",{name:"gettext",hash:{},data:a}))+'</span>\n</a>\n</div>\n</div>\n\n<div class="drawer-nav">\n<a class="drawer-nav-option drawer-nav-close" data-action="close-drawer" href="#"><span class="drawer-nav-option-text">'+o(n.gettext.call(s,"Close",{name:"gettext",hash:{},data:a}))+'</span><span class="icon-cancel"></span></a>\n<a class="drawer-nav-option drawer-nav-full" data-action="full-home" href="#"><span class="drawer-nav-option-text">'+o(n.gettext.call(s,"View on %(disqus)s",{name:"gettext",hash:{disqus:"Disqus"},data:a}))+'</span><span class="icon-expand"></span></a>\n</div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<div class="viewport">\n<header class="site-nav--wrapper" data-role="nav-view">\n</header>\n\n'+(null!=(s=n["if"].call(null!=t?t:{},null!=t?t.isSidebar:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'\n<div data-role="messages-view" class="alert-global">\n</div>\n\n<div id="container-main">\n</div>\n</div>\n'},useData:!0})}),define("home/views/MainLayout",["jquery","underscore","backbone","backbone-marionette","core/bus","core/utils/metatags","home/mixins/asEmbedLayout","home/mixins/withClickLinkTracking","home/utils/trackingUtils","home/utils/sidebarUtils","home/models/Session","home/views/NavView","home/views/MessageCollectionView","home/templates/mainLayout"],function(e,t,n,i,a,s,o,r,l,c,d,u,h,m){
"use strict";var p=i.Layout,f=p.prototype,g=p.extend({id:"container-page",template:m,serializeData:function(){var e=f.serializeData.apply(this,arguments),n=this.session.user;n&&n.toJSON&&t.extend(e,n.toJSON());var i=d.fromCookie().id;return i&&(e.userId=i),e.isSidebar=c.isSidebar(),e.messages=this.app.messages,e},events:{"click [data-jester-area=drawer_footer] a[data-link-name]":"trackClickLink","click [data-jester-area=mobile_sidebar] a[data-link-name]":"trackClickLink"},regions:{content:{selector:"#container-main"},nav:"[data-role=nav-view]",alerts:"[data-role=messages-view]"},initialize:function(n){this.container=n.container,this.session=n.session,this.app=n.app,this.windowHeight=e(window).height(),e(window).resize(t.bind(function(){this.windowHeight=e(window).height(),this.toggleHeight()},this))},onRender:function(){if(e(this.container).html(this.$el),!c.isSidebar()){this.nav.show(new u({app:this.app}));var t=new n.Collection(this.app.messages);this.alerts.show(new h({collection:t}))}},showView:function(t,n){this.rendered||(this.render(),this.rendered=!0),n=n||{},this.updateBackgroundClass(n.lightBackground),t.getPageTrackingParams&&l.setPageParams(t.getPageTrackingParams()),this.$(this.content.el).removeData("height"),this.content.currentView&&this.stopListening(this.content.currentView),this.listenTo(t,"all",this.handleContentEvents),this.content.show(t),e.when(t.getMetaAttrs?t.getMetaAttrs():{}).then(s.set),a.trigger("viewSection")},updateBackgroundClass:function(e){this.$el.toggleClass("bg--light",!!e)},handleContentEvents:function(e){"show"===e||"render"===e?this.toggleHeight():/toggleHeight/.test(e)&&this.toggleHeight(t.last(arguments))},toggleHeight:function(e){e||(e=this.content.$el.data("height")||"fill");var t;switch(e){case"fill":this.navHeight=this.navHeight||(this.nav.$el?this.nav.$el.height():0),t=this.windowHeight-this.navHeight+"px";break;case"content":t=""}this.content.$el.css({"min-height":t}).data({height:e})}});return c.isSidebar()&&o.call(g.prototype),r.call(g.prototype),g}),define("home/views/common/TabbedView",["jquery","underscore","backbone-marionette","core/utils/metatags","core/bus","home/utils/trackingUtils","home/utils/navigationUtils"],function(e,t,n,i,a,s,o){"use strict";var r=n.Layout.extend({defaultTab:void 0,attributes:{"data-view-type":"tabbed"},getTabView:function(){throw Error("Not implemented")},getTrackingSection:function(){return null},regions:{contentRegion:"[data-role=content-area]"},events:{"click [data-action=switch-tab]":"switchTab"},initialize:function(e){e=e||{},this.activeTab=e.activeTab,this.isModule=e.isModule,this.setTrackingSection()},switchTab:function(n){if(!n)return!1;n.preventDefault(),n.stopPropagation();var i=e(n.currentTarget).data("tab");if(this.toggleDropdown(),i!==this.activeTab){this.activeTab=i||t.result(this,"defaultTab");var a=e(n.target).closest("[data-action=switch-tab]"),s=a.find("a[href]").addBack("a[href]");s.length&&o.navigate(s[0]),this.updateTab()}},toggleDropdown:function(){var e=this.$(".nav__item");e.length>0&&e.toggleClass("dropdown-open")},updateTab:function(){this.activeTab||(this.activeTab=t.result(this,"defaultTab"));var e=this.activeTab,n=this.getTabView(e);n||(this.trigger("badTab"),e=this.activeTab=t.result(this,"defaultTab"),n=this.getTabView(e)),this.setTrackingSection(),this.updateTabContent(n),this.updateTabClasses(),this.trigger("change:activeTab",e),a.trigger("viewTab")},getTabs:function(){var e=this.$("[data-action=switch-tab]"),t=this.$("[data-view-type=tabbed] [data-action=switch-tab]");return e.not(t)},updateTabClasses:function(){this.activeTab||(this.activeTab=t.result(this,"defaultTab"));var e=this.getTabs();e.filter(".active").removeClass("active"),e.filter('[data-tab="'+this.activeTab+'"]').addClass("active")},updateTabContent:function(t){var n=this.contentRegion.currentView;if(n&&(n.onBeforeClose=function(){return!1},!this.isModule)){var a=e(window).scrollTop();if(a){var s=a+e(window).height()-n.$el.offset().top;t.$el.css("minHeight",s)}}this.contentRegion.show(t),this.getMetaAttrs&&e.when(this.getMetaAttrs()).then(i.set),n&&(n.onBeforeClose=null,n.close())},onDomRefresh:function(){this.$(this.contentRegion.el).length&&this.updateTab()},setTrackingSection:function(){s.setSection(this.getTrackingSection(this.activeTab)||t.result(this,"defaultTab"))}});return r}),define("home/templates/allstarModal",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="modal-header">\n<h4 class="modal-title">\n<span class="icon__position -allstar -inline">\n<span class="icon-allstar allstar__icon"></span>\n</span>\n'+o(n.gettext.call(s,"%(Disqus)s All-Star",{name:"gettext",hash:{Disqus:"Disqus"},data:a}))+'\n</h4>\n</div>\n<div class="modal-body">\n<p>'+o(n.gettext.call(s,"All-Stars are the star contributors of %(Disqus)s. If you’ve come across them, you know they have a lot to say in their comments and discussions. They stand out for bringing their authenticity, knowledge, and personality to communities. Often, they are the hearts of the community and what makes this corner of the Internet a special place to be.",{name:"gettext",hash:{Disqus:"Disqus"},data:a}))+'</p>\n</div>\n<div class="modal-footer">\n<a href="/home/channel/announcements/discussion/channel-announcements/all_stars/"\nclass="button button-fill--brand button-padding-taller button-wide"\ndata-action="close-and-navigate">\n'+o(n.gettext.call(s,"Learn More",{name:"gettext",hash:{},data:a}))+"\n</a>\n</div>\n"},useData:!0})}),define("home/mixins/withAllstarPopover",["underscore","home/utils/confirmModal","home/templates/allstarModal"],function(e,t,n){"use strict";var i={events:{"click [data-action=show-allstar-modal]":"showAllstarModal"},onDomRefresh:function(e){e&&e.call(this),this.$("[data-toggle=tooltip]").tooltip()},showAllstarModal:e.debounce(function(){t.getModal({modal:{type:t.TYPES.CLOSE_ICON,content:n()}}).modal("show")})};return function(){this.events=e.extend({},i.events,this.events),this.onDomRefresh=e.wrap(this.onDomRefresh,i.onDomRefresh),e.defaults(this,e.pick(i,["showAllstarModal"]))}}),define("home/templates/recommendation",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t){return'<div data-role="recommended-object"></div>\n<div class="recommended__reason"><em>'+e.escapeExpression(e.lambda(null!=t?t.reason:t,t))+"</em></div>\n"},useData:!0})}),define("home/views/RecommendationView",["backbone-marionette","home/mixins/withAllstarPopover","home/mixins/withSubviews","home/templates/recommendation"],function(e,t,n,i){"use strict";var a=e.ItemView.extend({template:i,className:"recommended-wrap",regions:{recommendedObjectRegion:"[data-role=recommended-object]"},initialize:function(e){this.RecommendedObjectView=e&&e.RecommendedObjectView},onRender:function(){this.RecommendedObjectView&&this.activateRegion(this.recommendedObjectRegion,this.createRecommendedObjectView)},createRecommendedObjectView:function(){return new this.RecommendedObjectView({model:this.model.object})}});return t.call(a.prototype),n.call(a.prototype),a}),define("home/views/BaseSuggestionView",["backbone-marionette"],function(e){"use strict";return e.ItemView.extend({events:{"click [data-action=toggle-follow]":"toggleFollow"},modelEvents:{"change:name":"render","change:isFollowing":"handleFollowedClass"},handleFollowedClass:function(){this.$("[data-action=toggle-follow]").toggleClass("active",this.model.get("isFollowing"))},toggleFollow:function(e){e&&e.preventDefault(),this.model.toggleFollowed()}})}),define("home/templates/userSuggestion",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return(null!=(s=e.invokePartial(i.userAvatar,t,{name:"userAvatar",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<h3 class="recommended__name truncate-line">'+(null!=(s=e.invokePartial(i.userName,t,{name:"userName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</h3>\n"+(null!=(s=e.invokePartial(i.genericFollowButton,t,{name:"genericFollowButton",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")},usePartial:!0,useData:!0})}),define("home/views/UserSuggestionView",["home/views/BaseSuggestionView","home/templates/userSuggestion"],function(e,t){"use strict";return e.extend({template:t,className:"recommended__item",toggleFollow:function(e){this.constructor.__super__.toggleFollow.call(this,e,"follow user")}})}),define("home/templates/forumSuggestion",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s;return null!=(s=e.invokePartial(i.forumAvatarLink,t,{name:"forumAvatarLink",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:""},3:function(e,t,n,i,a){var s;return'<div class="avatar--empty">\n'+(null!=(s=e.invokePartial(i.defaultForumAvatar,t,{name:"defaultForumAvatar",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return(null!=(s=n["if"].call(null!=t?t:{},null!=t?t.hasFavicon:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+'<h3 class="recommended__name truncate-line">\n<a href="/home/forum/'+r(o(null!=t?t.id:t,t))+'/"\ndata-link-name="forum_name"\ndata-forum-pk="'+r(o(null!=t?t.pk:t,t))+'">\n\n'+(null!=(s=e.invokePartial(i.forumName,t,{name:"forumName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</a>\n</h3>\n"+(null!=(s=e.invokePartial(i.genericFollowButton,t,{name:"genericFollowButton",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")},usePartial:!0,useData:!0})}),define("home/views/ForumSuggestionView",["home/views/BaseSuggestionView","home/templates/forumSuggestion"],function(e,t){"use strict";var n=e.extend({template:t,className:"recommended__item",templateHelpers:function(){return{hasFavicon:this.model.hasFavicon()}},toggleFollow:function(e){this.constructor.__super__.toggleFollow.call(this,e,"follow forum")}});return n}),define("home/templates/ProfileModuleEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){return'<div class="post-comments__wrapper">\n<div class="empty-message">\n<span class="icon-heart-break text-gray-light icon-huge"></span>\n<p class="text-gray-light">'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Nothing to see.",{name:"gettext",hash:{},data:a}))+"</p>\n</div>\n</div>\n"},useData:!0})}),define("home/views/ProfileModuleEmptyView",["backbone-marionette","home/templates/ProfileModuleEmpty"],function(e,t){"use strict";var n=e.ItemView.extend({template:t});return n}),define("home/templates/recommendedUsersModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){return'<footer class="module-footer">\n<a href="/home/explore/people/" class="nav-lnk -color-muted -flushed">\n<div class="nav-lnk__blk">'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Discover More People",{name:"gettext",hash:{},data:a}))+'</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</footer>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<header class="module-header text-center">\n<button data-action="refresh" class="icon__position--corner">\n<span class="icon icon-refresh text-gray-light text-small"></span>\n</button>\n<div class="module-header__icon">\n<span class="icon text-brand icon-interesting-commenters"></span>\n</div>\n<div class="module-header__title">\n<h2 class="module-header__heading">'+r(n.gettext.call(o,"Interesting Commenters",{name:"gettext",hash:{},data:a}))+'</h2>\n<p class="module-header__subheading">'+r(n.gettext.call(o,"Follow people from around the %(disqus)s Network.",{name:"gettext",hash:{disqus:"Disqus"},data:a}))+'</p>\n</div>\n</header>\n<div data-role="items" class="module-body"></div>\n'+(null!=(s=n.unless.call(o,null!=t?t.hideDiscoverLink:t,{name:"unless",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")},useData:!0})}),define("home/templates/recommendedForumsModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){return'<footer class="module-footer">\n<a href="/home/explore/" class="nav-lnk -color-muted -flushed">\n<div class="nav-lnk__blk">'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Discover More Communities",{name:"gettext",hash:{},data:a}))+'</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</footer>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<header class="module-header text-center">\n<button data-action="refresh" class="icon__position--corner">\n<span class="icon icon-refresh text-gray-light text-small"></span>\n</button>\n<div class="module-header__icon">\n<span class="icon text-brand icon-communities"></span>\n</div>\n<div class="module-header__title">\n<h2 class="module-header__heading">'+r(n.gettext.call(o,"Lively Communities",{name:"gettext",hash:{},data:a}))+'</h2>\n<p class="module-header__subheading">'+r(n.gettext.call(o,"Follow sites from around the %(disqus)s Network.",{name:"gettext",hash:{disqus:"Disqus"},data:a}))+'</p>\n</div>\n</header>\n<div data-role="items" class="module-body"></div>\n'+(null!=(s=n.unless.call(o,null!=t?t.hideDiscoverLink:t,{name:"unless",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")},useData:!0})}),define("home/views/RecommendationsModuleView",["underscore","backbone-marionette","home/views/RecommendationView","home/views/UserSuggestionView","home/views/ForumSuggestionView","home/views/ProfileModuleEmptyView","home/templates/recommendedUsersModule","home/templates/recommendedForumsModule"],function(e,t,n,i,a,s,o,r){"use strict";var l=t.CompositeView.extend({className:"aside__wrap -padded",itemView:n,emptyView:s,itemViewContainer:"[data-role=items]",events:{"click [data-action=refresh]":"refreshModule"},templateHelpers:function(){return{hideDiscoverLink:this.hideDiscoverLink}},initialize:function(e){this.collection=this.model&&this.model.items,this.hideDiscoverLink=e&&e.hideDiscoverLink},refreshModule:function(){var e=this.$el;e.addClass("is-refreshing");var t=function(){e.removeClass("is-refreshing")};this.model.fetchItems({reset:!0}).then(t)}},{createUserRecommendedModuleView:function(t){return new l(e.extend({template:o,itemViewOptions:{RecommendedObjectView:i}},t))},createForumRecommendedModuleView:function(t){return new l(e.extend({template:r,itemViewOptions:{RecommendedObjectView:a}},t))}});return l}),define("core/utils/uniqueId",[],function(){"use strict";var e=0;return function(t){e+=1;var n=e+"";return t?t+n:n}}),define("core/Events",["require","core/utils/collection/each","core/utils/object/has","core/utils/uniqueId"],function(e){"use strict";var t=e("core/utils/collection/each"),n=e("core/utils/object/has"),i=e("core/utils/uniqueId"),a=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},s=Object.keys||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var i in e)n(e,i)&&(t[t.length]=i);return t},o=[].slice,r={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events=this._events||{};var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!c(this,"once",e,[t,n])||!t)return this;var i=this,s=a(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,n)},off:function(e,t,n){var i,a,o,r,l,d,u,h;if(!this._events||!c(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(r=e?[e]:s(this._events),l=0,d=r.length;d>l;l++)if(e=r[l],o=this._events[e]){if(this._events[e]=i=[],t||n)for(u=0,h=o.length;h>u;u++)a=o[u],(n&&n!==a.context||t&&t!==a.callback&&t!==a.callback._callback)&&i.push(a);i.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=o.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&d(n,t),i&&d(i,arguments),this},stopListening:function(e,t,n){var i=this._listeners;if(!i)return this;var a=!t&&!n;"object"==typeof t&&(n=this),e&&((i={})[e._listenerId]=e);for(var s in i)i[s].off(t,n,this),a&&delete this._listeners[s];return this}},l=/\s+/,c=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var a in n)e[t].apply(e,[a,n[a]].concat(i));return!1}if(l.test(n)){for(var s=n.split(l),o=0,r=s.length;r>o;o++)e[t].apply(e,[s[o]].concat(i));return!1}return!0},d=function(e,t){var n,i,a=e.length,s=t[0],o=t[1],r=t[2];switch(t.length){case 0:for(i=0;a>i;i++)(n=e[i]).callback.call(n.ctx);return;case 1:for(i=0;a>i;i++)(n=e[i]).callback.call(n.ctx,s);return;case 2:for(i=0;a>i;i++)(n=e[i]).callback.call(n.ctx,s,o);return;case 3:for(i=0;a>i;i++)(n=e[i]).callback.call(n.ctx,s,o,r);return;default:for(i=0;a>i;i++)(n=e[i]).callback.apply(n.ctx,t)}},u={listenTo:"on",listenToOnce:"once"};return t(u,function(e,t){r[t]=function(t,n,a){var s=this._listeners||(this._listeners={}),o=t._listenerId||(t._listenerId=i("l"));return s[o]=t,"object"==typeof n&&(a=this),t[e](n,a,this),this}}),r.bind=r.on,r.unbind=r.off,r}),define("core/utils/function/debounce",[],function(){"use strict";return function(e,t,n){var i,a,s,o,r,l=function(){var c=(new Date).getTime()-o;t>c&&c>=0?i=setTimeout(l,t-c):(i=null,n||(r=e.apply(s,a),i||(s=a=null)))};return function(){s=this,a=arguments,o=(new Date).getTime();var c=n&&!i;return i||(i=setTimeout(l,t)),c&&(r=e.apply(s,a),s=a=null),r}}}),define("core/utils/function/throttle",[],function(){"use strict";return function(e,t,n){n||(n=0);var i,a,s,o,r=0,l=function(){r=new Date,s=null,o=e.apply(i,a)};return function(){var c=new Date,d=t-(c-r);return i=this,a=arguments,0>=d?(clearTimeout(s),s=null,r=c,o=e.apply(i,a)):s||(s=setTimeout(l,d+n)),o}}}),define("core/utils/object/extend",["core/utils/collection/each","core/utils/object/has"],function(e,t){"use strict";return function(n){return e(Array.prototype.slice.call(arguments,1),function(e){for(var i in e)t(e,i)&&(n[i]=e[i])}),n}}),define("core/utils/array/indexOf",[],function(){"use strict";return function(e,t){for(var n=0;e.length>n;++n)if(e[n]===t)return n;return-1}}),define("core/utils/array/some",[],function(){"use strict";return function(e,t,n){for(var i=0;e.length>i;++i)if(t.call(n,e[i],i,e))return!0;return!1}}),define("core/utils/html/getCurrentStyle",[],function(){"use strict";return window.getComputedStyle?function(e,t){try{return window.document.defaultView.getComputedStyle(e,null).getPropertyValue(t)}catch(n){return null}}:function(e,t,n){return e.currentStyle[t]||e.currentStyle[n]}}),define("core/utils/html/isVisible",["core/utils/html/getCurrentStyle"],function(e){"use strict";return function(t){return!(!t||!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)||"hidden"===e(t,"visibility"))}}),define("core/utils/lang/isFunction",[],function(){"use strict";return function(e){return"[object Function]"===Object.prototype.toString.call(e)}}),define("core/utils/object/result",["core/utils/lang/isFunction"],function(e){"use strict";return function(t,n,i){var a=null===t||void 0===t?void 0:t[n];return void 0===a&&(a=i),e(a)?a.call(t):a}}),define("core/utils/lang/isElement",[],function(){"use strict";return function(e){return!(!e||1!==e.nodeType)}}),define("core/stance/utils",["exports","core/utils/lang/isElement","core/utils/uniqueId"],function(e,t,n){"use strict";e.getElement=function(e){return t(e)?e:e&&e.el},e.EL_ID_ATTR="data-visibility-id",e.OBJ_ID_PROP="_visibility_id",e.getId=function(i){var a=null;return t(i)?(a=i.getAttribute(e.EL_ID_ATTR)||null,a||(a=n(),i.setAttribute(e.EL_ID_ATTR,a))):i&&(a=i[e.OBJ_ID_PROP]||null,a||(a=i[e.OBJ_ID_PROP]=n())),a},e.visiblePercent=function(e,t){var n=0;if(!t)return n;var i=e.top,a=i+e.height,s=i>t.visibleTop,o=t.visibleBottom>a;return!s&&!o||s&&o?n=1:s?n=(t.height-(i-t.visibleTop))/t.height:o&&(n=(a-t.visibleTop)/t.height),Math.round(100*n)}}),define("core/stance/tracking",["core/utils/array/indexOf","core/utils/array/some","core/utils/html/isVisible","core/utils/object/result","./utils","exports"],function(e,t,n,i,a,s){"use strict";s.events=[],s.lastPos=null,s.clearCache=function(e){if(void 0===e)s.getElementOffset.cache={};else{var t=a.getId(e);t&&(s.getElementOffset.cache[t]=null)}},s.calculateOffset=function(e){if(!e)return null;if(!n(e))return null;var t=e.ownerDocument.documentElement;return{height:e.offsetHeight,top:e.getBoundingClientRect().top+window.pageYOffset-(t.clientTop||0)}},s._getElementOffset=function(e){var t=a.getElement(e);if(!t)return null;var n=s.calculateOffset(t);return n?{visibleTop:n.top+(i(e,"topEdgeOffset")||0),visibleBottom:n.top+n.height-(i(e,"bottomEdgeOffset")||0),offsetTop:n.top,height:n.height}:null},s.getElementOffset=function(){var e=function(t){var n=e.cache,i=a.getId(t);if(i&&n[i])return n[i];var o=s._getElementOffset(t);return i&&o&&(n[i]=o),o};return e.cache={},e}(),s.EVENT_NAMES=["enter","exit","visible","invisible","all"],s.updateTracking=function(n){var i,a=function(e){return e?function(t){return e[t]}:function(){return void 0}};t(s.EVENT_NAMES,a(n._events))?(i=e(s.events,n),-1===i&&s.events.push(n)):(i=e(s.events,n),-1!==i&&s.events.splice(i,1))},s.processEvents=function(e){s.lastPos=e;var t=s.events;if(t.length)for(var n=t.length-1;n>=0;--n){var i=t[n],a=i.isVisible(e);null!==a&&(a!==i.lastVisible&&i.trigger(a?"enter":"exit",i,e),i.trigger(a?"visible":"invisible",i,e),i.lastVisible=a)}}}),define("core/stance/main",["core/Events","core/utils/function/debounce","core/utils/function/throttle","core/utils/object/extend","./tracking"],function(e,t,n,i,a){"use strict";function s(e){return this instanceof s?(this.obj=e,void(this.lastVisible=!1)):new s(e)}var o=t(function(){a.processEvents(a.lastPos)},250);return i(s.prototype,e,{on:function(t){var n=!(this._events&&this._events[t]),i=e.on.apply(this,arguments);return n&&a.updateTracking(this),o(),i},off:function(t){var n=e.off.apply(this,arguments);return this._events&&this._events[t]||a.updateTracking(this),n},offset:function(){return a.getElementOffset(this.obj)},isVisible:function(e){if(e=e||a.lastPos,!e)return null;var t=e.top,n=t+e.height,i=this.offset();return i?i.offsetTop>=t&&n>i.visibleTop||n>=i.offsetTop+i.height&&i.visibleBottom>t:!1},invalidate:function(){return a.clearCache(this.obj),this}}),i(s,{invalidate:a.clearCache,scroll:a.processEvents,_windowScrollHandlerBound:!1,_ignoreCache:!1,_windowScrollHandler:n(function(){s._ignoreCache&&s.invalidate(),a.processEvents({top:window.pageYOffset,height:window.document.documentElement.clientHeight})},250),bindWindowEvents:function(e){this._windowScrollHandlerBound||(void 0!==e&&(s._ignoreCache=e),window.addEventListener("scroll",this._windowScrollHandler),window.addEventListener("resize",this._windowScrollHandler),this._windowScrollHandlerBound=!0,this._windowScrollHandler())},unbindWindowEvents:function(){s._ignoreCache=!1,window.removeEventListener("scroll",this._windowScrollHandler),window.removeEventListener("resize",this._windowScrollHandler),this._windowScrollHandlerBound=!1}}),s}),define("home/views/FetchingView",["backbone-marionette"],function(e){"use strict";var t=e.ItemView.extend({className:"spinner",template:function(){},initialize:function(t){e.ItemView.prototype.initialize.call(this,t),t=t||{},t.className&&(this.className=t.className)}});return t}),define("home/views/common/FetchableCollectionView",["underscore","jquery","backbone","backbone-marionette","core/stance/main","home/views/FetchingView"],function(e,t,n,i,a,s){"use strict";var o=i.CollectionView.extend({fetchingView:s,emptyView:n.View,initialize:function(t){this.listenable=this.model||this.collection,this.listenTo(this.listenable,"change:fetching",this.render),this.listenTo(this.collection,"add",this.closeNonItemViews),this.listenTo(this.collection,"reset",this.closeViews),this.listenTo(this,"before:item:added",this.onFirstItem),t.infiniteScroll&&this.setupInfiniteScroll(),this.triggerRenderInitialContent=e.once(e.bind(this.trigger,this,"renderInitialContent"))},setupInfiniteScroll:function(){a.bindWindowEvents(),this.listenTo(this,"after:item:added",e.debounce(this.updateInfiniteScrollTrigger,0))},onFirstItem:function(e){this.collection.at(0)===e.model&&(this.stopListening(this,"before:item:added",this.onFirstItem),this.listenToOnce(e,"show",function(){this.trigger("showFirstItem",e)}))},infiniteScrollTriggerOffset:function(){return-t(window).height()},updateInfiniteScrollTrigger:function(){if(this.collection.length){var t=e.values(this.children._views);if(t.length){var n=e.findLastIndex(t,function(e){return!/(\s|^)hidden(\s|$)/.test(e.$el.attr("class"))});if(!(0>n)){var i=t[n];if(i){var s=this.infiniteScrollTrigger;s&&this.stopListening(s),s=a({el:i.el,topEdgeOffset:this.infiniteScrollTriggerOffset}),this.infiniteScrollTrigger=s,this.listenToOnce(s,"enter",this.loadMore)}}}}},loadMore:function(){var e=this.listenable;e.fetchItems?e.fetchItems():e.more&&e.more(),this.infiniteScrollTrigger=null},onCollectionBeforeClose:function(){this._showingEmptyView=!0},onCollectionClosed:function(){this._showingEmptyView=!1},render:function(){var e=!this.collection.length,t=this.isFetching(),n=this.isError();e?t?this.showFetchingView():n?(this.closeViews(),this.triggerRenderInitialContent()):this._showingEmptyView||(i.CollectionView.prototype.render.apply(this,arguments),this.triggerRenderInitialContent()):(!this.children.length||this.isShowingNonItemView())&&(this.closeViews(),i.CollectionView.prototype.render.apply(this,arguments),this.triggerRenderInitialContent())},buildItemView:function(t,n,a){var s=i.getOption(this,"emptyViewOptions");return this._showingEmptyView&&s&&(a=s,e.isFunction(a)&&(a=a.call(this))),i.CollectionView.prototype.buildItemView.call(this,t,n,a)},appendHtml:function(e,n,i){e.isBuffering&&e._bufferedChildren.push(n);var a=e.isBuffering?t(e.elBuffer):e.$el,s=a.children();s.size()<=i?a.append(n.el):s.eq(i).before(n.el)},isFetching:function(){return this.checkState("fetching")},isError:function(){return this.checkState("error")},checkState:function(t){return this.listenable.get?this.listenable.get(t):e.result(this.listenable,t)},bindViewClose:function(e,t){var n=this;e.on("close",function(){n[t]=!1})},closeNonItemViews:function(){this.isShowingNonItemView()&&this.closeViews()},isShowingNonItemView:function(){return this._showingFetchingView||this._showingEmptyView},closeViews:function(){this._showingEmptyView=!0,this.closeChildren(),this._showingEmptyView=!1,this._showingFetchingView=!1},showFetchingView:function(){var e=i.getOption(this,"fetchingView");if(e&&!this._showingFetchingView){this.closeViews(),this._showingFetchingView=!0;var t=this.model||new n.Model,a=this.addItemView(t,e,0);this.bindViewClose(a,"_showingFetchingView")}}});return o}),define("home/templates/threadCardDefaultFooter",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return'<span class="icon-lock icon-tiny spacing-right-small"></span>\n'},3:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"1 Comment",{name:"gettext",hash:{},data:a}))+"\n"},5:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"%(posts)s Comments",{name:"gettext",hash:{posts:null!=t?t.posts:t},data:a}))+"\n"},7:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<li class="action">\n<a href="#" data-action="favorite"\nclass="action-favorite '+(null!=(s=n["if"].call(o,null!=t?t.favorited:t,{name:"if",hash:{},fn:e.program(8,a,0),inverse:e.noop,data:a}))?s:"")+'">\n\n'+(null!=(s=n["if"].call(o,null!=t?t.favorited:t,{name:"if",hash:{},fn:e.program(10,a,0),inverse:e.program(12,a,0),data:a}))?s:"")+'\n<span class="icon icon-heart"></span>\n</a>\n</li>\n'},8:function(){return"active"},10:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Recommended",{name:"gettext",hash:{},data:a}))+"\n"},12:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Recommend",{name:"gettext",hash:{},data:a}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression,l=null!=t?t:{};return'<ul class="actions">\n<li class="action">\n<a href="'+r(o(null!=t?t.discussionRoute:t,t))+'"\ndata-link-name="comment_count"\ndata-thread-id="'+r(o(null!=t?t.id:t,t))+'">\n'+(null!=(s=n["if"].call(l,null!=t?t.isClosed:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+"\n"+(null!=(s=n["if"].call(l,n.eq.call(l,null!=t?t.posts:t,1,{name:"eq",hash:{},data:a}),{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.program(5,a,0),data:a}))?s:"")+'<span class="icon icon-comment"></span>\n</a>\n</li>\n'+(null!=(s=n["if"].call(l,null!=t?t.authenticated:t,{name:"if",hash:{},fn:e.program(7,a,0),inverse:e.noop,data:a}))?s:"")+"</ul>\n"},useData:!0})}),define("home/mixins/withThreadSharing",["jquery","underscore"],function(e,t){"use strict";var n=function(){return this.model.thread||this.model};return function(){this.events=t.extend({"click [data-action=share]":"handleShareThread"},this.events),this.handleShareThread=function(t){if(t){t.preventDefault(),t.stopPropagation();var i=n.call(this),a=e(t.currentTarget).attr("data-network");i.shareThread(a)}}}}),define("home/views/ThreadCardDefaultFooterView",["backbone-marionette","home/models/Session","home/templates/threadCardDefaultFooter","home/mixins/withThreadSharing"],function(e,t,n,i){"use strict";var a=e.ItemView.extend({template:n,templateHelpers:function(){var e=t.get();return{favorited:this.model.get("userScore")>0,discussionRoute:this.model.getDiscussionRoute(this.channel),authenticated:!e.isAnonymous(),likes:this.model.get("likes")}},events:{"click [data-action=favorite]":"toggleThreadFavorited","click [data-action=toggle-subscription]":"toggleSubscription"},initialize:function(e){this.listenTo(this.model,"change:userScore",this.render),this.listenTo(this.model,"change:userSubscription",this.render),this.channel=e&&e.channel},toggleThreadFavorited:function(e){e&&e.preventDefault(),this.model.toggleFavorited()},toggleSubscription:function(e){e&&e.preventDefault(),this.model.toggleSubscription()}});return i.call(a.prototype),a}),define("home/mixins/withThreadCardDefaultFooter",["underscore","home/mixins/withSubviews","home/views/ThreadCardDefaultFooterView"],function(e,t,n){"use strict";var i=function(){return this.model.thread||this.model},a={render:function(e){return e.call(this),this.footerRegion=this.addRegion("[data-role=footer]"),this.activateRegion(this.footerRegion,this.createThreadDefaultFooter),this},createThreadDefaultFooter:function(){var e=i.call(this);return new n({el:this.footerRegion.el,model:e,channel:this.channel})}};return function(){t.call(this),this.createThreadDefaultFooter=a.createThreadDefaultFooter,this.render=e.wrap(this.render,a.render)}}),define("home/mixins/withTruncate",["jquery","underscore"],function(e,t){"use strict";var n={onDomRefresh:function(t){t&&t.call(this),this.$(".truncate").each(function(t,n){e(n).trunk8({lines:e(n).data("truncateLines")||1})}),this.trigger("truncate:complete")}};return function(){this.onDomRefresh=t.wrap(this.onDomRefresh,n.onDomRefresh)}}),define("home/mixins/asGenericCard",["underscore","home/utils/layoutUtils","home/mixins/withThreadCardDefaultFooter","home/mixins/withTruncate"],function(e,t,n,i){"use strict";var a={className:function(t){return e.isFunction(t)&&(t=t.apply(this,e.rest(arguments))),t=t||"",["card card-generic","card-generic-"+this.model.get("verb"),t].join(" ");
},initialize:function(e,t){t=t||{},e.call(this,t),this.channel=t.channel,this.hideImage=t.hideImage,this.listenTo(this.model.thread,"change:content",this.render),this.numTitleLines=t.numTitleLines||3},serializeData:function(n){var i=n.call(this),a=this.model.thread;return e.defaults(i,{discussionRoute:a.getDiscussionRoute(this.channel),threadDescriptionHTML:a.getDefaultDescription(),image:!this.hideImage&&!t.isNarrowLayout()&&a.getImage(),numTitleLines:this.numTitleLines})}};return function(){n.apply(this,arguments),i.apply(this,arguments),this.className=e.wrap(this.className,a.className),this.initialize=e.wrap(this.initialize,a.initialize),this.serializeData=e.wrap(this.serializeData,a.serializeData)}}),define("core/utils/views",["underscore"],function(e){"use strict";var t=function(t,n,i){var a=t.prototype,s=e.extend({},n,i);if(e.defaults(a,s),e.defaults(a.events,s.events),void 0!==a.initialize&&void 0!==s.initialize){var o=a.initialize;a.initialize=function(){var e=o.apply(this,arguments);return s.initialize.apply(this,arguments),e}}};return{mixin:t}}),define("core/views/common/HoverCard",["jquery","underscore","backbone","core/bus","core/utils"],function(e,t,n,i,a){"use strict";var s=n.View.extend({events:{mouseenter:"enter",mouseleave:"leave"},initialize:function(){this._id=t.uniqueId(),this._rendered=!1,this._hoverState="out",this._visible=!1,this._enterTimeout=null,this._leaveTimeout=null,s.open={},this.events=this.events||{},this.events["click [data-action=profile]"]="handleShowProfile",this.listenTo(this,"authenticating",this.keepOpen)},render:function(){return this.hide(),e("body").append(this.el),this},target:function(e){e.on("mouseenter",t.bind(this.enter,this,e)),e.on("mouseleave",t.bind(this.leave,this))},enter:function(e){var n=this;e.originalEvent&&(e=null),e&&(n.$target=e),n._leaveTimeout&&clearTimeout(n._leaveTimeout),"in"!==n._hoverState&&(n._hoverState="in",n._enterTimeout=t.delay(function(){"in"===n._hoverState&&n.show(),n._enterTimeout=null},s.DELAY_ENTER),s.open[this.uid]=this)},leave:function(){var e=this;e._enterTimeout&&clearTimeout(e._enterTimeout),"out"!==e._hoverState&&(e._hoverState="out",e._leaveTimeout=t.delay(function(){"out"===e._hoverState&&e.hide(),e._leaveTimeout=null},s.DELAY_LEAVE),s.open[this.uid]&&delete s.open[this.uid])},show:function(){var e=this;e._rendered||(e._rendered=!0,e.render()),e.moveTo(e.$target),e.$el.show(),e._visible=!0,e.trigger("show")},moveTo:function(e){if(e){var t=s.POSITION_OFFSET,n=e.offset(),i=this.$el,a=i.height(),o=this.getContainerPosition();n.top-=t;var r=n.top+a+o.containerOffset.top,l=o.pageOffset+o.containerHeight;l>=r?i.css("top",n.top):i.css("top",n.top-a+2*t),i.css("left",n.left+t)}},getContainerPosition:function(){return{pageOffset:e(window).scrollTop(),containerOffset:{top:0,height:e(window).height()},containerHeight:e(window).height()}},hide:function(){this._keepOpen||(this._enterTimeout&&clearTimeout(this._enterTimeout),this.$el.hide(),this._visible=!1)},keepOpen:function(){this._keepOpen=!0,this.setupKeepOpenCanceler()},setupKeepOpenCanceler:function(){var n=this,a=function(){"out"===n._hoverState&&(n.stopListening(i,"window.click",a),e("body").off("click",a),n._keepOpen=!1,n.hide())};t.delay(function(){n.listenTo(i,"window.click",a),e("body").on("click",a)},100)},isVisible:function(){return this._visible},handleShowProfile:a.preventDefaultHandler(function(){this.hide()})},{open:{},instances:{},DELAY_ENTER:350,DELAY_LEAVE:175,POSITION_OFFSET:20,exitAll:function(){t.invoke(s.open,"leave")},create:function(e,t,n,i){var a=s.instances[n];a||(s.instances[n]=a={});var o=a[e];return o||(o=new i(t),a[e]=o),t.targetElement&&o.target(t.targetElement),o}});return function(){e(window.document).on("mouseout",t.debounce(function(e){var t=e.relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||s.exitAll()},10))}(),s}),define("core/views/common/mixins/LocalScroll",[],function(){"use strict";var e={events:{mousewheel:"handleScrollEvent",wheel:"handleScrollEvent"},scrollMeasureSelector:"",getScrollMeasure:function(){return this.scrollMeasure||(this.scrollMeasure=this.$el,this.scrollMeasureSelector&&(this.scrollMeasure=this.$el.find(this.scrollMeasureSelector))),this.scrollMeasure},handleScrollEvent:function(e){var t=e.originalEvent,n=t.wheelDeltaY||-t.deltaY,i=this.$el,a=i.height(),s=this.getScrollMeasure(),o=s.height(),r=s.parent()[0].scrollTop,l=r>=o-a,c=0===r;(l&&0>n||c&&n>0)&&e.preventDefault()}};return e}),define("core/templates/usersCard",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return"guests-only"},3:function(e,t,n,i,a){var s;return null!=(s=n.each.call(null!=t?t:{},null!=t?t.users:t,{name:"each",hash:{},fn:e.program(4,a,0),inverse:e.noop,data:a}))?s:""},4:function(e,t,n,i,a){var s;return null!=(s=e.invokePartial(i.cardUser,t,{name:"cardUser",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:""},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<div class="tooltip upvoters '+(null!=(s=n.unless.call(o,null!=(s=null!=t?t.users:t)?s.length:s,{name:"unless",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'">\n<ul class="scroll-measure" data-role="content">\n'+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.users:t)?s.length:s,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+'</ul>\n</div>\n<div class="tooltip-point hidden"></div>\n'},usePartial:!0,useData:!0})}),define("core/views/UsersCard",["jquery","underscore","handlebars","core/config","core/bus","core/utils/views","core/views/common/HoverCard","core/views/common/mixins/LocalScroll","core/templates/usersCard"],function(e,t,n,i,a,s,o,r,l){"use strict";var c=function(e){return e.get("isAnonymous")||e.get("isBlocked")},d=o.extend({guestTextPartialName:"cardOtherUserText",className:"tooltip-outer upvoters-outer",initialize:function(e){o.prototype.initialize.call(this,e),this.collection=this.collection||e.collection,this.session=e.session,this.numUsers=e.numUsers,this.listenTo(this.collection,"add",this.addUser),this.listenTo(this.collection,"change:isBlocked",this.render),this.listenTo(this.collection,"remove",this.removeUser),this.listenTo(this.collection,"reset",this.render)},addUser:function(e){c(e)?this.updateGuests():this.$listEl&&this.$listEl.length&&(this.$listEl.prepend(n.partials.cardUser(t.extend({highlight:!0},e.toJSON()))),this.stopHighlightUsername())},removeUser:function(e){if(c(e))this.updateGuests();else{var t=this.$el.find("[data-username="+e.get("username")+"]");t.length&&t.remove()}},stopHighlightUsername:t.debounce(function(){var e=this.$el.find(".highlight");e.removeClass("highlight")},1100),getGuestCount:function(){return Math.max(this.numUsers-this.collection.reject(c).length,0)},updateGuests:function(){var e=this.$el.find("[data-role=guest]"),t=this.getGuestCount(),a=n.partials[this.guestTextPartialName]({guestCount:t}),s={guestCount:t,guestAvatarUrl:i.urls.avatar.generic,highlight:e.length,guestText:a},o=n.partials.cardGuestUser(s);e.length?(e.replaceWith(o),this.stopHighlightUsername()):this.$listEl&&this.$listEl.length&&this.$listEl.append(o)},render:function(){delete this.pointEl,this.$el.html(l({users:t.invoke(this.collection.reject(c),"toJSON"),highlight:!1})),o.prototype.render.call(this),this.$listEl=this.$el.find(".upvoters ul"),this.updateGuests()},show:function(){this.numUsers&&!this.isVisible()&&(o.prototype.show.call(this),a.trigger("uiAction:userCardShow"))},showPoint:function(e){var n=["tl","bl"];this.pointEl||(this.pointEl=this.$el.find(".tooltip-point"),this.pointEl.removeClass("hidden")),t.each(n,function(e){this.pointEl.removeClass("point-position-"+e)},this),this.pointEl.addClass("point-position-"+e)},moveTo:function(e,t){if(e){var n=o.POSITION_OFFSET,i=e.offset(),a=this.$el,s=a.height(),r=this.getContainerPosition();t&&(s+=a.find("li.user").height()+10),i.top-s-n>=0&&i.top-s+r.containerOffset.top>=r.pageOffset?(a.css({bottom:r.containerOffset.height-i.top+n,top:"inherit"}),this.showPoint("bl")):(a.css({bottom:"inherit",top:i.top+2*n}),this.showPoint("tl")),a.css("left",i.left-n)}},handleShowProfile:function(t){o.prototype.handleShowProfile.call(this,t);var n=e(t.currentTarget),i=n.attr("data-username");a.trigger("uiCallback:showProfile",i)}},{create:function(e,t){return o.create(e,t,"UsersCard",d)}});return s.mixin(d,r,{scrollMeasureSelector:"[data-role=content]"}),d}),define("home/utils/cardUtils",["core/bus","home/utils/navigationUtils","home/utils/sidebarUtils"],function(e,t,n){"use strict";e.on({"uiCallback:showProfile":function(e){var i="/by/"+e+"/";n.isSidebar()?window.open(i):t.navigate(i,{trigger:!0})}})}),define("home/views/ActivityActorsHoverCard",["underscore","backbone","home/models/Session","core/views/UsersCard","core/views/common/HoverCard","home/utils/cardUtils"],function(e,t,n,i,a){"use strict";var s=i.extend({initialize:function(a){var s=a.activityFeedItem,o=a.numShownActors;e.extend(a,{numUsers:s.get("totalActors")-o,session:n.get(),collection:new t.Collection(s.actors.slice(o))}),i.prototype.initialize.apply(this,arguments)},show:function(){i.prototype.show.apply(this,arguments),this.trigger("uiAction:activityActorsCardShow")}},{create:function(e){return a.create(e.activityId,e,"ActivityActorsHoverCard",s)}});return s}),define("home/mixins/withReason",["underscore","home/views/ActivityActorsHoverCard","core/utils"],function(e,t,n){"use strict";var i=function(){if(!n.isMobileUserAgent()){var e=this.$("[data-role=actors]");e.length&&(this.hoverCard&&this.hoverCard.remove(),this.hoverCard=t.create({targetElement:e,activityFeedItem:this.model,activityId:this.model.id,numShownActors:1}))}},a=function(){if(!this.model.actors||1!==this.model.actors.length)return 0;var e=this.model.get("totalActivities");return e>1?e:0},s=function(){this.initialize=e.wrap(this.initialize,function(t){t.apply(this,e.rest(arguments)),this.listenTo(this,"render",i)});var t=this.templateHelpers;this.templateHelpers=function(){var n=this.options&&this.options.enableBestOfDisqusCallout,i=this.model.thread,s=this.model.activities[0],o=n&&"TrendingThreadOnChannel"===s.get("type")&&s.targetChannel&&s.targetChannel.get("options").isCurationOnlyChannel;return e.extend({relativeTime:this.model.getRelativeTimestamp(),numRemainingActors:this.model.get("totalActors")-1,numOccurrences:a.call(this),firstActor:this.model.actors[0]&&this.model.actors[0].toJSON(),isBestOfDisqus:o,threadLikes:i&&i.get("likes")+(o?1:0)},e.isFunction(t)?t.apply(this,arguments):t)}};return s}),define("home/templates/postActions",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return" active"},3:function(e,t){return e.escapeExpression(e.lambda(null!=t?t.likes:t,t))},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.lambda,l=e.escapeExpression;return'<a href="#" class="vote-up'+(null!=(s=n["if"].call(o,null!=t?t.sessionUserHasUpvoted:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'" data-action="vote" data-vote="1">\n<span class="vote__count text-gray text-small" data-role="upvotes">\n'+(null!=(s=n["if"].call(o,null!=t?t.likes:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+'\n</span>\n<span class="icon-arrow-up icon-tiny"></span>\n</a>\n\n<a href="#" class="vote-down'+(null!=(s=n["if"].call(o,null!=t?t.sessionUserHasDownvoted:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'" data-action="vote" data-vote="-1">\n<span class="icon-arrow-down icon-tiny"></span>\n</a>\n\n'+(null!=(s=e.invokePartial(i.replyOrEditLink,t,{name:"replyOrEditLink",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'\n<a href="'+l(r(null!=t?t.discussionRoute:t,t))+"#comment-"+l(r(null!=t?t.id:t,t))+'"\nclass="view-comment link-gray"\ndata-link-name="view_comment"\ndata-thread-id="'+l(r(null!=(s=null!=t?t.thread:t)?s.id:s,t))+'">\n\n<span class="visible-md">'+l(n.gettext.call(o,"View",{name:"gettext",hash:{},data:a}))+'</span><span class="hidden-md">'+l(n.gettext.call(o,"View in discussion",{name:"gettext",hash:{},data:a}))+'</span><span class="icon-expand"></span>\n</a>\n'},usePartial:!0,useData:!0})}),define("home/utils/features",["modernizr"],function(e){"use strict";var t={browser:{mobile:/iPhone|Android|iPod|iPad|webOS|Mobile Safari|Windows Phone|BlackBerry|Opera Mini|IEMobile/i.test(window.navigator.userAgent)}},n=e.contenteditable&&!t.browser.mobile&&!(window.opera&&window.opera.version);return{canUseContentEditable:function(){return n}}}),define("core/templates/alert",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return'<span class="icon icon-warning"></span>\n'},3:function(e,t){var n;return(null!=(n=e.lambda(null!=t?t.message:t,t))?n:"")+"\n"},5:function(e,t){return e.escapeExpression(e.lambda(null!=t?t.message:t,t))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<a class="close" data-action="dismiss" title="'+e.escapeExpression(n.gettext.call(o,"Dismiss",{name:"gettext",hash:{},data:a}))+'">×</a>\n<span>\n'+(null!=(s=n["if"].call(o,null!=t?t.icon:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=n["if"].call(o,null!=t?t.safe:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.program(5,a,0),data:a}))?s:"")+"</span>\n"},useData:!0})}),define("core/views/AlertView",["backbone","core/templates/alert"],function(e,t){"use strict";var n=e.View.extend({className:"alert",events:{"click [data-action=dismiss]":"dismiss"},initialize:function(e){this.options=e,this.message=e.message,this.safe=e.safe,this.type=e.type},render:function(){var e=this.$el;return e.html(t({message:this.message,safe:this.safe,icon:"error"===this.type})),e.attr("class",this.className),this.type&&e.addClass(this.type),this},dismiss:function(e){e&&e.preventDefault&&e.preventDefault(),this.remove(),this.trigger("dismiss")}});return n}),define("core/mixins/withAlert",["underscore","core/views/AlertView"],function(e,t){"use strict";var n={alert:function(n,i){e.isObject(i)||(i={});var a=i.target||this._alertSelector;this.dismissAlert();var s=this._alert=new t(e.extend({message:n},i));return s.render(),a?this.$el.find(a).prepend(s.el):this.el.parentNode&&this.el.parentNode.insertBefore(s.el,this.el),s},dismissAlert:function(e){this._alert&&(!e||e(this._alert))&&this._alert.dismiss()},setAlertSelector:function(e){this._alertSelector=e}},i=function(){return e.extend(this,n)};return i}),function(e){"use strict";e("when",[],function(){function e(e,n,i,a){return t(e).then(n,i,a)}function t(e){var t,n;return e instanceof i?t=e:r(e)?(n=o(),e.then(function(e){n.resolve(e)},function(e){n.reject(e)},function(e){n.progress(e)}),t=n.promise):t=a(e),t}function n(t){return e(t,s)}function i(e){this.then=e}function a(e){var n=new i(function(n){try{return t(n?n(e):e)}catch(i){return s(i)}});return n}function s(e){var n=new i(function(n,i){try{return i?t(i(e)):s(e)}catch(a){return s(a)}});return n}function o(){function e(e,t,n){return h(e,t,n)}function n(e){return p(e)}function a(e){return p(s(e))}function r(e){return m(e)}var l,c,d,u,h,m,p;return c=new i(e),l={then:e,resolve:n,reject:a,progress:r,promise:c,resolver:{resolve:n,reject:a,progress:r}},d=[],u=[],h=function(e,t,n){var i,a;return i=o(),a="function"==typeof n?function(e){try{i.progress(n(e))}catch(t){i.progress(t)}}:function(e){i.progress(e)},d.push(function(n){n.then(e,t).then(i.resolve,i.reject,a)}),u.push(a),i.promise},m=function(e){return f(u,e),e},p=function(e){return e=t(e),h=e.then,p=t,m=v,f(d,e),u=d=y,e},l}function r(e){return e&&"function"==typeof e.then}function l(t,n,i,a,s){return g(2,arguments),e(t,function(t){function r(e){f(e)}function l(e){p(e)}var c,d,u,h,m,p,f,g,b,w;if(b=t.length>>>0,c=Math.max(0,Math.min(n,b)),u=[],d=b-c+1,h=[],m=o(),c)for(g=m.progress,f=function(e){h.push(e),--d||(p=f=v,m.reject(h))},p=function(e){u.push(e),--c||(p=f=v,m.resolve(u))},w=0;b>w;++w)w in t&&e(t[w],l,r,g);else m.resolve(u);return m.then(i,a,s)})}function c(e,t,n,i){function a(e){return t?t(e[0]):e[0]}return l(e,1,a,n,i)}function d(e,t,n,i){return g(1,arguments),h(e,b).then(t,n,i)}function u(){return h(arguments,b)}function h(t,n){return e(t,function(t){var i,a,s,r,l,c;if(s=a=t.length>>>0,i=[],c=o(),s)for(r=function(t,a){e(t,n).then(function(e){i[a]=e,--s||c.resolve(i)},c.reject)},l=0;a>l;l++)l in t?r(t[l],l):--s;else c.resolve(i);return c.promise})}function m(t,n){var i=x.call(arguments,1);return e(t,function(t){var a;return a=t.length,i[0]=function(t,i,s){return e(t,function(t){return e(i,function(e){return n(t,e,s,a)})})},w.apply(t,i)})}function p(t,n,i){var a=arguments.length>2;return e(t,function(e){return e=a?i:e,n.resolve(e),e},function(e){return n.reject(e),s(e)},n.progress)}function f(e,t){for(var n,i=0;n=e[i++];)n(t)}function g(e,t){for(var n,i=t.length;i>e;)if(n=t[--i],null!=n&&"function"!=typeof n)throw Error("arg "+i+" must be a function")}function v(){}function b(e){return e}var w,x,y;return e.defer=o,e.resolve=t,e.reject=n,e.join=u,e.all=d,e.map=h,e.reduce=m,e.any=c,e.some=l,e.chain=p,e.isPromise=r,i.prototype={always:function(e,t){return this.then(e,e,t)},otherwise:function(e){return this.then(y,e)},spread:function(e){return this.then(function(t){return d(t,function(t){return e.apply(y,t)})})}},x=[].slice,w=[].reduce||function(e){var t,n,i,a,s;if(s=0,t=Object(this),a=t.length>>>0,n=arguments,1>=n.length)for(;;){if(s in t){i=t[s++];break}if(++s>=a)throw new TypeError}else i=n[1];for(;a>s;++s)s in t&&(i=e(i,t[s],s,t));return i},e})}("function"==typeof define&&define.amd?define:function(e){"object"==typeof exports?module.exports=e():this.when=e()}),define("core/models/Media",["underscore","backbone","core/api","core/UniqueModel"],function(e,t,n,i){"use strict";var a=t.Model.extend({idAttribute:"url",defaults:{mediaType:null,html:"",htmlWidth:null,htmlHeight:null,thumbnailUrl:"",thumbnailWidth:null,thumbnailHeight:null,url:"",urlRedirect:"",resolvedUrl:"",resolvedUrlRedirect:"",title:"",description:"",providerName:""},parse:function(e){return e.response},sync:function(t,i,a){if("read"!==t)throw Error('Media models do not support methods other than "read".');return n.call("media/details.json",e.extend({method:"POST",data:{url:this.get("url")}},a))}},{MEDIA_TYPES:{IMAGE:"1",IMAGE_UPLOAD:"2",YOUTUBE_VIDEO:"3",WEBPAGE:"4",TWITTER_STATUS:"5",FACEBOOK_PAGE:"6",FACEBOOK_POST:"7",FACEBOOK_PHOTO:"8",FACEBOOK_VIDEO:"9",SOUNDCLOUD_SOUND:"10",GOOGLE_MAP:"11",VIMEO_VIDEO:"12",VINE_VIDEO:"14"},WEBPAGE_TYPES:["4","6","7"]});return i.addType("Media",a),a}),define("core/utils/media/upload",["underscore","when","exports","core/api","core/models/Media","core/UniqueModel"],function(e,t,n,i,a,s){"use strict";n.uploadSupported=!!window.FormData,n._extractFirstImageFile=function(t){return e.find(t,function(e){return e.type.match(/^image\//)})},n._uploadViaApi=function(e,n,a){return t(i.call(e,{data:n,contentType:!1,processData:!1,method:"POST",xhr:function(){var e=new window.XMLHttpRequest,t=a&&a.onProgress;return t&&e.upload.addEventListener("progress",function(e){e.total&&t(100*e.loaded/e.total)}),e}}))},n.UPLOAD_URL="https://uploads.services.disqus.com/api/3.0/media/create.json",n.uploadMediaUrl=function(i,o){var r,l=new window.FormData,c=n._extractFirstImageFile(i);return c?(l.append("upload",c),l.append("permanent",1),n._uploadViaApi(n.UPLOAD_URL,l,o).then(function(t){var n=t.response,i=e.first(e.values(n));if(!i||!i.ok)throw r=Error("Upload failed"),r.code=i&&i["error-code"],r;return new s(a,{mediaType:a.MEDIA_TYPES.IMAGE_UPLOAD,url:i.url,thumbnailUrl:i.url})},function(e){if(e.responseJSON&&4===e.responseJSON.code)throw r=Error("Upload failed"),r.code="not-authenticated",r;throw e})):(r=Error("No image file to upload"),r.code="invalid-content-type",t.reject(r))}}),define("core/views/media/DragDropUploadView",["underscore","backbone","core/utils"],function(e,t,n){"use strict";var i=n.stopEventHandler,a=t.View.extend({events:{dragover:"_dragOn",dragenter:"_dragOn",dragleave:"_dragOff",dragexit:"_dragOff",drop:"_drop"},_dragOn:i(function(){this.trigger("uploader:dragEnter"),this._toggleDragPlaceholder(!0)}),_dragOff:i(function(){this._toggleDragPlaceholder(!1)}),_drop:i(function(e){this._toggleDragPlaceholder(!1);var t=e.originalEvent.dataTransfer.files;return t.length?void this.trigger("uploader:attachMedia",t):void this.trigger("uploader:dropError","No files")}),_toggleDragPlaceholder:e.throttle(function(e){this.trigger(e?"uploader:showPlaceholder":"uploader:hidePlaceholder")},50)});return a}),define("core/templates/postMediaUploadButton",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<a href="#" tabindex="-1" data-action="attach" class="attach" title="'+o(n.gettext.call(s,"Upload Images",{name:"gettext",hash:{},data:a}))+'"><span>'+o(n.gettext.call(s,"Attach",{name:"gettext",hash:{},data:a}))+'</span></a>\n<input type="file" data-role="media-upload" tabindex="-1" accept="image/*">\n'},useData:!0})}),define("core/views/media/UploadButtonView",["jquery","backbone","core/templates/postMediaUploadButton","core/utils"],function(e,t,n,i){"use strict";var a=i.stopEventHandler,s="input[type=file][data-role=media-upload]",o=t.View.extend({events:function(){var e={"click [data-action=attach]":"_attachMedia"};return e["change "+s]="_selectorChange",e}(),initialize:function(e){this.template=e&&e.template||n},render:function(){return this.$el.html(this.template()),this},_attachMedia:a(function(){this.$(s).click()}),_selectorChange:function(t){var n=t.target,i=n.files;i.length&&(this.trigger("uploader:attachMedia",i),e(n).replaceWith(n.cloneNode()))}});return o}),define("core/templates/postMediaUploadProgress",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t){return'<li>\n<div class="media-progress-box">\n<div class="media-progress">\n<div class="bar" style="right: '+e.escapeExpression(e.lambda(null!=t?t.remainingPerc:t,t))+'%"></div>\n</div>\n</div>\n</li>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return null!=(s=n.each.call(null!=t?t:{},null!=t?t.collection:t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:""},useData:!0})}),define("core/views/media/UploadsProgressSubView",["backbone","core/templates/postMediaUploadProgress"],function(e,t){"use strict";var n=e.View.extend({initialize:function(){this.collection=new e.Collection,this.listenTo(this.collection,"add remove change",this.render)},hasVisible:function(){return!!this.collection.length},render:function(){return this.$el.html(t({collection:this.collection.toJSON()})),this}});return n}),define("core/templates/postMediaUploadRich",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t){var n;return e.escapeExpression(e.lambda(null!=(n=null!=t?t.media:t)?n.title:n,t))},3:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Media attachment",{name:"gettext",hash:{},data:a}))},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<li class="publisher-border-color">\n<div class="media-box">\n<div class="media-ct">\n<div class="media-surface">\n<a href="'+r(o(null!=(s=null!=t?t.media:t)?s.url:s,t))+'" target="_blank">\n<img src="'+r(o(null!=(s=null!=t?t.media:t)?s.thumbnailUrl:s,t))+'" alt="'+(null!=(s=n["if"].call(null!=t?t:{},null!=(s=null!=t?t.media:t)?s.title:s,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+'">\n</a>\n</div>\n</div>\n</div>\n</li>\n'},useData:!0})}),define("core/views/media/UploadsRichSubView",["underscore","backbone","core/models/Media","core/UniqueModel","core/utils","core/templates/postMediaUploadRich"],function(e,t,n,i,a,s){"use strict";var o=t.View.extend({initialize:function(){this._hasVisible=!1,this.collection=new t.Collection([],{model:n,comparator:"index"}),this.listenTo(this.collection,"add remove reset sort change:thumbnailUrl change:mediaType change:editsFinished",this.render),this.listenTo(this.collection,"change:index",e.bind(this.collection.sort,this.collection))},render:function(){return this.$el.empty(),this._hasVisible=!1,this.collection.each(function(t){t.get("thumbnailUrl")&&(e.contains(n.WEBPAGE_TYPES,t.get("mediaType"))||t.get("editsFinished")&&(this.$el.append(s({media:t.toJSON()})),this._hasVisible=!0))},this),this},hasVisible:function(){return this._hasVisible},addMedia:function(e){var t=i.get(n,e.url);if(t)t.set(e);else{if(!e.editsFinished)return;t=new i(n,e),t.fetch()}return this.collection.add(t),t},updateFromText:function(t,n,i){if(!t)return void this.collection.reset();var s=a.bleachFindUrls(t);s=e.uniq(s,!1,function(e){return e.url});var o={};e.each(s,function(a){o[a.url]=!0;var s=e.pick(a,"index","url"),r=n>a.index&&a.endIndex>=n||"."===t[a.endIndex];(!r||i.isPasteEvent)&&(s.editsFinished=!0),this.addMedia(s)},this);var r=this.collection.pluck("url");o=e.keys(o);var l=e.difference(r,o);this.collection.remove(this.collection.filter(function(t){return e.contains(l,t.get("url"))}))}});return o}),define("core/templates/postMediaUploads",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){return'<ul data-role="media-progress-list"></ul>\n<ul data-role="media-rich-list"></ul>\n<div class="media-expanded empty" data-role="media-preview-expanded">\n<img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="\ndata-role="media-preview-expanded-image" alt="'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Media preview placeholder",{name:"gettext",hash:{},data:a}))+'">\n</div>\n'},useData:!0})}),define("core/views/media/UploadsView",["backbone","core/views/media/UploadsProgressSubView","core/views/media/UploadsRichSubView","core/templates/postMediaUploads"],function(e,t,n,i){"use strict";var a=e.View.extend({initialize:function(){this.richView=new n,this.rich=this.richView.collection,this.uploadProgressView=new t,this.uploadProgress=this.uploadProgressView.collection,this.listenTo(this.rich,"all",this._updateEmpty),this.listenTo(this.uploadProgress,"all",this._updateEmpty)},render:function(){return this.richView.$el.detach(),this.uploadProgressView.$el.detach(),this.$el.html(i()),this._updateEmpty(),this.richView.setElement(this.$("[data-role=media-rich-list]")[0]),this.uploadProgressView.setElement(this.$("[data-role=media-progress-list]")[0]),this},clear:function(){this.rich.reset(),this.uploadProgress.reset()},_updateEmpty:function(){this.richView.hasVisible()||this.uploadProgressView.hasVisible()?this.$el.removeClass("empty"):this.$el.addClass("empty")}});return a}),define("core/mixins/withUploadForm",["underscore","backbone","core/strings","core/utils","core/utils/media/upload","core/utils/storage","core/views/media/DragDropUploadView","core/views/media/UploadButtonView","core/views/media/UploadsView"],function(e,t,n,i,a,s,o,r,l){"use strict";var c=n.get,d=function(){e.defaults(this,d.bothProto,d.uploadsProto,d.previewsProto)},u={"invalid-image-file":c("Unfortunately your image upload failed. Please verify that the file is valid and in a supported format (JPEG, PNG, or GIF)."),"invalid-content-type":c("Unfortunately your image upload failed. Please verify that the file is in a supported format (JPEG, PNG, or GIF)."),"file-too-large":c("Unfortunately your image upload failed. Please verify that your image is under 5MB."),"not-authenticated":c("You must be logged in to upload an image.")},h=c("Unfortunately your image upload failed. Please verify that your image is in a supported format (JPEG, PNG, or GIF) and under 5MB. If you continue seeing this error, please try again later.");return d.previewsProto={initMediaPreviews:function(t,n){this.mediaUploadsView=new l({el:t[0]}),this.mediaUploadsView.render(),this.updateLiveMediaDebounced=e.partial(e.debounce(this.updateLiveMedia,500),n,!1),this.listenTo(n,{keychange:this.updateLiveMediaDebounced,paste:function(t,i){i&&i.fake||e.defer(e.bind(this.updateLiveMedia,this,n,!0))}}),this.updateLiveMedia(n,!0)},clearMediaPreviews:function(){this.mediaUploadsView&&this.mediaUploadsView.clear()},updateLiveMedia:function(e,t){if(this.mediaUploadsView){var n=e.get(),i=e.offset();this.mediaUploadsView.richView.updateFromText(n,i,{isPasteEvent:t})}}},d.uploadsProto={initMediaUploads:function(e,t,n){this.mediaDragDropView=new o({el:t[0]}),this.listenTo(this.mediaDragDropView,{"uploader:attachMedia":function(){s.set("usedDragDrop",1),this.handleAttachMedia.apply(this,arguments)},"uploader:dragEnter":function(){this.$el.addClass("expanded")},"uploader:showPlaceholder":function(){e.show()},"uploader:hidePlaceholder":function(){e.hide()},"uploader:dropError":function(){var e=c("Sorry we didn't catch that. Try again?");this.alert(e,{type:"error",isUploadError:!0})}}),this.mediaUploadButtonView=new r({el:n[0]}),this.listenTo(this.mediaUploadButtonView,{"uploader:attachMedia":this.handleUploadViaButton}),this.mediaUploadButtonView.render()},handleUploadViaButton:function(e){if(e&&s.isPersistent&&!s.get("usedDragDrop")&&!i.isMobileUserAgent()){var t=this.alert(c("Did you know you can drag and drop images too? Try it now!"));this.listenToOnce(t,"dismiss",function(){s.set("usedDragDrop",1)})}this.handleAttachMedia.apply(this,arguments)},handleAttachMedia:function(n,i){var s=this,o=new t.Model({remainingPerc:100});s.mediaUploadsView.uploadProgress.add(o),i=e.extend(i||{},{onProgress:function(e){o.set("remainingPerc",100-e)}}),a.uploadMediaUrl(n,i).then(function(e){e.fetch(),s.textarea.insertAtCursor(e.get("url")),s.updateLiveMedia(s.textarea,!0),s.dismissUploadError()}).otherwise(function(e){var t;e&&e.code&&(t=u[e.code]),t||(t=h),s.alert(t,{type:"error",isUploadError:!0})}).always(function(){s.mediaUploadsView.uploadProgress.remove(o)})},dismissUploadError:function(){this.dismissAlert(function(e){return e.options&&e.options.isUploadError})},uploadSupported:a.uploadSupported,isUploadInProgress:function(){return this.mediaUploadsView&&this.mediaUploadsView.uploadProgress.length}},d.bothProto={initMediaViews:function(e){e.allowMedia&&this.initMediaPreviews(this.$("[data-role=media-preview]"),e.textarea),e.allowUploads&&this.initMediaUploads(this.$("[data-role=drag-drop-placeholder]"),this.$("[data-role=textarea]"),this.$("[data-role=media-uploader]"))}},d}),define("core/editable",[],function(){"use strict";function e(e){return e.replace(a," ")}function t(n,i,a){var s,r,l,c,d="",u=[];for("string"!=typeof a&&(a="\n\n"),c=0;n.length>c;++c)r=n[c],s=r.nodeName.toLowerCase(),1===r.nodeType?(l=i&&i(r),l?d+=l:o.hasOwnProperty(s)?(d&&u.push(d),d=t(r.childNodes,i,a)):d+="br"===s?"\n":t(r.childNodes,i,a)):3===r.nodeType&&(d+=e(r.nodeValue));return u.push(d),u.join(a)}var n=window.document,i="character",a=RegExp(String.fromCharCode(160),"gi"),s="h1 h2 h3 h4 h5 h6 p pre blockquote address ul ol dir menu li dl div form".split(" "),o={},r=0;for(r=0;s.length>r;r++)o[s[r]]=!0;var l=function(e,t,n){var i=this;if(!e||!e.contentEditable)throw Error("First argument must be contentEditable");this.elem=e,this.emulateTextarea=e.getAttribute("plaintext-only")||t,this.emulateTextarea&&(this.pasteHandler=function(){var e=i.plainTextReformat,t=function(){e.timeout=null,e.call(i)};e.timeout&&clearTimeout(e.timeout),e.timeout=setTimeout(t,0)},e.addEventListener("paste",this.pasteHandler));for(var a in n)n.hasOwnProperty(a)&&(this[a]=n[a])};return l.prototype={insertHTML:function(e){if(n.all){var t=n.selection.createRange();return t.pasteHTML(e),t.collapse(!1),t.select()}return n.execCommand("insertHTML",!1,e)},insertNode:function(e){var t,i,a;window.getSelection?(t=window.getSelection(),t.getRangeAt&&t.rangeCount&&(i=t.getRangeAt(0),i.deleteContents(),
i.insertNode(e),i.collapse(!1),t.removeAllRanges(),t.addRange(i))):n.selection&&n.selection.createRange&&(i=n.selection.createRange(),a=3===e.nodeType?e.data:e.outerHTML,i.pasteHTML(a),i.collapse(!1))},getTextNodes:function(e){var t=this.elem;e&&e.nodeType?e=[e]:e||(e=t.childNodes);for(var n,i=[],a=0;e.length>a;++a)if(n=e[a])switch(n.nodeType){case 1:i=i.concat(this.getTextNodes(n.childNodes));break;case 3:/^\n\s+/.test(n.nodeValue)||i.push(n)}return i},text:function(e){var n,i,a,s=this.elem;try{i=Array.prototype.slice.call(s.childNodes)}catch(o){for(i=[],a=0;s.childNodes.length>a;++a)i.push(s.childNodes[a])}return n=t(i,e,this.emulateTextarea&&"\n"),n.replace(/^\s+|\s+$/g,"")},setText:function(e){e=e||"";var t,i,a,s=n.createDocumentFragment(),o=this.emulateTextarea?[e.replace(/(?:\r\n|\r|\n){2,}/g,"\n\n")]:e.split(/(?:\r\n|\r|\n){2,}/),r=o&&o.length;for(t=0;r>t;t++)i=o[t],a=this.createParagraph(i),s.appendChild(a);s.lastChild.appendChild(n.createElement("br")),this.elem.innerHTML="",this.elem.appendChild(s);var l=window.getSelection&&window.getSelection();l&&l.anchorNode===this.elem&&l.modify&&l.modify("move","forward","line")},createParagraph:function(e){var t,i,a,s,o,r,l,c=n.createElement("p");for(a=e.split(/\r\n|\r|\n/),i=0,o=a.length;o>i;i++){for(s=a[i],l=this.getHtmlElements(s),t=0,r=l.length;r>t;t++)c.appendChild(l[t]);c.appendChild(n.createElement("br"))}return c.lastChild&&c.removeChild(c.lastChild),c},getHtmlElements:function(e){return[n.createTextNode(e)]},plainTextReformat:function(){if(!(this.elem.getElementsByTagName("p").length<=1)){this.emulateTextarea=!1;var e=this.text();this.emulateTextarea=!0,this.setText(e)}},removeNode:function(e){var t,i,a;window.getSelection?(t=e.previousSibling,e.parentNode.removeChild(e),i=window.getSelection(),a=n.createRange(),t&&(a.setStart(t,t.length),a.setEnd(t,t.length)),i.addRange(a)):e.parentNode.removeChild(e)},selectedTextNode:function(){var t,a,s,o,r,l,c,d,u,h=this.elem;if(window.getSelection)return t=window.getSelection(),t.anchorNode;if(n.selection.createRange){for(a=n.selection.createRange().duplicate();-1e3===a.moveStart(i,-1e3);)continue;var m=a.text;for(d=0;h.childNodes.length>d;++d)for(s=h.childNodes[d],r=this.getTextNodes(s),u=0;r.length>u;++u)if(o=r[u],c=e(o.nodeValue),m.indexOf(c)>-1)l=o,m=m.replace(c,"");else if(c.indexOf(m)>-1)return o;return l}},selectedTextNodeOffset:function(t){var a,s,o;if(window.getSelection){var r=window.getSelection();r&&r.anchorOffset&&(o=r.anchorOffset)}else if(t&&n.selection.createRange){var l=e(t.nodeValue);a=n.selection.createRange();var c=a.duplicate(),d=c.parentElement();for(s=0;0!==a.moveStart(i,-1)&&(0!==l.indexOf(e(a.text))&&d===a.parentElement());s++)c=a.duplicate(),d=c.parentElement();o=s}return isNaN(o)?0:o},offset:function(){function t(i,a){function s(e){l+=e[0];for(var t=1;e.length>t;++t)r.push(l),l=e[t]}"string"!=typeof a&&(a="\n\n");for(var r=[],l="",c=0;i.length>c;++c){var d=i[c],u=d.nodeName.toLowerCase();1===d.nodeType?o.hasOwnProperty(u)?(l&&(l+=a),s(t(d.childNodes,a))):"br"===u?l+="\n":s(t(d.childNodes,a)):3===d.nodeType&&(d===n.anchorNode?(l+=e(d.nodeValue.slice(0,n.anchorOffset)),r.push(l),l=e(d.nodeValue.slice(n.anchorOffset))):l+=e(d.nodeValue))}return r.push(l),r}var n=window.getSelection();if(!n||!n.anchorNode||3!==n.anchorNode.nodeType)return 0;var i,a=this.elem;try{i=Array.prototype.slice.call(a.childNodes)}catch(s){i=[];for(var r=0;a.childNodes.length>r;++r)i.push(a.childNodes[r])}var l=t(i,this.emulateTextarea&&"\n");if(1===l.length)return 0;var c=l[0].length,d=l.join(""),u=d.match(/\s+$/);if(u){var h=u[0].length;c=Math.min(c,d.length-h)}var m=d.match(/^\s+/);if(m){var p=m[0].length;c-=p}return c},selectNodeText:function(t,a,s){var o,r,l=this.elem;if(window.getSelection)return o=window.getSelection(),o.removeAllRanges(),r=n.createRange(),r.setStart(t,a),r.setEnd(t,s),o.addRange(r),o;if(n.selection.createRange){r=n.selection.createRange();var c=e(t.nodeValue);if("body"===r.parentElement().nodeName.toLowerCase()){for(l.focus(),r=n.selection.createRange();-1e3===r.moveStart(i,-1e3);)continue;for(;1e3===r.moveEnd(i,1e3);)continue;var d=e(r.text),u=d.indexOf(c);u>0&&r.moveStart(i,u+2),r.collapse()}for(;-1===r.moveStart(i,-1)&&0!==c.indexOf(e(r.text));)continue;for(;1===r.moveEnd(i,1)&&c!==e(r.text);)continue;return r.moveStart(i,a),r.moveEnd(i,-1*(s-a-r.text.length)),r.select(),r}}},l.normalizeSpace=e,l}),define("core/CappedStorage",["core/utils/storage"],function(e){"use strict";var t=function(e,t){this.max=e||10,this.queueKey=t||"__queue",this.getQueue()||this.setQueue([])};return t.prototype.set=function(t,n){var i=this.getQueue()||this.setQueue([]);i.length===this.max&&e.remove(i.shift()),e.set(t,n),i.push(t),this.setQueue(i)},t.prototype.get=function(t){return e.get(t)},t.prototype.remove=function(t){e.remove(t);for(var n=this.getQueue()||[],i=0;n.length>i;i++)if(n[i]===t){n.splice(i,1);break}this.setQueue(n)},t.prototype.clear=function(){e.clear(),this.setQueue([])},t.prototype.getQueue=function(){return e.get(this.queueKey)},t.prototype.setQueue=function(t){return e.set(this.queueKey,t),t},t}),define("core/extensions/jquery.autoresize",["jquery","underscore"],function(e,t){"use strict";return e.fn.autoresize=function(n){var i=t.extend({extraSpace:0,maxHeight:1e3},n);return this.each(function(){var n=e(this).css({resize:"none",overflow:"hidden"}),a=n[0].contentEditable+""=="true"?"html":"val",s="html"===a?"<br>":"\n",o=n.height(),r=function(){var i={};t.each(i,function(e,t){i[t]=n.css(t)});var a=e(n[0].cloneNode(!0));return a.removeAttr("id").removeAttr("name").css({visibility:"hidden",position:"absolute",top:"-9999px",left:"-9999px",contentEditable:!1}).css(i).attr("tabIndex","-1"),a.insertAfter(n[0]),a}(),l=null,c=function(){r[0].style.height=0,r[a](n[a]()+s),r.scrollTop(r[0].scrollHeight);var e=Math.max(r[0].scrollHeight,o)+parseInt(i.extraSpace,10);i.maxHeight&&(e>=i.maxHeight?(n.css("overflow",""),e=i.maxHeight):n.css("overflow","hidden")),l!==e&&(l=e,n.height(e),n.trigger&&n.trigger("resize"))},d=t.throttle(c,500),u=function(e){13===e.keyCode?c():d()};n.bind("keyup",u).bind("paste",c).css("overflow","hidden"),c()})},e}),define("core/views/TextareaView",["underscore","jquery","backbone","core/utils","core/CappedStorage","core/extensions/jquery.autoresize"],function(e,t,n,i,a){"use strict";var s=n.View.extend({events:{"keydown  [data-role=editable]":"handleKeyDown","keyup    [data-role=editable]":"handleKeyUp","paste    [data-role=editable]":"handlePaste","focusin  [data-role=editable]":"handleFocusIn","blur     [data-role=editable]":"handleBlur"},initialize:function(t){t=t||{},this.storageKey=t.storageKey,this.value=t.value||this.getDraft()[0],this.placeholder=t.placeholder,this.listenTo(this,"keychange",e.debounce(this.saveDraft,this.constructor.SAVE_DRAFT_INTERVAL))},render:function(){return this.$input=this.createInput(),this.set(this.value),this.$el.append(this.$input),this.$input.autoresize({maxHeight:this.constructor.MAX_TEXTAREA_HEIGHT}),this},createInput:function(){return t("<textarea>").attr({"class":"textarea",placeholder:this.placeholder,"data-role":"editable"})},resize:function(){this.$input.trigger("paste",{fake:!0})},get:function(){return this.$input.val()},getSelected:function(){var e=this.$input[0];return"number"==typeof e.selectionStart?this.$input.val().substring(e.selectionStart,e.selectionEnd):""},offset:function(){var e=this.$input[0];return"number"==typeof e.selectionStart?e.selectionStart:0},insertAtCursor:function(e){this.focus();var t=this.get(),n=this.offset(),a=i.insertWithWhitespace(t,n,e),s=this.$input[0];if(this.set(a),s.setSelectionRange){var o=a.indexOf(e,n)+e.length+1;s.setSelectionRange(o,o)}},insertAroundSelection:function(e,t){this.focus();var n,i,a=this.$input[0];"number"==typeof a.selectionStart?(n=a.selectionStart,i=a.selectionEnd):n=i=0;var s=this.get(),o=s.substring(0,n)+e+s.substring(n,i)+t+s.substring(i);this.set(o),a.setSelectionRange&&a.setSelectionRange(n+e.length,i+e.length)},set:function(e){this.$input.val(e)},clear:function(){this.set("")},focus:function(){this.$input.focus()},handleKeyDown:function(e){this.trigger("keydown",e)},handleKeyUp:function(e){this.trigger("keychange",e)},handlePaste:function(e,t){t=t||{},this.trigger(t.fake?"paste":"paste keychange"),this.$input.trigger("resize")},handleFocusIn:function(){this.trigger("focus")},handleBlur:function(){this.trigger("blur")},saveDraft:function(){return this.storageKey?t.trim(this.get())?void this.constructor.storage.set(this.storageKey,this.toJSON()):void this.removeDraft():void 0},toJSON:function(){return[this.get(),t.now()]},getDraft:function(){var e=[""];if(!this.storageKey)return e;var n=this.constructor.storage.get(this.storageKey);if(!n)return e;if(e=n,!e.length)return[""];var i=t.now()-e[1]>=this.constructor.DRAFT_MAX_AGE;return i?(this.removeDraft(),[""]):e},removeDraft:function(){this.storageKey&&this.constructor.storage.remove(this.storageKey)}},{MAX_TEXTAREA_HEIGHT:350,SAVE_DRAFT_INTERVAL:500,DRAFT_MAX_AGE:864e5,storage:new a(5,"drafts.queue")});return s}),define("core/views/ContentEditableView",["jquery","underscore","core/editable","core/views/TextareaView"],function(e,t,n,i){"use strict";var a=window.document,s=i,o=s.prototype,r=s.extend({events:function(){return t.extend({},o.events,{"focusout [data-role=editable]":"handleFocusOut","click .placeholder":"handlePlaceholderClick"})},initialize:function(){o.initialize.apply(this,arguments),this.hasFocus=!1,this._selectionRange=null},saveSelection:function(){var e=window.getSelection();this._selectionRange=e&&e.rangeCount&&e.getRangeAt(0)},restoreSelection:function(){if(this._selectionRange){var e=window.getSelection();e.removeAllRanges(),e.addRange(this._selectionRange),this._selectionRange=null}},render:function(){return this.$input=this.createInput(),this.$el.append(this.$input),this.set(this.value),this.renderPlaceholder(),this},createInput:function(){var t=e("<div>").attr({"class":"textarea",tabIndex:0,role:"textbox","aria-multiline":"true",contenteditable:"PLAINTEXT-ONLY","data-role":"editable"}).css({overflow:"auto","word-wrap":"break-word","max-height":this.constructor.MAX_TEXTAREA_HEIGHT+"px"}),i=t[0];return"plaintext-only"!==i.contentEditable&&(i.contentEditable="true"),this.content=new n(i,!0),t},renderPlaceholder:function(){var t=this.placeholder;t&&(this.$input.attr("aria-label",t),this.$placeholder=e('<span class="placeholder">'+t+"</span>"),this.updatePlaceholderDisplay())},updatePlaceholderDisplay:function(){this.$placeholder&&(this.hasFocus||this.content.text()?this.$placeholder.remove():this.$el.prepend(this.$placeholder))},handlePlaceholderClick:function(){this.$input.focus()},handleFocusIn:function(){o.handleFocusIn.call(this),this.restoreSelection(),this.hasFocus=!0,this.updatePlaceholderDisplay()},handleFocusOut:function(){this.saveSelection(),this.hasFocus=!1,this.updatePlaceholderDisplay()},get:function(){return this.content.text()},getSelected:function(){return this.hasFocus&&window.getSelection?""+window.getSelection():this._selectionRange?""+this._selectionRange:""},offset:function(){return this.content.offset()},set:function(e){this.content.setText(e),this.resize(),this.updatePlaceholderDisplay()},insertAtCursor:function(e){this.focus();var t=" "+e+" ";a.queryCommandSupported&&a.queryCommandSupported("insertText")&&a.execCommand("insertText",!1,t)||this.content.insertNode(a.createTextNode(t))},clear:function(){o.clear.call(this),t.defer(function(e){e.$input.blur()},this)},insertAroundSelection:function(e,t){this.focus();var n=window.getSelection();if(n.rangeCount){var i=n.getRangeAt(0),s=i.cloneRange();s.collapse(!1);var o=a.createTextNode(t);s.insertNode(o);var r=i.cloneRange();r.collapse(!0);var l=a.createTextNode(e);r.insertNode(l),i.setStart(l,e.length),i.setEnd(o,0),n.removeAllRanges(),n.addRange(i)}}});return r}),define("home/templates/postReply",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s;return'<div class="avatar">\n'+(null!=(s=n["if"].call(null!=t?t:{},null!=(s=null!=t?t.user:t)?s.isRegistered:s,{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.program(4,a,0),data:a}))?s:"")+"</div>\n"},2:function(e,t,n,i,a){var s;return null!=(s=e.invokePartial(i.userAvatar,null!=t?t.user:t,{name:"userAvatar",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:""},4:function(e,t){var n;return'<span class="user">\n<img data-role="user-avatar" src="'+e.escapeExpression(e.lambda(null!=(n=null!=(n=null!=t?t.user:t)?n.avatar:n)?n.cache:n,t))+'"/>\n</span>\n'},6:function(){return'style="margin-left: 0"'},8:function(){return'<div class="media-preview empty" data-role="media-preview"></div>\n'},10:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<div class="post-actions">\n<ul class="wysiwyg">\n'+(null!=(s=n["if"].call(o,null!=t?t.displayMediaUploadButton:t,{name:"if",hash:{},fn:e.program(11,a,0),inverse:e.noop,data:a}))?s:"")+"</ul>\n"+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.user:t)?s.isRegistered:s,{name:"if",hash:{},fn:e.program(13,a,0),inverse:e.noop,data:a}))?s:"")+"</div>\n"},11:function(){return'<li data-role="media-uploader"></li>\n'},13:function(e,t,n,i,a){var s=null!=t?t:{};return'<div class="logged-in">\n<section>\n<div class="temp-post" style="text-align: right">\n<button class="btn">\n'+e.escapeExpression(n.gettext.call(s,"Post as %(username)s",{name:"gettext",hash:{username:n.getPartial.call(s,"userSpan",null!=t?t.user:t,{name:"getPartial",hash:{},data:a})},data:a}))+"\n</button>\n</div>\n</section>\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div class="alert error" style="display:none" role="alert">\n<a class="close" data-action="dismiss-alert" title="'+r(n.gettext.call(o,"Dismiss",{name:"gettext",hash:{},data:a}))+'">×</a>\n<span></span>\n</div>\n\n<div class="postbox">\n'+(null!=(s=n["if"].call(o,null!=t?t.showAvatar:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'\n<div class="textarea-wrapper" '+(null!=(s=n.unless.call(o,null!=t?t.showAvatar:t,{name:"unless",hash:{},fn:e.program(6,a,0),inverse:e.noop,data:a}))?s:"")+'\ndata-role="textarea" dir="auto">\n<div data-role="drag-drop-placeholder" class="media-drag-hover" style="display: none">\n<div class="drag-text">\n&#11015; '+r(n.gettext.call(o,"Drag and drop your images here to upload them.",{name:"gettext",hash:{},data:a}))+"\n</div>\n</div>\n"+(null!=(s=n["if"].call(o,null!=t?t.displayMediaPreviews:t,{name:"if",hash:{},fn:e.program(8,a,0),inverse:e.noop,data:a}))?s:"")+'<div class="edit-alert" role="postbox-alert"></div>\n'+(null!=(s=n["if"].call(o,null!=t?t.showSubmitButton:t,{name:"if",hash:{},fn:e.program(10,a,0),inverse:e.noop,data:a}))?s:"")+"</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/templates/blacklistErrorMessage",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return o(n.gettext.call(s,"We are unable to post your comment because you have been banned by %(blocker)s.",{name:"gettext",hash:{blocker:null!=t?t.blocker:t},data:a}))+'\n<a target="_blank" href="https://help.disqus.com/customer/portal/articles/466223-who-deleted-or-removed-my-comment-">'+o(n.gettext.call(s,"Find out more.",{name:"gettext",hash:{},data:a}))+"</a>\n"},useData:!0})}),define("home/templates/mustVerifyEmail",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(){return'Disqus.com requires you to\n<a href="#" data-action="verify-email">verify your email address</a> before posting\n'},useData:!0})}),define("home/views/PostReplyView",["jquery","underscore","backbone","core/bus","core/mixins/withAlert","core/mixins/withUploadForm","core/strings","core/views/ContentEditableView","core/views/TextareaView","home/templates/postReply","home/templates/blacklistErrorMessage","home/templates/mustVerifyEmail"],function(e,t,n,i,a,s,o,r,l,c,d,u){"use strict";var h=o.get,m=n.View.extend({tagName:"form",className:"reply-form",events:{"click [data-action=cancel]":"hide",submit:"submitForm"},postboxAlertSelector:"[role=postbox-alert]",initialize:function(e){this.session=e.session,this.thread=e.thread,this.showSubmitButton=e.showSubmitButton!==!1,this.showAvatar=e.showAvatar!==!1,this.placeholderText=e.placeholder,this.canUseContentEditable=e.canUseContentEditable,this.showMediaPreviews=e.showMediaPreviews,this.showMustVerifyAlert=e.showMustVerifyAlert!==!1,this.setAlertSelector(this.postboxAlertSelector),this._isHidden=!1,this.listenTo(this.model,{error:this.onerror}),this.listenTo(this.model,"change:id",function(){this.model.id&&this.textarea.removeDraft()})},redraw:function(){var t=this.$el.hasClass("expanded"),n=this.el,i=this.$el.find("textarea").val();this.render(),this.$el.find("textarea").val(i),t&&this.$el.addClass("expanded"),0!==e(n).parent().length&&n.parentNode.replaceChild(this.el,n)},getPlaceholderText:function(){return this.placeholderText||"Discuss…"},render:function(){var e=this.$el,t=this.showMediaPreviews&&this.thread.forum.get("settings").allowMedia,n=t&&this.uploadSupported;return e.html(c({showAvatar:this.showAvatar,showSubmitButton:this.showSubmitButton,user:this.session.toJSON(),displayMediaPreviews:t,displayMediaUploadButton:n})),this.model.get("parent")?e.addClass("expanded"):e.removeClass("expanded"),e.addClass("authenticated"),this.initTextarea(),this.initMediaViews({allowMedia:t,allowUploads:n,textarea:this.textarea}),this.showMustVerifyAlert&&this.constructor.mustVerifyEmailToPost(this.session.user)&&this._alertMustVerify(),this._isHidden&&e.addClass("hidden"),this},initTextarea:function(){var e=this.canUseContentEditable?r:l,n=this.textarea=new e({placeholder:this.getPlaceholderText(),userSuggestions:this.userSuggestions,value:this.model.get("raw_message"),storageKey:this.model.storageKey()});this.$("[data-role=textarea]").prepend(n.render().el),this.listenTo(n,{focus:function(){this.$el.addClass("expanded"),t.delay(t.bind(this.resize,this),200)},blur:function(){this.trigger("blur")}})},resize:function(){this.textarea.resize()},focus:function(){this.textarea.focus()},clear:function(){var e=this;e.textarea.clear(),e.clearMediaPreviews(),e.$el.removeClass("expanded"),e.model.get("parent")&&e.hide()},restore:function(e){var n=this;n.textarea.set(e.get("raw_message")),n.textarea.handleFocusIn(),t.delay(function(){n.resize()},200),n.model.get("parent")&&n.show()},_alertMustVerify:function(e){var t=u();this.alert(t,{safe:!0,type:e?"error":"warn",target:e?this.postboxAlertSelector:null})},submitForm:function(e){return e.preventDefault(),this.dismissAlert(),this.createPost()},onerror:function(e,n){var i=this,a=this.model;if(12===n.code&&/not have permission to post on this thread/.test(n.response)){var s=d({blocker:i.session.user.get("isOnGlobalBlacklist")?"Disqus":i.thread.forum.get("name")});i.alert(s,{type:"error",target:i.postboxAlertSelector,safe:!0})}else 12===n.code&&/verify/.test(n.response)?i._alertMustVerify(!0):t.isString(n.response)?i.alert(n.response,{type:"error",target:i.postboxAlertSelector}):i.alert(h("Oops! We're having trouble posting your comment. Check your internet connection and try again."),{type:"error",target:i.postboxAlertSelector});i.restore(a)},createPost:function(){var e=this.model;if(this.dismissAlert(),this.isUploadInProgress())return void this.alert(h("Please wait until your images finish uploading."),{type:"error",target:this.postboxAlertSelector});var t=e.save({raw_message:this.textarea.get()});return t?(t.done(function(){i.trigger("uiCallback:postCreated",e)}),this.clear(),e):void this.alert(e.validationError,{type:"error",target:this.postboxAlertSelector})},toggle:function(){this.isOpen()?this.hide():this.show()},show:function(){var e=this;e._isHidden=!1,e.$el.removeClass("hidden"),e.trigger("show")},hide:function(){var e=this;e._isHidden=!0,e.dismissAlert(),e.$el.addClass("hidden"),e.trigger("hide")},isOpen:function(){return!this._isHidden}},{mustVerifyEmailToPost:function(e){return!e.get("isVerified")}});return a.call(m.prototype),s.call(m.prototype),m}),define("home/ReplyViewManager",["underscore","jquery","backbone","home/utils/features","home/models/Post","home/models/Session","home/views/PostReplyView"],function(e,t,n,i,a,s,o){"use strict";function r(e){this.view=e,this.model=this.view.model,this.listenTo(this.view,"close",function(){this.stopListening()})}var l={toggleReplyView:function(e){var n=t(e);this.replyView?this.replyView.toggle():(this.replyView=this.createReplyView().render(),n.parent().after(this.replyView.el)),this.replyView._isHidden||this.replyView.focus()},vivifyReply:function(e){var t=new this.view.constructor({model:e,session:s.get()});this.replyView.$el.after(t.render().el),t.trigger("show"),this.replyView.remove(),this.replyView=null},createReplyView:function(){var e=new a({thread:this.model.thread.id,parent:this.model.id,depth:this.model.get("depth")+1,author:s.get().user.id});return this.listenTo(e,"change:id",this.vivifyReply),new o({model:e,thread:e.thread,session:s.get(),canUseContentEditable:i.canUseContentEditable(),showMediaPreviews:!0})}};return e.extend(r.prototype,l,n.Events),r}),define("core/views/UpvotersCard",["underscore","core/views/common/HoverCard","core/views/UsersCard","core/bus","core/utils"],function(e,t,n,i,a){"use strict";var s=a.preventDefaultHandler,o=n.extend({guestTextPartialName:"cardGuestUpvoterText",initialize:function(t){var i=t.model,a=i.getUpvotersUserCollection();e.extend(t,{collection:a,numUsers:i.get("likes")}),n.prototype.initialize.call(this,t),this.model=i,this.session=t.session,this.likes=i.get("likes"),this.hadLikes=!!this.likes,this._fetched=!1,this._rendered=!1,this.listenTo(this.model,"change:userScore",this.updateUserSet),this.listenTo(this.model,"change:likes",this.updateGuests)},updateGuests:function(){this.numUsers=this.model.get("likes")||0,n.prototype.updateGuests.call(this)},updateUserSet:function(){var e=this.session.user,t=this.likes,n=!1;this.likes=this.model.get("likes"),this.model.get("userScore")>0?(this.session.isLoggedIn()&&this.collection.add(e),this.likes&&!t?(this._rendered=!1,this.show()):n=this.session.isLoggedOut()?!0:!!(this.likes-1-this.collection.length)):(this.collection.remove(e),this.likes||this.hide()),this.updateGuests(),this.moveTo(this.$target,n)},show:function(){if(this.likes&&!this.isVisible()){if(this.hadLikes||(this._fetched=!0),!this._fetched)return void this.collection.fetch().done(e.bind(function(){this._fetched=!0,this.show()},this));var t=this.session.user;this.model.get("userScore")>0&&this.session.isLoggedIn()&&!this.collection.contains(t)&&this.collection.add(t),n.prototype.show.call(this),i.trigger("uiAction:upvotersCardShow")}},handleShowProfile:s(function(e){n.prototype.handleShowProfile.call(this,e),i.trigger("uiAction:showProfileFromUpvotes")})},{create:function(e){var n=e.model;if(n.has("id"))return t.create(n.get("id"),e,"UpvotersCard",o)}});return o}),define("core/views/Tooltip",["jquery","core/views/common/HoverCard"],function(e,t){"use strict";var n=t.extend({className:"tooltip-outer message-card",initialize:function(e){t.prototype.initialize.call(this,e),this.template=e.template,this.message=e.message},render:function(){if(this.template)this.$el.html(this.template());else{if(!this.message)return;this.$el.html(e("<div>").addClass("tooltip").text(this.message))}t.prototype.render.call(this)},moveTo:function(e){if(e){var t=this.constructor.POSITION_OFFSET,n=e.offset(),i=this.getContainerPosition(),a=this.$el.width();this.$el.css({bottom:i.containerOffset.height-n.top+t,top:"inherit",left:n.left-a/2})}}},{create:function(e){return t.create(e.id,e,"Tooltip",n)},POSITION_OFFSET:10});return n}),define("core/views/ClickTooltip",["underscore","core/views/common/HoverCard","core/views/Tooltip"],function(e,t,n){"use strict";var i=n.extend({target:function(t){t.on("click",e.bind(this.targetClicked,this,t)),t.on("mouseleave",e.bind(this.leave,this))},targetClicked:function(e){e&&(this.$target=e),"in"!==this._hoverState&&(this._hoverState="in",this.show(),n.open[this.uid]=this)}},{create:function(e){return t.create(e.id,e,"ClickTooltip",i)}});return i}),define("home/templates/anonUpvoteCard",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){return'<div class="tooltip">\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"You must sign in to up-vote this post.",{name:"gettext",hash:{},data:a}))+"\n</div>\n"},useData:!0})}),define("home/templates/anonDownvoteCard",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){return'<div class="tooltip">\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"You must sign in to down-vote this post.",{name:"gettext",hash:{},data:a}))+"\n</div>\n"},useData:!0})}),define("home/views/PostActionsView",["jquery","backbone-marionette","home/templates/postActions","home/ReplyViewManager","home/models/Session","core/views/UpvotersCard","core/views/ClickTooltip","home/templates/anonUpvoteCard","home/templates/anonDownvoteCard","core/bus","core/utils"],function(e,t,n,i,a,s,o,r,l,c,d){"use strict";var u=t.ItemView.extend({template:n,templateHelpers:function(){return{discussionRoute:this.model.thread.getDiscussionRoute(),sessionUserHasUpvoted:this.model.get("userScore")>0,sessionUserHasDownvoted:this.model.get("userScore")<0,wasAuthoredBySessionUser:this.model.author.isSessionUser(),isLoggedIn:a.get().isLoggedIn()}},events:{"click [data-action=vote]":"vote","click [data-action=reply]":"toggleReplyView"},initialize:function(e){this.session=a.get(),this.initializeReplyViewManager(e)},initializeReplyViewManager:function(e){this.replyViewManager=new i(e.parentPostView)},onRender:function(){this.initUpvotersCard(),this.initAnonVoteCards()},initAnonVoteCards:function(){if(a.isKnownToBeLoggedOut()&&!this.model.thread.forum.get("settings").allowAnonVotes){this.anonUpvoteCard&&this.anonUpvoteCard.remove();var e=this.$("[data-action=vote][data-vote=1]");e.length&&(this.anonUpvoteCard=o.create({targetElement:e,template:r,id:"anonUpvote"}),this.listenTo(this.anonUpvoteCard,"show",this.closeUpvotersCard),this.anonDownvoteCard&&this.anonDownvoteCard.remove(),e=this.$("[data-action=vote][data-vote=-1]"),e.length&&(this.anonDownvoteCard=o.create({targetElement:e,template:l,id:"anonDownvote"})))}},closeUpvotersCard:function(){this.hoverCard&&this.hoverCard.hide()},initUpvotersCard:function(){if(!d.isMobileUserAgent()){this.hoverCard&&this.hoverCard.remove();var e=this.$("[data-action=vote][data-vote=1]");e.length&&(this.hoverCard=s.create({targetElement:e,model:this.model,session:this.session}))}},vote:function(t){if(t&&(this.model.thread.forum.get("settings").allowAnonVotes||!a.isKnownToBeLoggedOut())){t.preventDefault(),t.stopPropagation();var n=e(t.currentTarget),i=parseInt(n.data("vote"),10),s=this.model.get("userScore")===i;s?c.trigger("uiAction:postUnvote",this.model,t):1===i?c.trigger("uiAction:postUpvote",this.model,t):-1===i&&c.trigger("uiAction:postDownvote",this.model,t),this.model.vote(s?0:i),this.$("[data-vote=1]").toggleClass("active",1===this.model.get("userScore")),this.$("[data-vote=-1]").toggleClass("active",-1===this.model.get("userScore")),this.$("[data-role=upvotes]").text(this.model.get("likes")||"")}},toggleReplyView:function(e){e&&(e.preventDefault(),e.stopPropagation(),this.replyViewManager.toggleReplyView(e.currentTarget))}});return u}),define("core/collections/MediaCollection",["backbone","core/models/Media"],function(e,t){"use strict";var n=e.Collection.extend({model:t});return n}),define("core/models/RichMediaViewModel",["backbone"],function(e){"use strict";return e.Model.extend({defaults:{deferred:!0,showButtons:!0,activated:!1,kind:"image",deferredHeight:0,providerExpandMessage:"",providerCollapseMessage:"",providerIcon:"icon-proceed",respectSettings:!0}})}),define("core/mediaConfig",["underscore","backbone"],function(e,t){"use strict";function n(){var t=window.document.body.offsetWidth,n=i,a=n.length;return e.find(n,function(e,i){return i+1===a||Math.abs(n[i+1]-t)>Math.abs(n[i]-t)})}var i=[320,480,600,800],a=new t.Model({collapsed:!1,defaultIframeHeight:300,mediaPersistedWidths:i,loadedThumbnailWidth:n()});return a.findClosestThumbnailSize=n,a}),define("core/templates/postMediaInlineLink",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.hasUserText:t,{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.noop,data:a}))?s:""},2:function(e,t){var n=e.lambda,i=e.escapeExpression;return'<a href="'+i(n(null!=t?t.href:t,t))+'" rel="nofollow">'+i(n(null!=t?t.text:t,t))+"</a>\n"},4:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression,l=null!=t?t:{};return'<a href="'+r(o(null!=t?t.href:t,t))+'" class="post-media-link" data-action="expand-collapse-media" rel="nofollow">'+(null!=(s=n["if"].call(l,null!=(s=null!=t?t.model:t)?s.providerIcon:s,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a}))?s:"")+r(o(null!=t?t.mediaLinkText:t,t))+(null!=(s=n["if"].call(l,null!=t?t.domain:t,{name:"if",hash:{},fn:e.program(7,a,0),inverse:e.noop,data:a}))?s:"")+"</a>\n"},5:function(e,t){var n;return'<i class="'+e.escapeExpression(e.lambda(null!=(n=null!=t?t.model:t)?n.providerIcon:n,t))+'"></i>'},7:function(e,t){return'<span class="post-media-link-domain"> &mdash; '+e.escapeExpression(e.lambda(null!=t?t.domain:t,t))+"</span>"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=(s=null!=t?t.model:t)?s.deferred:s,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(4,a,0),data:a}))?s:""},useData:!0})}),define("core/views/RichMediaLinkView",["backbone","core/utils","core/templates/postMediaInlineLink"],function(e,t,n){"use strict";return e.View.extend({tagName:"span",events:{"click [data-action=expand-collapse-media]":"handleToggle"},initialize:function(e){this.media=e.media;var n=e.$link;this.linkText=n.text(),this.linkHref=n.attr("href"),this.linkDomain=t.getDomain(this.linkHref),this.linkHasUserText=this.isUserText(n),this.hasGenericMessage=!1,this.linkHasUserText?this.mediaLinkText=this.linkText:this.media.get("title")?this.mediaLinkText=t.niceTruncate(this.media.get("title"),60):(this.hasGenericMessage=!0,this.mediaLinkText=this.model.get("providerExpandMessage")),this.listenTo(this.model,"change:deferred",this.render),this.listenTo(this.model,"change:activated",this.onChangeActivated)},isUserText:function(e){if("A"!==e[0].nodeName)return!1;var t=(e.text()||"").toLowerCase();if(!t)return!1;if(0===t.indexOf("http")||0===t.indexOf("www"))return!1;t=t.replace(/\.\.\.$/,"");var n=(e.attr("href")||"").toLowerCase();return-1===n.indexOf(t)},render:function(){var e=this.mediaLinkText;return this.hasGenericMessage&&this.model.get("activated")&&(e=this.model.get("providerCollapseMessage")),this.$el.html(n({model:this.model.toJSON(),text:this.linkText,href:this.linkHref,mediaLinkText:e,domain:this.linkDomain,hasUserText:this.linkHasUserText})),this},onChangeActivated:function(){this.hasGenericMessage&&this.render()},handleToggle:function(e){this.model.get("deferred")||(this.model.set("activated",!this.model.get("activated")),e&&e.preventDefault&&e.preventDefault())}})}),define("core/templates/postMedia",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s;return(null!=(s=n["if"].call(null!=t?t:{},null!=(s=null!=t?t.media:t)?s.providerName:s,{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.noop,data:a}))?s:"")+e.escapeExpression(e.lambda(null!=(s=null!=t?t.media:t)?s.title:s,t));
},2:function(e,t){var n;return e.escapeExpression(e.lambda(null!=(n=null!=t?t.media:t)?n.providerName:n,t))+" &ndash; "},4:function(e,t){var n;return'<i class="'+e.escapeExpression(e.lambda(null!=(n=null!=t?t.model:t)?n.providerIcon:n,t))+' publisher-background-color"></i>'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression,l=null!=t?t:{};return'\n<a class="media-button media-button-expand publisher-color publisher-border-color" href="'+r(o(null!=(s=null!=t?t.media:t)?s.url:s,t))+'" rel="nofollow" target="_blank" data-action="expand"\ntitle="'+(null!=(s=n["if"].call(l,null!=(s=null!=t?t.media:t)?s.title:s,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'">\n'+(null!=(s=n["if"].call(l,null!=(s=null!=t?t.model:t)?s.providerIcon:s,{name:"if",hash:{},fn:e.program(4,a,0),inverse:e.noop,data:a}))?s:"")+"\n"+r(o(null!=(s=null!=t?t.model:t)?s.providerExpandMessage:s,t))+'\n</a>\n<a class="media-button media-button-contract publisher-color publisher-border-color" href="#" target="_blank" data-action="contract">\n<i class="icon-cancel publisher-background-color"></i> '+r(o(null!=(s=null!=t?t.model:t)?s.providerCollapseMessage:s,t))+'\n</a>\n<div class="media-content-loader" data-role="content-loader"></div>\n<div data-role="content-placeholder" class="media-content-placeholder"></div>\n'},useData:!0})}),define("core/templates/postMediaPlaceholder",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t){var n;return'<a href="#" class="media-force-load" data-action="force-load"><i class="'+e.escapeExpression(e.lambda(null!=(n=null!=t?t.model:t)?n.providerIcon:n,t))+'"></i></a>\n'},useData:!0})}),define("core/views/RichMediaView",["jquery","backbone","core/utils","core/mediaConfig","core/views/RichMediaLinkView","core/templates/postMedia","core/templates/postMediaPlaceholder"],function(e,t,n,i,a,s,o){"use strict";var r=n.preventDefaultHandler,l=function(e,t,n,i){e[t.get(n)?"addClass":"removeClass"](i)};return t.View.extend({className:"media-container",events:{"click [data-action=expand]":"handleExpand","click [data-action=contract]":"handleContract","click [data-action=force-load]":"handleForceLoad"},template:s,initialize:function(e){this.options=e,this.media=e.media,this.template=e.template||this.template,this.$linkEl=null,this.setupMode(),this.listenTo(this.model,"change:activated",this.applyState),this.listenTo(this.model,"change:deferredHeight",this.onChangeDeferredHeight),this.listenTo(this.model,"change:showButtons",this.updateElementClass),this.listenTo(this.model,"change:deferred",this.render),this.listenTo(i,"change:collapsed",this.setupMode)},getMediaDimensions:function(){return{width:null,height:null}},getAvailableWidth:function(){return this.$el.parent().width()||i.get("loadedThumbnailWidth")},updateDeferredHeight:function(){this.model.set("deferredHeight",this.calculateDeferredHeight())},calculateDeferredHeight:function(){var e=this.getMediaDimensions(),t=e.width,n=e.height;if(!t||!n)return n;var i=this.getAvailableWidth(),a=i*n/t;return a},convertToButton:function(e){this.model.set("showButtons",!1),this.linkSubview&&this.linkSubview.remove(),this.linkSubview=new a({model:this.model,media:this.media,$link:e}),e.replaceWith(this.linkSubview.$el),this.linkSubview.render()},applyContentNodeHeight:function(e){this.contentNode.height(e||"auto")},shouldAutoplay:function(){return!this.model.get("deferred")},generateContentHtml:function(){return this.media.get("html")},createContentNode:function(t){return e(t)},insertContentNode:function(e){this.contentNode.html(e)},prepareElementEvents:function(){},displayContent:function(){this.updateDeferredHeight();var e=this.generateContentHtml(),t=this.createContentNode(e);this.prepareElementEvents(t),this.insertContentNode(t),this.applyContentNodeHeight(null)},configureDeferred:function(){this.enterViewport()},configureContentFromActivated:function(){this.model.get("activated")?this.displayContent():this.displayPlaceholder()},displayPlaceholder:function(){this.contentNode.html(o({model:this.model.toJSON()}))},updateElementClass:function(){var e=this.$el,t=this.model;l(e,t,"deferred","media-mode-deferred"),l(e,t,"activated","media-activated"),l(e,t,"showButtons","media-show-buttons")},applyState:function(){this.configureDeferred(),this.configureContentFromActivated(),this.updateElementClass()},render:function(){return this.$el.html(this.template({model:this.model.toJSON(),media:this.media.toJSON()})),this.contentNode=this.$el.find("[data-role=content-placeholder]"),this.applyState(),this},remove:function(){this.linkSubview&&this.linkSubview.remove(),t.View.prototype.remove.apply(this,arguments)},enterViewport:function(){this.model.get("deferred")&&this.activate()},activate:function(){this.model.set("activated",!0)},setupMode:function(){if(this.model.get("respectSettings")){this.model.set("activated",!1);var e=i.get("collapsed");e?this.model.set("deferred",!1):this.model.set("deferred",!0)}},onChangeDeferredHeight:function(){this.model.get("deferred")&&!this.model.get("activated")&&this.applyContentNodeHeight(this.model.get("deferredHeight"))},handleExpand:r(function(){this.model.set("activated",!0)}),handleContract:r(function(){this.model.set("activated",!1)}),handleForceLoad:r(function(){this.model.get("deferred")&&this.model.set("activated",!0)})})}),define("core/templates/postMediaImage",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t){var n;return' height="'+e.escapeExpression(e.lambda(null!=(n=null!=t?t.model:t)?n.deferredHeight:n,t))+'" '},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression,l=null!=t?t:{};return'<a href="'+r(o(null!=t?t.imageUrl:t,t))+'" target="_blank" rel="nofollow">\n<img src="'+r(o(null!=t?t.thumbnailUrl:t,t))+'" alt="'+r(n.gettext.call(l,"Thumbnail",{name:"gettext",hash:{},data:a}))+'" '+(null!=(s=n["if"].call(l,null!=(s=null!=t?t.model:t)?s.deferredHeight:s,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+">\n</a>\n"},useData:!0})}),define("core/views/ImageRichMediaView",["core/views/RichMediaView","core/utils","core/config","core/mediaConfig","core/templates/postMediaImage"],function(e,t,n,i,a){"use strict";var s=RegExp("(^|\\.)"+t.getDomain(n.urls.media).split(".").slice(-2).join("\\.")+"$");return e.extend({getMediaDimensions:function(){return{width:this.media.get("thumbnailWidth"),height:this.media.get("thumbnailHeight")}},getImageUrl:function(){return this.media.get("resolvedUrlRedirect")||this.media.get("urlRedirect")||this.media.get("thumbnailUrl")},getImageThumbnailUrl:function(){var e=this.media.get("thumbnailUrl");return this.constructor.isOnDisqusCDN(e)&&(e=t.serialize(e,{w:i.get("loadedThumbnailWidth"),h:this.model.get("deferredHeight")})),e},generateContentHtml:function(){return a({model:this.model.toJSON(),media:this.media.toJSON(),thumbnailUrl:this.getImageThumbnailUrl(),imageUrl:this.getImageUrl()})},prepareElementEvents:function(e){var t=this,n=e.find("img");n.on("load.richMediaView error.richMediaView",function(e){t.trigger(e.type),n.off(".richMediaView")})},calculateDeferredHeight:function(){var t=Math.floor(e.prototype.calculateDeferredHeight.apply(this,arguments)),n=this.getMediaDimensions().height;return Math.min(n,t)||null}},{isOnDisqusCDN:function(e){var n=t.getDomain(e);return s.test(n)}})}),define("core/views/IframeRichMediaView",["underscore","core/mediaConfig","core/views/RichMediaView"],function(e,t,n){"use strict";return n.extend({getMediaDimensions:function(){return{width:this.media.get("htmlWidth"),height:this.media.get("htmlHeight")}},_findIframe:function(e){return e.is("iframe")?e:e.find("iframe")},configureContentFromActivated:function(){n.prototype.configureContentFromActivated.apply(this,arguments),this.model.get("activated")||this.$el.removeClass("media-loading")},createContentNode:function(){var e=n.prototype.createContentNode.apply(this,arguments);return e.attr({width:"100%",height:this.model.get("deferredHeight")}),e},insertContentNode:function(e){this.loaderNode=this.$el.find("[data-role=content-loader]"),this.loaderHeight=this.model.get("deferredHeight")||t.get("defaultIframeHeight"),this.loaderNode.height(this.loaderHeight),this.$el.addClass("media-loading"),n.prototype.insertContentNode.call(this,e)},prepareElementEvents:function(t){var n=this._findIframe(t);n.one("load",e.bind(this.finishLoad,this,n))},finishLoad:function(e){this.$el.removeClass("media-loading"),e.height(this.loaderHeight),this.trigger("load")}})}),define("core/views/FacebookPhotoRichMediaView",["core/views/ImageRichMediaView"],function(e){"use strict";return e.extend({getImageThumbnailUrl:function(){return this.media.get("metadata").imageUrl||e.prototype.getImageThumbnailUrl.call(this)}})}),define("core/views/AutoplayRichMediaView",["underscore","jquery","core/utils","core/views/IframeRichMediaView"],function(e,t,n,i){"use strict";return i.extend({createContentNode:function(){var e=i.prototype.createContentNode.apply(this,arguments),t=e.attr("src");return this.shouldAutoplay()&&t&&!this.model.get("playerjs")&&(t=n.serialize(t,{auto_play:!0,autoplay:1}),e.attr("src",t)),e},insertContentNode:function(n){if(this.model.get("playerjs")){var a=this._findIframe(n),s=a.attr("src");"//"===s.substr(0,2)&&(s=window.location.protocol+s);var o=s.split("/");o=o[0]+"//"+o[2],this.playerjs={ready:!1,queue:[],origin:o,$iframe:a},this.model.get("mute")&&this.send("mute"),this.shouldAutoplay()&&this.send("play");var r=e.once(e.bind(function(){this.playerjs.ready=!0;var t=this.playerjs.queue;this.playerjs.queue=[],e.each(t,this.send,this)},this));t(window).on("message",function(e){if(e=e.originalEvent,e.origin===o){var t;try{t=JSON.parse(e.data)}catch(n){return}"ready"===t.event&&t.value&&t.value.src===s&&r()}})}return i.prototype.insertContentNode.apply(this,arguments)},send:function(e){if(this.playerjs){if(!this.playerjs.ready)return void this.playerjs.queue.push(e);var t={context:"player.js",version:"0.0.10",method:e};this.playerjs.$iframe[0].contentWindow.postMessage(JSON.stringify(t),this.playerjs.origin)}}})}),define("core/views/DynamicHeightRichMediaView",["underscore","core/views/RichMediaView"],function(e,t){"use strict";return t.extend({insertContentNode:function(){t.prototype.insertContentNode.apply(this,arguments),this.finishLoad()},finishLoad:function(){var t=this,n=0,i=150,a=20,s=function(){n+=1,a>n?e.delay(s,i):t.trigger("load")};s()}})}),define("core/templates/postMediaTwitterContent",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t){var n=e.lambda,i=e.escapeExpression;return'<meta name="twitter:widgets:csp" content="on">\n<blockquote class="twitter-tweet" data-theme="'+i(n(null!=t?t.theme:t,t))+'" data-link-color="'+i(n(null!=t?t.linkColor:t,t))+'" lang="'+i(n(null!=t?t.language:t,t))+'">\n<a href="'+i(n(null!=t?t.url:t,t))+'"></a>\n</blockquote>\n<script src="//platform.twitter.com/widgets.js"></script>\n'},useData:!0})}),define("core/views/TwitterRichMediaView",["underscore","core/views/DynamicHeightRichMediaView","core/templates/postMediaTwitterContent"],function(e,t,n){"use strict";var i=t.extend({generateContentHtml:function(){var t=window.document.documentElement.lang;t=t&&t.substring(0,2);var a=this.media.get("url");return-1!==this.media.get("resolvedUrl").indexOf("/status")&&(a=this.media.get("resolvedUrl")),n({url:a,theme:e.result(i,"theme"),linkColor:e.result(i,"linkColor"),language:t})}},{theme:"light",linkColor:"#2e9fff"});return i}),define("core/views/SoundCloudRichMediaView",["core/views/AutoplayRichMediaView"],function(e){"use strict";return e.extend({getMediaDimensions:function(){return{width:null,height:this.media.get("htmlHeight")}}})}),define("core/views/VineRichMediaView",["core/views/AutoplayRichMediaView","core/utils"],function(e,t){"use strict";return e.extend({createContentNode:function(){var n=e.prototype.createContentNode.apply(this,arguments),i=n.attr("src");return this.shouldAutoplay()&&i&&(i=t.serialize(i,{audio:1}),n.attr("src",i)),n}})}),define("core/media",["underscore","core/strings","core/models/Media","core/models/RichMediaViewModel","core/views/ImageRichMediaView","core/views/IframeRichMediaView","core/views/FacebookPhotoRichMediaView","core/views/AutoplayRichMediaView","core/views/TwitterRichMediaView","core/views/SoundCloudRichMediaView","core/views/VineRichMediaView"],function(e,t,n,i,a,s,o,r,l,c,d){"use strict";var u=t.get,h={PLAY_HIDE:{kind:"html",providerExpandMessage:u("Play"),providerCollapseMessage:u("Hide")},VIEW_HIDE:{kind:"html",providerExpandMessage:u("View"),providerCollapseMessage:u("Hide")},VIEW_IMAGE:{kind:"image",providerIcon:"icon-images",providerExpandMessage:u("View"),providerCollapseMessage:u("Hide")}},m=function(t){var u=function(t,n){return e.defaults({providerIcon:n},h[t])},m=null,p=null,f=n.MEDIA_TYPES;switch(t.get("mediaType")){case f.IMAGE:case f.IMAGE_UPLOAD:m=h.VIEW_IMAGE;break;case f.FACEBOOK_PHOTO:p=o,m=h.VIEW_IMAGE;break;case f.VIMEO_VIDEO:case f.YOUTUBE_VIDEO:p=r,m=u("PLAY_HIDE","icon-video");break;case f.TWITTER_STATUS:p=l,m=u("VIEW_HIDE","icon-twitter");break;case f.VINE_VIDEO:p=d,m=u("PLAY_HIDE","icon-video");break;case f.FACEBOOK_VIDEO:m=u("VIEW_HIDE","icon-video");break;case f.SOUNDCLOUD_SOUND:p=c,m=u("PLAY_HIDE","icon-music");break;case f.GOOGLE_MAP:m=u("VIEW_HIDE","icon-map");break;default:return null}if(null===p)switch(m.kind){case"webpage":return null;case"html":p=s;break;case"image":p=a}var g=new i(m);return{Cls:p,mediaViewModel:g}},p=function(e){var t=m(e);return t?new t.Cls({model:t.mediaViewModel,media:e}):null},f=function(e){return new a({model:new i(h.VIEW_IMAGE),media:e})};return{instantiateRichMediaView:p,instantiateRichMediaThumbnail:f,getRichMediaViewConfig:m}}),define("core/mixins/withRichMedia",["underscore","jquery","core/collections/MediaCollection","core/media"],function(e,t,n,i){"use strict";function a(e){var n={};return e.length?(e.find("a").each(function(e,i){var a=i.href;n[a]||(n[a]=t(i))}),n):n}function s(){e.extend(this,o)}var o={renderRichMedia:function(e,s,o){return o=o||{},e=e instanceof n?e:new n(e),e.chain().map(function(e){return i.instantiateRichMediaView(e)}).without(null).map(function(e){var n=e.media.get("urlRedirect");o.normalize&&(n=o.normalize.call(this,n));var i=a(this.$("[data-role=message]")),r=i[n];return o.beforeRender&&o.beforeRender.call(this,e),e.render(),r?o.convertLinkToButton?(r.after(e.$el),e.convertToButton(r)):r.replaceWith(e.$el):(s=s||this.$("[data-role=post-media-list]"),s.append(t("<li>").append(e.$el))),e},this).value()}};return s}),define("home/templates/postContent",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return"comment-message-hidden"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div class="comment-message expanded '+(null!=(s=n["if"].call(o,null!=t?t.isHidden:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'"\ndata-role="message" dir="auto">\n'+(null!=(s=e.lambda(null!=t?t.message:t,t))?s:"")+'\n<div><ul class="post-media" data-role="post-media-list"></ul></div>\n</div>\n<a  href="#" class="curtain-truncate hidden" title="'+r(n.gettext.call(o,"see more",{name:"gettext",hash:{},data:a}))+'"\ndata-action="expand"\ndata-target=".comment-message">'+r(n.gettext.call(o,"see more",{name:"gettext",hash:{},data:a}))+"</a>\n"},useData:!0})}),define("home/views/PostContentView",["backbone-marionette","core/bus","core/mixins/withRichMedia","home/templates/postContent"],function(e,t,n,i){"use strict";var a=e.ItemView.extend({template:i,templateHelpers:function(){return{isHidden:"visible"!==this.model.get("state")}},events:{"click a":"trackClickLink"},trackClickLink:function(e){t.trigger("uiAction:clickLink",e,{adjective:"message"})},onRender:function(){this.renderRichMedia(this.model.get("media"))}});return n.call(a.prototype),a}),define("home/mixins/withCollapsing",["underscore","jquery"],function(e,t){"use strict";var n=function(e){return e.collapsibleSelector?this.$(e.collapsibleSelector):this.$el},i={events:{"click [data-action=expand]":"expand","click [data-action=collapse]":"forceCollapse"},collapse:function(i){var a=n.call(this,i),s=a.find("img").map(function(e,n){var i=t.Deferred(),a=t(n);return a.complete?i.resolve():a.one("load",i.resolve),i.promise()});t.when(s).then(e.bind(this.forceCollapse,this,null,i))},expand:function(e,t){e&&e.preventDefault();var i=n.call(this,t),a=i.find("[data-action=expand][data-target]"),s=i.find("[data-action=collapse]"),o=a.data("target"),r=i.find(o),l=this;a.addClass("hidden"),r.addClass("expanded").one("transitionend oTransitionEnd webkitTransitionEnd",function(){l.trigger("expandedComplete")}),s.removeClass("hidden")},forceCollapse:function(e,i){e&&e.preventDefault();var a=n.call(this,i),s=a.find("[data-action=expand]"),o=a.find("[data-action=collapse]"),r=e?t(e.currentTarget).data("target"):".expanded",l=a.find(r);s.length&&(l.height()>i.maxHeight&&(l.removeClass("expanded"),s.removeClass("hidden")),o.addClass("hidden"))}},a=function(t){var n=this.initialize;this.initialize=function(){n.apply(this,arguments),this.listenTo(this,"show",this.collapse)},this.collapse=function(){i.collapse.call(this,t)},this.expand=function(e){i.expand.call(this,e,t)},this.forceCollapse=function(e){i.forceCollapse.call(this,e,t)},this.events=e.defaults({},this.events,i.events)};return a}),define("home/views/CollapsingPostContentView",["home/views/PostContentView","home/mixins/withCollapsing"],function(e,t){"use strict";var n=e.extend({});return t.call(n.prototype,{maxHeight:115}),n}),define("home/templates/post",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t){return'<span class="label label-danger">'+e.escapeExpression(e.lambda(null!=t?t.hiddenExplanation:t,t))+"</span>\n"},3:function(){return"hidden"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression,l=null!=t?t:{};return(null!=(s=e.invokePartial(i.userAvatar,null!=t?t.author:t,{name:"userAvatar",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<div class="comment-body">\n<header class="comment-header">\n'+(null!=(s=e.invokePartial(i.userName,null!=t?t.author:t,{name:"userName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<a class="link-gray time"\nhref="'+r(o(null!=t?t.discussionRoute:t,t))+"#comment-"+r(o(null!=t?t.id:t,t))+'"\ndata-link-name="timestamp"\ndata-thread-id="'+r(o(null!=(s=null!=t?t.thread:t)?s.id:s,t))+'">\n\n'+r(o(null!=t?t.relativeTime:t,t))+"\n</a>\n"+(null!=(s=n["if"].call(l,null!=t?t.isHidden:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'</header>\n<div data-role="post-content"></div>\n<footer class="comment-actions '+(null!=(s=n["if"].call(l,null!=t?t.isHidden:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+'" data-role="post-actions">\n</footer>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/PostView",["backbone-marionette","core/strings","home/mixins/withSubviews","home/views/PostActionsView","home/views/PostContentView","home/views/CollapsingPostContentView","home/utils/datetimeUtils","home/templates/post","home/utils/cardUtils"],function(e,t,n,i,a,s,o,r){"use strict";var l=t.get,c=e.ItemView,d=c.extend({className:"card-comment",template:r,templateHelpers:function(){var e=this.model.get("state");return{isHidden:"visible"!==e,hiddenExplanation:{flagged:l("Pending"),pending:l("Pending"),spam:l("Detected as spam"),deleted:l("Removed")}[e],discussionRoute:this.model.thread.getDiscussionRoute(),relativeTime:o.getRelativeDatetime(this.model.get("createdAt"))}},initialize:function(e){e=e||{},this.hideActions=e.hideActions,this.shouldCollapse=e.shouldCollapse},regions:{postContentRegion:"[data-role=post-content]",postActionsRegion:"[data-role=post-actions]"},onRender:function(){this.activateRegion(this.postContentRegion,this.createPostContentView),this.hideActions||this.activateRegion(this.postActionsRegion,this.createPostActionsView)},createPostActionsView:function(){return new i({el:this.postActionsRegion.el,model:this.model,parentPostView:this})},createPostContentView:function(){var e=this.shouldCollapse?s:a;return new e({el:this.postContentRegion.el,model:this.model})}}),u=d.prototype;return n.call(u),d}),define("home/views/PostCollectionView",["home/views/common/FetchableCollectionView","home/views/PostView"],function(e,t){"use strict";return e.extend({itemView:t})}),define("home/templates/genericCardCreate",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return" no-image"},3:function(e,t){var n,i=e.lambda,a=e.escapeExpression;return'<a href="'+a(i(null!=(n=null!=t?t.thread:t)?n.link:n,t))+'"\nclass="discussion-image"\ndata-link-name="image"\ndata-link-out="'+a(i(null!=(n=null!=t?t.thread:t)?n.signedLink:n,t))+'"\ndata-thread-id="'+a(i(null!=(n=null!=t?t.thread:t)?n.id:n,t))+'">\n\n<img src="'+a(i(null!=(n=null!=t?t.image:t)?n.src:n,t))+'" alt="'+a(i(null!=(n=null!=t?t.image:t)?n.title:n,t))+'">\n</a>\n'},5:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<a class="card-avatar" href="/by/'+r(o(null!=t?t.username:t,t))+'/" data-link-name="user_avatar">\n<img\nsrc="'+r(o(null!=(s=null!=t?t.avatar:t)?s.cache:s,t))+'"\nalt="'+(null!=(s=e.invokePartial(i.userNameNoLink,t,{name:"userNameNoLink",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'" />\n</a>\n'},7:function(e,t,n,i,a){return'<div class="card-discussion-comments-title">'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Recent Comments",{name:"gettext",hash:{},data:a}))+'</div>\n<div class="card-discussion-comments" data-role="posts"></div>\n'},9:function(e,t){var n;return'<div class="card-summary">\n<div class="card-summary-content truncate" data-truncate-lines="3" dir="auto">\n'+(null!=(n=e.lambda(null!=t?t.threadDescriptionHTML:t,t))?n:"")+"\n</div>\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<div class="card-discussion'+(null!=(s=n.unless.call(o,null!=t?t.image:t,{name:"unless",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'">\n<div class="card-aside">\n'+(null!=(s=n["if"].call(o,null!=t?t.image:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+'</div>\n<div class="card-body">\n'+(null!=(s=n["with"].call(o,null!=t?t.firstActor:t,{name:"with",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a}))?s:"")+'<div class="card-reason">\n'+e.escapeExpression(n.gettext.call(o,"%(group)s authored",{name:"gettext",hash:{group:n.getPartial.call(o,"userGroupNames",{name:"getPartial",hash:{},data:a})},data:a}))+"\n</div>\n"+(null!=(s=e.invokePartial(i.threadTitle,t,{name:"threadTitle",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+(null!=(s=n["if"].call(o,null!=t?t.recentPostCount:t,{name:"if",hash:{},fn:e.program(7,a,0),inverse:e.program(9,a,0),data:a}))?s:"")+'<footer class="card-footer" data-role="footer"></div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/GenericCardCreateView",["backbone-marionette","home/mixins/asGenericCard","home/mixins/withReason","home/mixins/withSubviews","home/views/PostCollectionView","home/templates/genericCardCreate"],function(e,t,n,i,a,s){"use strict";var o=e.ItemView,r=o.extend({template:s,templateHelpers:function(){return{recentPostCount:this.model.thread.recentPosts.length}},regions:{postsRegion:"[data-role=posts]"},onRender:function(){this.activateRegion(this.postsRegion,this.createPostsView)},createPostsView:function(){return new a({el:this.postsRegion.el,collection:this.model.thread.recentPosts})}}),l=r.prototype;return t.call(l),n.call(l),i.call(l),r}),define("home/templates/genericCardFavorite",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return" no-image"},3:function(e,t){var n,i=e.lambda,a=e.escapeExpression;return'<a href="'+a(i(null!=(n=null!=t?t.thread:t)?n.link:n,t))+'"\nclass="discussion-image"\ndata-link-name="image"\ndata-link-out="'+a(i(null!=(n=null!=t?t.thread:t)?n.signedLink:n,t))+'"\ndata-thread-id="'+a(i(null!=(n=null!=t?t.thread:t)?n.id:n,t))+'">\n\n<img src="'+a(i(null!=(n=null!=t?t.image:t)?n.src:n,t))+'" alt="'+a(i(null!=(n=null!=t?t.image:t)?n.title:n,t))+'">\n</a>\n'},5:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<a class="card-avatar" href="/by/'+r(o(null!=t?t.username:t,t))+'/" data-link-name="user_avatar">\n<img\nsrc="'+r(o(null!=(s=null!=t?t.avatar:t)?s.cache:s,t))+'"\nalt="'+(null!=(s=e.invokePartial(i.userNameNoLink,t,{name:"userNameNoLink",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'" />\n</a>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression,l=e.lambda;return'<div class="card-discussion'+(null!=(s=n.unless.call(o,null!=t?t.image:t,{name:"unless",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'">\n<div class="card-aside">\n'+(null!=(s=n["if"].call(o,null!=t?t.image:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+'</div>\n<div class="card-body">\n'+(null!=(s=n["with"].call(o,null!=t?t.firstActor:t,{name:"with",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a}))?s:"")+'<div class="card-reason">\n'+r(n.gettext.call(o,"%(group)s recommended",{name:"gettext",hash:{group:n.getPartial.call(o,"userGroupNames",{name:"getPartial",hash:{},data:a})},data:a}))+'\non\n<a class="name-community"\nhref="/home/forum/'+r(l(null!=(s=null!=(s=null!=t?t.thread:t)?s.forum:s)?s.id:s,t))+'/"\ndata-link-name="forum_name"\ndata-forum-pk="'+r(l(null!=(s=null!=(s=null!=t?t.thread:t)?s.forum:s)?s.pk:s,t))+'">\n\n'+(null!=(s=e.invokePartial(i.forumName,null!=(s=null!=t?t.thread:t)?s.forum:s,{name:"forumName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</a>\n</div>\n"+(null!=(s=e.invokePartial(i.threadTitle,t,{name:"threadTitle",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<div class="card-summary">\n<div class="card-summary-content truncate" data-truncate-lines="3" dir="auto">\n'+(null!=(s=l(null!=t?t.threadDescriptionHTML:t,t))?s:"")+'\n</div>\n</div>\n<footer class="card-footer" data-role="footer"></div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/GenericCardFavoriteView",["backbone-marionette","home/mixins/asGenericCard","home/mixins/withReason","home/templates/genericCardFavorite"],function(e,t,n,i){"use strict";var a=e.ItemView.extend({template:i});return t.call(a.prototype),n.call(a.prototype),a}),define("home/templates/genericCardTrending",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return" no-image"},3:function(e,t){var n,i=e.lambda,a=e.escapeExpression;return'<a href="'+a(i(null!=(n=null!=t?t.thread:t)?n.link:n,t))+'"\nclass="discussion-image"\ndata-link-name="image"\ndata-link-out="'+a(i(null!=(n=null!=t?t.thread:t)?n.signedLink:n,t))+'"\ndata-thread-id="'+a(i(null!=(n=null!=t?t.thread:t)?n.id:n,t))+'">\n\n<img src="'+a(i(null!=(n=null!=t?t.image:t)?n.src:n,t))+'" alt="'+a(i(null!=(n=null!=t?t.image:t)?n.title:n,t))+'">\n</a>\n'},5:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<a class="card-avatar"\nhref="/home/forum/'+r(o(null!=t?t.id:t,t))+'/"\ndata-link-name="forum_name"\ndata-forum-pk="'+r(o(null!=t?t.pk:t,t))+'">\n\n<img src="'+r(o(null!=t?t.faviconImage:t,t))+'" alt="'+(null!=(s=e.invokePartial(i.forumName,t,{name:"forumName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'" />\n</a>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<div class="card-discussion'+(null!=(s=n.unless.call(o,null!=t?t.image:t,{name:"unless",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'">\n<div class="card-aside">\n'+(null!=(s=n["if"].call(o,null!=t?t.image:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+'</div>\n<div class="card-body">\n'+(null!=(s=n["with"].call(o,null!=(s=null!=t?t.thread:t)?s.forum:s,{name:"with",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a}))?s:"")+'<div class="card-reason">\n'+e.escapeExpression(n.gettext.call(o,"%(forum)s recently published",{name:"gettext",hash:{forum:n.getPartial.call(o,"forumLink",null!=(s=null!=t?t.thread:t)?s.forum:s,{name:"getPartial",hash:{},data:a})},data:a}))+"\n</div>\n"+(null!=(s=e.invokePartial(i.threadTitle,t,{name:"threadTitle",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<div class="card-summary">\n<div class="card-summary-content truncate" data-truncate-lines="3" dir="auto">\n'+(null!=(s=e.lambda(null!=t?t.threadDescriptionHTML:t,t))?s:"")+'\n</div>\n</div>\n<footer class="card-footer" data-role="footer"></div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/GenericCardTrendingView",["backbone-marionette","home/mixins/asGenericCard","home/templates/genericCardTrending"],function(e,t,n){"use strict";var i=e.ItemView.extend({template:n});return t.call(i.prototype),i}),define("home/views/GenericCardCollectionView",["underscore","backbone","home/views/common/FetchableCollectionView","home/views/GenericCardCreateView","home/views/GenericCardFavoriteView","home/views/GenericCardTrendingView"],function(e,t,n,i,a,s){"use strict";var o=n.extend({itemView:function(e){switch(e.model.get("verb")){case"favorite":return new a(e);case"create":return new i(e);case"trending":return new s(e);case"share":return e.model.thread.author?(e.model.actors.length||(e.model.actors=[e.model.thread.author],e.model.set({totalActors:1})),new i(e)):new s(e);default:return new t.View}},itemViewOptions:function(){var t=n.prototype.itemViewOptions;e.isFunction(t)&&(t=t.apply(this,arguments));var i=e.defaults({channel:this.channel,hideImage:this.hideImage},t);return i},initialize:function(e){this.channel=e&&e.channel,this.hideImage=e&&e.hideImage,n.prototype.initialize.apply(this,arguments)}});return o}),define("home/views/common/ActivityCardView",["backbone-marionette"],function(e){"use strict";var t=e.ItemView,n=t.prototype;return t.extend({constructor:function(e){n.constructor.call(this,e),this.listenTo(this.model,"change:isFromUnreadQueue",this.updateUnreadClass)},updateUnreadClass:function(){this.$el.toggleClass("unread",!!this.model.get("isFromUnreadQueue"))}})}),define("home/templates/channelCardPostActions",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return" active"},3:function(e,t){return e.escapeExpression(e.lambda(null!=t?t.likes:t,t))},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.lambda,l=e.escapeExpression;return'<a href="#" class="vote__item vote--up'+(null!=(s=n["if"].call(o,null!=t?t.sessionUserHasUpvoted:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'"\ndata-action="vote" data-vote="1">\n<span class="vote__count text-gray" data-role="upvotes">\n'+(null!=(s=n["if"].call(o,null!=t?t.likes:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+'\n</span>\n<span class="icon-arrow-up icon-tiny"></span>\n</a>\n\n<a href="#" class="vote__item vote--down'+(null!=(s=n["if"].call(o,null!=t?t.sessionUserHasDownvoted:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'"\ndata-action="vote" data-vote="-1">\n<span class="icon-arrow-down  icon-tiny"></span>\n</a>\n\n'+(null!=(s=e.invokePartial(i.replyOrEditLink,t,{name:"replyOrEditLink",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'\n<span class="bullet"></span>\n<a href="'+l(r(null!=t?t.discussionRoute:t,t))+"#comment-"+l(r(null!=t?t.id:t,t))+'"\nclass="link-gray"\ndata-link-name="view_comment"\ndata-thread-id="'+l(r(null!=(s=null!=t?t.thread:t)?s.id:s,t))+'">\n\n<span class="visible-md">'+l(n.gettext.call(o,"View",{
name:"gettext",hash:{},data:a}))+'</span>\n<span class="hidden-md">'+l(n.gettext.call(o,"View in Discussion",{name:"gettext",hash:{},data:a}))+"</span>\n</a>\n"},usePartial:!0,useData:!0})}),define("home/views/ChannelCardPostActionsView",["jquery","home/views/PostActionsView","home/templates/channelCardPostActions"],function(e,t,n){"use strict";var i=t.extend({template:n,initializeReplyViewManager:e.noop,toggleReplyView:e.noop});return i}),define("home/templates/channelCardPost",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t){return'<span class="label label-danger">'+e.escapeExpression(e.lambda(null!=t?t.hiddenExplanation:t,t))+"</span>\n"},3:function(e,t){return e.escapeExpression(e.lambda(null!=t?t.excerpt:t,t))+"\n"},5:function(e,t){var n;return(null!=(n=e.lambda(null!=t?t.message:t,t))?n:"")+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression,l=null!=t?t:{};return'<div class="post-comments">\n<div class="post-comments__origin link-inner-gray">\n'+(null!=(s=e.invokePartial(i.forumLink,null!=(s=null!=t?t.thread:t)?s.forum:s,{name:"forumLink",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</div>\n<div class="post-comments__reason">\n'+(null!=(s=e.invokePartial(i.userAvatar,null!=t?t.author:t,{name:"userAvatar",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+(null!=(s=e.invokePartial(i.userName,null!=t?t.author:t,{name:"userName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<a class="time link-gray post-comments__time"\nhref="'+r(o(null!=t?t.discussionRoute:t,t))+"#comment-"+r(o(null!=t?t.id:t,t))+'"\ndata-link-name="timestamp"\ndata-thread-id="'+r(o(null!=(s=null!=t?t.thread:t)?s.id:s,t))+'">\n\n'+r(o(null!=t?t.relativeTime:t,t))+"\n</a>\n"+(null!=(s=n["if"].call(l,null!=t?t.isHidden:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'</div>\n<div class="post-comment__content">\n<a href="'+r(o(null!=t?t.discussionRoute:t,t))+"#comment-"+r(o(null!=t?t.id:t,t))+'"\nclass="truncate link-gray-dark post-comments__lnk"\ndata-link-name="message"\ndir="auto"\ndata-truncate-lines="'+r(o(null!=t?t.numLines:t,t))+'"\ndata-thread-id="'+r(o(null!=(s=null!=t?t.thread:t)?s.id:s,t))+'">'+(null!=(s=n["if"].call(l,null!=t?t.excerpt:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.program(5,a,0),data:a}))?s:"")+"</a>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ChannelCardPostView",["jquery","underscore","backbone-marionette","core/strings","core/utils/html","home/views/ChannelCardPostActionsView","home/mixins/withAllstarPopover","home/mixins/withTruncate","home/mixins/withSubviews","home/utils/datetimeUtils","home/templates/channelCardPost"],function(e,t,n,i,a,s,o,r,l,c,d){"use strict";var u=i.get,h=n.ItemView,m=h.extend({className:"post-comments__wrapper",template:d,regions:{postActionsRegion:"[data-role=post-actions]"},templateHelpers:function(){var t=this.model.get("state");return{isHidden:"visible"!==t,hiddenExplanation:{flagged:u("Pending"),pending:u("Pending"),spam:u("Detected as spam"),deleted:u("Removed")}[t],message:this.replaceLinks(this.model.get("message")),discussionRoute:this.model.thread.getDiscussionRoute(),relativeTime:c.getRelativeDatetime(this.model.get("createdAt")),numLines:e(window).width()<=875?4:2}},replaceLinks:function(e){var n=t.pluck(this.model.get("media"),"url"),i=function(e){var i=t.contains(n,e.href)?"images":"link";return'<span class="text-smaller icon-'+i+'"></span>'};return a.replaceAnchors(e,i)},onRender:function(){this.activateRegion(this.postActionsRegion,this.createPostActionsView)},createPostActionsView:function(){return new s({model:this.model})}});return o.call(m.prototype),r.call(m.prototype),l.call(m.prototype),m}),define("home/templates/channelCardFooter",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<li class="button__wrapper--recommend -count'+(null!=(s=n["if"].call(o,n.gt.call(o,null!=t?t.likes:t,9,{name:"gt",hash:{},data:a}),{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=n["if"].call(o,null!=t?t.favorited:t,{name:"if",hash:{},fn:e.program(4,a,0),inverse:e.noop,data:a}))?s:"")+'" data-action="favorite">\n<a class="button--recommend button-small" href="#">\n<span class="button__heart icon-heart"></span>\n<span class="button__text hidden-md">'+e.escapeExpression(n.gettext.call(o,"Recommend",{name:"gettext",hash:{},data:a}))+"</span>\n"+(null!=(s=n["if"].call(o,null!=t?t.likes:t,{name:"if",hash:{},fn:e.program(6,a,0),inverse:e.noop,data:a}))?s:"")+"</a>\n</li>\n"},2:function(){return" -wide"},4:function(){return" is-recommended"},6:function(e,t){return'<span class="button__count">'+e.escapeExpression(e.lambda(null!=t?t.likes:t,t))+"</span>\n"},8:function(){return'<span class="icon icon-lock spacing-right-small"></span>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.lambda,l=e.escapeExpression;return'<ul class="list--layout">\n'+(null!=(s=n["if"].call(o,null!=t?t.authenticated:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'<li>\n<a class="button button-lnk spacing-right-small"\nhref="'+l(r(null!=t?t.discussionRoute:t,t))+'"\ndata-link-name="view_discussion"\ndata-thread-id="'+l(r(null!=t?t.id:t,t))+'">\n'+(null!=(s=n["if"].call(o,null!=t?t.isClosed:t,{name:"if",hash:{},fn:e.program(8,a,0),inverse:e.noop,data:a}))?s:"")+l(n.gettext.call(o,"Comments %(count)s",{name:"gettext",hash:{count:n.tag.call(o,"span",{name:"tag",hash:{text:null!=t?t.posts:t,"class":"label--count"},data:a})},data:a}))+'\n</a>\n</li>\n<li class="dropdown" data-dropdown="enabled">\n<a class="button button-link dropdown-toggle" data-toggle="dropdown" href="#">\n'+l(n.gettext.call(o,"Share",{name:"gettext",hash:{},data:a}))+'\n</a>\n<ul class="dropdown-menu dropdown--share-menu">\n<li>\n<a class="link" data-action="share" data-network="twitter" href="#">\n<span class="icon icon-twitter text-smaller icon__position -inline"></span>\n<strong>'+l(n.gettext.call(o,"Tweet this",{name:"gettext",hash:{},data:a}))+'</strong>\n</a>\n</li>\n<li>\n<a class="link" data-action="share" data-network="facebook" href="#">\n<span class="icon icon-facebook text-smaller icon__position -inline"></span>\n<strong>'+l(n.gettext.call(o,"Post to Facebook",{name:"gettext",hash:{},data:a}))+"</strong>\n</a>\n</li>\n</ul>\n</li>\n</ul>\n"},useData:!0})}),define("home/views/ChannelCardFooterView",["home/views/ThreadCardDefaultFooterView","home/templates/channelCardFooter"],function(e,t){"use strict";var n=e,i=n.prototype,a=n.extend({template:t,toggleThreadFavorited:function(e){i.toggleThreadFavorited.call(this,e),this.$("[data-action=favorite]").addClass("animate-recommend")}});return a}),define("home/views/TopicTagView",["backbone-marionette","handlebars"],function(e,t){"use strict";var n=e.ItemView.extend({template:t.partials.topicTag,className:function(){return"tag__item"+(this.model.get("hidden")?" hidden-topic":"")},events:{"click [data-action=remove-tag]":"removeTag"},initialize:function(e){this.topicRoute=e&&e.baseTopicRoute?e.baseTopicRoute+this.model.id+"/":null},templateHelpers:function(){return{topicRoute:this.topicRoute}},removeTag:function(e){e&&e.preventDefault(),this.trigger("removeTag")}});return n}),define("home/views/TopicTagCollectionView",["backbone-marionette","home/views/TopicTagView"],function(e,t){"use strict";var n=e.CollectionView.extend({className:"topic-group__wrapper",itemView:t,itemViewOptions:function(){return{baseTopicRoute:this.baseTopicRoute}},initialize:function(e){e=e||{},this.baseTopicRoute=e.baseTopicRoute,!this.baseTopicRoute&&e.channel&&(this.baseTopicRoute="/home/channel/"+e.channel.id+"/topics/")}});return n}),define("home/templates/spamAlert",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="alert alert--error -spam align-min-tablet align--between align--middle">\n<div class="spacing-narrow text-medium">\n'+o(n.gettext.call(s,"This discussion might be spam, so it's hidden to other readers.",{name:"gettext",hash:{},data:a}))+'\n</div>\n<div class="spacing-narrow">\n<button class="button button-inverted -hover-opaque button-padding-taller button-wide--mobile text-medium" data-action="mark-approved">\n'+o(n.gettext.call(s,"This isn't spam",{name:"gettext",hash:{},data:a}))+"\n</button>\n</div>\n</div>\n"},useData:!0})}),define("home/views/SpamAlertView",["backbone-marionette","home/templates/spamAlert"],function(e,t){"use strict";return e.ItemView.extend({template:t})}),define("home/mixins/asChannelCard",["jquery","underscore","backbone-marionette","handlebars","core/utils/releaseUtils","home/models/Session","home/views/ChannelCardPostView","home/views/ChannelCardFooterView","home/views/TopicTagCollectionView","home/views/SpamAlertView","home/mixins/withAllstarPopover","home/mixins/withTruncate","home/mixins/withSubviews"],function(e,t,n,i,a,s,o,r,l,c,d,u,h){"use strict";var m={regions:{postsRegion:"[data-role=posts]",footerRegion:"[data-role=footer]",topicsRegion:"[data-role=topics]",cardAlertRegion:"[data-role=card-alert]"},events:{"click [data-action=menuitem-click]":"handleMenuItemClick","click [data-action=mark-approved]":"markApproved"},className:function(e){return t.contains(this.options.filterVerbs,this.model.get("verb"))?"hidden":(t.isFunction(e)&&(e=e.apply(this,t.rest(arguments))),e=e||"",["card-wrap card--channel",e].join(" "))},initialize:function(e,t){t=t||{},e.call(this,t),this.session=s.get(),this.channel=t.channel,this.hideImage=t.hideImage,this.listenTo(this.model.thread,"change:content",this.render),this.numTitleLines=t.numTitleLines||3,this.showTopics=this.model.thread.topics.length&&this.channel,this.isChannelFeed=t.isChannelFeed;var n=this.model.thread;n.getEditPermissions(this.session),n.isAuthorSessionUser(this.session),n.getModeratePermissions(this.session),this.listenTo(n,{"change:userSubscription change:isDeleted change:canModerate change:isSpam":this.renderMenu,"change:canEdit":this.render,"change:isSpam":this.updateSpamIndicators}),this.listenTo(this.session,"change:id",this.render)},serializeData:function(e){var n=e.call(this),i=this.model.thread,s=this.model.getPostsPreviewCollection(),o=i.getFriendlySourceUrl()||i.forum.getFriendlyUrl(),r=this.channel||i.forum.channel,l=i.get("isAuthor"),c=i.forum.channel&&i.get("canEdit"),d=c&&(r&&a.isDisqusAdmin(this.session.user)||t.contains(this.session.moderatedForums,i.forum.id));return t.defaults(n,{recentPostCount:s.length,discussionRoute:i.getDiscussionRoute(this.channel),threadDescription:i.getPlainDescription(),image:i.getImage(),numTitleLines:this.numTitleLines,threadOverrides:this.model.getThreadOverrides(),forumFriendlyUrl:o,canEdit:c,canDelete:d,canModerate:i.get("canModerate"),channel:r,isChannelFeed:this.isChannelFeed,isSpam:i.get("isSpam"),isAuthor:l})},render:function(e){return e.call(this),this.$(this.postsRegion.selector).length&&this.activateRegion(this.postsRegion,m.createPostsView),this.showTopics&&this.activateRegion(this.topicsRegion,m.createTopicsView),this.activateRegion(this.footerRegion,m.createFooter),this.updateSpamIndicators(),this},removeSpamModTools:function(){this.cardAlertRegion.close(),this.$el.removeClass("is-spam")},showSpamModTools:function(){this.activateRegion(this.cardAlertRegion,m.createSpamAlertView),this.$el.addClass("is-spam")},updateSpamIndicators:function(){this.model.thread.get("isSpam")?this.model.thread.getModeratePermissions(this.session).then(t.bind(function(e){e?this.showSpamModTools():this.removeSpamModTools()},this)):this.removeSpamModTools(),this.renderBadges()},renderBadges:function(){var e=this.serializeData();e=this.mixinTemplateHelpers(e),this.$("[data-role=badges]").replaceWith(i.partials.badges(e))},renderMenu:function(){var e=this.serializeData();e=this.mixinTemplateHelpers(e),e.menuOpen=this.$(".dropdown").hasClass("open"),this.$("[data-role=menu]").replaceWith(i.partials.channelCardMenu(e))},createSpamAlertView:function(){return new c},createPostsView:function(){var e=this.model.getPostsPreviewCollection();return new n.CollectionView({itemView:o,collection:e})},createTopicsView:function(){var e=this.model.thread.topics;return new l({collection:e,channel:this.channel})},_createFooter:function(e){return new r({el:e,model:this.model.thread,channel:this.channel})},createFooter:function(){return m._createFooter.call(this,this.footerRegion.el)},handleMenuItemClick:function(t){if(t){t.preventDefault(),t.stopPropagation();var n=e(t.currentTarget).attr("data-menu-item");switch(n){case"toggle-subscription":this.toggleSubscription();break;case"toggle-follow-targetchannel":this.toggleFollowTargetChannel();break;case"delete-thread":this.model.thread.confirmDelete(!0);break;case"restore-thread":this.model.thread.restore();break;case"mark-spam":this.model.thread.toggleIsSpam()}}},markApproved:function(){this.model.thread.markAsSpam(!1)},toggleSubscription:function(){this.model.thread.toggleSubscription()},toggleFollowTargetChannel:function(){var e=this.model.activities[0].targetChannel;e&&e.toggleFollowed()}};return function(){u.apply(this,arguments),h.call(this),d.call(this),this.regions=t.extend({},m.regions,this.regions),this.events=t.extend({},m.events,this.events),this.className=t.wrap(this.className,m.className),this.initialize=t.wrap(this.initialize,m.initialize),this.serializeData=t.wrap(this.serializeData,m.serializeData),this.render=t.wrap(this.render,m.render),t.extend(this,t.pick(m,"handleMenuItemClick","toggleSubscription","toggleFollowTargetChannel","renderMenu","markApproved","updateSpamIndicators","showSpamModTools","removeSpamModTools","renderBadges"))}}),define("home/mixins/withChannelAvatar",["underscore"],function(e){"use strict";function t(e){return{templateHelpers:function(){var t=e.call(this),n=t&&t.get("bannerColor"),i=t&&t.get("name")&&t.get("name").charAt(0);return{channel:t&&t.toJSON(),channelAvatar:t&&(t.get("avatar")||t.get("options").favicon),bannerColorClass:n?"-"+n:"",channelInitial:i}}}}function n(n){var i=n||function(){return this.model},a=t(i);this.templateHelpers=e.wrap(this.templateHelpers,function(t){var n=e.isFunction(t)?t.call(this):t;return e.extend(a.templateHelpers.call(this),n)})}return n}),define("home/views/ChannelCardView",["home/views/common/ActivityCardView","home/mixins/asChannelCard","home/mixins/withChannelAvatar","home/mixins/withReason"],function(e,t,n,i){"use strict";var a=e.extend({getChannel:function(){return this.channel||this.model.thread.forum.channel}});return t.call(a.prototype),i.call(a.prototype),n.call(a.prototype,a.prototype.getChannel),a}),define("home/templates/channelCardFavorite",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div data-role="card-alert"></div>\n<div class="card__header -feed is-recommended">\n<div class="card__reason link-inner-gray-dark">\n<span class="icon-heart icon__position -inline text-smaller text-gray-light"></span>\n'+r(n.gettext.call(o,"%(group)s recommended",{name:"gettext",hash:{group:n.getPartial.call(o,"userGroupNames",{name:"getPartial",hash:{},data:a})},data:a}))+'\n\n<time class="bullet text-gray">'+r(e.lambda(null!=t?t.relativeTime:t,t))+"</time>\n</div>\n"+(null!=(s=e.invokePartial(i.cardReasonForum,t,{name:"cardReasonForum",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+(null!=(s=e.invokePartial(i.channelCardMenu,t,{name:"channelCardMenu",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n"+(null!=(s=e.invokePartial(i.channelCardContent,t,{name:"channelCardContent",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")},usePartial:!0,useData:!0})}),define("home/views/ChannelCardFavoriteView",["underscore","home/views/ChannelCardView","home/templates/channelCardFavorite"],function(e,t,n){"use strict";var i=t.extend({template:n,templateHelpers:function(){var n=t.prototype.templateHelpers.apply(this,arguments);return e.extend(n,{forumHref:"/home/forum/"+this.model.thread.forum.id+"/"})}});return i}),define("home/templates/channelCardCreate",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<a class="spacing-right align__item" href="/by/'+r(o(null!=t?t.username:t,t))+'/" data-link-name="user_avatar">\n<img\nclass="img-round-sm block__item"\nsrc="'+r(o(null!=(s=null!=t?t.avatar:t)?s.cache:s,t))+'"\nalt="'+(null!=(s=e.invokePartial(i.userNameNoLink,t,{name:"userNameNoLink",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'" />\n</a>\n'},3:function(e,t,n,i,a){var s;return null!=(s=e.invokePartial(i.cardReasonForum,t,{name:"cardReasonForum",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:""},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div data-role="card-alert"></div>\n<div class="card__inner">\n<div class="card__header -feed">\n<div class="card__reason link-inner-gray-dark align align--middle">\n'+(null!=(s=n["with"].call(o,null!=t?t.firstActor:t,{name:"with",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'<div class="align__item">\n'+r(n.gettext.call(o,"%(user)s started a discussion",{name:"gettext",hash:{user:n.getPartial.call(o,"userGroupNames",{name:"getPartial",hash:{},data:a})},data:a}))+'\n<time class="bullet text-gray">'+r(e.lambda(null!=t?t.relativeTime:t,t))+"</time>\n"+(null!=(s=e.invokePartial(i.badges,t,{name:"badges",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n</div>\n"+(null!=(s=n.unless.call(o,null!=t?t.isChannelFeed:t,{name:"unless",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+"\n"+(null!=(s=e.invokePartial(i.channelCardMenu,t,{name:"channelCardMenu",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n"+(null!=(s=e.invokePartial(i.channelCardContent,t,{name:"channelCardContent",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ChannelCardCreateView",["home/views/ChannelCardView","home/templates/channelCardCreate"],function(e,t){"use strict";var n=e.extend({template:t});return n}),define("home/templates/channelCardTrending",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return" is-recommended"},3:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<a class="spacing-right align__item"\nhref="/home/channel/'+r(o(null!=(s=null!=t?t.channel:t)?s.slug:s,t))+'/"\ndata-link-name="forum_avatar"\ndata-forum-pk="'+r(o(null!=t?t.pk:t,t))+'">\n'+(null!=(s=n["if"].call(null!=t?t:{},null!=t?t.channelAvatar:t,{name:"if",hash:{},fn:e.program(4,a,0),inverse:e.program(6,a,0),data:a}))?s:"")+"</a>\n"},4:function(e,t,n,i,a){var s;return'<img class="img-round-sm block__item" src="'+e.escapeExpression(e.lambda(null!=t?t.channelAvatar:t,t))+'" alt="'+(null!=(s=e.invokePartial(i.forumName,t,{name:"forumName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'">\n'},6:function(e,t){var n=e.lambda,i=e.escapeExpression;return'<div class="channel-avatar '+i(n(null!=t?t.bannerColorClass:t,t))+'">\n<p class="channel-avatar__name">'+i(n(null!=t?t.channelInitial:t,t))+"</p>\n</div>\n"},8:function(e,t,n,i,a){var s;return null!=(s=n["with"].call(null!=t?t:{},null!=(s=null!=t?t.thread:t)?s.forum:s,{name:"with",hash:{},fn:e.program(9,a,0),inverse:e.noop,data:a}))?s:""},9:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<a class="spacing-right align__item"\nhref="/home/forum/'+r(o(null!=t?t.id:t,t))+'/"\ndata-link-name="forum_avatar"\ndata-forum-pk="'+r(o(null!=t?t.pk:t,t))+'">\n<img src="'+r(o(null!=t?t.faviconImage:t,t))+'" alt="'+(null!=(s=e.invokePartial(i.forumName,t,{name:"forumName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'" class="img-round-sm block__item" />\n</a>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div data-role="card-alert"></div>\n<div class="card__header -feed'+(null!=(s=n["if"].call(o,null!=t?t.isBestOfDisqus:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'">\n'+(null!=(s=e.invokePartial(i.cardReasonDisqusPicks,t,{name:"cardReasonDisqusPicks",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<div class="card__reason align align--middle">\n'+(null!=(s=n["if"].call(o,null!=t?t.channel:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.program(8,a,0),data:a}))?s:"")+'<div class="align__item link-inner-gray-dark">\n'+r(n.gettext.call(o,"Trending on %(forumLink)s",{name:"gettext",hash:{forumLink:n.getPartial.call(o,"forumLink",null!=(s=null!=t?t.thread:t)?s.forum:s,{name:"getPartial",hash:{},data:a})},data:a}))+'\n<time class="bullet text-gray">'+r(e.lambda(null!=t?t.relativeTime:t,t))+"</time>\n</div>\n"+(null!=(s=e.invokePartial(i.badges,t,{name:"badges",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n"+(null!=(s=e.invokePartial(i.channelCardMenu,t,{name:"channelCardMenu",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n"+(null!=(s=e.invokePartial(i.channelCardContent,t,{name:"channelCardContent",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")},usePartial:!0,useData:!0})}),define("home/views/ChannelCardTrendingView",["home/views/ChannelCardView","home/templates/channelCardTrending"],function(e,t){"use strict";var n=e.extend({template:t});return n}),define("home/templates/channelCardShare",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return" is-recommended"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<div data-role="card-alert"></div>\n<div class="card__header -feed'+(null!=(s=n["if"].call(null!=t?t:{},null!=t?t.isBestOfDisqus:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'">\n'+(null!=(s=e.invokePartial(i.cardReasonDisqusPicks,t,{name:"cardReasonDisqusPicks",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+(null!=(s=e.invokePartial(i.cardReasonForum,t,{name:"cardReasonForum",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+(null!=(s=e.invokePartial(i.channelCardMenu,t,{name:"channelCardMenu",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n"+(null!=(s=e.invokePartial(i.channelCardContent,t,{name:"channelCardContent",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")},usePartial:!0,useData:!0})}),define("home/views/ChannelCardShareView",["underscore","core/config","home/views/ChannelCardView","home/templates/channelCardShare"],function(e,t,n,i){"use strict";var a=n.extend({template:i,templateHelpers:function(){var i=n.prototype.templateHelpers.apply(this,arguments);return e.extend(i,{guestAvatar:t.urls.avatar.generic})}});return a}),define("home/templates/channelFeedEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div class="empty-message card-wrap">\n<img class="empty-message__img" src="'+r(n.urlfor.call(o,"cdn",{name:"urlfor",hash:{},data:a}))+'/img/empty-states/discussions.png"/>\n<div class="empty-message__content">\n<h2 class="text-larger">'+r(n.gettext.call(o,"This channel doesn't have any discussions yet.",{name:"gettext",hash:{},data:a}))+'</h2>\n<p class="text-gray text-medium">'+r(n.gettext.call(o,"Discussions started by people in this channel will appear here.",{name:"gettext",hash:{},data:a}))+'</p>\n<a href="/home/discuss/'+r(e.lambda(null!=(s=null!=t?t.primaryForum:t)?s.id:s,t))+'/" class="button button-outline button-padding-wider text-large">\n'+r(n.gettext.call(o,"Start the first discussion",{name:"gettext",hash:{},data:a}))+"\n</a>\n</div>\n</div>\n"},useData:!0})}),define("home/templates/channelOwnerFeedEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div class="card-wrap">\n<div class="card__header">\n<div class="card__reason -large">\n<h1 class="text-gray-darker">\n<span class="icon-checkmark icon__position spacing-right-small text-success"></span>\n'+r(n.gettext.call(o,"Your channel's been created!  Let's kick it off.",{name:"gettext",hash:{},data:a}))+'\n</h1>\n</div>\n</div>\n<div class="card__content -empty">\n<div class="card-content__body">\n<ol class="list--numbered spacing-narrow text-gray-darker">\n<li>\n<h2 class="text-large spacing-bottom-small">\n'+r(n.gettext.call(o,"Check out the %(exampleChannel)s and read the %(modPlaybook)s.",{name:"gettext",hash:{modPlaybook:n.tag.call(o,"a",{name:"tag",hash:{text:"Mod Playbook",href:"https://media.disquscdn.com/channel-docs/Mod_Playbook.pdf"},data:a}),exampleChannel:n.tag.call(o,"a",{name:"tag",hash:{text:"example channel",href:"https://disqus.com/home/channel/testchannel/"},data:a})},data:a}))+'\n</h2>\n<p class="text-gray">\n'+r(n.gettext.call(o,"These will explain how to set up your channel for success.",{name:"gettext",hash:{},data:a}))+'</p>\n</li>\n<li>\n<h2 class="text-large spacing-bottom-small">\n'+r(n.gettext.call(o,"Start your first, introductory discussion. Here's an %(exampleDiscussion)s.",{name:"gettext",hash:{exampleDiscussion:n.tag.call(o,"a",{name:"tag",hash:{text:"example discussion",href:"https://disqus.com/home/channel/selectstart/discussion/channel-selectstart/welcome/"},data:a})},data:a}))+'\n</h2>\n<p class="text-gray spacing-bottom-narrow">\n'+r(n.gettext.call(o,"Introduce your future audience to what your channel is about. This notice will disappear once you do.",{name:"gettext",hash:{},data:a}))+'</p>\n<p>\n<a class="button button-outline" href="/home/discuss/'+r(e.lambda(null!=(s=null!=t?t.primaryForum:t)?s.id:s,t))+'/">\n'+r(n.gettext.call(o,"Start a discussion",{name:"gettext",hash:{},data:a}))+'\n</a>\n</p>\n</li>\n<li>\n<h2 class="text-large spacing-bottom-small">\n'+r(n.gettext.call(o,"Need help? Visit %(channelChat)s for tips on getting started.",{name:"gettext",hash:{channelChat:n.tag.call(o,"a",{name:"tag",hash:{text:"Channel Chat",href:"https://disqus.com/home/channel/channelchat/"},data:a})},data:a}))+'\n</h2>\n<p class="text-gray">\n'+r(n.gettext.call(o,"We want your channel to thrive just as much as you do.",{name:"gettext",hash:{},data:a}))+"\n</p>\n</li>\n</ol>\n</div>\n</div>\n</div>\n"},useData:!0})}),define("home/views/ChannelFeedEmptyView",["backbone-marionette","home/models/Session","home/templates/channelFeedEmpty","home/templates/channelOwnerFeedEmpty"],function(e,t,n,i){"use strict";var a=e.ItemView.extend({getTemplate:function(){return this.model.get("owner_id")===this.session.user.get("id")?i:n},initialize:function(){this.session=t.get()}});return a}),define("home/mixins/withViewFeedTracking",["underscore","core/bus"],function(e,t){"use strict";var n=function(){var n=this.initialize;this.initialize=function(){n.apply(this,arguments),this.listenTo(this,"renderInitialContent",this.trackView)},this.trackView=function(){t.trigger("viewFeed",this),e.defer(e.bind(function(){this.listenTo(this.collection,"sync",this.trackViewMore)},this))},this.trackViewMore=function(){t.trigger("viewMoreFeed",this.getNumPages())},this.getNumPages=function(){return this.model&&this.model.get("numPages")}};return n}),define("home/views/ChannelCardCollectionView",["backbone","core/bus","home/views/GenericCardCollectionView","home/views/ChannelCardFavoriteView","home/views/ChannelCardCreateView","home/views/ChannelCardTrendingView","home/views/ChannelCardShareView","home/views/ChannelFeedEmptyView","home/mixins/withViewFeedTracking"],function(e,t,n,i,a,s,o,r,l){"use strict";var c=n.extend({itemView:function(t){switch(t.model.get("verb")){case"favorite":return new i(t);case"create":return new a(t);case"trending":return new s(t);case"share":return new o(t);default:return new e.View}},itemViewOptions:function(e,t){var i=n.prototype.itemViewOptions.call(this,e,t);return i.enableBestOfDisqusCallout=this.enableBestOfDisqusCallout,i.filterVerbs=this.filterVerbs,i.isChannelFeed=this.isChannelFeed,i},emptyView:r,emptyViewOptions:function(){return{model:this.channel}},initialize:function(e){n.prototype.initialize.call(this,e),e=e||{},this.enableBestOfDisqusCallout=e.enableBestOfDisqusCallout,this.filterVerbs=e.filterVerbs,this.isChannelFeed=e.isChannelFeed,this.listenToOnce(this,"showFirstItem",function(){t.trigger("showFirstCard","channel")})}});return l.call(c.prototype),c}),define("core/mixins/withChannelFollowing",["underscore"],function(e){"use strict";function t(e){return{events:{"click [data-action=toggle-follow]":"toggleFollow"},initialize:function(){this.bindToPrimaryForum()},templateHelpers:function(){return{isFollowing:this.getIsFollowing()}},bindToPrimaryForum:function(){var t=e.call(this);if(t)return t.primaryForum?void this.listenTo(t.primaryForum,"change:isFollowing",this.updateFollowedState):void this.listenToOnce(t,"changeRelated:primaryForum",this.bindToPrimaryForum)},updateFollowedState:function(){this.$("[data-action=toggle-follow]").toggleClass("active",this.getIsFollowing())},getIsFollowing:function(){var t=e.call(this);return t&&t.primaryForum&&t.primaryForum.get("isFollowing")},toggleFollow:function(t){t&&(t.preventDefault(),t.stopPropagation());var n=e.call(this);n&&n.primaryForum&&(n.primaryForum.toggleFollowed(),this.trigger("toggled:follow",t))}}}function n(n){var i=n||function(){return this.model},a=t(i);this.initialize=e.wrap(this.initialize,function(e,t){e.call(this,t),a.initialize.call(this,t)}),this.templateHelpers=e.wrap(this.templateHelpers,function(t){var n=e.isFunction(t)?t.call(this):t;return e.extend(a.templateHelpers.call(this),n)}),this.bindToPrimaryForum=e.wrap(this.bindToPrimaryForum,function(e){e&&e.call(this),a.bindToPrimaryForum.call(this)}),this.events=e.extend({},a.events,this.events),e.extend(this,e.pick(a,"updateFollowedState","getIsFollowing","toggleFollow"))}return n}),define("home/templates/channelPromotionDiscussion",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<a href="'+r(o(null!=t?t.discussionRoute:t,t))+'" class="channel-item__link">\n<div class="channel-item__heading spacing-bottom-small">\n<h2 class="truncate" data-truncate-lines="2">'+r(o(null!=(s=null!=t?t.thread:t)?s.clean_title:s,t))+'</h2>\n</div>\n<div class="channel-item__footer">\n<span class="channel-item__count">'+r(o(null!=(s=null!=t?t.thread:t)?s.posts:s,t))+'</span>\n<span class="channel-item__comment">'+r(n.gettext.call(null!=t?t:{},"Comments",{name:"gettext",hash:{},data:a}))+"</span>\n</div>\n</a>\n"},useData:!0})}),define("home/views/ChannelPromotionDiscussionView",["backbone-marionette","home/mixins/withTruncate","home/templates/channelPromotionDiscussion"],function(e,t,n){"use strict";var i=e.ItemView.extend({template:n,templateHelpers:function(){return{discussionRoute:this.model.thread.getDiscussionRoute()}}});return t.call(i.prototype),i}),define("home/templates/channelPromotion",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t){var n;return'<img src="'+e.escapeExpression(e.lambda(null!=(n=null!=(n=null!=t?t.channel:t)?n.options:n)?n.tile:n,t))+'" class="tile__media" />\n'},3:function(e,t){var n;return'<div class="tile__overlay">\n<h1 class="tile__name">'+e.escapeExpression(e.lambda(null!=(n=null!=t?t.channel:t)?n.name:n,t))+'</h1>\n</div>\n<img src="https://media.disquscdn.com/home/blank_tile.png"\nclass="tile__media" />\n';
},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression,l=null!=t?t:{};return'<div class="channels-module__inner">\n<a href="/home/channel/'+r(o(null!=(s=null!=t?t.channel:t)?s.slug:s,t))+'/" class="tile__wrapper">\n'+(null!=(s=n["if"].call(l,null!=(s=null!=(s=null!=t?t.channel:t)?s.options:s)?s.tile:s,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+'</a>\n<div class="channels-description">\n<p>'+r(o(null!=(s=null!=(s=null!=t?t.channel:t)?s.options:s)?s.description:s,t))+'</p>\n</div>\n<div class="channels-metadata">\n<div class="padding-gutter align align--middle" data-role="stats">\n'+(null!=(s=e.invokePartial(i.channelMetadataStats,t,{name:"channelMetadataStats",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</div>\n</div>\n<div class="padding-gutter border-top hidden-lg">\n<h4 class="text-subheading spacing-bottom">'+r(n.gettext.call(l,"Recommended Discussions",{name:"gettext",hash:{},data:a}))+'</h4>\n<section data-role="discussions" class="channels-module__discussions"></section>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/ChannelPromotionView",["backbone-marionette","core/mixins/withChannelFollowing","home/views/ChannelPromotionDiscussionView","home/views/FetchingView","home/mixins/withSubviews","home/templates/channelPromotion"],function(e,t,n,i,a,s){"use strict";var o=e.ItemView.extend({className:"channels-module__block",template:s,regions:{discussionsRegion:"[data-role=discussions]"},templateHelpers:function(){var e=this.model.channel.primaryForum,t=e.get("numThreads"),n=e.get("numFollowers");return{numThreads:t&&t.toLocaleString(),numFollowers:n&&n.toLocaleString()}},initialize:function(){this.bindToPrimaryForum()},bindToPrimaryForum:function(){var e=this.model.channel;return e.primaryForum?void this.listenTo(e.primaryForum,"change:numThreads change:numFollowers",this.render):void this.listenToOnce(e,"changeRelated:primaryForum",this.bindToPrimaryForum)},onRender:function(){this.activateRegion(this.discussionsRegion,this.createDiscussionsRegion)},createDiscussionsRegion:function(){return new e.CollectionView({itemView:n,itemViewOptions:function(e,t){return{className:t>1?"hidden":"channels-module__article"}},collection:this.model.topActivities.items,emptyView:function(){return new i({className:"spinner-small"})}})}}),r=o.prototype;return t.call(r,function(){return this.model.channel}),a.call(r),o}),define("home/views/PromotedChannelsCardView",["backbone-marionette","home/views/ChannelPromotionView"],function(e,t){"use strict";var n=e.CollectionView.extend({className:"card--interstitial",itemView:t});return n}),define("home/mixins/withInterstitialChannelCards",["jquery","underscore","backbone","core/UniqueModel","home/models/ChannelProfileFeed","home/models/Session","home/views/PromotedChannelsCardView"],function(e,t,n,i,a,s,o){"use strict";var r=10,l=2,c={initialize:function(n,i){n.call(this,i),this.lastIntersitialCardIndex=-1;var a=t.bind(this.initializeChannelProfiles,this),o=s.get();o.loadPromise().always(function(){var t=o.getUserProfile(),n=t&&t.forumsFollowing.ensureFetched();e.when(n).then(a)})},initializeChannelProfiles:function(){var e=new i(a,{listName:a.LIST_NAMES.promoted});e.ensureFetched().then(t.bind(function(){this.interstitialChannelProfiles=e.items.chain().reject(function(e){return e.channel.primaryForum.get("isFollowing")}).shuffle().value()},this))},getAdjustedIndex:function(e){var n=0,i=0;return t.each(this.children._views,function(t){i>e||(t instanceof o?n+=1:i+=1)}),e+n},addItemView:function(e,t,n,i){var a=this.getAdjustedIndex(i),s=e.call(this,t,n,a);return a+=1,this.interstitialChannelProfiles&&a-this.lastIntersitialCardIndex>r&&(this.insertChannelCard(a),this.lastIntersitialCardIndex=a),s},insertChannelCard:function(e){var t=new n.Collection(this.interstitialChannelProfiles.splice(0,l));if(!(l>t.length)){t.invoke("ensureFetchedTopActivities");var i=new o({collection:t});this.children.add(i),this.renderItemView(i,e)}}};return function(){this.initialize=t.wrap(this.initialize,c.initialize),this.addItemView=t.wrap(this.addItemView,c.addItemView),t.extend(this,t.pick(c,["insertChannelCard","initializeChannelProfiles","getAdjustedIndex"]))}}),define("home/views/ChannelCardCollectionViewWithChannelPromotion",["home/views/ChannelCardCollectionView","home/mixins/withInterstitialChannelCards"],function(e,t){"use strict";var n=e.extend({});return t.call(n.prototype),n}),define("home/templates/spinner",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(){return'<div class="spinner"></div>\n'},useData:!0})}),define("home/templates/moreButton",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){return'<button class="button button-fill button-small button-padding-taller button-wide" data-action="more-feed">\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"More",{name:"gettext",hash:{},data:a}))+"\n</button>\n"},useData:!0})}),define("home/templates/endOfItems",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="feed-end" data-role="end-message">\n'+o(n.gettext.call(s,"That's the end. ",{name:"gettext",hash:{},data:a}))+' <a href="/home/explore/">'+o(n.gettext.call(s,"Find more interesting discussions »",{name:"gettext",hash:{},data:a}))+"</a>\n</div>\n"},useData:!0})}),define("home/templates/loadError",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="empty-message">\n<img src="'+o(n.urlfor.call(s,"cdn",{name:"urlfor",hash:{},data:a}))+'/img/Pam_Error.png" class="img-responsive" />\n<h2>'+o(n.gettext.call(s,"Darn it!",{name:"gettext",hash:{},data:a}))+'</h2>\n<div class="text-small">\n'+o(n.gettext.call(s,"Something went wrong while trying to load this feed. Try again in a little while.",{name:"gettext",hash:{},data:a}))+'\n</div>\n<div class="text-small">\n'+o(n.gettext.call(s,"Please visit %(discussDisqus)s to learn more.",{name:"gettext",hash:{discussDisqus:n.tag.call(s,"a",{name:"tag",hash:{text:"Discuss Disqus",href:"//disqus.com/home/discussion/channel-discussdisqus/issues_loading_your_feed_send_us_more_details/"},data:a})},data:a}))+"\n</div>\n</div>\n"},useData:!0})}),define("home/views/common/FetchableCollectionFooterView",["underscore","backbone-marionette","home/templates/spinner","home/templates/moreButton","home/templates/endOfItems","home/templates/loadError"],function(e,t,n,i,a,s){"use strict";var o=t.ItemView.extend({endOfItemsTemplate:a,errorTemplate:s,template:function(e){return e.error?this.errorTemplate(e):this.collection.length?e.fetching?n(e):e.hasNext?i(e):this.endOfItemsTemplate(e):""},className:"more-wrapper",events:{"click [data-action=more-feed]":"moreClicked"},modelEvents:{"change:fetching":"render"},initialize:function(){this.template=e.bind(this.template,this)},moreClicked:function(e){e.preventDefault(),this.model.fetchItems()}});return o}),define("home/templates/channelFeedEndOfItems",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){return'<div class="feed-end" data-role="end-message">\n<a href="#content-area">'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Back to Top",{name:"gettext",hash:{},data:a}))+"</a>\n</div>\n"},useData:!0})}),define("home/views/ChannelFeedFooterView",["home/views/common/FetchableCollectionFooterView","home/templates/channelFeedEndOfItems"],function(e,t){"use strict";var n=e.extend({endOfItemsTemplate:t});return n}),define("home/templates/unreadCount",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Show One New Item",{name:"gettext",hash:{},data:a}))+"\n"},3:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Show %(x)s New Items",{name:"gettext",hash:{x:null!=t?t.numUnread:t},data:a}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<button class="button button-padding-taller button-wide button-fill--brand text-medium">\n'+(null!=(s=n["if"].call(o,n.eq.call(o,null!=t?t.numUnread:t,1,{name:"eq",hash:{},data:a}),{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+"</button>\n"},useData:!0})}),define("home/views/UnreadCountView",["backbone-marionette","home/templates/unreadCount"],function(e,t){"use strict";var n=e.ItemView,i=n.prototype;return n.extend({className:"feed-new",events:{click:"handleAddUnread"},handleAddUnread:function(){this.collection.addUnread(),this.close()},template:t,serializeData:function(){return{numUnread:this.collection.unreadQueue.length}},render:function(){return this.serializeData().numUnread<=0?this:i.render.call(this)}})}),define("home/templates/fetchableCollectionLayout",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(){return'<div data-role="header-area"></div>\n<div data-role="content-area"></div>\n<div data-role="footer-area"></div>\n'},useData:!0})}),define("home/views/common/FetchableCollectionLayout",["underscore","backbone-marionette","home/views/common/FetchableCollectionView","home/views/common/FetchableCollectionFooterView","home/views/FetchingView","home/views/UnreadCountView","home/templates/fetchableCollectionLayout"],function(e,t,n,i,a,s,o){"use strict";var r=t.Layout.extend({itemViewEventPrefix:"collectionview",template:o,regions:{headerRegion:"[data-role=header-area]",contentRegion:"[data-role=content-area]",footerRegion:"[data-role=footer-area]"},fetchableCollectionFooterView:i,initialize:function(e){if(e.fetchableCollectionView&&(this.fetchableCollectionView=e.fetchableCollectionView),!this.fetchableCollectionView||!(this.fetchableCollectionView===n||this.fetchableCollectionView.prototype instanceof n))throw Error("A FetchableCollectionLayout must define a fetchableCollectionView");if(e.fetchableCollectionFooterView&&(this.fetchableCollectionFooterView=e.fetchableCollectionFooterView),!this.contentRegion||!this.footerRegion)throw Error("A template for a FetchableCollectionLayout must define a content region and a footer region");this.listenTo(this.collection,"unreadItemsReady",this.updateHeader),this.options=e},updateHeader:function(){var e=new s({collection:this.collection});this.headerRegion.show(e)},onDomRefresh:function(){this.contentRegion.currentView&&this.stopListening(this.contentRegion.currentView);var n=new this.fetchableCollectionView(e.clone(this.options)),i=n.collection;i.updateUnreadCount&&i.updateUnreadCount(),n.listenable.ensureFetched&&n.listenable.ensureFetched(),t.CollectionView.prototype.addChildViewEventForwarding.call(this,n),this.contentRegion.show(new a),e.defer(e.bind(function(){this.isClosed||(this.contentRegion.show(n),this.trigger("showCollection",n),this.footerRegion.show(new this.fetchableCollectionFooterView({model:this.model,collection:this.collection})))},this))},getItemEvents:t.CollectionView.prototype.getItemEvents});return r}),define("home/mixins/asCollapsibleCard",["underscore"],function(e){"use strict";var t=function(){this.events=e.extend({"click [data-action=toggle-collapsed]":"toggleCollapsed"},this.events),this.toggleCollapsed=function(e){e&&e.preventDefault(),this.$(".card-collapsed, .card-expanded").addBack(".card-collapsed, .card-expanded").toggleClass("card-collapsed card-expanded")}};return t}),define("home/mixins/withReasonOld",["underscore","home/views/ActivityActorsHoverCard","core/utils"],function(e,t,n){"use strict";var i=function(){if(!n.isMobileUserAgent()){var e=this.$("[data-role=actors]");e.length&&(this.hoverCard&&this.hoverCard.remove(),this.hoverCard=t.create({targetElement:e,activityFeedItem:this.model,activityId:this.model.id,numShownActors:a.call(this).length}))}},a=function(){return this.model.actors?this.model.get("totalActors")<4?this.model.toJSON().actors:this.model.toJSON().actors.slice(0,2):[]},s=function(){if(!this.model.actors||1!==this.model.actors.length)return 0;var e=this.model.get("totalActivities");return e>1?e:0},o=function(){this.initialize=e.wrap(this.initialize,function(t){t.apply(this,e.rest(arguments)),this.listenTo(this,"render",i)});var t=this.templateHelpers;this.templateHelpers=function(){var n=a.call(this);return e.extend({relativeTime:this.model.getRelativeTimestamp(),shownActors:n,numRemainingActors:this.model.get("totalActors")-n.length,numOccurrences:s.call(this)},t?t.apply(this,arguments):{})}};return o}),define("home/views/common/ActivityFooterView",["backbone-marionette","home/models/Session"],function(e,t){"use strict";var n=e.ItemView.extend({templateHelpers:function(){var e=t.get();return{favorited:this.model.thread.get("userScore")>0,discussionRoute:this.model.thread.getDiscussionRoute(),authenticated:!e.isAnonymous()}},events:{"click [data-action=favorite]":"toggleThreadFavorited"},initialize:function(){this.listenTo(this.model.thread,"change:userScore",this.render)},toggleThreadFavorited:function(e){e&&e.preventDefault(),this.model.thread.toggleFavorited()}});return n}),define("home/templates/activityFooterFavorite",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<ul class="actions">\n'+(null!=(s=e.invokePartial(i.activityFooterDefaultActions,t,{name:"activityFooterDefaultActions",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</ul>\n"},usePartial:!0,useData:!0})}),define("home/views/ActivityFooterFavoriteView",["home/views/common/ActivityFooterView","home/templates/activityFooterFavorite"],function(e,t){"use strict";var n=e.extend({template:t});return n}),define("home/templates/activityCardFavorite",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s=null!=t?t:{};return e.escapeExpression(n.gettext.call(s,"%(group)s recommended %(numOccurance)s times",{name:"gettext",hash:{numOccurance:null!=t?t.numOccurance:t,group:n.getPartial.call(s,"userGroup",{name:"getPartial",hash:{},data:a})},data:a}))+"\n"},3:function(e,t,n,i,a){var s=null!=t?t:{};return e.escapeExpression(n.gettext.call(s,"%(group)s recommended",{name:"gettext",hash:{group:n.getPartial.call(s,"userGroup",{name:"getPartial",hash:{},data:a})},data:a}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda;return'<div class="card-reason">\n'+(null!=(s=n["if"].call(null!=t?t:{},null!=t?t.numOccurances:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+'<span class="time">'+e.escapeExpression(o(null!=t?t.relativeTime:t,t))+"</span>\n</div>\n"+(null!=(s=e.invokePartial(i.cardTitle,t,{name:"cardTitle",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<div class="card-summary">\n<div class="card-summary-content" dir="auto">\n'+(null!=(s=o(null!=t?t.threadDescriptionHTML:t,t))?s:"")+'\n</div>\n</div>\n<footer class="card-footer" data-role="footer"></div>\n'},usePartial:!0,useData:!0})}),define("home/views/ActivityCardFavoriteView",["backbone-marionette","home/mixins/withReasonOld","home/mixins/withSubviews","home/views/ActivityFooterFavoriteView","home/templates/activityCardFavorite"],function(e,t,n,i,a){"use strict";var s=e.ItemView,o=s.extend({template:a,templateHelpers:function(){return{discussionRoute:this.model.thread.getDiscussionRoute(),threadDescriptionHTML:this.model.thread.getDefaultDescription()}},initialize:function(){this.listenTo(this.model.thread,"change:content",this.render)},regions:{footerRegion:"[data-role=footer]"},onRender:function(){this.activateRegion(this.footerRegion,this.createFooterView)},createFooterView:function(){return new i({el:this.footerRegion.el,model:this.model})}}),r=o.prototype;return t.call(r),n.call(r),o}),define("home/templates/truncatedPost",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t){return'<span class="label label-danger">'+e.escapeExpression(e.lambda(null!=t?t.hiddenExplanation:t,t))+"</span>\n"},3:function(e,t){return e.escapeExpression(e.lambda(null!=t?t.plaintext:t,t))+"\n"},5:function(){return'<span class="icon-images"></span>\n'},7:function(){return"hidden"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression,l=null!=t?t:{};return(null!=(s=e.invokePartial(i.userAvatar,null!=t?t.author:t,{name:"userAvatar",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<div class="comment-body">\n<header class="comment-header">\n'+(null!=(s=e.invokePartial(i.userName,null!=t?t.author:t,{name:"userName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<a class="link-gray time"\nhref="'+r(o(null!=t?t.discussionRoute:t,t))+"#comment-"+r(o(null!=t?t.id:t,t))+'"\ndata-link-name="timestamp"\ndata-thread-id="'+r(o(null!=(s=null!=t?t.thread:t)?s.id:s,t))+'">\n\n'+r(o(null!=t?t.relativeTime:t,t))+"\n</a>\n"+(null!=(s=n["if"].call(l,null!=t?t.isHidden:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'</header>\n<a href="'+r(o(null!=t?t.discussionRoute:t,t))+"#comment-"+r(o(null!=t?t.id:t,t))+'"\nclass="card-comment-truncated truncate-line"\ndata-link-name="message"\ndir="auto"\ndata-thread-id="'+r(o(null!=(s=null!=t?t.thread:t)?s.id:s,t))+'">\n\n'+(null!=(s=n["if"].call(l,null!=t?t.plaintext:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.program(5,a,0),data:a}))?s:"")+'</a>\n\n<footer class="comment-actions '+(null!=(s=n["if"].call(l,null!=t?t.isHidden:t,{name:"if",hash:{},fn:e.program(7,a,0),inverse:e.noop,data:a}))?s:"")+'" data-role="post-actions">\n</footer>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/TruncatedPostView",["home/views/PostView","home/templates/truncatedPost"],function(e,t){"use strict";var n=e.extend({template:t});return n}),define("home/templates/replyActivity",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(){return'<div data-role="parent-post" class="parent"></div>\n<div data-role="child-post" class="child"></div>\n'},useData:!0})}),define("home/views/ReplyActivityView",["backbone-marionette","home/mixins/withSubviews","home/views/PostView","home/views/TruncatedPostView","home/templates/replyActivity"],function(e,t,n,i,a){"use strict";var s=e.ItemView,o=s.extend({className:"card-reply",template:a,regions:{inReplyToRegion:"[data-role=parent-post]",replyRegion:"[data-role=child-post]"},initialize:function(e){this.shouldCollapse=e&&e.shouldCollapse},onRender:function(){this.activateRegion(this.inReplyToRegion,this.createParentPostView),this.activateRegion(this.replyRegion,this.createChildPostView)},createParentPostView:function(){return new i({model:this.model.target})},createChildPostView:function(){return new n({model:this.model.object,shouldCollapse:this.shouldCollapse})}});return t.call(o.prototype),o}),define("home/views/PostActivityCollectionView",["underscore","backbone-marionette","home/views/PostView","home/views/ReplyActivityView"],function(e,t,n,i){"use strict";var a=t.CollectionView.extend({initialize:function(e){this.collapsePosts=!e||e.collapsePosts!==!1},getItemView:function(e){return"reply"===e.get("verb")?i:n},itemViewOptions:function(t,n){var i=t;"post"===t.get("verb")&&(i=t.object);var a=this.getItemView(t).prototype.className;a=e.isFunction(a)?a.call({model:t}):a||"";var s=a;return n>0&&(s+=" collapsible"),{model:i,className:s,shouldCollapse:this.collapsePosts}}});return a}),define("home/views/common/ActivityCardPostBaseView",["backbone","backbone-marionette","home/mixins/withSubviews","home/views/PostActivityCollectionView"],function(e,t,n,i){"use strict";var a=t.ItemView.extend({regions:{postsRegion:"[data-role=posts]",footerRegion:"[data-role=footer]"},buildPostsView:function(){return new i({el:this.postsRegion.el,collection:new e.Collection(this.model.activities)})},createFooterView:void 0,onRender:function(){this.activateRegion(this.postsRegion,this.buildPostsView),this.activateRegion(this.footerRegion,this.createFooterView)}});return n.call(a.prototype),a}),define("home/templates/activityFooterPost",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<ul class="actions">\n'+(null!=(s=e.invokePartial(i.activityFooterDefaultActions,t,{name:"activityFooterDefaultActions",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</ul>\n"},usePartial:!0,useData:!0})}),define("home/views/ActivityFooterPostView",["underscore","home/views/common/ActivityFooterView","home/templates/activityFooterPost"],function(e,t,n){"use strict";var i=t.extend({template:n,templateHelpers:function(){return e.defaults({hasMultiplePosts:this.model.activities.length>1},t.prototype.templateHelpers.apply(this,arguments))}});return i}),define("home/templates/activityCardPost",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s=null!=t?t:{};return e.escapeExpression(n.gettext.call(s,"%(group)s commented %(numOccurance)s times",{name:"gettext",hash:{numOccurance:null!=t?t.numOccurance:t,group:n.getPartial.call(s,"userGroup",{name:"getPartial",hash:{},data:a})},data:a}))+"\n"},3:function(e,t,n,i,a){var s=null!=t?t:{};return e.escapeExpression(n.gettext.call(s,"%(group)s commented",{name:"gettext",hash:{group:n.getPartial.call(s,"userGroup",{name:"getPartial",hash:{},data:a})},data:a}))+"\n"},5:function(e,t,n,i,a){return'<div class="expandable">\n<div class="card-grouped-actions">\n<a href="#" data-action="toggle-collapsed" class="expandable card-expand">\n<div class="icon-more-vert"></div>\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"See More",{name:"gettext",hash:{},data:a}))+"\n</a>\n</div>\n</div>\n"},7:function(e,t,n,i,a){var s=e.escapeExpression;return'<div class="collapsible">\n<div class="card-grouped-actions">\n<a class="collapsible button button-outline button-small" href="'+s(e.lambda(null!=t?t.discussionRoute:t,t))+'" data-link-name="view_comment">\n'+s(n.gettext.call(null!=t?t:{},"See All Comments",{name:"gettext",hash:{},data:a}))+"\n</a>\n</div>\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<div class="card-reason">\n'+(null!=(s=n["if"].call(o,null!=t?t.numOccurances:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+'<span class="time">'+e.escapeExpression(e.lambda(null!=t?t.relativeTime:t,t))+"</span>\n</div>\n"+(null!=(s=e.invokePartial(i.cardTitle,t,{name:"cardTitle",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<div data-role="posts"></div>\n'+(null!=(s=n["if"].call(o,null!=t?t.shouldCollapse:t,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=n["if"].call(o,null!=t?t.hasOverflowPosts:t,{name:"if",hash:{},fn:e.program(7,a,0),inverse:e.noop,data:a}))?s:"")+'<footer class="card-footer" data-role="footer"></div>\n'},usePartial:!0,useData:!0})}),define("home/views/ActivityCardPostView",["home/mixins/withReasonOld","home/views/common/ActivityCardPostBaseView","home/views/ActivityFooterPostView","home/templates/activityCardPost"],function(e,t,n,i){"use strict";var a=t,s=a.extend({template:i,templateHelpers:function(){return{hasOverflowPosts:this.model.get("totalActivities")>this.model.activities.length,shouldCollapse:this.shouldCollapse(),discussionRoute:this.model.thread.getDiscussionRoute()}},createFooterView:function(){return new n({el:this.footerRegion.el,model:this.model})},shouldCollapse:function(){return this.model.activities.length>1}}),o=s.prototype;return e.call(o),s}),define("home/templates/activityFooterReply",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<ul class="actions">\n'+(null!=(s=e.invokePartial(i.activityFooterDefaultActions,t,{name:"activityFooterDefaultActions",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</ul>\n"},usePartial:!0,useData:!0})}),define("home/views/ActivityFooterReplyView",["home/views/common/ActivityFooterView","home/templates/activityFooterReply"],function(e,t){"use strict";var n=e.extend({template:t});return n}),define("home/templates/activityCardReply",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<div class="card-reason">\n'+(null!=(s=e.invokePartial(i.userGroup,t,{name:"userGroup",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<span class="icon-forward"></span>'+(null!=(s=e.invokePartial(i.userPreview,null!=(s=null!=t?t.target:t)?s.author:s,{name:"userPreview",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+' <span class="time">'+e.escapeExpression(e.lambda(null!=t?t.relativeTime:t,t))+"</span>\n</div>\n"+(null!=(s=e.invokePartial(i.cardTitle,t,{name:"cardTitle",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<div class="card-reply" data-role="posts"></div>\n<footer class="card-footer" data-role="footer"></div>\n'},usePartial:!0,useData:!0})}),define("home/views/ActivityCardReplyView",["home/mixins/withReasonOld","home/views/common/ActivityCardPostBaseView","home/views/ActivityFooterReplyView","home/templates/activityCardReply"],function(e,t,n,i){"use strict";var a=t,s=a.extend({template:i,templateHelpers:function(){return{target:this.model.activities[0].target.toJSON()}},createFooterView:function(){return new n({el:this.footerRegion.el,model:this.model})}}),o=s.prototype;return e.call(o),s}),define("home/templates/activityFooterTrending",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<ul class="actions">\n'+(null!=(s=e.invokePartial(i.activityFooterDefaultActions,t,{name:"activityFooterDefaultActions",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</ul>\n"},usePartial:!0,useData:!0})}),define("home/views/ActivityFooterTrendingView",["home/views/common/ActivityFooterView","home/templates/activityFooterTrending"],function(e,t){"use strict";var n=e.extend({template:t});return n}),define("home/templates/activityCardTrending",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s;return'<a href="/home/forum/'+e.escapeExpression(e.lambda(null!=(s=null!=(s=null!=t?t.thread:t)?s.forum:s)?s.id:s,t))+'/" class="community link-gray-darker" data-link-name="forum_name">'+(null!=(s=e.invokePartial(i.forumName,null!=(s=null!=t?t.target:t)?s.forum:s,{name:"forumName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</a>\n"},3:function(e,t,n,i,a){var s;return(null!=(s=e.invokePartial(i.forumAvatarLink,null!=(s=null!=t?t.target:t)?s.forum:s,{name:"forumAvatarLink",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+' <a href="/home/forum/'+e.escapeExpression(e.lambda(null!=(s=null!=(s=null!=t?t.thread:t)?s.forum:s)?s.id:s,t))+'/" class="community link-gray-darker" data-link-name="forum_name">'+(null!=(s=e.invokePartial(i.forumName,null!=(s=null!=t?t.target:t)?s.forum:s,{name:"forumName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression,l=e.lambda;return'<div class="card-reason">\n'+(null!=(s=n["if"].call(o,null!=t?t.hideForumFavicon:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+'<span class="time">'+r(n.gettext.call(o,"Recent activity",{name:"gettext",hash:{},data:a}))+" "+r(l(null!=t?t.relativeTime:t,t))+"</span>\n</div>\n"+(null!=(s=e.invokePartial(i.cardTitle,t,{name:"cardTitle",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<div class="card-summary">\n<div class="card-summary-content" dir="auto">\n'+(null!=(s=l(null!=t?t.threadDescriptionHTML:t,t))?s:"")+'\n</div>\n</div>\n<footer class="card-footer" data-role="footer"></div>\n'},usePartial:!0,useData:!0})}),define("home/views/ActivityCardTrendingView",["underscore","backbone-marionette","home/mixins/withReasonOld","home/mixins/withSubviews","home/views/ActivityFooterTrendingView","home/templates/activityCardTrending"],function(e,t,n,i,a,s){"use strict";var o=t.ItemView,r=o.extend({template:s,templateHelpers:function(){var t=this.model.thread.forum.get("favicon")&&this.model.thread.forum.get("favicon").cache,n={};return e.extend(n,{commenter:this.model.thread.getMostRecentCommenter(),target:this.model.activities[0].target.toJSON(),discussionRoute:this.model.thread.getDiscussionRoute(),threadDescriptionHTML:this.model.thread.getDefaultDescription(),hideForumFavicon:!t||/favicon-default/.test(t)})},initialize:function(){this.listenTo(this.model.thread,"change:content",this.render)},regions:{footerRegion:"[data-role=footer]"},onRender:function(){this.activateRegion(this.footerRegion,this.createFooterView)},createFooterView:function(){return new a({el:this.footerRegion.el,model:this.model})}}),l=r.prototype;return n.call(l),i.call(l),r}),define("home/templates/activityFooterCreate",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<ul class="actions">\n'+(null!=(s=e.invokePartial(i.activityFooterDefaultActions,t,{name:"activityFooterDefaultActions",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</ul>\n"},usePartial:!0,useData:!0})}),define("home/views/ActivityFooterCreateView",["home/views/common/ActivityFooterView","home/templates/activityFooterCreate"],function(e,t){"use strict";var n=e.extend({template:t});return n}),define("home/templates/activityCardCreate",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<div class="card-discussion-comments-title">'+e.escapeExpression(n.gettext.call(o,"Recent Comments",{name:"gettext",hash:{},data:a}))+'</div>\n<div class="card-discussion-comments" data-role="posts"></div>\n'+(null!=(s=n["if"].call(o,null!=t?t.shouldCollapse:t,{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.noop,data:a}))?s:"")},2:function(e,t,n,i,a){return'<div class="expandable">\n<div class="card-grouped-actions">\n<a href="#" data-action="toggle-collapsed" class="expandable card-expand">\n<div class="icon-more-vert"></div>\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"See More",{name:"gettext",hash:{},data:a}))+"\n</a>\n</div>\n</div>\n"},4:function(e,t){var n;return'<div class="card-summary">\n<div class="card-summary-content" dir="auto">\n'+(null!=(n=e.lambda(null!=t?t.threadDescriptionHTML:t,t))?n:"")+"\n</div>\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div class="card-reason">\n'+r(n.gettext.call(o,"%(group)s authored",{name:"gettext",hash:{group:n.getPartial.call(o,"userGroup",{name:"getPartial",hash:{},data:a})},data:a}))+'\n<span class="time">'+r(e.lambda(null!=t?t.relativeTime:t,t))+"</span>\n</div>\n"+(null!=(s=e.invokePartial(i.cardTitle,t,{name:"cardTitle",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"\n"+(null!=(s=n["if"].call(o,null!=t?t.recentPostCount:t,{name:"if",
hash:{},fn:e.program(1,a,0),inverse:e.program(4,a,0),data:a}))?s:"")+'\n<footer class="card-footer" data-role="footer"></div>\n'},usePartial:!0,useData:!0})}),define("home/views/ActivityCardCreateView",["underscore","backbone-marionette","home/mixins/withReasonOld","home/mixins/withSubviews","home/views/ActivityFooterCreateView","home/views/PostCollectionView","home/templates/activityCardCreate"],function(e,t,n,i,a,s,o){"use strict";var r=t.ItemView,l=r.extend({template:o,templateHelpers:function(){var e=this.model.thread.forum.get("favicon")&&this.model.thread.forum.get("favicon").cache;return{target:this.model.activities[0].target.toJSON(),discussionRoute:this.model.thread.getDiscussionRoute(),threadDescriptionHTML:this.model.thread.getDefaultDescription(),recentPostCount:this.model.thread.recentPosts.length,shouldCollapse:this.shouldCollapse(),hideForumFavicon:!e||/favicon-default/.test(e)}},initialize:function(){this.listenTo(this.model.thread,"change:content",this.render)},regions:{postsRegion:"[data-role=posts]",footerRegion:"[data-role=footer]"},onRender:function(){this.activateRegion(this.postsRegion,this.createPostsView),this.activateRegion(this.footerRegion,this.createFooterView)},createPostsView:function(){return new s({el:this.postsRegion.el,collection:this.model.thread.recentPosts,itemViewOptions:function(t,n){var i=this.getItemView(t).prototype.className;i=e.isFunction(i)?i.call({model:t}):i||"";var a=i;return n>0&&(a+=" collapsible"),{className:a}}})},createFooterView:function(){var e=new a({el:this.footerRegion.el,model:this.model});return this.listenTo(e,"toggle:collapsed",function(){this.trigger("toggle:collapsed")}),e},shouldCollapse:function(){return this.model.thread.recentPosts.length>1}}),c=l.prototype;return n.call(c),i.call(c),l}),define("home/templates/activityCard",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s;return null!=(s=e.invokePartial(i.threadImage,t,{name:"threadImage",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:""},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<div class="card-discussion">\n<div class="card-aside" data-role="thread-image">\n'+(null!=(s=n["if"].call(null!=t?t:{},null!=t?t.canShowThreadImage:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'</div>\n<div class="card-body">\n<div data-role="card-content"></div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/ActivityCardWrapperView",["handlebars","home/utils/layoutUtils","home/views/common/ActivityCardView","home/mixins/asCollapsibleCard","home/mixins/withSubviews","home/views/ActivityCardFavoriteView","home/views/ActivityCardPostView","home/views/ActivityCardReplyView","home/views/ActivityCardTrendingView","home/views/ActivityCardCreateView","home/templates/activityCard"],function(e,t,n,i,a,s,o,r,l,c,d){"use strict";var u=n,h=u.extend({className:function(){return"card card-"+this.model.get("verb")},template:d,templateHelpers:function(){return{canShowThreadImage:!t.isNarrowLayout(),discussionRoute:this.model.thread.getDiscussionRoute(),image:this.model.thread.getImage()}},initialize:function(){t.isNarrowLayout()||this.listenTo(this.model.thread,"change:content",this.renderThreadImage),this.contentRegion=this.addRegion("[data-role=card-content]")},getContentView:function(){var e;switch(this.model.get("verb")){case"favorite":e=s;break;case"post":e=o;break;case"reply":e=r;break;case"trending":e=l;break;case"create":e=c}return new e({el:this.contentRegion.el,model:this.model})},renderThreadImage:function(){if(!t.isNarrowLayout()){var n=this.serializeData();n=this.mixinTemplateHelpers(n),this.$("[data-role=thread-image]").html(e.partials.threadImage(n))}},onRender:function(){var e=this.contentRegion;this.activateRegion(e,this.getContentView);var t=e.currentView;t.shouldCollapse&&t.shouldCollapse()&&this.$el.addClass("card-collapsed")}}),m=h.prototype;return i.call(m),a.call(m),h}),define("home/templates/feedEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Woops, nothing is happening here.",{name:"gettext",hash:{},data:a}))+"\n"},useData:!0})}),define("home/views/FeedEmptyView",["backbone-marionette","home/templates/feedEmpty"],function(e,t){"use strict";var n=e.ItemView.extend({template:t});return n}),define("home/views/ActivityCardCollectionView",["underscore","home/views/ActivityCardWrapperView","home/views/common/FetchableCollectionView","home/views/FeedEmptyView","home/mixins/withViewFeedTracking","home/mixins/withClickLinkTracking"],function(e,t,n,i,a,s){"use strict";var o=n.extend({className:"cards",emptyView:i,itemView:t,events:e.defaults({"click a[data-link-name]":function(e){this.isShowingNonItemView()||this.trackClickLink(e)}},n.prototype.events)});return a.call(o.prototype),s.call(o.prototype),o}),define("home/templates/commentCardPostActions",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return" active"},3:function(e,t){return e.escapeExpression(e.lambda(null!=t?t.likes:t,t))},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.lambda,l=e.escapeExpression;return'<a href="#" class="vote-up'+(null!=(s=n["if"].call(o,null!=t?t.sessionUserHasUpvoted:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'" data-action="vote" data-vote="1">\n<span class="vote__count text-gray text-small" data-role="upvotes">\n'+(null!=(s=n["if"].call(o,null!=t?t.likes:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+'\n</span>\n<span class="icon-arrow-up icon-tiny"></span>\n</a>\n\n<a href="#" class="vote-down'+(null!=(s=n["if"].call(o,null!=t?t.sessionUserHasDownvoted:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'" data-action="vote" data-vote="-1">\n<span class="icon-arrow-down icon-tiny"></span>\n</a>\n\n'+(null!=(s=e.invokePartial(i.replyOrEditLink,t,{name:"replyOrEditLink",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'\n<a href="'+l(r(null!=t?t.discussionRoute:t,t))+"#comment-"+l(r(null!=t?t.id:t,t))+'"\nclass="view-comment link-gray"\ndata-link-name="view_comment"\ndata-thread-id="'+l(r(null!=(s=null!=t?t.thread:t)?s.id:s,t))+'">\n\n<span class="visible-md">'+l(n.gettext.call(o,"View",{name:"gettext",hash:{},data:a}))+'</span>\n<span class="hidden-md">'+l(n.gettext.call(o,"View in discussion",{name:"gettext",hash:{},data:a}))+"</span>\n</a>\n"},usePartial:!0,useData:!0})}),define("home/views/CommentCardPostActionsView",["jquery","home/views/PostActionsView","home/templates/commentCardPostActions"],function(e,t,n){"use strict";var i=t.extend({template:n,initializeReplyViewManager:e.noop,toggleReplyView:e.noop});return i}),define("home/templates/commentCard",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.lambda,l=e.escapeExpression;return'<div class="card-comment comment-card__wrap">\n<div\nclass="card-link__wrapper '+(null!=(s=n.unless.call(o,null!=t?t.image:t,{name:"unless",hash:{},fn:e.program(2,a,0),inverse:e.noop,data:a}))?s:"")+' align"\ndata-role="thread-link"\ndata-link-name="thread_preview"\ndata-thread-id="'+l(r(null!=(s=null!=t?t.thread:t)?s.id:s,t))+'">\n\n'+(null!=(s=n["if"].call(o,null!=t?t.image:t,{name:"if",hash:{},fn:e.program(4,a,0),inverse:e.noop,data:a}))?s:"")+'<div class="card-link__body">\n<div>\n<div class="truncate" data-truncate-lines="2" dir="auto">\n<h3 class="text-large">'+l(r(null!=(s=null!=t?t.thread:t)?s.clean_title:s,t))+"</h3>\n</div>\n</div>\n"+(null!=(s=n["if"].call(o,null!=t?t.threadDescription:t,{name:"if",hash:{},fn:e.program(6,a,0),inverse:e.noop,data:a}))?s:"")+'</div>\n</div>\n<div data-role="posts" class="card-link__comments"></div>\n<button class="comment-card__more text-small pull-right">\n<span class="visible-md">'+l(n.gettext.call(o,"Less",{name:"gettext",hash:{},data:a}))+'</span>\n<span class="hidden-md">'+l(n.gettext.call(o,"Less Information",{name:"gettext",hash:{},data:a}))+"</span>\n</button>\n</div>\n"},2:function(){return" no-image"},4:function(e,t){var n,i=e.lambda,a=e.escapeExpression;return'<img class="card-link__img" src="'+a(i(null!=(n=null!=t?t.image:t)?n.src:n,t))+'" alt="'+a(i(null!=(n=null!=t?t.image:t)?n.title:n,t))+'">\n'},6:function(e,t,n,i,a){var s;return'<div>\n<div class="card-link__description truncate" data-truncate-lines="2" dir="auto">\n'+e.escapeExpression(e.lambda(null!=t?t.threadDescription:t,t))+"\n</div>\n</div>\n"+(null!=(s=n["if"].call(null!=t?t:{},null!=t?t.forumFriendlyUrl:t,{name:"if",hash:{},fn:e.program(7,a,0),inverse:e.noop,data:a}))?s:"")},7:function(e,t){return'<div class="card-link-forum-url">('+e.escapeExpression(e.lambda(null!=t?t.forumFriendlyUrl:t,t))+")</div>\n"},9:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.lambda,l=e.escapeExpression;return'<div class="card-comment comment-card__wrap">\n<div class="comment-body">\n<div class="comment-header comment-card__header text-small text-gray">\n'+(null!=(s=n["with"].call(o,null!=t?t.postActivity:t,{name:"with",hash:{},fn:e.program(10,a,0),inverse:e.noop,data:a}))?s:"")+'<time class="time">'+l(r(null!=t?t.relativeTime:t,t))+'</time>\n</div>\n<div class="comment-card__title link-inner-gray text-small">\n<strong class="link-gray-dark">\n'+(null!=(s=e.invokePartial(i.channelAwareForumLink,null!=(s=null!=t?t.thread:t)?s.forum:s,{name:"channelAwareForumLink",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</strong>\n<span class="bullet"></span>\n<span class="truncate" data-truncate-lines="2" dir="auto">\n'+(null!=(s=e.invokePartial(i.threadLink,t,{name:"threadLink",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</span>\n</div>\n<div class="card-content__summary">\n<div class="truncate" data-truncate-lines="30" data-role="message">\n'+(null!=(s=r(null!=(s=null!=(s=null!=t?t.postActivity:t)?s.object:s)?s.message:s,t))?s:"")+'\n</div>\n</div>\n<div class="card-comment-action comment-card__action" data-role="actions"></div>\n</div>\n<button class="comment-card__more text-gray-light text-small pull-right">\n<span class="visible-md">'+l(n.gettext.call(o,"More",{name:"gettext",hash:{},data:a}))+'</span>\n<span class="hidden-md">'+l(n.gettext.call(o,"More Information",{name:"gettext",hash:{},data:a}))+"</span>\n</button>\n\n</div>\n"},10:function(e,t,n,i,a){var s,o=null!=t?t:{};return(null!=(s=e.invokePartial(i.userPreview,null!=t?t.actor:t,{name:"userPreview",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+(null!=(s=n["if"].call(o,n.eq.call(o,null!=t?t.verb:t,"reply",{name:"eq",hash:{},data:a}),{name:"if",hash:{},fn:e.program(11,a,0),inverse:e.noop,data:a}))?s:"")},11:function(e,t,n,i,a){var s;return'<span class="icon-forward"></span>\n<span class="link-inner-gray">'+(null!=(s=e.invokePartial(i.userName,null!=(s=null!=t?t.target:t)?s.author:s,{name:"userName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.expanded:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(9,a,0),data:a}))?s:""},usePartial:!0,useData:!0})}),define("home/views/CommentCardView",["jquery","underscore","backbone","core/mixins/withRichMedia","home/utils/navigationUtils","home/mixins/withAllstarPopover","home/mixins/withSubviews","home/mixins/withTruncate","home/views/common/ActivityCardView","home/views/CommentCardPostActionsView","home/views/PostActivityCollectionView","home/templates/commentCard"],function(e,t,n,i,a,s,o,r,l,c,d,u){"use strict";var h=l.extend({className:"card-wrap is-expandable",template:u,templateHelpers:function(){var e=this.getPostActivity();return{expanded:this.expanded,discussionRoute:this.model.thread.getDiscussionRoute(),postActivity:e.toJSON(),relativeTime:e.getRelativeCreatedAt(),forumFriendlyUrl:this.model.thread.forum.getFriendlyUrl(),threadDescription:this.model.thread.getPlainDescription(),image:this.model.thread.getImage()}},regions:{actionsRegion:"[data-role=actions]",postsRegion:"[data-role=posts]"},events:{click:"handleClick",mouseover:"beginHover",mouseout:"endHover","mouseover a":"endHover","mouseout a":"beginHover","mouseover [data-role=thread-link]":"endHover","mouseout [data-role=thread-link]":"beginHover"},initialize:function(){this.boundRenderPostMedia=t.bind(this.renderPostMedia,this)},onRender:function(){this.activateRegion(this.actionsRegion,this.createDefaultActionsView),this.expanded?this.activateRegion(this.postsRegion,this.createPostCollectionView):this._isShown?this.boundRenderPostMedia():this.listenToOnce(this,"truncate:complete",this.boundRenderPostMedia)},renderPostMedia:function(){var e=this.getPostActivity().object;this.renderRichMedia(e.get("media"))},getPostActivity:function(){return this.model.activities[0]},createDefaultActionsView:function(){return new c({model:this.getPostActivity().object})},createPostCollectionView:function(){return new d({el:this.postsRegion.el,collection:new n.Collection(this.model.activities),collapsePosts:!1})},handleClick:function(t){return e(t.target).closest("[data-role=thread-link]").length?(a.navigate(this.model.thread.getDiscussionRoute(),{trigger:!0}),!1):void this.toggleExpanded(t)},toggleExpanded:function(n){e(n.target).closest("a, form",this.$el).length||(this.expanded=!this.expanded,this.render(),t.delay(t.bind(this.checkHovered,this)))},checkHovered:function(){var e=this.$el.is(":hover")&&!this.$el.find("a:hover").length&&!this.$el.find("[data-role=thread-link]:hover").length;this.$el.toggleClass("is-hovered",e)},beginHover:function(t){var n=e(t.target);n.closest("a",this.$el).length||n.closest("[data-role=thread-link]",this.$el).length||this.$el.addClass("is-hovered")},endHover:function(){this.$el.removeClass("is-hovered")}});return s.call(h.prototype),r.call(h.prototype),o.call(h.prototype),i.call(h.prototype),h}),define("home/views/CommentCardCollectionView",["home/views/ActivityCardCollectionView","home/views/CommentCardView"],function(e,t){"use strict";var n=e.extend({itemView:t});return n}),define("home/templates/homepageUserModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return" is-allstar"},3:function(e,t,n,i,a){var s;return null!=(s=e.invokePartial(i.userAvatar,t,{name:"userAvatar",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:""},5:function(e,t,n,i,a){return'<a href="/home/settings/profile/" class="avatar avatar__add button-outline text-semibold">\n<span class="icon-plus"></span>'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Avatar",{name:"gettext",hash:{},data:a}))+"\n</a>\n"},7:function(e,t,n,i,a){return'<a href="/home/settings/profile/" class="button button-small button-wide button-outline spacing-left spacing-right">\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Complete your profile",{name:"gettext",hash:{},data:a}))+"\n</a>\n"},9:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression,l=null!=t?t:{};return'<div class="align__item">\n<a href="/by/'+r(o(null!=t?t.username:t,t))+'/" class="link-gray-darker" data-link-name="comment_count">\n'+(null!=(s=n.unless.call(l,n.eq.call(l,null!=t?t.numPosts:t,1,{name:"eq",hash:{},data:a}),{name:"unless",hash:{},fn:e.program(10,a,0),inverse:e.program(12,a,0),data:a}))?s:"")+'</a>\n</div>\n<div class="align__item">\n<a href="/by/'+r(o(null!=t?t.username:t,t))+'/following/" class="link-gray-darker" data-link-name="following_count">\n'+r(n.gettext.call(l,"%(num)s Following",{name:"gettext",hash:{num:n.tag.call(l,"h3",{name:"tag",hash:{text:null!=t?t.numTotalFollowing:t,"class":"text-medium"},data:a})},data:a}))+'\n</a>\n</div>\n<div class="align__item">\n<a href="/by/'+r(o(null!=t?t.username:t,t))+'/followers/" class="link-gray-darker" data-link-name="followers_count">\n'+(null!=(s=n.unless.call(l,n.eq.call(l,null!=t?t.numFollowers:t,1,{name:"eq",hash:{},data:a}),{name:"unless",hash:{},fn:e.program(14,a,0),inverse:e.program(16,a,0),data:a}))?s:"")+"</a>\n</div>\n"},10:function(e,t,n,i,a){var s=null!=t?t:{};return e.escapeExpression(n.gettext.call(s,"%(num)s Comments",{name:"gettext",hash:{num:n.tag.call(s,"h3",{name:"tag",hash:{text:null!=t?t.numPosts:t,"class":"text-medium"},data:a})},data:a}))+"\n"},12:function(e,t,n,i,a){var s=null!=t?t:{};return e.escapeExpression(n.gettext.call(s,"%(num)s Comment",{name:"gettext",hash:{num:n.tag.call(s,"h3",{name:"tag",hash:{text:"1","class":"text-medium"},data:a})},data:a}))+"\n"},14:function(e,t,n,i,a){var s=null!=t?t:{};return e.escapeExpression(n.gettext.call(s,"%(num)s Followers",{name:"gettext",hash:{num:n.tag.call(s,"h3",{name:"tag",hash:{text:null!=t?t.numFollowers:t,"class":"text-medium"},data:a})},data:a}))+"\n"},16:function(e,t,n,i,a){var s=null!=t?t:{};return e.escapeExpression(n.gettext.call(s,"%(num)s Follower",{name:"gettext",hash:{num:n.tag.call(s,"h3",{name:"tag",hash:{text:"1","class":"text-medium"},data:a})},data:a}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<div class="aside-user__header'+(null!=(s=n["if"].call(o,null!=t?t.isPowerContributor:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'">\n<div class="avatar-circle-bg__wrapper">\n<div class="avatar-circle-bg">\n<div class="avatar-circle-bg">\n<div class="avatar-circle-bg">\n<div class="avatar-circle-bg">\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class="aside-user__avatar align align--column">\n'+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.avatar:t)?s.isCustom:s,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.program(5,a,0),data:a}))?s:"")+'</div>\n<div class="aside-user__name">\n'+(null!=(s=e.invokePartial(i.userName,t,{name:"userName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</div>\n<div class="aside-user__body align">\n'+(null!=(s=n["if"].call(o,null!=t?t.promptForProfileCompletion:t,{name:"if",hash:{},fn:e.program(7,a,0),inverse:e.program(9,a,0),data:a}))?s:"")+"</div>\n"},usePartial:!0,useData:!0})}),define("home/views/HomepageUserModuleView",["underscore","backbone-marionette","home/mixins/withAllstarPopover","home/templates/homepageUserModule"],function(e,t,n,i){"use strict";var a=t.ItemView.extend({template:i,className:"aside__wrap",templateHelpers:function(){return{numTotalFollowing:this.model.getNumTotalFollowing(),promptForProfileCompletion:this.shouldPromptForProfileCompletion()}},shouldPromptForProfileCompletion:function(){var t=this.model.get("avatar").isCustom&&e.chain(this.model.attributes).pick(["name","about","url","location"]).every().value();return this.model.registeredToday()&&!t},modelEvents:{"change:numChannelsFollowing":"render"}});return n.call(a.prototype),a}),define("home/templates/homepageCommentsModuleEmptyView",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="post-comments__wrapper">\n<div class="empty-message post-comments">\n<span class="icon-empty-comment text-gray-light icon-huge"></span>\n<p>'+o(n.gettext.call(s,"Follow other %(disqus)s users to see their latest comments appear here.",{name:"gettext",hash:{disqus:"Disqus"},data:a}))+'</p>\n<p><a href="/home/explore/people/">'+o(n.gettext.call(s,"Find interesting users to follow",{name:"gettext",hash:{},data:a}))+"</a></p>\n</div>\n</div>\n"},useData:!0})}),define("home/views/HomepageCommentsModuleEmptyView",["backbone-marionette","home/templates/homepageCommentsModuleEmptyView"],function(e,t){"use strict";var n=e.ItemView.extend({template:t});return n}),define("home/templates/homepageCommentsModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<header class="module-header text-center">\n<div class="module-header__icon">\n<span class="icon icon-latest-comments text-brand"></span>\n</div>\n<div class="module-header__title">\n<h2 class="module-header__heading">'+o(n.gettext.call(s,"Latest Comments",{name:"gettext",hash:{},data:a}))+'</h2>\n<p class="module-header__subheading">'+o(n.gettext.call(s,"Comments by people you follow and replies to you.",{name:"gettext",hash:{},data:a}))+'</p>\n</div>\n</header>\n\n<div data-role="posts" class="module-body"></div>\n\n<footer data-action="switch-tab" data-tab="comments" class="module-footer">\n<a href="/home/comments/" class="nav-lnk -color-muted -flushed">\n<div class="nav-lnk__blk">'+o(n.gettext.call(s,"See All Comments",{name:"gettext",hash:{},data:a}))+'</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</footer>\n'},useData:!0})}),define("home/views/HomepageCommentsModuleView",["backbone-marionette","home/views/ChannelCardPostView","home/views/FetchingView","home/views/HomepageCommentsModuleEmptyView","home/templates/homepageCommentsModule"],function(e,t,n,i,a){"use strict";var s=e.CompositeView.extend({template:a,className:"aside__wrap -padded",emptyView:function(){return new n({className:"spinner-small"})},itemView:t,itemViewContainer:"[data-role=posts]",initialize:function(e){e=e||{},this.commentsPromise=e.commentsPromise},itemViewOptions:function(e,t){return t>2?{className:"hidden"}:void 0},onDomRefresh:function(){if(this.commentsPromise){var e=this;this.commentsPromise.then(function(){0===e.collection.length&&e.createEmptyView()})}},createEmptyView:function(){this._emptyViewCreated||(this.emptyView=i,this.render(),this._emptyViewCreated=!0)}});return s}),define("home/templates/channelsModuleItem",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t){var n;return'<img src="'+e.escapeExpression(e.lambda(null!=(n=null!=t?t.options:t)?n.tile:n,t))+'" class="tile__media border-radius-sm" />\n'},3:function(e,t){return'<div class="tile__overlay">\n<h1 class="tile__name">'+e.escapeExpression(e.lambda(null!=t?t.name:t,t))+'</h1>\n</div>\n<img src="https://media.disquscdn.com/home/blank_tile.png"\nclass="tile__media border-radius-sm" />\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression,l=null!=t?t:{};return'<div class="spacing-bottom-large">\n<a href="/home/channel/'+r(o(null!=t?t.slug:t,t))+'/" class="tile__wrapper -plain link-gray-dark">\n'+(null!=(s=n["if"].call(l,null!=(s=null!=t?t.options:t)?s.tile:s,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+'</a>\n<div class="channels-description -with-button align">\n<p class="align__item spacing-right">'+r(o(null!=(s=null!=t?t.options:t)?s.description:s,t))+'</p>\n<div class="channels-description__button align__item">\n<a class="button button-outline text-medium"\nhref="/home/channel/'+r(o(null!=t?t.slug:t,t))+'/">\n'+r(n.gettext.call(l,"Visit",{name:"gettext",hash:{},data:a}))+"\n</a>\n</div>\n</div>\n</div>\n"},useData:!0})}),define("home/views/ChannelsModuleItemView",["backbone-marionette","home/templates/channelsModuleItem"],function(e,t){"use strict";var n=e.ItemView.extend({template:t});return n}),define("home/templates/channelsModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<div class="module--plain">\n<header class="module-header -no-border">\n'+(null!=(s=e.invokePartial(i.channelsModuleHeader,t,{name:"channelsModuleHeader",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</header>\n<div data-role="channels" class="module-body"></div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/ChannelsModuleView",["backbone-marionette","home/views/FetchingView","home/views/ChannelsModuleItemView","home/templates/channelsModule"],function(e,t,n,i){"use strict";var a=e.CompositeView.extend({template:i,itemView:n,itemViewContainer:"[data-role=channels]",itemViewOptions:function(e){return{model:e.channel||e}},addItemView:function(t,n,i){return i>this.constructor.CHANNELS_MAX-1?void 0:e.CompositeView.prototype.addItemView.call(this,t,n,i)},emptyView:function(){return new t({className:"spinner-small"})}},{CHANNELS_MAX:3});return a}),define("home/templates/channelSuggestion",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s;return null!=(s=e.invokePartial(i.channelAvatarWithDefault,t,{name:"channelAvatarWithDefault",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:""},3:function(e,t,n,i,a){var s;return'<img class="forum-favicon" src="'+e.escapeExpression(e.lambda(null!=t?t.favicon:t,t))+'" alt="'+(null!=(s=e.invokePartial(i.forumName,t,{name:"forumName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'">\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<div class="recommended__item">\n<a href="/home/channel/'+r(o(null!=t?t.slug:t,t))+'/"\nclass="avatar"\ndata-link-name="channel_avatar"\ndata-channel-slug="'+r(o(null!=t?t.slug:t,t))+'">\n'+(null!=(s=n["if"].call(null!=t?t:{},null!=t?t.channel:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+'</a>\n<h3 class="recommended__name truncate-line">\n<a href="/home/channel/'+r(o(null!=t?t.slug:t,t))+'/"\ndata-link-name="channel_name"\ndata-channel-slug="'+r(o(null!=t?t.slug:t,t))+'">\n\n'+(null!=(s=e.invokePartial(i.forumName,t,{name:"forumName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</a>\n</h3>\n"+(null!=(s=e.invokePartial(i.genericFollowButton,null!=t?t.primaryForum:t,{name:"genericFollowButton",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</div>\n<div class="recommended__reason"><em>'+r(o(null!=(s=null!=t?t.options:t)?s.description:s,t))+"</em></div>\n"},usePartial:!0,useData:!0})}),define("home/views/ChannelSuggestionView",["backbone-marionette","home/mixins/withChannelAvatar","core/mixins/withChannelFollowing","home/templates/channelSuggestion"],function(e,t,n,i){"use strict";var a=e.ItemView.extend({template:i,className:"recommended__item",templateHelpers:function(){return{favicon:this.model.get("options").favicon||this.model.primaryForum.get("favicon").cache}}});return n.call(a.prototype,function(){return this.model}),t.call(a.prototype),a}),define("home/templates/homepageChannelsModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<div>\n<header class="module-header">\n'+(null!=(s=e.invokePartial(i.channelsModuleHeader,t,{name:"channelsModuleHeader",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</header>\n<div data-role="channels" class="module-body"></div>\n'+(null!=(s=e.invokePartial(i.channelsModuleMoreFooter,t,{name:"channelsModuleMoreFooter",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n"},usePartial:!0,useData:!0})}),define("home/views/HomepageChannelsModuleView",["underscore","core/strings","home/views/ChannelsModuleView","home/views/ChannelSuggestionView","home/templates/homepageChannelsModule"],function(e,t,n,i,a){"use strict";var s=t.get,o=n.extend({className:"aside__wrap -padded",template:a,templateHelpers:{moduleTitle:s("Lively Channels")},itemView:i,itemViewOptions:function(t,i){var a=n.prototype.itemViewOptions;return e.isFunction(a)&&(a=a.call(this,t,i)),e.defaults({className:"recommended-wrap"},a)}});return o}),define("home/templates/homepageOnboardingModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Discussions from channels and people you follow will appear here in your feed.",{name:"gettext",hash:{},data:a}))+"\n"},3:function(e,t,n,i,a){var s,o=null!=t?t:{};return null!=(s=n["if"].call(o,n.eq.call(o,null!=t?t.numShown:t,1,{name:"eq",hash:{},data:a}),{name:"if",hash:{},fn:e.program(4,a,0),inverse:e.program(6,a,0),data:a}))?s:""},4:function(e,t,n,i,a){var s=null!=t?t:{};return"\n"+e.escapeExpression(n.gettext.call(s,"Voila, discussions from %(channel0)s now appear here in your feed.",{name:"gettext",hash:{channel0:n.getPartial.call(s,"strongTag",null!=t?t.channel0:t,{name:"getPartial",hash:{},data:a})},data:a}))+"\n"},6:function(e,t,n,i,a){var s,o=null!=t?t:{};return null!=(s=n["if"].call(o,n.eq.call(o,null!=t?t.numShown:t,2,{name:"eq",hash:{},data:a}),{name:"if",hash:{},fn:e.program(7,a,0),inverse:e.program(12,a,0),data:a}))?s:""},7:function(e,t,n,i,a){var s;return"\n"+(null!=(s=n.unless.call(null!=t?t:{},null!=t?t.overflowCount:t,{name:"unless",hash:{},fn:e.program(8,a,0),inverse:e.program(10,a,0),data:a}))?s:"")},8:function(e,t,n,i,a){var s=null!=t?t:{};return e.escapeExpression(n.gettext.call(s,"Voila, discussions from %(channel0)s and %(channel1)s now appear here in your feed",{name:"gettext",hash:{channel1:n.getPartial.call(s,"strongTag",null!=t?t.channel1:t,{name:"getPartial",hash:{},data:a}),channel0:n.getPartial.call(s,"strongTag",null!=t?t.channel0:t,{name:"getPartial",hash:{},data:a})},data:a}))+"\n"},10:function(e,t,n,i,a){var s=null!=t?t:{};return e.escapeExpression(n.gettext.call(s,"Voila, discussions from %(channel0)s, %(channel1)s, and %(overflowText)s now appear here in your feed",{name:"gettext",hash:{overflowText:n.getPartial.call(s,"strongTag",n.gettext.call(s,"%(overflowCount)s more channels",{name:"gettext",hash:{overflowCount:null!=t?t.overflowCount:t},data:a}),{name:"getPartial",hash:{},data:a}),channel1:n.getPartial.call(s,"strongTag",null!=t?t.channel1:t,{name:"getPartial",hash:{},data:a}),channel0:n.getPartial.call(s,"strongTag",null!=t?t.channel0:t,{name:"getPartial",hash:{},data:a})},data:a}))+"\n"},12:function(e,t,n,i,a){var s,o=null!=t?t:{};return null!=(s=n["if"].call(o,n.eq.call(o,null!=t?t.numShown:t,3,{name:"eq",hash:{},data:a}),{name:"if",hash:{},fn:e.program(13,a,0),inverse:e.noop,data:a}))?s:""},13:function(e,t,n,i,a){var s=null!=t?t:{};return"\n"+e.escapeExpression(n.gettext.call(s,"Voila, discussions from %(channel0)s, %(channel1)s, and %(channel2)s now appear here in your feed",{name:"gettext",hash:{channel2:n.getPartial.call(s,"strongTag",null!=t?t.channel2:t,{name:"getPartial",hash:{},data:a}),channel1:n.getPartial.call(s,"strongTag",null!=t?t.channel1:t,{name:"getPartial",hash:{},data:a}),channel0:n.getPartial.call(s,"strongTag",null!=t?t.channel0:t,{name:"getPartial",hash:{},data:a})},data:a}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div class="alert alert--brand padding-double">\n<p class="spacing-bottom">\n'+(null!=(s=n["if"].call(o,n.eq.call(o,null!=t?t.numShown:t,0,{name:"eq",hash:{},data:a}),{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+'\n</p>\n\n<button data-role="hide-onboarding" class="button button-outline -border-light text-medium spacing-right-small">'+r(n.gettext.call(o,"Got it!",{name:"gettext",hash:{},data:a}))+'</button>\n\n<a data-role="complete-onboarding" href="/home/explore/" class="button button-inverted text-medium link-inverted"><span class="hidden-md">'+r(n.gettext.call(o,"Explore more channels and discussions",{name:"gettext",hash:{},data:a}))+'</span><span class="visible-md">'+r(n.gettext.call(o,"Explore more discussions",{name:"gettext",hash:{},data:a}))+"</span></a>\n</div>\n"},useData:!0})}),define("home/views/HomepageOnboardingModuleView",["underscore","backbone-marionette","home/models/Session","home/mixins/withOnboarding","home/templates/homepageOnboardingModule"],function(e,t,n,i,a){"use strict";var s=t.ItemView.extend({
template:a,templateHelpers:function(){var t=this.getChannelsFollowing(),n=this.constructor.MAX_CHANNELS_SHOWN>=t.length?t.length:this.constructor.MAX_CHANNELS_SHOWN-1,i=Math.max(t.length-n,0),a=e.chain(t).first(n).map(function(e,t){return["channel"+t,e.get("name")]}).object().value(),s=e.extend({numShown:n,overflowCount:i},a);return s},events:{"click [data-role=complete-onboarding]":"markOnboardingComplete","click [data-role=hide-onboarding]":"hideOnboarding"},initialize:function(){this.session=n.get(),this.session.loadPromise().then(e.bind(function(){var e=this.session.getUserProfile().forumsFollowing;this.listenTo(e.items,"add remove reset",this.render)},this))},markOnboardingComplete:function(){var e=this.session.user;e.updateFlags({homeFeedOnboardingComplete:!0})},hideOnboarding:function(){this.markOnboardingComplete(),this.trigger("hideOnboarding")}},{MAX_CHANNELS_SHOWN:3});return i.call(s.prototype),s}),define("home/templates/moderatedForumsModuleItem",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<div class="recommended-wrap">\n<div data-role="recommended-object">\n<div class="recommended__item">\n'+(null!=(s=e.invokePartial(i.forumAvatarLink,t,{name:"forumAvatarLink",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<h3 class="recommended__name truncate-line spacing-top-narrow">\n<a href="/home/forums/'+r(o(null!=t?t.id:t,t))+'">'+r(o(null!=t?t.name:t,t))+'</a>\n</h3>\n<a href="https://'+r(o(null!=t?t.id:t,t))+'.disqus.com/admin/" class="button button-outline button-small pull-right">'+r(n.gettext.call(null!=t?t:{},"Manage",{name:"gettext",hash:{},data:a}))+"</a>\n</div>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ModeratedForumsModuleItemView",["backbone-marionette","home/templates/moderatedForumsModuleItem"],function(e,t){"use strict";var n=e.ItemView.extend({template:t,initialize:function(){this.model.shouldFetch()&&this.model.fetch(),this.listenTo(this.model,"sync",this.render)}});return n}),define("home/templates/moderatedForumsModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){return'<footer class="module-footer">\n<a href="/admin/" class="nav-lnk -color-muted -flushed">\n<div class="nav-lnk__blk">'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Manage All",{name:"gettext",hash:{},data:a}))+'</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</footer>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div class="module--aside">\n<div class="aside__wrap -padded">\n<header class="module-header -has-button">\n<div class="module-header__title">\n<h2 class="module-header__heading pull-left spacing-top-narrow">\n'+r(n.gettext.call(o,"Your Sites",{name:"gettext",hash:{},data:a}))+'\n<span class="text-gray">('+r(e.lambda(null!=t?t.moderatedForumsCount:t,t))+')</span>\n</h2>\n<a href="/admin/" class="button button-fill--brand button-small pull-right module-header__button">'+r(n.gettext.call(o,"View Admin",{name:"gettext",hash:{},data:a}))+'</a>\n</div>\n</header>\n<div data-role="moderated-forums" class="module-body"></div>\n'+(null!=(s=n.unless.call(o,n.eq.call(o,null!=t?t.moderatedForumsCount:t,1,{name:"eq",hash:{},data:a}),{name:"unless",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+"</div>\n</div>\n"},useData:!0})}),define("home/views/ModeratedForumsModuleView",["backbone-marionette","home/views/FetchingView","home/views/ModeratedForumsModuleItemView","home/templates/moderatedForumsModule"],function(e,t,n,i){"use strict";var a=e.CompositeView.extend({template:i,itemView:n,itemViewContainer:"[data-role=moderated-forums]",templateHelpers:function(){return{moderatedForumsCount:this.collection.length}},addItemView:function(t,n,i){return i>this.constructor.FORUMS_MAX-1?void 0:e.CompositeView.prototype.addItemView.call(this,t,n,i)},emptyView:function(){return new t({className:"spinner-small"})}},{FORUMS_MAX:3});return a}),define("home/templates/followingCard",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t){var n,i=e.lambda,a=e.escapeExpression;return'<a class="aside-list__blk align text-gray"\nhref="/home/channel/'+a(i(null!=(n=null!=t?t.channelInfo:t)?n.slug:n,t))+'/"\ndata-link-name="channel-name"\ndata-channel-slug="'+a(i(null!=(n=null!=t?t.channelInfo:t)?n.slug:n,t))+'">\n'},3:function(e,t){var n=e.lambda,i=e.escapeExpression;return'<a class="aside-list__blk align text-gray"\nhref="/home/forum/'+i(n(null!=t?t.id:t,t))+'/"\ndata-link-name="forum_name"\ndata-forum-pk="'+i(n(null!=t?t.pk:t,t))+'">\n'},5:function(e,t,n,i,a){var s;return null!=(s=e.invokePartial(i.channelAvatarWithDefault,t,{name:"channelAvatarWithDefault",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:""},7:function(e,t,n,i,a){var s;return null!=(s=e.invokePartial(i.forumAvatar,t,{name:"forumAvatar",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:""},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return(null!=(s=n["if"].call(o,null!=t?t.channelInfo:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+'\n<div class="align__item avatar">\n'+(null!=(s=n["if"].call(o,null!=t?t.channel:t,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.program(7,a,0),data:a}))?s:"")+'</div>\n<div class="align__item aside-list__name">\n<strong>'+(null!=(s=e.invokePartial(i.forumName,t,{name:"forumName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</strong>\n</div>\n</a>\n"},usePartial:!0,useData:!0})}),define("home/views/FollowingCardView",["backbone-marionette","home/mixins/withChannelAvatar","home/templates/followingCard"],function(e,t,n){"use strict";var i=e.ItemView.extend({template:n,className:"aside-list__item"});return t.call(i.prototype,function(){return this.model.channel}),i}),define("home/templates/homepageFollowingModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="aside__subheadings">\n<h2 class="text-subheading">'+o(n.gettext.call(s,"Following",{name:"gettext",hash:{},data:a}))+'</h2>\n</div>\n<div class="aside__wrap">\n<div data-role="forums"></div>\n<a href="/home/channels/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">'+o(n.gettext.call(s,"See All Following",{name:"gettext",hash:{},data:a}))+'</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</div>\n'},useData:!0})}),define("home/views/HomepageFollowingModuleView",["backbone-marionette","home/models/Session","home/views/FollowingCardView","home/templates/homepageFollowingModule"],function(e,t,n,i){"use strict";var a=e.CompositeView.extend({template:i,templateHelpers:function(){return{sessionUsername:t.fromCookie().username}},itemViewContainer:"[data-role=forums]",itemView:n,addItemView:function(t,n,i){return i>4?void 0:e.CompositeView.prototype.addItemView.call(this,t,n,i)},initialize:function(){this.session=t.get()}});return a}),define("home/templates/homepageFeedEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s=e.escapeExpression;return'<div class="card--empty text-center">\n<h2>'+s(e.lambda(null!=t?t.feedMessage:t,t))+'</h2>\n<p class="text-gray spacing-top-small">'+s(n.gettext.call(null!=t?t:{},"Until you do that, here are the latest %(number)s trending discussions on %(disqus)s.",{name:"gettext",hash:{disqus:"Disqus",number:null!=t?t.numItemsShown:t},data:a}))+"\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return(null!=(s=n["if"].call(o,null!=t?t.isLoggedIn:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'<div data-role="items"></div>\n<div class="spacing-bottom spacing-top">\n<a href="/home/explore/" class="button button-fill--brand button-padding-taller button-wide text-medium">\n'+e.escapeExpression(n.gettext.call(o,"Explore channels to follow",{name:"gettext",hash:{},data:a}))+"\n</a>\n</div>\n"},useData:!0})}),define("home/views/HomepageFeedEmptyView",["backbone-marionette","home/mixins/withSubviews","home/models/Session","home/views/ChannelCardCollectionView","home/templates/homepageFeedEmpty","home/templates/spinner"],function(e,t,n,i,a,s){"use strict";var o=e.ItemView.extend({initialize:function(e){this.session=n.get(),this.maxItemsText=e.maxItemsText,this.model.ensureFetched().then(this.render)},getTemplate:function(){return this.model.get("fetched")?a:s},templateHelpers:function(){return{numItemsShown:this.maxItemsText,feedMessage:this.feedMessage,isLoggedIn:this.session.isLoggedIn()}},regions:{feedRegion:"[data-role=items]"},onRender:function(){this.activateRegion(this.feedRegion,this.createFeedView)},createFeedView:function(){return new i({model:this.model,collection:this.collection,emptyView:null})}});return t.call(o.prototype),o}),define("home/views/HomepageRecommendedFeedEmptyView",["core/strings","home/views/HomepageFeedEmptyView"],function(e,t){"use strict";var n=e.get,i=t.extend({feedMessage:n("Follow channels and people to see their recommended discussions here.")});return i}),define("home/views/HomepageCommentsFeedEmptyView",["core/strings","home/views/HomepageFeedEmptyView"],function(e,t){"use strict";var n=e.get,i=t.extend({feedMessage:n("Follow people to see their latest comments here.")});return i}),define("home/views/HomepageDiscussionsFeedEmptyView",["core/strings","home/views/HomepageFeedEmptyView"],function(e,t){"use strict";var n=e.get,i=t.extend({feedMessage:n("Follow channels and people to see their latest discussions here.")});return i}),define("home/templates/motdAlert",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.persistentAlert:t,{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.program(4,a,0),data:a}))?s:""},2:function(e,t){var n=e.lambda,i=e.escapeExpression;return'<div class="alert--success">\n<div class="padding-default">\n<div class="text-center spacing-narrow">\n<span class="icon icon-megaphone icon__position spacing-right-small"></span>\n<strong class="spacing-right">'+i(n(null!=t?t.motdTitle:t,t))+'</strong>\n<a href="'+i(n(null!=t?t.motdLink:t,t))+'" class="button button-inverted -hover-opaque text-medium">Learn more &raquo;</a>\n</div>\n</div>\n</div>\n'},4:function(e,t){var n=e.lambda,i=e.escapeExpression;return'<div class="alert--brand">\n<div class="padding-default">\n<div class="text-center spacing-narrow">\n<span class="icon icon-megaphone icon__position spacing-right-small"></span>\n<strong class="spacing-right">'+i(n(null!=t?t.motdTitle:t,t))+'</strong>\n<a href="'+i(n(null!=t?t.motdLink:t,t))+'" class="button button-inverted -hover-opaque text-medium">Learn more &raquo;</a>\n<button class="link-inverted spacing-left" data-action="close-alert">\n<span class="icon-cancel"></span>\n</button>\n</div>\n</div>\n</div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return null!=(s=n.unless.call(null!=t?t:{},null!=t?t.hideAlert:t,{name:"unless",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:""},useData:!0})}),define("home/views/MotdAlertView",["backbone-marionette","core/utils/storage","remote/config","home/templates/motdAlert"],function(e,t,n,i){"use strict";var a="motd",s=n.lounge||{},o=s.motd_home_title,r=s.motd_home_url,l=t.get(a)||{},c=e.ItemView.extend({template:i,className:"motd-alert__wrapper",templateHelpers:function(){var e=l[r];return{motdTitle:o,motdLink:r,hideAlert:e&&!this.persistent?e:!1,persistentAlert:this.persistent}},events:{"click [data-action=close-alert]":"closeAlert"},initialize:function(e){this.persistent=e&&e.persistent},closeAlert:function(){l[r]=!0,t.set(a,l),this.$el.remove()}});return c}),define("core/mixins/withEmailVerifyLink",["jquery","underscore","core/config","core/utils"],function(e,t,n,i){"use strict";var a=i.preventDefaultHandler,s={events:{"click [data-action=verify-email]":"showVerifyEmailPopup"},showVerifyEmailPopup:a(function(t){var a=e(t.target).attr("data-forum"),s=n.urls.verifyEmail;return a&&(s=s+"?f="+a),i.openWindow(s,"_blank",{width:460,height:355})})};return function(){this.events=t.defaults({},this.events,s.events),t.extend(this,t.pick(s,"showVerifyEmailPopup"))}}),define("home/templates/emailVerificationAlert",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div class="alert alert--warning text-medium">\n'+r(n.gettext.call(o,"The email address for your account %(email)s still needs to be verified.",{name:"gettext",hash:{email:n.tag.call(o,"strong",{name:"tag",hash:{text:null!=(s=null!=t?t.user:t)?s.email:s},data:a})},data:a}))+'\n<a href="/verify" data-action="verify-email">'+r(n.gettext.call(o,"Resend confirmation email »",{name:"gettext",hash:{},data:a}))+"</a>\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.shouldShowEmailVerificationAlert:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:""},useData:!0})}),define("home/views/EmailVerificationAlertView",["underscore","backbone-marionette","core/mixins/withEmailVerifyLink","home/models/Session","home/templates/emailVerificationAlert"],function(e,t,n,i,a){"use strict";var s=t.ItemView.extend({template:a,templateHelpers:function(){return{user:this.session.user.toJSON(),shouldShowEmailVerificationAlert:this.shouldShowEmailVerificationAlert()}},initialize:function(){this.session=i.get(),this.session.loadPromise().then(e.bind(this.render,this))},shouldShowEmailVerificationAlert:function(){return this.session.isLoggedIn()&&!this.session.user.get("isVerified")&&this.session.user.get("homeFeedOnboardingComplete")}});return n.call(s.prototype),s}),define("home/mixins/withEmailVerificationAlert",["underscore","core/advice","home/views/EmailVerificationAlertView"],function(e,t,n){"use strict";return function(){t.withAdvice.call(this),this.before("onDomRefresh",function(){this.activateRegion?this.activateRegion(this.emailVerificationAlertRegion,function(){return new n}):this.emailVerificationAlertRegion.show(new n)}),this.regions=e.defaults({emailVerificationAlertRegion:"[data-role=email-verification-alert]"},this.regions)}}),define("core/utils/url/parseQueryString",["core/utils/collection/each"],function(e){"use strict";return function(t){void 0===t&&(t=window.location.search);var n={};return e(t.substr(1).split("&"),function(e){var t=e.split("=").map(function(e){return decodeURIComponent(e.replace(/\+/g,"%20"))});t[0]&&(n[t[0]]=t[1])}),n}}),define("home/models/common/BaseSettings",["underscore","backbone","home/models/Session"],function(e,t,n){"use strict";var i=t.Model.extend({shouldFetch:function(){return!this.fetched&&!this.fetching},ensureFetched:function(){if(this.shouldFetch()){var e=this;e.fetching=!0,e.fetch({success:function(){e.fetched=!0,e.fetching=!1},error:function(){e.fetched=!1,e.fetching=!1}})}},toFormData:function(t){return t=t||this.toJSON(),e.reduce(t,function(t,n,i){return t.append(i,e.isString(n)?n.trim():n),t},new window.FormData)},useMultiPartForm:!1,save:function(e,n){return e=e||this.toJSON(),n=n||{},this.useMultiPartForm&&(n.data=this.toFormData(e),n.contentType=!1),n.beforeSend=this.setCSRFHeader,t.Model.prototype.save.call(this,e,n)},setCSRFHeader:function(e,t){var i=n.get().getCsrfToken();/^(GET|HEAD|OPTIONS|TRACE)$/.test(t.type)||e.setRequestHeader("X-CSRFToken",i)},destroy:function(e){return e=e||{},e.beforeSend=this.setCSRFHeader,t.Model.prototype.destroy.call(this,e)}});return i}),define("home/models/SettingsSocialAccount",["core/config","home/models/common/BaseSettings"],function(e,t){"use strict";var n=t.extend({url:function(){return e.urls.oauthStatus(this.id)},destroyUrl:function(){return e.urls.oauthDestroy(this.id)},destroy:function(e){return e=e||{},e.method="POST",e.url=this.destroyUrl(),t.prototype.destroy.call(this,e)},toJSON:function(){return{display_name:this.get("display_name"),url:this.get("url")}}});return n}),define("home/collections/SettingsSocialAccountCollection",["backbone","underscore","home/models/SettingsSocialAccount"],function(e,t,n){"use strict";var i=e.Collection.extend({model:n,toJSON:function(){return t.reduce(this.models,function(e,t){return e[t.id]=t.toJSON(),e},{})}});return i}),define("home/models/SettingsAccount",["underscore","core/config","home/collections/SettingsSocialAccountCollection","home/models/common/BaseSettings","core/UniqueModel"],function(e,t,n,i,a){"use strict";var s=i.extend({url:t.urls.apiSettings+"account/",initialize:function(){this.socialAccounts=new n},parse:function(t){var n=e.map(t.social_accounts,function(e,t){return e.id=t,e});return this.socialAccounts.reset(n),delete t.social_accounts,i.prototype.parse.call(this,t)},toJSON:function(){return{username:this.get("username"),email:this.get("email"),password:this.get("password"),old_password:this.get("old_password"),email_verified:this.get("email_verified")}}});return a.addType("SettingsAccount",s),s}),define("home/mixins/asModal",["underscore","home/utils/confirmModal"],function(e,t){"use strict";var n={initialize:function(t,n){t.apply(this,e.rest(arguments)),this.modal=this.getModal(n)},onRender:function(t){t&&t.apply(this,e.rest(arguments)),this.modal.find("[data-role=content]").append(this.$el)},showModal:function(e){e&&this.modal.modal(e),this.modal.modal("show")},closeModal:function(){this.remove(),this.modal.modal("hide")}},i=function(i){this.initialize=e.wrap(this.initialize,n.initialize),this.onRender=e.wrap(this.onRender,n.onRender),this.getModal=t.getModal,this.showModal=e.partial(n.showModal,i),this.closeModal=n.closeModal};return i}),define("home/templates/emailConfirmedModalContent",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return"is-error"},3:function(e,t,n,i,a){var s;return null!=(s=n.each.call(null!=t?t:{},null!=(s=null!=t?t.errors:t)?s.username:s,{name:"each",hash:{},fn:e.program(4,a,0),inverse:e.noop,data:a}))?s:""},4:function(e,t){return'<p class="fieldset__description fieldset__description--error text-small">'+e.escapeExpression(e.lambda(t,t))+"</p>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression,l=e.lambda;return'<form>\n<div class="form__header">\n<h1 class="form-heading">\n<span class="icon-checkmark text-success icon__position spacing-right-small"></span>\n'+r(n.gettext.call(o,"Email Verified",{name:"gettext",hash:{},data:a}))+'\n</h1>\n<p class="form-description text-gray text-medium">'+r(n.gettext.call(o,"Now choose a unique username before someone else grabs it!",{name:"gettext",hash:{},data:a}))+'</p>\n</div>\n<div class="form__content">\n<div class="fieldset" role="group">\n<label for="settings-username" class="fieldset__label align__item text-gray">'+r(n.gettext.call(o,"Username",{name:"gettext",hash:{},data:a}))+'</label>\n<div class="fieldset__block align__item '+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.errors:t)?s.username:s,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'">\n<div class="fieldset__block--text">\n<input type="text" id="settings-username" class="input--textbox" name="username" value="'+r(l(null!=t?t.username:t,t))+'">\n</div>\n'+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.errors:t)?s.username:s,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+'<p class="fieldset__description text-gray text-small">\nhttp://disqus.com/by/<strong data-role="username-placeholder">'+r(l(null!=t?t.username:t,t))+"</strong>\n<br/>\n"+r(n.gettext.call(o,"This will be used as your profile address and for logging in.",{name:"gettext",hash:{},data:a}))+'\n</p>\n</div>\n</div>\n</div>\n<div class="form__footer">\n<div class="fieldset" role="group">\n<div class="fieldset__label" data-role="save-status"><div class="spinner-small"></div><div class="icon-checkmark"></div></div>\n<div class="fieldset__block"><button class="button button-fill--brand button-padding-wider text-medium" data-role="save-btn">'+r(n.gettext.call(o,"Save",{name:"gettext",hash:{},data:a}))+"</button></div>\n</div>\n</div>\n</form>\n"},useData:!0})}),define("home/templates/settingsAccountForm",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return"is-error"},3:function(e,t,n,i,a){var s;return null!=(s=n.each.call(null!=t?t:{},null!=(s=null!=t?t.errors:t)?s.username:s,{name:"each",hash:{},fn:e.program(4,a,0),inverse:e.noop,data:a}))?s:""},4:function(e,t){return'<p class="fieldset__description fieldset__description--error text-small">'+e.escapeExpression(e.lambda(t,t))+"</p>\n"},6:function(e,t,n,i,a){var s;return null!=(s=n.each.call(null!=t?t:{},null!=(s=null!=t?t.errors:t)?s.email:s,{name:"each",hash:{},fn:e.program(4,a,0),inverse:e.noop,data:a}))?s:""},8:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<p class="fieldset__description fieldset__description--pending text-small">\n'+o(n.gettext.call(s,"Your email address hasn't been verified yet. Please request a new verification email, if you haven't yet received one.",{name:"gettext",hash:{},data:a}))+'\n<a href="/verify" data-action="verify-email">'+o(n.gettext.call(s,"Request »",{name:"gettext",hash:{},data:a}))+"</a>\n</p>\n"},10:function(e,t,n,i,a){return'<p class="fieldset__description text-gray text-small">\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Changing your email requires you to verify it. Just click on the big button in the email we send to the new email address.",{name:"gettext",hash:{},data:a}))+"\n</p>\n"},12:function(e,t,n,i,a){var s;return null!=(s=n.each.call(null!=t?t:{},null!=(s=null!=t?t.errors:t)?s.__all__:s,{name:"each",hash:{},fn:e.program(4,a,0),inverse:e.noop,data:a}))?s:""},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression,l=e.lambda;return'<form class="form">\n<div class="form__header--mobile visible-md">\n<a href="/home/settings/" class="form__header--mobile-back"><span class="icon-left-bracket"></span></a>\n<h2>'+r(n.gettext.call(o,"Account",{name:"gettext",hash:{},data:a}))+'</h2>\n</div>\n<div class="form__header">\n<h1 class="form-heading hidden-md">'+r(n.gettext.call(o,"Account",{name:"gettext",hash:{},data:a}))+'</h1>\n<p class="form-description text-gray text-medium">'+r(n.gettext.call(o,"Change your basic account information.",{name:"gettext",hash:{},data:a}))+'</p>\n</div>\n<div class="form__content">\n<div class="fieldset" role="group">\n<label for="settings-username" class="fieldset__label align__item text-gray">'+r(n.gettext.call(o,"Username",{name:"gettext",hash:{},data:a}))+'</label>\n<div class="fieldset__block align__item '+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.errors:t)?s.username:s,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'">\n<div class="fieldset__block--text">\n<input type="text" id="settings-username" class="input--textbox" name="username" value="'+r(l(null!=t?t.username:t,t))+'">\n</div>\n'+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.errors:t)?s.username:s,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+'<p class="fieldset__description text-gray text-small">\nhttp://disqus.com/by/<strong data-role="username-placeholder">'+r(l(null!=t?t.username:t,t))+"</strong>\n<br/>\n"+r(n.gettext.call(o,"This will be used as your profile address and for logging in.",{name:"gettext",hash:{},data:a}))+'\n</p>\n</div>\n</div>\n<div class="fieldset" role="group">\n<label for="settings-email" class="fieldset__label align__item text-gray">'+r(n.gettext.call(o,"Email",{name:"gettext",hash:{},data:a}))+'</label>\n<div class="fieldset__block align__item '+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.errors:t)?s.email:s,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'">\n<div class="fieldset__block--text">\n<input type="text" id="settings-email" class="input--textbox" name="email" value="'+r(l(null!=t?t.email:t,t))+'">\n</div>\n'+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.errors:t)?s.email:s,{name:"if",hash:{},fn:e.program(6,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=n.unless.call(o,null!=t?t.email_verified:t,{name:"unless",hash:{},fn:e.program(8,a,0),inverse:e.program(10,a,0),data:a}))?s:"")+'</div>\n</div>\n<div class="fieldset" role="group">\n<label for="settings-password" class="fieldset__label align__item text-gray">'+r(n.gettext.call(o,"Password",{name:"gettext",hash:{},data:a}))+'</label>\n<div class="fieldset__block align__item">\n<div class="fieldset__block--text">\n<input type="password" placeholder="'+r(n.gettext.call(o,"Current password",{name:"gettext",hash:{},data:a}))+'" id="settings-password" name="old_password" class="input--textbox">\n</div>\n<p class="fieldset__description text-gray text-small">\n'+r(n.gettext.call(o,"Forgot your password?",{name:"gettext",hash:{},data:a}))+' <a href="/forgot" target="_blank">'+r(n.gettext.call(o,"Request a password recovery email.",{name:"gettext",hash:{},data:a}))+'</a>\n</p>\n<div class="fieldset__block--text">\n<input type="password" placeholder="'+r(n.gettext.call(o,"New password",{name:"gettext",hash:{},data:a}))+'" name="password" class="input--textbox">\n</div>\n'+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.errors:t)?s.__all__:s,{name:"if",hash:{},fn:e.program(12,a,0),inverse:e.noop,data:a}))?s:"")+'</div>\n</div>\n</div>\n<div class="form__footer">\n<div class="fieldset" role="group">\n<div class="fieldset__label" data-role="save-status"><div class="spinner-small"></div><div class="icon-checkmark"></div></div>\n<div class="fieldset__block"><button class="button button-fill--brand button-padding-wider text-medium" data-role="save-btn" disabled>'+r(n.gettext.call(o,"Save",{name:"gettext",hash:{},data:a}))+"</button></div>\n</div>\n</div>\n</form>\n"},useData:!0})}),define("home/mixins/withFetchingView",["underscore","home/views/FetchingView"],function(e,t){"use strict";var n=function(){this.render=e.wrap(this.render,function(n){if(this.isDoneFetching())return n.apply(this,e.rest(arguments));var i=new t;return this.$el.html(i.render().el),this})};return n}),define("home/views/common/BaseSettingsView",["underscore","backbone-marionette","home/mixins/withFetchingView"],function(e,t,n){"use strict";var i=t.ItemView.extend({events:{"submit form":"submitHandler","change input[type=checkbox], input[type=radio], select":"changeHandler","keyup input[type=text], input[type=password]":"changeHandler"},initialize:function(){this.model.ensureFetched(),this.listenTo(this.model,"invalid sync",this.render),this.listenTo(this.model,"error",this.handleValidationError)},onRender:function(){this.$form=this.$("form"),this.$saveStatus=this.$("[data-role=save-status]"),this.saveBtn=this.$("[data-role=save-btn]")[0],this.model.set(this.getFormData())},handleValidationError:function(e,t){e.validationError=t.responseJSON,this.render()},isDoneFetching:function(){return this.model.fetched},serializeData:function(){var e=t.ItemView.prototype.serializeData.call(this,arguments);return e.errors=this.model.validationError||{},e},changeHandler:e.debounce(function(){this.updateButtonState(this.model.changedAttributes(this.getFormData()))},100),updateButtonState:function(e){this.saveBtn.disabled=!e},submitHandler:function(t){t.preventDefault(),this.$saveStatus.addClass("is-saving"),this.clearErrors(),this.updateStatus("is-saving"),this.model.set(this.getFormData()),this.model.save().done(e.bind(this.updateStatus,this,"is-saved"))},updateStatus:function(e){this.$saveStatus.removeClass("is-saving is-saved").addClass(e)},getFormData:function(){return e.reduce(this.$form.serializeArray(),function(e,t){return e[t.name]=t.value,e},{})},clearErrors:function(){this.$el.find(".is-error").removeClass("is-error"),this.$el.find(".fieldset__description--error").hide(),this.model.validationError=null}});return n.call(i.prototype),i}),define("home/views/SettingsAccountFormView",["underscore","core/mixins/withEmailVerifyLink","home/templates/settingsAccountForm","home/views/common/BaseSettingsView"],function(e,t,n,i){"use strict";var a=i.extend({template:n,events:e.defaults({"keyup input[name=username]":"handleKeyup"},i.prototype.events),onRender:function(){this.$usernamePlaceholder=this.$("[data-role=username-placeholder]"),i.prototype.onRender.apply(this,arguments)},handleKeyup:e.debounce(function(e){this.$usernamePlaceholder.text(e.currentTarget.value||this.model.get("username"))},300)});return t.call(a.prototype),a}),define("home/views/EmailConfirmedModalContentView",["underscore","core/utils","home/mixins/asModal","home/templates/emailConfirmedModalContent","home/views/SettingsAccountFormView"],function(e,t,n,i,a){"use strict";var s=a.extend({template:i,updateStatus:function(n){if(a.prototype.updateStatus.apply(this,arguments),"is-saved"===n){var i=t.animationEndEvent,s=e.bind(this.closeModal,this);i?this.$saveStatus.one(i,".icon-checkmark",s):e.delay(s,1500)}},getFormData:function(){var t=a.prototype.getFormData.call(this);return e.defaults(t,{password:"",old_password:""})}});return n.call(s.prototype),s}),define("home/mixins/withEmailConfirmedModal",["underscore","core/advice","core/UniqueModel","core/utils/url/parseQueryString","home/models/Session","home/models/SettingsAccount","home/views/EmailConfirmedModalContentView"],function(e,t,n,i,a,s,o){"use strict";var r={showEmailVerifiedModal:function(){if(this.shouldShowEmailVerifiedModal()){var t=a.get();t.loadPromise().then(e.bind(function(){if(!t.isLoggedOut()){var e=new n(s,{id:t.user.id}),i=new o({model:e});i.showModal()}},this))}},shouldShowEmailVerifiedModal:function(){return!!i().email_verified}};return function(){t.withAdvice.call(this),this.showEmailVerifiedModal=r.showEmailVerifiedModal,this.shouldShowEmailVerifiedModal=r.shouldShowEmailVerifiedModal,this.after("initialize",function(){this.showEmailVerifiedModal()})}}),define("home/templates/homepage",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<div data-role="motd-alert"></div>\n<div class="section-contained">\n<div class="layout">\n<div class="layout__main">\n<nav class="layout__nav module__wrapper" data-role="left-rail">\n<div data-role="user-card" class="hidden-lg" data-jester-area="profile_module"></div>\n<div data-role="homepage-nav"></div>\n<div data-role="following-module" class="hidden-lg module__wrapper" data-jester-area="following_module"></div>\n</nav>\n<section class="layout__content homepage-feed">\n<div data-role="onboarding-module" class="homepage-onboard__note"></div>\n<div data-role="email-verification-alert"></div>\n<div data-role="content-area" data-jester-area="feed"></div>\n</section>\n</div>\n<aside data-role="right-rail" class="layout__aside hidden-md module__wrapper">\n<div data-role="create-channel-module" data-jester-area="create-channel-module"></div>\n<div data-role="moderated-forums-module" data-jester-area="moderated-forums-module"></div>\n<div data-role="comments-module" data-jester-area="comments-module" class="module--aside"></div>\n<div data-role="recommend-module" data-recommend-type="channel" data-jester-area="recommended-channels"\nclass="module--aside"></div>\n<div data-role="recommend-module" data-recommend-type="user" data-jester-area="recommended-users"\nclass="module--aside"></div>\n<div data-role="recommend-module" data-recommend-type="forum" data-jester-area="recommended-forums"\nclass="module--aside"></div>\n<div class="text-smaller text-gray">\n'+(null!=(s=e.invokePartial(i.homeFooter,t,{
name:"homeFooter",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n</aside>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/templates/homepageTabs",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="aside__subheadings hidden-lg">\n<h2 class="text-subheading">'+o(n.gettext.call(s,"Your Feed",{name:"gettext",hash:{},data:a}))+'</h2>\n</div>\n<ul class="nav--aside">\n<li data-action="switch-tab" data-tab="popular" class="nav__item">\n<a href="/home/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="nav-lnk__icon icon icon-popular"></span>\n<span class="button__text">'+o(n.gettext.call(s,"Recommended",{name:"gettext",hash:{},data:a}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n<li data-action="switch-tab" data-tab="comments" class="nav__item">\n<a href="/home/comments/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="nav-lnk__icon icon icon-comments"></span>\n<span class="button__text">'+o(n.gettext.call(s,"Latest Comments",{name:"gettext",hash:{},data:a}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n<li data-action="switch-tab" data-tab="discussions" class="nav__item">\n<a href="/home/discussions/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="nav-lnk__icon icon icon-discussions"></span>\n<span class="button__text">'+o(n.gettext.call(s,"Latest Discussions",{name:"gettext",hash:{},data:a}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n<li class="nav__item visible-md">\n<a href="/about/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="nav-lnk__icon icon icon-brand-square"></span>\n<span class="button__text">'+o(n.gettext.call(s,"About %(disqus)s",{name:"gettext",hash:{disqus:"Disqus"},data:a}))+"</span>\n</div>\n</a>\n</li>\n</ul>\n"},useData:!0})}),define("home/views/HomepageView",["jquery","underscore","backbone","backbone-marionette","core/strings","home/models/Session","home/collections/ForumCollection","home/views/common/TabbedView","home/views/RecommendationsModuleView","home/views/ChannelCardCollectionViewWithChannelPromotion","home/views/ChannelFeedFooterView","home/views/common/FetchableCollectionLayout","home/views/CommentCardCollectionView","home/views/HomepageUserModuleView","home/views/HomepageCommentsModuleView","home/views/HomepageChannelsModuleView","home/views/HomepageOnboardingModuleView","home/views/ModeratedForumsModuleView","home/views/HomepageFollowingModuleView","home/views/HomepageRecommendedFeedEmptyView","home/views/HomepageCommentsFeedEmptyView","home/views/HomepageDiscussionsFeedEmptyView","home/views/MotdAlertView","home/mixins/withClickLinkTracking","home/mixins/withEmailVerificationAlert","home/mixins/withEmailConfirmedModal","home/templates/homepage","home/templates/homepageTabs"],function(e,t,n,i,a,s,o,r,l,c,d,u,h,m,p,f,g,v,b,w,x,y,_,k,C,T,S,E){"use strict";var F=a.get,P=r.extend({defaultTab:"popular",template:S,events:t.defaults({"click a[data-link-name]":"trackClickLink"},r.prototype.events),regions:t.defaults({userCardRegion:"[data-role=user-card]",commentsModuleRegion:"[data-role=comments-module]",followingModuleRegion:"[data-role=following-module]",recommendedChannelsModuleRegion:"[data-role=recommend-module][data-recommend-type=channel]",recommendedUsersModuleRegion:"[data-role=recommend-module][data-recommend-type=user]",recommendedForumsModuleRegion:"[data-role=recommend-module][data-recommend-type=forum]",rightRailRegion:"[data-role=right-rail]",leftRailRegion:"[data-role=left-rail]",onboardingModuleRegion:"[data-role=onboarding-module]",homepageTabsRegion:"[data-role=homepage-nav]",moderatedForumsRegion:"[data-role=moderated-forums-module]",motdAlertRegion:"[data-role=motd-alert]"},r.prototype.regions),initialize:function(e){r.prototype.initialize.call(this,e),this.session=s.get(),this.showOnboarding=!1,this.session.loadPromise().then(t.bind(function(){this.showOnboarding=this.session.isLoggedIn()&&!this.session.user.get("homeFeedOnboardingComplete"),this.showOnboarding&&this.toggleOnboardingModules()},this)),this.listenTo(this,"change:activeTab",this.updateTabSpecificModules)},onDomRefresh:function(){r.prototype.onDomRefresh.call(this);var n,i=this.model.interestingChannels.ensureFetched(),a=t.bind(this.showChannelsModule,this);this.listenTo(this.session.user,"unfollowed:curationchannel",this.refreshRecommendedFeed),this.session.loadPromise().then(t.bind(this.showLoggedInModules,this)),n=this.session.userProfile.forumsFollowing.ensureFetched(),n.done(t.bind(this.showFollowingModule,this)),e.when(n,i).done(a),this.toggleOnboardingModules()},showFollowingModule:function(){var e=this.session.userProfile.forumsFollowing;e.items.length&&this.followingModuleRegion.show(new b({collection:e.items}))},showMotdAlertView:function(){this.motdAlertRegion.show(new _)},showLoggedInModules:function(){this.recommendedUsersModuleRegion.show(l.createUserRecommendedModuleView({model:this.model.interestingUsers})),this.userCardRegion.show(new m({model:this.session.user})),this.homepageTabsRegion.show(new i.ItemView({template:E})),this.updateTabClasses(),this.showModeratedForums()},showModeratedForums:function(){this.session.loadModeratedForums().then(t.bind(function(){var e=t.chain(this.session.moderatedForums).reject(function(e){return 0===e.indexOf("channel-")}).sortBy().map(function(e){return{id:e}}).value();t.isEmpty(e)||(this.moderatedForumsRegion.show(new v({collection:new o(e)})),this.showMotdAlertView())},this))},showChannelsModule:function(){var e=this.model.interestingChannels.items.chain().reject(function(e){return e.channel.primaryForum.get("isFollowing")}).pluck("channel").shuffle().value();e.length?this.recommendedChannelsModuleRegion.show(new f({collection:new n.Collection(e)})):(this.model.initializeAndFetchInterestingForums(),this.recommendedForumsModuleRegion.show(l.createForumRecommendedModuleView({model:this.model.interestingForums})))},refreshRecommendedFeed:function(){this.model.popular.fetchItems({reset:!0})},updateTabSpecificModules:function(e){"comments"===e?this.hideRegion(this.commentsModuleRegion):s.isKnownToBeLoggedOut()||(this.commentsModuleRegion.currentView||this.commentsModuleRegion.show(this.createHomepageCommentsModuleView()),this.showRegion(this.commentsModuleRegion))},toggleOnboardingModules:function(){var e=["leftRailRegion","rightRailRegion"];if(t.each(e,function(e){this[e].ensureEl(),this[e].$el.toggleClass("is-disabled",this.showOnboarding)},this),this.showOnboarding){var n=new g;this.listenTo(n,"hideOnboarding",function(){this.showOnboarding=!1,this.toggleOnboardingModules()}),this.onboardingModuleRegion.show(n),this.hideRegion(this.emailVerificationAlertRegion)}else this.onboardingModuleRegion.$el&&this.hideRegion(this.onboardingModuleRegion)},createHomepageCommentsModuleView:function(){var e=new n.Collection([]),t=this;return this.model.commentsPromise.then(function(){e.reset(t.model.comments.items.map(function(e){return e.activities[0].object}))}),new p({collection:e,commentsPromise:this.model.commentsPromise})},hideRegion:function(e){e.$el&&e.$el.addClass("is-hidden")},showRegion:function(e){e.$el&&e.$el.removeClass("is-hidden")},getTrackingSection:function(e){return e},getTabView:function(e){var t={model:this.model.spotlightProfile.topActivities,collection:this.model.spotlightProfile.topActivities.items,maxItemsText:this.model.constructor.MAX_SPOTLIGHT_ITEMS.TEXT};switch(e){case"popular":return new u({model:this.model.popular,collection:this.model.popular.items,fetchableCollectionView:c,fetchableCollectionFooterView:d,infiniteScroll:!0,enableBestOfDisqusCallout:!0,emptyView:w,emptyViewOptions:t});case"comments":return new u({model:this.model.comments,collection:this.model.comments.items,fetchableCollectionView:h,infiniteScroll:!0,emptyView:x,emptyViewOptions:t});case"discussions":return new u({model:this.model.discussions,collection:this.model.discussions.items,fetchableCollectionView:c,infiniteScroll:!0,emptyView:y,emptyViewOptions:t})}},getMetaAttrs:function(){switch(this.activeTab){case"popular":return F("Recommended Discussions");case"comments":return F("Latest Comments");case"discussions":return F("Latest Discussions")}}});return k.call(P.prototype),C.call(P.prototype),T.call(P.prototype),P}),define("core/constants/exploreModuleConstants",["core/strings"],function(e){"use strict";var t=e.get;return{TABS:{TOP:{id:"top",name:t("Trending"),fetchName:"trending"},POPULAR:{id:"popular",name:t("Popular"),fetchName:"popular"},RECENT:{id:"recent",name:t("Newest"),fetchName:"new"},DISCUSSIONS:{id:"discussions",name:t("Discussions")}}}}),define("home/templates/homepageMarketing",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="homepage-marketing">\n<div class="section-contained homepage-marketing__inner">\n<div class="layout">\n<div class="homepage-marketing__consumers">\n<div class="homepage-marketing__content">\n<h1 class="homepage-marketing__headline">'+o(n.gettext.call(s,"Great discussions are happening here.",{name:"gettext",hash:{},data:a}))+'</h1>\n<div class="homepage-marketing__cta spacing-top-double">\n<button class="button button-fill--green-light button-large" data-action="close-marketing">'+o(n.gettext.call(s,"Check it out",{name:"gettext",hash:{},data:a}))+'</button>\n</div>\n</div>\n<object type="image/svg+xml" data="'+o(n.urlfor.call(s,"cdn",{name:"urlfor",hash:{},data:a}))+'/img/homepage/planet_fg.svg" class="svg-planet-fg"></object>\n<object type="image/svg+xml" data="'+o(n.urlfor.call(s,"cdn",{name:"urlfor",hash:{},data:a}))+'/img/homepage/astronaut_bottom.svg" class="svg-astronaut-bottom"></object>\n<object type="image/svg+xml" data="'+o(n.urlfor.call(s,"cdn",{name:"urlfor",hash:{},data:a}))+'/img/homepage/astronaut_top.svg" class="svg-astronaut-top"></object>\n<object type="image/svg+xml" data="'+o(n.urlfor.call(s,"cdn",{name:"urlfor",hash:{},data:a}))+'/img/homepage/bubble.svg" class="svg-bubble svg-link"></object>\n\n<object type="image/svg+xml" data="'+o(n.urlfor.call(s,"cdn",{name:"urlfor",hash:{},data:a}))+'/img/homepage/bubble_item1.svg" class="svg-bubble-item active" data-swap-item></object>\n<object type="image/svg+xml" data="'+o(n.urlfor.call(s,"cdn",{name:"urlfor",hash:{},data:a}))+'/img/homepage/bubble_item2.svg" class="svg-bubble-item" data-swap-item></object>\n<object type="image/svg+xml" data="'+o(n.urlfor.call(s,"cdn",{name:"urlfor",hash:{},data:a}))+'/img/homepage/bubble_item3.svg" class="svg-bubble-item" data-swap-item></object>\n\n<object type="image/svg+xml" data="'+o(n.urlfor.call(s,"cdn",{name:"urlfor",hash:{},data:a}))+'/img/homepage/planet_bg.svg" class="svg-planet-bg"></object>\n<object type="image/svg+xml" data="'+o(n.urlfor.call(s,"cdn",{name:"urlfor",hash:{},data:a}))+'/img/homepage/airhose1.svg" class="svg-airhose1 hidden-sm"></object>\n<object type="image/svg+xml" data="'+o(n.urlfor.call(s,"cdn",{name:"urlfor",hash:{},data:a}))+'/img/homepage/pam.svg" class="svg-pam hidden-sm"></object>\n</div>\n<div class="homepage-marketing__publishers">\n<div class="homepage-marketing__content">\n<h1 class="homepage-marketing__headline">'+o(n.gettext.call(s,"Have a website? This one's for you.",{name:"gettext",hash:{},data:a}))+'</h1>\n<p class="homepage-marketing__description">'+o(n.gettext.call(s,"%(disqus)s offers publishers the best tools in the universe to power discussions, increase engagement, & earn new revenue.",{name:"gettext",hash:{disqus:"Disqus"},data:a}))+'</p>\n<div class="homepage-marketing__cta spacing-top-double">\n<a href="https://publishers.disqus.com/?utm_source=Home-Banner" class="button button-inverted -thick button-large">'+o(n.gettext.call(s,"Learn More",{name:"gettext",hash:{},data:a}))+'</a>\n</div>\n</div>\n<object type="image/svg+xml" data="'+o(n.urlfor.call(s,"cdn",{name:"urlfor",hash:{},data:a}))+'/img/homepage/airhose2.svg" class="svg-airhose2 hidden-lg"></object>\n<object type="image/svg+xml" data="'+o(n.urlfor.call(s,"cdn",{name:"urlfor",hash:{},data:a}))+'/img/homepage/spacestation.svg" class="svg-spacestation"></object>\n</div>\n</div>\n</div>\n</div>\n'},useData:!0})}),define("home/views/HomepageMarketingView",["underscore","jquery","backbone-marionette","core/utils","home/templates/homepageMarketing"],function(e,t,n,i,a){"use strict";var s=i.animationEndEvent,o=i.transitionEndEvent,r=n.ItemView.extend({template:a,events:{"click [data-action=close-marketing]":"close"},initialize:function(){s&&(this.events[s+" [data-swap-item]"]=this.swapItems)},swapItems:function(e){var n=t(e.target),i=n.next("[data-swap-item]");i.length||(i=this.$("[data-swap-item]:first")),n.removeClass("active"),i.addClass("active")},close:function(){var t=e.bind(n.ItemView.prototype.close,this);o?this.$el.on(o,t):t.call(),this.$el.addClass("is-inactive")}});return r}),define("core/views/common/LoginFormView",["underscore","backbone","core/strings"],function(e,t,n){"use strict";var i=n.get,a=t.View.extend({initialize:function(){this.model=new this.User},parseRegistrationErrorResponse:function(e){if(e.responseJSON){var t=e.responseJSON.response;return/Unable to create user/i.test(t)?{email:[i("That email address is already registered with a Disqus account. Log in or enter another email.")]}:/The e-mail address you specified is already in use./i.test(t)?{email:[i("The e-mail address you specified is already in use.")+'<br><a class="link" href="#" data-action="auth:disqus">'+i("Try logging in.")+"</a>"]}:{all:[t]}}},getPassword:function(){var e=this.$el.find("input[name=password]");return e.length?e.val():null},getDisplayName:function(){return this.$el.find("input[name=display_name]").val()},getEmail:function(){return this.$el.find("input[name=email]").val()},disableForm:function(){this.$("[data-role=submit-btn-container]").addClass("is-submitting")},enableForm:function(){this.$("[data-role=submit-btn-container]").removeClass("is-submitting")},handleRegistrationErrorResponse:function(e){this.handleRegistrationError(this.parseRegistrationErrorResponse(e))},registerUser:function(){return this.model.set({display_name:this.$el.find("input[name=display_name]").val(),email:this.$el.find("input[name=email]").val(),password:this.getPassword()}),this.model.isValid()?(this.disableForm(),void this.model.register({error:e.bind(this.handleRegistrationErrorResponse,this),success:e.bind(this.handleRegistrationSuccess,this)}).always(e.bind(this.enableForm,this))):void this.handleRegistrationError(this.model.validationError)}});return a}),define("home/views/common/LoginFormView",["jquery","underscore","core/bus","core/utils","core/views/common/LoginFormView","home/models/Session","home/models/User"],function(e,t,n,i,a,s,o){"use strict";var r=i.preventDefaultHandler,l=a.extend({events:{"click [data-action~=change-step]":"changeStep","click [data-action~=auth]":"handleAuth","submit [data-role=disqus-signup]":"attemptSignup"},User:o,initialize:function(e){a.prototype.initialize.call(this,e),this.listenTo(n.frame,"!auth:success",this.handleRegistrationSuccess),this.session=s.get()},close:function(){this.stopListening(n.frame,"!auth:success"),this.remove()},handleAuth:r(function(t){var n=e(t.target).attr("data-network");this.session.authenticate(n)}),attemptSignup:r(function(){this.clearRegistrationErrors(),this.registerUser()}),clearRegistrationErrors:function(){this.$(".form-attribute-input.is-error").removeClass("is-error")},handleRegistrationError:function(e){this.enableForm(),t.each(e,function(e,t){this.$(".form-attribute-input[data-attribute*="+t+"]").addClass("is-error").find("[data-role=attribute-error]").text(e[0])},this)},handleRegistrationSuccess:function(){window.location.reload()},changeStep:function(t){var n=e(t.target).attr("data-target");this.$("[data-step]").addClass("is-hidden").filter("[data-step="+n+"]").removeClass("is-hidden").find("input").first().focus()},render:function(){var e=this.templateHelpers;t.isFunction(e)&&(e=e.call(this));var n=t.extend({},this.model&&this.model.toJSON(),e);return this.$el.html(this.template(n)),this}});return l}),define("home/templates/anonHomepageOverlay",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="section-contained" id="explore-overlay">\n<div class="anon-homepage__wrapper text-center">\n<h2 class="text-gray-dark spacing-bottom">\n'+o(n.gettext.call(s,"Millions of people are talking about what they love on Disqus. Everything from breaking news to science fiction. Join for free!",{name:"gettext",hash:{},data:a}))+'\n</h2>\n<section data-step="networks" class="spacing-bottom">\n<div class="spacing-top spacing-bottom-narrow align-mid-mobile">\n<button class="button button-padding-taller button-wide button-fill -facebook text-medium align__item--grow spacing-right spacing-narrow"\ndata-action="auth" data-network="facebook">Continue with Facebook</button>\n<button class="button button-padding-taller button-wide button-fill -twitter text-medium align__item--grow spacing-narrow"\ndata-action="auth" data-network="twitter">Continue with Twitter</button>\n</div>\n<div>\n<button class="button button-inline text-medium anon-cta__email" data-action="change-step close-marketing" data-target="disqus-signup">'+o(n.gettext.call(s,"Continue with Email",{name:"gettext",hash:{},data:a}))+'</button> <span class="text-gray hidden-md">&middot;</span>\n<button data-action="close-promotions" class="button button-inline text-medium">'+o(n.gettext.call(s,"Nah, just let me explore first.",{name:"gettext",hash:{},data:a}))+'</button>\n</div>\n</section>\n<section data-step="disqus-signup" class="is-hidden">\n<form class="anon-homepage__form" data-role="disqus-signup">\n<div class="spacing-top spacing-bottom form-attribute-input" data-attribute="display_name">\n<input type="text" class="input--textbox -padded" placeholder="'+o(n.gettext.call(s,"Name",{name:"gettext",hash:{},data:a}))+'" name="display_name">\n<p class="form-message-error spacing-narrow text-small text-left" data-role="attribute-error"></p>\n</div>\n<div class="spacing-bottom form-attribute-input" data-attribute="email">\n<input type="text" class="input--textbox -padded" placeholder="'+o(n.gettext.call(s,"Email",{name:"gettext",hash:{},data:a}))+'" name="email">\n<p class="form-message-error spacing-narrow text-small text-left" data-role="attribute-error"></p>\n</div>\n<div class="spacing-bottom form-attribute-input" data-attribute="password">\n<input type="password" class="input--textbox -padded" placeholder="'+o(n.gettext.call(s,"Password",{name:"gettext",hash:{},data:a}))+'" name="password">\n<p class="form-message-error spacing-narrow text-small text-left" data-role="attribute-error"></p>\n</div>\n<p class="spacing-bottom text-small text-gray">\n'+o(n.gettext.call(s,"By signing up you agree to the %(disqus)s %(rules)s, %(tos)s, and %(privacyPolicy)s.",{name:"gettext",hash:{privacyPolicy:n.tag.call(s,"a",{name:"tag",hash:{"class":"text-semibold link-gray",target:"_blank",href:"https://help.disqus.com/customer/portal/articles/466259-privacy-policy",text:n.gettext.call(s,"Privacy Policy",{name:"gettext",hash:{},data:a})},data:a}),tos:n.tag.call(s,"a",{name:"tag",hash:{"class":"text-semibold link-gray",target:"_blank",href:"https://help.disqus.com/customer/portal/articles/466260-terms-of-service",text:n.gettext.call(s,"Terms of Service",{name:"gettext",hash:{},data:a})},data:a}),rules:n.tag.call(s,"a",{name:"tag",hash:{"class":"text-semibold link-gray",target:"_blank",href:"https://help.disqus.com/customer/portal/articles/1753105-basic-rules-for-disqus-powered-profiles-and-discussions",text:n.gettext.call(s,"Basic Rules",{name:"gettext",hash:{},data:a})},data:a}),disqus:"Disqus"},data:a}))+'\n</p>\n<div class="form-submit spacing-bottom" data-role="submit-btn-container">\n<button class="button button-fill button-wide button-large text-bold">'+o(n.gettext.call(s,"Sign up",{name:"gettext",hash:{},data:a}))+'</button>\n<div class="spinner-small spinner--centered"></div>\n</div>\n</form>\n</section>\n</div>\n</div>\n'},useData:!0})}),define("home/views/AnonHomepageOverlayView",["underscore","core/utils","home/views/common/LoginFormView","home/templates/anonHomepageOverlay"],function(e,t,n,i){"use strict";var a=t.transitionEndEvent,s=n.extend({className:"anon-homepage__overlay",template:i,close:function(){var t=e.bind(n.prototype.close,this);a?this.$el.on(a,t):e.delay(t,2e3),this.$el.addClass("is-inactive")}});return s}),define("home/models/ChannelGroupProfile",["underscore","backbone","core/api","core/UniqueModel","home/models/Channel","home/models/Feed","home/collections/FeedItemCollection","home/collections/ChannelCollection"],function(e,t,n,i,a,s,o,r){"use strict";var l=t.Model.extend({initialize:function(t,i){i=i||{},this.id&&this.id!==this.constructor.ALL_CHANNEL_GROUPS_PROFILE_ID&&this.initializeRelated("channel",i,a),this.rankedChannels=e.chain(this.constructor.RANKINGS).map(function(e){var t=new s({fetchOptions:{name:e.name,channel:this.channel&&this.channel.id,attach:"counters"}},{collectionClass:r,collectionUrl:n.getURL("channels/listRanked")});return[e.id,t]},this).object().value(),this.topActivities=new s(i.topActivitiesOptions,{collectionClass:o,collectionUrl:n.getURL("timelines/ranked"),collectionOptions:{type:"default",target:this.channel&&"channel:"+this.channel.id}})},toJSON:function(){return{channel:this.channel.toJSON()}},ensureFetched:function(){this.ensureFetchedChannel(),this.ensureFetchedTopActivities(),e.each(this.constructor.RANKINGS,function(e){this.ensureFetchedRankedChannels(e.id)})},ensureFetchedChannel:function(){this.channel.ensureFetched()},ensureFetchedTopActivities:function(){this.topActivities.ensureFetched()},ensureFetchedRankedChannels:function(e){var t=this.rankedChannels[e];t&&t.ensureFetched()}},{RANKINGS:[{id:"top",name:"trending"},{id:"popular",name:"popular"},{id:"recent",name:"new"}],ALL_CHANNEL_GROUPS_PROFILE_ID:"all channel groups"});return i.addType("ChannelGroupProfile",l),l}),define("home/views/HideOnEndFooterView",["home/views/common/FetchableCollectionFooterView"],function(e){"use strict";var t=e.extend({endOfItemsTemplate:function(){return""}});return t}),define("home/templates/forumCountCard",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t){return'<p class="channel-follow__description truncate-line text-medium">\n'+e.escapeExpression(e.lambda(null!=t?t.channelDescription:t,t))+"\n</p>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<div class="channel-follow__wrapper">\n<div class="channel-follow__block">\n<div class="align align--middle spacing-bottom-small">\n<a href="/home/channel/'+r(o(null!=(s=null!=t?t.channel:t)?s.slug:s,t))+'/"\nclass="avatar"\ndata-link-name="forum_avatar"\ndata-forum-pk="'+r(o(null!=t?t.pk:t,t))+'">\n'+(null!=(s=e.invokePartial(i.channelAvatarWithDefault,null!=t?t.channel:t,{name:"channelAvatarWithDefault",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</a>\n<p class="text-semibold">\n'+(null!=(s=e.invokePartial(i.channelAwareForumLink,t,{name:"channelAwareForumLink",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</p>\n</div>\n"+(null!=(s=n["if"].call(null!=t?t:{},null!=t?t.channelDescription:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'</div>\n<div class="channel-follow__stats align align--middle" data-role="stats">\n'+(null!=(s=e.invokePartial(i.channelMetadataStats,t,{name:"channelMetadataStats",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ForumCountCardView",["backbone-marionette","core/mixins/withChannelFollowing","home/templates/forumCountCard"],function(e,t,n){"use strict";var i=e.ItemView.extend({className:"card",template:n,templateHelpers:function(){var e=this.model.channel,t=e.primaryForum,n=t.get("numThreads"),i=t.get("numFollowers");return{numThreads:n&&n.toLocaleString(),numFollowers:i&&i.toLocaleString(),channelDescription:e&&e.get("options").description,channel:e&&e.toJSON()}},initialize:function(){this.bindToPrimaryForum()},bindToPrimaryForum:function(){var e=this.model.channel;return e.primaryForum?void this.listenTo(e.primaryForum,"change:numFollowers change:numThreads",this.renderStats):void this.listenToOnce(e,"changeRelated:primaryForum",this.bindToPrimaryForum)},renderStats:function(){this.$("[data-role=discussion-count]").text(this.model.get("numThreads").toLocaleString()),this.$("[data-role=followers-count]").text(this.model.get("numFollowers").toLocaleString())}});return t.call(i.prototype,function(){return this.model.channel}),i}),define("home/mixins/withItemRemovalSkipped",[],function(){"use strict";var e=function(){var e=this.addItemView;this.addItemView=function(t){return this.children.findByModel(t)?void 0:e.apply(this,arguments)};var t=this.removeItemView;this.removeItemView=function(){return this.isShowingNonItemView&&this.isShowingNonItemView()?t.apply(this,arguments):void 0}};return e}),define("home/templates/forumCard",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<a href="/home/channel/'+r(o(null!=(s=null!=t?t.channel:t)?s.slug:s,t))+'/"\nclass="avatar"\ndata-link-name="forum_avatar"\ndata-forum-pk="'+r(o(null!=t?t.pk:t,t))+'">\n'+(null!=(s=e.invokePartial(i.channelAvatarWithDefault,t,{name:"channelAvatarWithDefault",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</a>\n"},3:function(e,t,n,i,a){var s;return null!=(s=e.invokePartial(i.forumAvatarLink,t,{name:"forumAvatarLink",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:""},5:function(){return'<span class="label--default -inline">Creator</span>\n'},7:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.sessionUserIsModerator:t,{name:"if",hash:{},fn:e.program(8,a,0),inverse:e.noop,data:a}))?s:""},8:function(){return'<span class="label--default -inline">Moderator</span>\n'},10:function(e,t){return e.escapeExpression(e.lambda(null!=t?t.channelDescription:t,t))+"\n"},12:function(e,t){var n=e.lambda,i=e.escapeExpression;return'<a href="'+i(n(null!=t?t.url:t,t))+'"\ndata-link-out="'+i(n(null!=t?t.signedUrl:t,t))+'"\nclass="link-gray"\ndata-link-name="forum_description"\ndata-forum-pk="'+i(n(null!=t?t.pk:t,t))+'">'+i(n(null!=t?t.url:t,t))+"</a>\n"},14:function(e,t,n,i,a){var s;return null!=(s=n.if_all.call(null!=t?t:{},null!=t?t.sessionUserIsModerator:t,null!=t?t.channel:t,{name:"if_all",hash:{},fn:e.program(15,a,0),inverse:e.noop,data:a}))?s:""},15:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<button class="button button-outline -border-muted text-error button-small spacing-right-small"\ntitle="'+o(n.gettext.call(s,"Remove Moderator",{name:"gettext",hash:{},data:a}))+'"\ndata-action="remove-moderator">\n<span class="icon-tiny icon-cancel spacing-right-small"></span>'+o(n.gettext.call(s,"Resign",{name:"gettext",hash:{},data:a}))+"\n</button>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<div class="card--user">\n<div class="user-card__block">\n'+(null!=(s=n["if"].call(o,null!=t?t.channel:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+'<div class="forum-info">\n'+(null!=(s=e.invokePartial(i.channelAwareForumLink,t,{name:"channelAwareForumLink",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"\n"+(null!=(s=n["if"].call(o,null!=t?t.sessionUserIsOwner:t,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.program(7,a,0),data:a}))?s:"")+'<p class="description truncate-line text-medium">\n'+(null!=(s=n["if"].call(o,null!=t?t.channelDescription:t,{name:"if",hash:{},fn:e.program(10,a,0),inverse:e.program(12,a,0),data:a}))?s:"")+'</p>\n</div>\n</div>\n<div class="user-card__button btn-follow--mobile">\n'+(null!=(s=n.unless.call(o,null!=t?t.sessionUserIsOwner:t,{name:"unless",hash:{},fn:e.program(14,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=e.invokePartial(i.genericFollowButton,t,{name:"genericFollowButton",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/templates/confirmResignModerator",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="modal-header">\n<h4 class="modal-title">'+o(n.gettext.call(s,"Resign as moderator of %(name)s",{name:"gettext",hash:{name:null!=t?t.name:t},data:a}))+'</h4>\n</div>\n<div class="modal-body">\n<p>'+o(n.gettext.call(s,"You will no longer have moderator priveleges on %(name)s.",{name:"gettext",hash:{name:null!=t?t.name:t},data:a}))+"</p>\n</div>\n"},useData:!0})}),define("home/views/ForumCardView",["underscore","backbone-marionette","home/utils/confirmModal","home/mixins/withChannelAvatar","home/models/Session","home/templates/forumCard","home/templates/confirmResignModerator"],function(e,t,n,i,a,s,o){"use strict";var r=t.ItemView.extend({template:s,templateHelpers:function(){var e=this.model.channel;return{sessionUserIsOwner:this.sessionUserIsOwner,sessionUserIsModerator:this.sessionUserIsModerator,channelDescription:e&&e.get("options").description}},className:"card",events:{"click [data-action=toggle-follow]":"toggleFollow","click [data-action=remove-moderator]":"confirmRemoveModerator"},modelEvents:{"change:isFollowing":"handleFollowedClass"},initialize:function(){this.session=a.get(),this.session.loadPromise().then(e.bind(this.renderIfOwner,this)),this.session.loadModeratedForums().then(e.bind(this.renderModeratorStatus,this))},renderIfOwner:function(){var e=this.model.channel&&this.model.channel.get("owner_id"),t=this.session.user.get("id");this.sessionUserIsOwner=e===t,this.sessionUserIsOwner&&this.render()},renderModeratorStatus:function(){var t=!!this.sessionUserIsModerator,n=this.session.user.get("moderatedForums");this.sessionUserIsModerator=e.contains(n,this.model.get("id")),t!==this.sessionUserIsModerator&&this.render()},handleFollowedClass:function(){this.$("[data-action=toggle-follow]").toggleClass("active",this.model.get("isFollowing"))},toggleFollow:function(e){e&&e.preventDefault(),this.model.toggleFollowed()},confirmRemoveModerator:function(t){t&&t.preventDefault();var i=this.model.channel;n.confirmationPromise(n.TYPES.CONFIRM_CANCEL,o(i.toJSON())).then(e.bind(function(t){t&&this.session.user.moderateChannel(i,!1).then(e.bind(this.renderModeratorStatus,this))},this))}});return i.call(r.prototype,function(){return this.model.channel}),r}),define("home/views/ForumCardCollectionView",["home/mixins/withItemRemovalSkipped","home/mixins/withViewFeedTracking","home/models/Session","home/views/ForumCardView","home/views/common/FetchableCollectionView"],function(e,t,n,i,a){"use strict";var s=a.extend({itemView:i,className:"cards",initialize:function(){a.prototype.initialize.apply(this,arguments);var e=n.get();e.loadPromise().then(function(){e.userProfile.forumsFollowing.ensureFetched()})},itemViewOptions:function(e){return e.primaryForum?{model:e.primaryForum}:void 0},emptyViewOptions:function(){return{model:this.options.user}}});return e.call(s.prototype),t.call(s.prototype),s}),define("home/views/ForumCountCardCollectionView",["home/views/ForumCountCardView","home/views/ForumCardCollectionView"],function(e,t){
"use strict";var n=t.extend({itemView:e});return n}),define("home/templates/channelCardExplore",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return" has-image"},3:function(e,t){var n;return'<div class="card-content__media">\n<div style="background-image: url('+e.escapeExpression(e.lambda(null!=(n=null!=t?t.image:t)?n.src:n,t))+')" class="img-cards"></div>\n</div>\n'},5:function(e,t){var n;return e.escapeExpression(e.lambda(null!=(n=null!=t?t.threadOverrides:t)?n.title:n,t))+"\n"},7:function(e,t){var n;return e.escapeExpression(e.lambda(null!=(n=null!=t?t.thread:t)?n.clean_title:n,t))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression,l=null!=t?t:{};return'<a href="'+r(o(null!=(s=null!=t?t.thread:t)?s.link:s,t))+'">\n<div class="card__header -feed">\n<div class="card__reason -explore align align--middle">\n<strong class="text-gray-darker">'+(null!=(s=e.invokePartial(i.forumName,null!=(s=null!=t?t.thread:t)?s.forum:s,{name:"forumName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</strong>\n<time class="bullet text-gray">'+r(o(null!=t?t.relativeTime:t,t))+'</time>\n</div>\n</div>\n<div class="card__content -default'+(null!=(s=n["if"].call(l,null!=t?t.image:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'">\n'+(null!=(s=n["if"].call(l,null!=t?t.image:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+'<div class="card-content__body">\n<h2 class="discussion-title text-gray-darker" dir="auto">\n'+(null!=(s=n["if"].call(l,null!=(s=null!=t?t.threadOverrides:t)?s.title:s,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.program(7,a,0),data:a}))?s:"")+'</h2>\n\n<div class="card-content__summary text-gray-dark">\n<div class="truncate" data-truncate-lines="3" dir="auto">\n'+r(o(null!=t?t.threadDescription:t,t))+'\n</div>\n</div>\n</div>\n</div>\n<div class="card__footer text-gray-dark text-semibold">\n'+r(n.gettext.call(l,"%(recommendCount)s recommends",{name:"gettext",hash:{recommendCount:null!=(s=null!=t?t.thread:t)?s.likes:s},data:a}))+'\n<span class="bullet"></span>\n'+r(n.gettext.call(l,"%(commentCount)s comments",{name:"gettext",hash:{commentCount:null!=(s=null!=t?t.thread:t)?s.posts:s},data:a}))+"\n</div>\n</a>\n"},usePartial:!0,useData:!0})}),define("home/views/ChannelCardExploreView",["underscore","core/config","home/views/ChannelCardView","home/templates/channelCardExplore"],function(e,t,n,i){"use strict";var a=n.extend({template:i,className:"card-wrap card--channel -link",templateHelpers:function(){var i=n.prototype.templateHelpers;return e.defaults({guestAvatar:t.urls.avatar.generic},e.isFunction(i)?i.call(this):i)}});return a}),define("home/templates/channelGroupFeeds",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a,s,o){var r;return'<ul class="list--inline text-center text-medium border-bottom">\n'+(null!=(r=n.each.call(null!=t?t:{},null!=t?t.tabs:t,{name:"each",hash:{},fn:e.program(2,a,0,s,o),inverse:e.noop,data:a}))?r:"")+"</ul>\n"},2:function(e,t,n,i,a,s,o){var r,l=e.lambda,c=e.escapeExpression;return'<li data-action="switch-tab" data-tab="'+c(l(null!=t?t.id:t,t))+'" class="nav-bar__item">\n<a href="/home/explore/'+(null!=(r=n["if"].call(null!=t?t:{},null!=o[1]?o[1].exploreTab:o[1],{name:"if",hash:{},fn:e.program(3,a,0,s,o),inverse:e.program(5,a,0,s,o),data:a}))?r:"")+"/"+c(l(null!=(r=null!=o[1]?o[1].channel:o[1])?r.slug:r,t))+"/"+c(l(null!=t?t.id:t,t))+'/" class="nav-bar__link">\n<strong>'+c(l(null!=t?t.name:t,t))+"</strong>\n</a>\n</li>\n"},3:function(e,t,n,i,a,s,o){return e.escapeExpression(e.lambda(null!=o[1]?o[1].exploreTab:o[1],t))},5:function(){return"channels"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a,s,o){var r,l=null!=t?t:{};return(null!=(r=n["if"].call(l,n.gt.call(l,null!=t?t.numTabs:t,1,{name:"gt",hash:{},data:a}),{name:"if",hash:{},fn:e.program(1,a,0,s,o),inverse:e.noop,data:a}))?r:"")+'<div data-role="content-area"></div>\n'},useData:!0,useDepths:!0})}),define("home/views/ChannelGroupFeedsView",["core/constants/exploreModuleConstants","home/views/common/FetchableCollectionLayout","home/views/common/TabbedView","home/views/HideOnEndFooterView","home/views/ForumCountCardCollectionView","home/views/ChannelCardExploreView","home/views/ChannelCardCollectionView","home/templates/channelGroupFeeds"],function(e,t,n,i,a,s,o,r){"use strict";var l=n.extend({defaultTab:function(){return this.tabs&&1===this.tabs.length?this.tabs[0].id:"top"},template:r,templateHelpers:function(){return{tabs:this.tabs,numTabs:this.tabs.length,exploreTab:this.exploreTab,channelGroupTab:this.channelGroupTab}},initialize:function(t){t=t||{},n.prototype.initialize.call(this,t),this.tabs=t.tabs||[e.TABS.TOP],this.exploreTab=t.exploreTab,this.channelGroupTab=t.channelGroupTab,this.allChannelGroupsProfile=t.allChannelGroupsProfile},getTabView:function(e){switch(e){case"top":case"popular":case"recent":var n="all"===this.channelGroupTab?this.allChannelGroupsProfile:this.model;n.ensureFetchedRankedChannels(e);var r=n.rankedChannels[e];return new t({fetchableCollectionView:a,fetchableCollectionFooterView:i,model:r,collection:r.items,infiniteScroll:!0});case"discussions":return this.model.ensureFetchedTopActivities(),new t({className:"explore-discussion__wrapper",model:this.model.topActivities,collection:this.model.topActivities.items,itemView:s,channel:this.model.channel,fetchableCollectionView:o,fetchableCollectionFooterView:i,infiniteScroll:!0})}}});return l}),define("home/templates/channelGroupCard",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t){return e.escapeExpression(e.lambda(null!=t?t.exploreTab:t,t))},3:function(){return"channels"},5:function(e,t){var n;return'<div class="channel-cover__logo spacing-bottom-narrow">\n<img src="'+e.escapeExpression(e.lambda(null!=(n=null!=(n=null!=t?t.options:t)?n.titleLogo:n)?n.cache:n,t))+'" class="img-responsive block__item" />\n</div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.lambda,l=e.escapeExpression;return'<a href="/home/explore/'+(null!=(s=n["if"].call(o,null!=t?t.exploreTab:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+"/"+l(r(null!=t?t.slug:t,t))+'/" alt="'+l(r(null!=t?t.name:t,t))+'" class="explore__link link-gray-darker">\n<div class="channel-tab__tile '+l(r(null!=t?t.bannerColor:t,t))+' text-medium">\n'+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.options:t)?s.titleLogo:s,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a}))?s:"")+"<strong>"+l(r(null!=t?t.name:t,t))+"</strong>\n</div>\n</a>\n"},useData:!0})}),define("home/views/ChannelGroupCardView",["backbone-marionette","home/templates/channelGroupCard"],function(e,t){"use strict";var n=e.ItemView.extend({template:t,templateHelpers:function(){var e=this.model.get("bannerColor");return{bannerColor:e?"-"+e:"",exploreTab:this.exploreTab}},initialize:function(e){this.exploreTab=e&&e.exploreTab}});return n}),define("home/templates/channelGroupTabCollection",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=e.escapeExpression;return'<div class="carousel" data-role="tabs-container">\n<div data-action="switch-tab" data-tab="all" class="channel-tab__item">\n<a href="/home/explore/'+s(e.lambda(null!=t?t.exploreTab:t,t))+'/all/" class="explore__link">\n<div class="channel-tab__tile text-medium">\n<strong>'+s(n.gettext.call(null!=t?t:{},"All Categories",{name:"gettext",hash:{},data:a}))+"</strong>\n</div>\n</a>\n</div>\n</div>\n"},useData:!0})}),function(e){"use strict";"function"==typeof define&&define.amd?define("jquery.slick",["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";var t=window.Slick||{};t=function(){function t(t,i){var a,s,o=this;if(o.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:e(t),appendDots:e(t),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(e,t){return'<button type="button" data-role="none">'+(t+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",onBeforeChange:null,onAfterChange:null,onInit:null,onReInit:null,onSetPosition:null,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rtl:!1,slide:"div",slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0},o.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1},e.extend(o,o.initials),o.activeBreakpoint=null,o.animType=null,o.animProp=null,o.breakpoints=[],o.breakpointSettings=[],o.cssTransitions=!1,o.paused=!1,o.positionProp=null,o.respondTo=null,o.shouldClick=!0,o.$slider=e(t),o.$slidesCache=null,o.transformType=null,o.transitionType=null,o.windowWidth=0,o.windowTimer=null,o.options=e.extend({},o.defaults,i),o.currentSlide=o.options.initialSlide,o.originalSettings=o.options,a=o.options.responsive||null,a&&a.length>-1){o.respondTo=o.options.respondTo||"window";for(s in a)a.hasOwnProperty(s)&&(o.breakpoints.push(a[s].breakpoint),o.breakpointSettings[a[s].breakpoint]=a[s].settings);o.breakpoints.sort(function(e,t){return t-e})}o.autoPlay=e.proxy(o.autoPlay,o),o.autoPlayClear=e.proxy(o.autoPlayClear,o),o.changeSlide=e.proxy(o.changeSlide,o),o.clickHandler=e.proxy(o.clickHandler,o),o.selectHandler=e.proxy(o.selectHandler,o),o.setPosition=e.proxy(o.setPosition,o),o.swipeHandler=e.proxy(o.swipeHandler,o),o.dragHandler=e.proxy(o.dragHandler,o),o.keyHandler=e.proxy(o.keyHandler,o),o.autoPlayIterator=e.proxy(o.autoPlayIterator,o),o.instanceUid=n++,o.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,o.init(),o.checkResponsive()}var n=0;return t}(),t.prototype.addSlide=function(t,n,i){var a=this;if("boolean"==typeof n)i=n,n=null;else if(0>n||n>=a.slideCount)return!1;a.unload(),"number"==typeof n?0===n&&0===a.$slides.length?e(t).appendTo(a.$slideTrack):i?e(t).insertBefore(a.$slides.eq(n)):e(t).insertAfter(a.$slides.eq(n)):i===!0?e(t).prependTo(a.$slideTrack):e(t).appendTo(a.$slideTrack),a.$slides=a.$slideTrack.children(this.options.slide),a.$slideTrack.children(this.options.slide).detach(),a.$slideTrack.append(a.$slides),a.$slides.each(function(t,n){e(n).attr("index",t)}),a.$slidesCache=a.$slides,a.reinit()},t.prototype.animateSlide=function(t,n){var i={},a=this;if(1===a.options.slidesToShow&&a.options.adaptiveHeight===!0&&a.options.vertical===!1){var s=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.animate({height:s},a.options.speed)}a.options.rtl===!0&&a.options.vertical===!1&&(t=-t),a.transformsEnabled===!1?a.options.vertical===!1?a.$slideTrack.animate({left:t},a.options.speed,a.options.easing,n):a.$slideTrack.animate({top:t},a.options.speed,a.options.easing,n):a.cssTransitions===!1?e({animStart:a.currentLeft}).animate({animStart:t},{duration:a.options.speed,easing:a.options.easing,step:function(e){a.options.vertical===!1?(i[a.animType]="translate("+e+"px, 0px)",a.$slideTrack.css(i)):(i[a.animType]="translate(0px,"+e+"px)",a.$slideTrack.css(i))},complete:function(){n&&n.call()}}):(a.applyTransition(),i[a.animType]=a.options.vertical===!1?"translate3d("+t+"px, 0px, 0px)":"translate3d(0px,"+t+"px, 0px)",a.$slideTrack.css(i),n&&setTimeout(function(){a.disableTransition(),n.call()},a.options.speed))},t.prototype.asNavFor=function(t){var n=this,i=null!=n.options.asNavFor?e(n.options.asNavFor).getSlick():null;null!=i&&i.slideHandler(t,!0)},t.prototype.applyTransition=function(e){var t=this,n={};n[t.transitionType]=t.options.fade===!1?t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:"opacity "+t.options.speed+"ms "+t.options.cssEase,t.options.fade===!1?t.$slideTrack.css(n):t.$slides.eq(e).css(n)},t.prototype.autoPlay=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer),e.slideCount>e.options.slidesToShow&&e.paused!==!0&&(e.autoPlayTimer=setInterval(e.autoPlayIterator,e.options.autoplaySpeed))},t.prototype.autoPlayClear=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer)},t.prototype.autoPlayIterator=function(){var e=this;e.options.infinite===!1?1===e.direction?(e.currentSlide+1===e.slideCount-1&&(e.direction=0),e.slideHandler(e.currentSlide+e.options.slidesToScroll)):(e.currentSlide-1===0&&(e.direction=1),e.slideHandler(e.currentSlide-e.options.slidesToScroll)):e.slideHandler(e.currentSlide+e.options.slidesToScroll)},t.prototype.buildArrows=function(){var t=this;t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow=e(t.options.prevArrow),t.$nextArrow=e(t.options.nextArrow),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.appendTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),t.options.infinite!==!0&&t.$prevArrow.addClass("slick-disabled"))},t.prototype.buildDots=function(){var t,n,i=this;if(i.options.dots===!0&&i.slideCount>i.options.slidesToShow){for(n='<ul class="'+i.options.dotsClass+'">',t=0;t<=i.getDotCount();t+=1)n+="<li>"+i.options.customPaging.call(this,i,t)+"</li>";n+="</ul>",i.$dots=e(n).appendTo(i.options.appendDots),i.$dots.find("li").first().addClass("slick-active")}},t.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(t.options.slide+":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slides.each(function(t,n){e(n).attr("index",t)}),t.$slidesCache=t.$slides,t.$slider.addClass("slick-slider"),t.$slideTrack=0===t.slideCount?e('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0),t.options.centerMode===!0&&(t.options.slidesToScroll=1),e("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),t.options.accessibility===!0&&t.$list.prop("tabIndex",0),t.setSlideClasses("number"==typeof this.currentSlide?this.currentSlide:0),t.options.draggable===!0&&t.$list.addClass("draggable")},t.prototype.checkResponsive=function(){var t,n,i,a=this,s=a.$slider.width(),o=window.innerWidth||e(window).width();if("window"===a.respondTo?i=o:"slider"===a.respondTo?i=s:"min"===a.respondTo&&(i=Math.min(o,s)),a.originalSettings.responsive&&a.originalSettings.responsive.length>-1&&null!==a.originalSettings.responsive){n=null;for(t in a.breakpoints)a.breakpoints.hasOwnProperty(t)&&a.breakpoints[t]>i&&(n=a.breakpoints[t]);null!==n?null!==a.activeBreakpoint?n!==a.activeBreakpoint&&(a.activeBreakpoint=n,a.options=e.extend({},a.originalSettings,a.breakpointSettings[n]),a.refresh()):(a.activeBreakpoint=n,a.options=e.extend({},a.originalSettings,a.breakpointSettings[n]),a.refresh()):null!==a.activeBreakpoint&&(a.activeBreakpoint=null,a.options=a.originalSettings,a.refresh())}},t.prototype.changeSlide=function(t,n){var i,a,s,o,r,l=this,c=e(t.target);switch(c.is("a")&&t.preventDefault(),s=l.slideCount%l.options.slidesToScroll!==0,i=s?0:(l.slideCount-l.currentSlide)%l.options.slidesToScroll,t.data.message){case"previous":a=0===i?l.options.slidesToScroll:l.options.slidesToShow-i,l.slideCount>l.options.slidesToShow&&l.slideHandler(l.currentSlide-a,!1,n);break;case"next":a=0===i?l.options.slidesToScroll:i,l.slideCount>l.options.slidesToShow&&l.slideHandler(l.currentSlide+a,!1,n);break;case"index":var d=0===t.data.index?0:t.data.index||e(t.target).parent().index()*l.options.slidesToScroll;if(o=l.getNavigableIndexes(),r=0,o[d]&&o[d]===d)if(d>o[o.length-1])d=o[o.length-1];else for(var u in o){if(o[u]>d){d=r;break}r=o[u]}l.slideHandler(d,!1,n);default:return}},t.prototype.clickHandler=function(e){var t=this;t.shouldClick===!1&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},t.prototype.destroy=function(){var t=this;t.autoPlayClear(),t.touchObject={},e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&"object"!=typeof t.options.prevArrow&&t.$prevArrow.remove(),t.$nextArrow&&"object"!=typeof t.options.nextArrow&&t.$nextArrow.remove(),t.$slides.parent().hasClass("slick-track")&&t.$slides.unwrap().unwrap(),t.$slides.removeClass("slick-slide slick-active slick-center slick-visible").removeAttr("index").css({position:"",left:"",top:"",zIndex:"",opacity:"",width:""}),t.$slider.removeClass("slick-slider"),t.$slider.removeClass("slick-initialized"),t.$list.off(".slick"),e(window).off(".slick-"+t.instanceUid),e(document).off(".slick-"+t.instanceUid)},t.prototype.disableTransition=function(e){var t=this,n={};n[t.transitionType]="",t.options.fade===!1?t.$slideTrack.css(n):t.$slides.eq(e).css(n)},t.prototype.fadeSlide=function(e,t,n){var i=this;i.cssTransitions===!1?(i.$slides.eq(t).css({zIndex:1e3}),i.$slides.eq(t).animate({opacity:1},i.options.speed,i.options.easing,n),i.$slides.eq(e).animate({opacity:0},i.options.speed,i.options.easing)):(i.applyTransition(t),i.applyTransition(e),i.$slides.eq(t).css({opacity:1,zIndex:1e3}),i.$slides.eq(e).css({opacity:0}),n&&setTimeout(function(){i.disableTransition(t),i.disableTransition(e),n.call()},i.options.speed))},t.prototype.filterSlides=function(e){var t=this;null!==e&&(t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.filter(e).appendTo(t.$slideTrack),t.reinit())},t.prototype.getCurrent=function(){var e=this;return e.currentSlide},t.prototype.getDotCount=function(){var e=this,t=0,n=0,i=0;if(e.options.infinite===!0)i=Math.ceil(e.slideCount/e.options.slidesToScroll);else for(;e.slideCount>t;)++i,t=n+e.options.slidesToShow,n+=e.options.slidesToShow>=e.options.slidesToScroll?e.options.slidesToScroll:e.options.slidesToShow;return i-1},t.prototype.getLeft=function(e){var t,n,i,a=this,s=0;return a.slideOffset=0,n=a.$slides.first().outerHeight(),a.options.infinite===!0?(a.slideCount>a.options.slidesToShow&&(a.slideOffset=a.slideWidth*a.options.slidesToShow*-1,s=n*a.options.slidesToShow*-1),a.slideCount%a.options.slidesToScroll!==0&&e+a.options.slidesToScroll>a.slideCount&&a.slideCount>a.options.slidesToShow&&(e>a.slideCount?(a.slideOffset=(a.options.slidesToShow-(e-a.slideCount))*a.slideWidth*-1,s=(a.options.slidesToShow-(e-a.slideCount))*n*-1):(a.slideOffset=a.slideCount%a.options.slidesToScroll*a.slideWidth*-1,s=a.slideCount%a.options.slidesToScroll*n*-1))):e+a.options.slidesToShow>a.slideCount&&(a.slideOffset=(e+a.options.slidesToShow-a.slideCount)*a.slideWidth,s=(e+a.options.slidesToShow-a.slideCount)*n),a.options.slidesToShow>=a.slideCount&&(a.slideOffset=0,s=0),a.options.centerMode===!0&&a.options.infinite===!0?a.slideOffset+=a.slideWidth*Math.floor(a.options.slidesToShow/2)-a.slideWidth:a.options.centerMode===!0&&(a.slideOffset=0,a.slideOffset+=a.slideWidth*Math.floor(a.options.slidesToShow/2)),t=a.options.vertical===!1?e*a.slideWidth*-1+a.slideOffset:e*n*-1+s,a.options.variableWidth===!0&&(i=a.options.slidesToShow>=a.slideCount||a.options.infinite===!1?a.$slideTrack.children(".slick-slide").eq(e):a.$slideTrack.children(".slick-slide").eq(e+a.options.slidesToShow),t=i[0]?-1*i[0].offsetLeft:0,a.options.centerMode===!0&&(i=a.options.infinite===!1?a.$slideTrack.children(".slick-slide").eq(e):a.$slideTrack.children(".slick-slide").eq(e+a.options.slidesToShow+1),t=i[0]?-1*i[0].offsetLeft:0,t+=(a.$list.width()-i.outerWidth())/2)),t},t.prototype.getNavigableIndexes=function(){for(var e=this,t=0,n=0,i=[];e.slideCount>t;)i.push(t),t=n+e.options.slidesToScroll,n+=e.options.slidesToShow>=e.options.slidesToScroll?e.options.slidesToScroll:e.options.slidesToShow;return i},t.prototype.getSlideCount=function(){var t,n=this;if(n.options.swipeToSlide===!0){var i=null;return n.$slideTrack.find(".slick-slide").each(function(t,a){return a.offsetLeft+e(a).outerWidth()/2>-1*n.swipeLeft?(i=a,!1):void 0}),t=Math.abs(e(i).attr("index")-n.currentSlide)}return n.options.slidesToScroll},t.prototype.init=function(){var t=this;e(t.$slider).hasClass("slick-initialized")||(e(t.$slider).addClass("slick-initialized"),t.buildOut(),t.setProps(),t.startLoad(),t.loadSlider(),t.initializeEvents(),t.updateArrows(),t.updateDots()),null!==t.options.onInit&&t.options.onInit.call(this,t)},t.prototype.initArrowEvents=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.on("click.slick",{message:"previous"},e.changeSlide),e.$nextArrow.on("click.slick",{message:"next"},e.changeSlide))},t.prototype.initDotEvents=function(){var t=this;t.options.dots===!0&&t.slideCount>t.options.slidesToShow&&e("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide),t.options.dots===!0&&t.options.pauseOnDotsHover===!0&&t.options.autoplay===!0&&e("li",t.$dots).on("mouseenter.slick",function(){t.paused=!0,t.autoPlayClear()}).on("mouseleave.slick",function(){t.paused=!1,t.autoPlay()})},t.prototype.initializeEvents=function(){var t=this;t.initArrowEvents(),t.initDotEvents(),t.$list.on("touchstart.slick mousedown.slick",{action:"start"},t.swipeHandler),t.$list.on("touchmove.slick mousemove.slick",{action:"move"},t.swipeHandler),t.$list.on("touchend.slick mouseup.slick",{action:"end"},t.swipeHandler),t.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},t.swipeHandler),t.$list.on("click.slick",t.clickHandler),t.options.pauseOnHover===!0&&t.options.autoplay===!0&&(t.$list.on("mouseenter.slick",function(){t.paused=!0,t.autoPlayClear()}),t.$list.on("mouseleave.slick",function(){t.paused=!1,t.autoPlay()})),t.options.accessibility===!0&&t.$list.on("keydown.slick",t.keyHandler),t.options.focusOnSelect===!0&&e(t.options.slide,t.$slideTrack).on("click.slick",t.selectHandler),e(window).on("orientationchange.slick.slick-"+t.instanceUid,function(){t.checkResponsive(),t.setPosition()}),e(window).on("resize.slick.slick-"+t.instanceUid,function(){e(window).width()!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout(function(){t.windowWidth=e(window).width(),t.checkResponsive(),t.setPosition()},50))}),e("*[draggable!=true]",t.$slideTrack).on("dragstart",function(e){e.preventDefault()}),e(window).on("load.slick.slick-"+t.instanceUid,t.setPosition),e(document).on("ready.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.initUI=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.show(),e.$nextArrow.show()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.show(),e.options.autoplay===!0&&e.autoPlay()},t.prototype.keyHandler=function(e){var t=this;37===e.keyCode&&t.options.accessibility===!0?t.changeSlide({data:{message:"previous"}}):39===e.keyCode&&t.options.accessibility===!0&&t.changeSlide({data:{message:"next"}})},t.prototype.lazyLoad=function(){function t(t){e("img[data-lazy]",t).each(function(){var t=e(this),n=e(this).attr("data-lazy");t.load(function(){t.animate({opacity:1},200)}).css({opacity:0}).attr("src",n).removeAttr("data-lazy").removeClass("slick-loading")})}var n,i,a,s,o=this;o.options.centerMode===!0?o.options.infinite===!0?(a=o.currentSlide+(o.options.slidesToShow/2+1),s=a+o.options.slidesToShow+2):(a=Math.max(0,o.currentSlide-(o.options.slidesToShow/2+1)),s=2+(o.options.slidesToShow/2+1)+o.currentSlide):(a=o.options.infinite?o.options.slidesToShow+o.currentSlide:o.currentSlide,s=a+o.options.slidesToShow,o.options.fade===!0&&(a>0&&a--,o.slideCount>=s&&s++)),n=o.$slider.find(".slick-slide").slice(a,s),t(n),o.options.slidesToShow>=o.slideCount?(i=o.$slider.find(".slick-slide"),t(i)):o.currentSlide>=o.slideCount-o.options.slidesToShow?(i=o.$slider.find(".slick-cloned").slice(0,o.options.slidesToShow),t(i)):0===o.currentSlide&&(i=o.$slider.find(".slick-cloned").slice(-1*o.options.slidesToShow),t(i))},t.prototype.loadSlider=function(){var e=this;e.setPosition(),e.$slideTrack.css({opacity:1}),e.$slider.removeClass("slick-loading"),e.initUI(),"progressive"===e.options.lazyLoad&&e.progressiveLazyLoad()},t.prototype.postSlide=function(e){var t=this;null!==t.options.onAfterChange&&t.options.onAfterChange.call(this,t,e),t.animating=!1,t.setPosition(),t.swipeLeft=null,t.options.autoplay===!0&&t.paused===!1&&t.autoPlay()},t.prototype.progressiveLazyLoad=function(){var t,n,i=this;t=e("img[data-lazy]",i.$slider).length,t>0&&(n=e("img[data-lazy]",i.$slider).first(),n.attr("src",n.attr("data-lazy")).removeClass("slick-loading").load(function(){n.removeAttr("data-lazy"),i.progressiveLazyLoad()}).error(function(){n.removeAttr("data-lazy"),i.progressiveLazyLoad()}))},t.prototype.refresh=function(){var t=this,n=t.currentSlide;t.destroy(),e.extend(t,t.initials),t.init(),t.changeSlide({data:{message:"index",index:n}},!0)},t.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide"),t.slideCount=t.$slides.length,t.currentSlide>=t.slideCount&&0!==t.currentSlide&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll),t.options.slidesToShow>=t.slideCount&&(t.currentSlide=0),t.setProps(),t.setupInfinite(),t.buildArrows(),t.updateArrows(),t.initArrowEvents(),t.buildDots(),t.updateDots(),t.initDotEvents(),t.options.focusOnSelect===!0&&e(t.options.slide,t.$slideTrack).on("click.slick",t.selectHandler),t.setSlideClasses(0),t.setPosition(),null!==t.options.onReInit&&t.options.onReInit.call(this,t)},t.prototype.removeSlide=function(e,t,n){var i=this;return"boolean"==typeof e?(t=e,e=t===!0?0:i.slideCount-1):e=t===!0?--e:e,1>i.slideCount||0>e||e>i.slideCount-1?!1:(i.unload(),n===!0?i.$slideTrack.children().remove():i.$slideTrack.children(this.options.slide).eq(e).remove(),i.$slides=i.$slideTrack.children(this.options.slide),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.append(i.$slides),i.$slidesCache=i.$slides,void i.reinit())},t.prototype.setCSS=function(e){var t,n,i=this,a={};i.options.rtl===!0&&(e=-e),t="left"==i.positionProp?e+"px":"0px",n="top"==i.positionProp?e+"px":"0px",a[i.positionProp]=e,i.transformsEnabled===!1?i.$slideTrack.css(a):(a={},i.cssTransitions===!1?(a[i.animType]="translate("+t+", "+n+")",i.$slideTrack.css(a)):(a[i.animType]="translate3d("+t+", "+n+", 0px)",i.$slideTrack.css(a)))},t.prototype.setDimensions=function(){var t=this;if(t.options.vertical===!1?t.options.centerMode===!0&&t.$list.css({padding:"0px "+t.options.centerPadding}):(t.$list.height(t.$slides.first().outerHeight(!0)*t.options.slidesToShow),t.options.centerMode===!0&&t.$list.css({padding:t.options.centerPadding+" 0px"})),t.listWidth=t.$list.width(),t.listHeight=t.$list.height(),t.options.vertical===!1&&t.options.variableWidth===!1)t.slideWidth=Math.ceil(t.listWidth/t.options.slidesToShow),t.$slideTrack.width(Math.ceil(t.slideWidth*t.$slideTrack.children(".slick-slide").length));else if(t.options.variableWidth===!0){var n=0;t.slideWidth=Math.ceil(t.listWidth/t.options.slidesToShow),t.$slideTrack.children(".slick-slide").each(function(){n+=Math.ceil(e(this).outerWidth(!0))}),t.$slideTrack.width(Math.ceil(n)+1)}else t.slideWidth=Math.ceil(t.listWidth),t.$slideTrack.height(Math.ceil(t.$slides.first().outerHeight(!0)*t.$slideTrack.children(".slick-slide").length));var i=t.$slides.first().outerWidth(!0)-t.$slides.first().width();t.options.variableWidth===!1&&t.$slideTrack.children(".slick-slide").width(t.slideWidth-i)},t.prototype.setFade=function(){var t,n=this;n.$slides.each(function(i,a){t=n.slideWidth*i*-1,n.options.rtl===!0?e(a).css({position:"relative",right:t,top:0,zIndex:800,opacity:0}):e(a).css({position:"relative",left:t,top:0,zIndex:800,opacity:0})}),n.$slides.eq(n.currentSlide).css({zIndex:900,opacity:1})},t.prototype.setHeight=function(){var e=this;if(1===e.options.slidesToShow&&e.options.adaptiveHeight===!0&&e.options.vertical===!1){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.css("height",t)}},t.prototype.setPosition=function(){var e=this;e.setDimensions(),e.setHeight(),e.options.fade===!1?e.setCSS(e.getLeft(e.currentSlide)):e.setFade(),null!==e.options.onSetPosition&&e.options.onSetPosition.call(this,e)},t.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=e.options.vertical===!0?"top":"left","top"===e.positionProp?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),(void 0!==t.WebkitTransition||void 0!==t.MozTransition||void 0!==t.msTransition)&&e.options.useCSS===!0&&(e.cssTransitions=!0),void 0!==t.OTransform&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.MozTransform&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",void 0===t.perspectiveProperty&&void 0===t.MozPerspective&&(e.animType=!1)),void 0!==t.webkitTransform&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.msTransform&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",void 0===t.msTransform&&(e.animType=!1)),void 0!==t.transform&&e.animType!==!1&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=null!==e.animType&&e.animType!==!1},t.prototype.setSlideClasses=function(e){var t,n,i,a,s=this;s.$slider.find(".slick-slide").removeClass("slick-active").removeClass("slick-center"),n=s.$slider.find(".slick-slide"),s.options.centerMode===!0?(t=Math.floor(s.options.slidesToShow/2),s.options.infinite===!0&&(e>=t&&s.slideCount-1-t>=e?s.$slides.slice(e-t,e+t+1).addClass("slick-active"):(i=s.options.slidesToShow+e,n.slice(i-t+1,i+t+2).addClass("slick-active")),0===e?n.eq(n.length-1-s.options.slidesToShow).addClass("slick-center"):e===s.slideCount-1&&n.eq(s.options.slidesToShow).addClass("slick-center")),s.$slides.eq(e).addClass("slick-center")):e>=0&&s.slideCount-s.options.slidesToShow>=e?s.$slides.slice(e,e+s.options.slidesToShow).addClass("slick-active"):s.options.slidesToShow>=n.length?n.addClass("slick-active"):(a=s.slideCount%s.options.slidesToShow,i=s.options.infinite===!0?s.options.slidesToShow+e:e,s.options.slidesToShow==s.options.slidesToScroll&&s.options.slidesToShow>s.slideCount-e?n.slice(i-(s.options.slidesToShow-a),i+a).addClass("slick-active"):n.slice(i,i+s.options.slidesToShow).addClass("slick-active")),"ondemand"===s.options.lazyLoad&&s.lazyLoad()},t.prototype.setupInfinite=function(){var t,n,i,a=this;if(a.options.fade===!0&&(a.options.centerMode=!1),a.options.infinite===!0&&a.options.fade===!1&&(n=null,a.slideCount>a.options.slidesToShow)){for(i=a.options.centerMode===!0?a.options.slidesToShow+1:a.options.slidesToShow,t=a.slideCount;t>a.slideCount-i;t-=1)n=t-1,e(a.$slides[n]).clone(!0).attr("id","").attr("index",n-a.slideCount).prependTo(a.$slideTrack).addClass("slick-cloned");for(t=0;i>t;t+=1)n=t,e(a.$slides[n]).clone(!0).attr("id","").attr("index",n+a.slideCount).appendTo(a.$slideTrack).addClass("slick-cloned");a.$slideTrack.find(".slick-cloned").find("[id]").each(function(){e(this).attr("id","")})}},t.prototype.selectHandler=function(t){var n=this,i=parseInt(e(t.target).parents(".slick-slide").attr("index"));return i||(i=0),n.options.slidesToShow>=n.slideCount?(n.$slider.find(".slick-slide").removeClass("slick-active"),n.$slides.eq(i).addClass("slick-active"),n.options.centerMode===!0&&(n.$slider.find(".slick-slide").removeClass("slick-center"),
n.$slides.eq(i).addClass("slick-center")),void n.asNavFor(i)):void n.slideHandler(i)},t.prototype.slideHandler=function(e,t,n){var i,a,s,o,r=null,l=this;return t=t||!1,l.animating===!0&&l.options.waitForAnimate===!0||l.options.fade===!0&&l.currentSlide===e||l.options.slidesToShow>=l.slideCount?void 0:(t===!1&&l.asNavFor(e),i=e,r=l.getLeft(i),o=l.getLeft(l.currentSlide),l.currentLeft=null===l.swipeLeft?o:l.swipeLeft,l.options.infinite===!1&&l.options.centerMode===!1&&(0>e||e>l.getDotCount()*l.options.slidesToScroll)?void(l.options.fade===!1&&(i=l.currentSlide,n!==!0?l.animateSlide(o,function(){l.postSlide(i)}):l.postSlide(i))):l.options.infinite===!1&&l.options.centerMode===!0&&(0>e||e>l.slideCount-l.options.slidesToScroll)?void(l.options.fade===!1&&(i=l.currentSlide,n!==!0?l.animateSlide(o,function(){l.postSlide(i)}):l.postSlide(i))):(l.options.autoplay===!0&&clearInterval(l.autoPlayTimer),a=0>i?l.slideCount%l.options.slidesToScroll!==0?l.slideCount-l.slideCount%l.options.slidesToScroll:l.slideCount+i:i>=l.slideCount?l.slideCount%l.options.slidesToScroll!==0?0:i-l.slideCount:i,l.animating=!0,null!==l.options.onBeforeChange&&e!==l.currentSlide&&l.options.onBeforeChange.call(this,l,l.currentSlide,a),s=l.currentSlide,l.currentSlide=a,l.setSlideClasses(l.currentSlide),l.updateDots(),l.updateArrows(),l.options.fade===!0?void(n!==!0?l.fadeSlide(s,a,function(){l.postSlide(a)}):l.postSlide(a)):void(n!==!0?l.animateSlide(r,function(){l.postSlide(a)}):l.postSlide(a))))},t.prototype.startLoad=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")},t.prototype.swipeDirection=function(){var e,t,n,i,a=this;return e=a.touchObject.startX-a.touchObject.curX,t=a.touchObject.startY-a.touchObject.curY,n=Math.atan2(t,e),i=Math.round(180*n/Math.PI),0>i&&(i=360-Math.abs(i)),45>=i&&i>=0?a.options.rtl===!1?"left":"right":360>=i&&i>=315?a.options.rtl===!1?"left":"right":i>=135&&225>=i?a.options.rtl===!1?"right":"left":"vertical"},t.prototype.swipeEnd=function(){var e=this;if(e.dragging=!1,e.shouldClick=e.touchObject.swipeLength>10?!1:!0,void 0===e.touchObject.curX)return!1;if(e.touchObject.swipeLength>=e.touchObject.minSwipe)switch(e.swipeDirection()){case"left":e.slideHandler(e.currentSlide+e.getSlideCount()),e.currentDirection=0,e.touchObject={};break;case"right":e.slideHandler(e.currentSlide-e.getSlideCount()),e.currentDirection=1,e.touchObject={}}else e.touchObject.startX!==e.touchObject.curX&&(e.slideHandler(e.currentSlide),e.touchObject={})},t.prototype.swipeHandler=function(e){var t=this;if(!(t.options.swipe===!1||"ontouchend"in document&&t.options.swipe===!1||t.options.draggable===!1&&-1!==e.type.indexOf("mouse")))switch(t.touchObject.fingerCount=e.originalEvent&&void 0!==e.originalEvent.touches?e.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold,e.data.action){case"start":t.swipeStart(e);break;case"move":t.swipeMove(e);break;case"end":t.swipeEnd(e)}},t.prototype.swipeMove=function(e){var t,n,i,a,s=this;return a=void 0!==e.originalEvent?e.originalEvent.touches:null,!s.dragging||a&&1!==a.length?!1:(t=s.getLeft(s.currentSlide),s.touchObject.curX=void 0!==a?a[0].pageX:e.clientX,s.touchObject.curY=void 0!==a?a[0].pageY:e.clientY,s.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(s.touchObject.curX-s.touchObject.startX,2))),n=s.swipeDirection(),"vertical"!==n?(void 0!==e.originalEvent&&s.touchObject.swipeLength>4&&e.preventDefault(),i=(s.options.rtl===!1?1:-1)*(s.touchObject.curX>s.touchObject.startX?1:-1),s.swipeLeft=s.options.vertical===!1?t+s.touchObject.swipeLength*i:t+s.touchObject.swipeLength*(s.$list.height()/s.listWidth)*i,s.options.fade===!0||s.options.touchMove===!1?!1:s.animating===!0?(s.swipeLeft=null,!1):void s.setCSS(s.swipeLeft)):void 0)},t.prototype.swipeStart=function(e){var t,n=this;return 1!==n.touchObject.fingerCount||n.options.slidesToShow>=n.slideCount?(n.touchObject={},!1):(void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&(t=e.originalEvent.touches[0]),n.touchObject.startX=n.touchObject.curX=void 0!==t?t.pageX:e.clientX,n.touchObject.startY=n.touchObject.curY=void 0!==t?t.pageY:e.clientY,void(n.dragging=!0))},t.prototype.unfilterSlides=function(){var e=this;null!==e.$slidesCache&&(e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.appendTo(e.$slideTrack),e.reinit())},t.prototype.unload=function(){var t=this;e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&"object"!=typeof t.options.prevArrow&&t.$prevArrow.remove(),t.$nextArrow&&"object"!=typeof t.options.nextArrow&&t.$nextArrow.remove(),t.$slides.removeClass("slick-slide slick-active slick-visible").css("width","")},t.prototype.updateArrows=function(){var e,t=this;e=Math.floor(t.options.slidesToShow/2),t.options.arrows===!0&&t.options.infinite!==!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.removeClass("slick-disabled"),t.$nextArrow.removeClass("slick-disabled"),0===t.currentSlide?(t.$prevArrow.addClass("slick-disabled"),t.$nextArrow.removeClass("slick-disabled")):t.currentSlide>=t.slideCount-t.options.slidesToShow&&t.options.centerMode===!1?(t.$nextArrow.addClass("slick-disabled"),t.$prevArrow.removeClass("slick-disabled")):t.currentSlide>t.slideCount-t.options.slidesToShow+e&&t.options.centerMode===!0&&(t.$nextArrow.addClass("slick-disabled"),t.$prevArrow.removeClass("slick-disabled")))},t.prototype.updateDots=function(){var e=this;null!==e.$dots&&(e.$dots.find("li").removeClass("slick-active"),e.$dots.find("li").eq(Math.floor(e.currentSlide/e.options.slidesToScroll)).addClass("slick-active"))},e.fn.slick=function(e){var n=this;return n.each(function(n,i){i.slick=new t(i,e)})},e.fn.slickAdd=function(e,t,n){var i=this;return i.each(function(i,a){a.slick.addSlide(e,t,n)})},e.fn.slickCurrentSlide=function(){var e=this;return e.get(0).slick.getCurrent()},e.fn.slickFilter=function(e){var t=this;return t.each(function(t,n){n.slick.filterSlides(e)})},e.fn.slickGoTo=function(e,t){var n=this;return n.each(function(n,i){i.slick.changeSlide({data:{message:"index",index:parseInt(e)}},t)})},e.fn.slickNext=function(){var e=this;return e.each(function(e,t){t.slick.changeSlide({data:{message:"next"}})})},e.fn.slickPause=function(){var e=this;return e.each(function(e,t){t.slick.autoPlayClear(),t.slick.paused=!0})},e.fn.slickPlay=function(){var e=this;return e.each(function(e,t){t.slick.paused=!1,t.slick.autoPlay()})},e.fn.slickPrev=function(){var e=this;return e.each(function(e,t){t.slick.changeSlide({data:{message:"previous"}})})},e.fn.slickRemove=function(e,t){var n=this;return n.each(function(n,i){i.slick.removeSlide(e,t)})},e.fn.slickRemoveAll=function(){var e=this;return e.each(function(e,t){t.slick.removeSlide(null,null,!0)})},e.fn.slickGetOption=function(e){var t=this;return t.get(0).slick.options[e]},e.fn.slickSetOption=function(e,t,n){var i=this;return i.each(function(i,a){a.slick.options[e]=t,n===!0&&(a.slick.unload(),a.slick.reinit())})},e.fn.slickUnfilter=function(){var e=this;return e.each(function(e,t){t.slick.unfilterSlides()})},e.fn.unslick=function(){var e=this;return e.each(function(e,t){t.slick&&t.slick.destroy()})},e.fn.getSlick=function(){var e=null,t=this;return t.each(function(t,n){e=n.slick}),e}}),define("home/views/ChannelGroupTabCollectionView",["underscore","backbone-marionette","handlebars","home/views/ChannelGroupCardView","home/templates/channelGroupTabCollection","jquery.slick"],function(e,t,n,i,a){"use strict";var s=t.CompositeView.extend({className:"carousel-wrapper",templateHelpers:function(){return{exploreTab:this.exploreTab}},template:a,initialize:function(e){e=e||{},this.exploreTab=e.exploreTab,this.activeTab=e.activeTab},itemViewContainer:"[data-role=tabs-container]",itemView:i,itemViewOptions:function(e){return{exploreTab:this.exploreTab,attributes:{"data-action":"switch-tab","data-tab":e.id,"class":"channel-tab__item"}}},getActiveTabIndex:function(){return 1+e.findIndex(this.collection.models,e.bind(function(e){return e.id===this.activeTab},this))},onCompositeCollectionRendered:function(){this.children.length&&e.defer(e.bind(this.slickify,this))},slickify:function(){this.$(this.itemViewContainer).slick({slidesToScroll:1,slidesToShow:5,centerMode:!0,focusOnSelect:!0,variableWidth:!0,initialSlide:this.getActiveTabIndex(),prevArrow:n.partials.carouselArrowLeft(),nextArrow:n.partials.carouselArrowRight()})}});return s}),define("home/templates/exploreChannelGroups",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(){return'<div data-role="channel-groups" class="padding-gutter border-bottom"></div>\n<div data-role="content-area" class="explore__content"></div>\n'},useData:!0})}),define("home/views/ExploreChannelGroupsView",["underscore","core/UniqueModel","home/models/ChannelGroupProfile","home/models/Channel","home/views/common/TabbedView","home/views/FetchingView","home/views/ChannelGroupFeedsView","home/views/ChannelGroupTabCollectionView","home/templates/exploreChannelGroups"],function(e,t,n,i,a,s,o,r,l){"use strict";var c=a.extend({defaultTab:"all",template:l,regions:e.defaults({channelGroupsRegion:"[data-role=channel-groups]"},a.prototype.regions),collectionEvents:{sync:"render"},initialize:function(e){e=e||{},a.prototype.initialize.call(this,e),this.channelFeed=e.channelFeed,this.channelTabs=e.channelTabs,this.exploreTab=e.exploreTab},onDomRefresh:function(){a.prototype.onDomRefresh.call(this),this.channelGroupsRegion.show(new r({collection:this.collection,exploreTab:this.exploreTab,activeTab:this.activeTab})),this.updateTabClasses()},onRender:function(){this.updateTabClasses()},getChannelGroupProfile:function(e){var i=new t(n,{id:e.id,channel:e});return i.ensureFetchedChannel(),i},getTabView:function(e){if(!this.collection.length)return new s;var a={activeTab:this.channelFeed,exploreTab:this.exploreTab,channelGroupTab:e,tabs:this.channelTabs};if("all"===e){var r=new t(i,{slug:"spotlight"}),l=this.getChannelGroupProfile(r),c=new t(n,{id:n.ALL_CHANNEL_GROUPS_PROFILE_ID});a.model=l,a.allChannelGroupsProfile=c}else{var d=this.collection.findWhere({slug:e});if(!d)return null;a.model=this.getChannelGroupProfile(d)}return new o(a)}});return c}),define("home/templates/anonHomepage",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<div data-role="motd-alert"></div>\n<div data-role="marketing-module"></div>\n<div class="relative__wrapper">\n<div data-role="overlay"></div>\n<div class="section-contained-narrow">\n<div class="layout padding-bottom-double">\n<div class="content__wrap">\n<header class="module-header text-center">\n'+(null!=(s=e.invokePartial(i.channelsHeader,t,{name:"channelsHeader",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</header>\n<div data-role="content-area"></div>\n</div>\n</div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/AnonHomepageView",["jquery","underscore","backbone-marionette","core/constants/exploreModuleConstants","home/mixins/withSubviews","home/views/HomepageMarketingView","home/views/AnonHomepageOverlayView","home/views/ExploreChannelGroupsView","home/views/MotdAlertView","home/templates/anonHomepage"],function(e,t,n,i,a,s,o,r,l,c){"use strict";var d=n.ItemView.extend({template:c,regions:{marketingRegion:"[data-role=marketing-module]",overlayRegion:"[data-role=overlay]",contentRegion:"[data-role=content-area]",channelsModuleRegion:"[data-role=channels-module]",motdAlertRegion:"[data-role=motd-alert]"},events:{"click [data-action=close-promotions]":"closePromotions","click [data-action~=close-marketing]":"closeMarketing"},onRender:function(){this.activateRegion(this.marketingRegion,this.createHomepageMarketingView),this.activateRegion(this.overlayRegion,this.createOverlayView),this.activateRegion(this.contentRegion,this.createFeedView),this.activateRegion(this.motdAlertRegion,this.showMotdView)},createHomepageMarketingView:function(){return new s},createOverlayView:function(){return new o},createFeedView:function(){var e=i.TABS;return new r({collection:this.collection,channelTabs:[e.TOP,e.POPULAR,e.RECENT]})},showMotdView:function(){return new l({persistent:!0})},closeMarketing:function(){this.closeRegions([this.marketingRegion])},closePromotions:function(){this.closeRegions([this.marketingRegion,this.overlayRegion])},closeRegions:function(n){t.each(n,function(e){var t=e.currentView;t&&t.close()}),e("body").animate({scrollTop:0},350)}});return a.call(d.prototype),d}),define("home/templates/activityFeed",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(){return'<div class="section-contained">\n<div class="cover" data-role="cover-area"></div>\n</div>\n<div class="section-contained" data-role="header-area"></div>\n<div class="section-contained" id="container-content" data-role="content-area"></div>\n<div class="section-contained" data-role="footer-area"></div>\n'},useData:!0})}),define("home/views/ActivityFeedView",["underscore","home/views/ActivityCardCollectionView","home/views/common/FetchableCollectionLayout","home/templates/activityFeed"],function(e,t,n,i){"use strict";var a=n.extend({template:i,regions:e.defaults({coverRegion:"[data-role=cover-area]"},n.prototype.regions),fetchableCollectionView:t,initialize:function(e){n.prototype.initialize.apply(this,arguments),e.coverView&&(this.coverView=e.coverView)},onDomRefresh:function(){if(n.prototype.onDomRefresh.apply(this,arguments),this.coverView){var e=this.coverView.getModel?this.coverView.getModel(this.model):this.model;this.coverRegion.show(new this.coverView({model:e}))}},getMetaAttrs:function(){var e=this.coverRegion.currentView;return e&&e.getMetaAttrs&&e.getMetaAttrs()||""}});return a}),define("home/mixins/asNotificationCard",["jquery","underscore","core/utils","core/analytics/jester","home/utils/navigationUtils","home/mixins/withAllstarPopover"],function(e,t,n,i,a,s){"use strict";var o=/#.*$/,r={className:"card-wrap card--notification",initialize:function(e,t){e.call(this,t),this.listenTo(this.model,"change:isUnread",this.updateUnreadClass),this.updateUnreadClass()},updateUnreadClass:function(){this.$el.toggleClass("unread",!!this.model.get("isUnread"))},serializeData:function(e){var n=e.apply(this,arguments);return t.defaults(n,{discussionRoute:this.model.thread&&this.model.thread.getDiscussionRoute()})},trackView:function(){this.model.get("isUnread")&&i.client.emit(this.getAnalyticsPayload("view"))},trackClick:function(n){var a=e(n.currentTarget);if(this.shouldTrackClick(n,a)){var s=i.client.emit(this.getAnalyticsPayload("click"));if(s&&this.shouldDelayNavigation(n,a)){n.preventDefault(),n.stopPropagation();var o=t.once(function(){window.top.location=a[0].href});t.delay(o,1e3),s.always(o)}}},shouldTrackClick:function(e,t){if(e.isDefaultPrevented())return!1;var n=(t.attr("href")||"").replace(o,"");return!!n},shouldDelayNavigation:function(e,t){return!(a.isInbound(e.target)||n.willOpenNewWindow(e,t))}};return function(){s.call(this),this.className=t.wrap(this.className,function(e){return t.isFunction(e)&&(e=e.call(this)),e=e||"",r.className+" "+e}),this.initialize=t.wrap(this.initialize,r.initialize),this.serializeData=t.wrap(this.serializeData,r.serializeData),this.getAnalyticsPayload&&(t.extend(this,t.pick(r,["trackView","trackClick","shouldTrackClick","shouldDelayNavigation"])),this.events=t.extend({"click a":"trackClick"},this.events),this.onRender=t.wrap(this.onRender,function(e){e&&e.call(this),this.trackView()})),t.extend(this,t.pick(r,["updateUnreadClass"]))}}),define("home/views/common/NotificationCardPostView",["home/views/common/ActivityCardView","home/mixins/withReason","home/mixins/asNotificationCard","home/mixins/withSubviews","home/views/TruncatedPostView"],function(e,t,n,i,a){"use strict";var s=e,o=s.extend({className:function(){return this.childClassName},regions:{postRegion:"[data-role=post]"},onRender:function(){this.activateRegion(this.postRegion,this.createPostView)},createPostView:function(){var e=this.getPost(this.model.activities[0]);return new a({model:e})}}),r=o.prototype;return t.call(r),n.call(r),i.call(r),o}),define("home/templates/notificationCardChannelPost",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="card__reason">\n<div class="notification__icon -reply">\n<span class="icon-notification-response text-brand icon__position text-smaller"></span>\n</div>'+o(n.gettext.call(s,"%(userName)s responded to your discussion %(thread)s",{name:"gettext",hash:{thread:n.getPartial.call(s,"threadLink",{name:"getPartial",hash:{},data:a}),userName:n.getPartial.call(s,"userName",null!=t?t.firstActor:t,{name:"getPartial",hash:{},data:a})},data:a}))+'\n\n<span class="time text-gray">'+o(e.lambda(null!=t?t.relativeTime:t,t))+'</span>\n</div>\n<div class="card__content -notification">\n<div class="card-comment" data-role="post"></div>\n</div>\n'},useData:!0})}),define("home/views/NotificationCardChannelPostView",["home/views/common/NotificationCardPostView","home/templates/notificationCardChannelPost"],function(e,t){"use strict";var n=e,i=n.extend({childClassName:"card-notif-channel-post",template:t,getPost:function(e){return e.object}});return i}),define("home/templates/notificationCardUpvote",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="card__reason">\n<div class="notification__icon -upvote text-brand">\n<span class="icon-arrow-up text-smaller"></span>\n</div>'+o(n.gettext.call(s,"%(userNames)s upvoted you on %(thread)s",{name:"gettext",hash:{thread:n.getPartial.call(s,"threadLink",{name:"getPartial",hash:{},data:a}),userNames:n.getPartial.call(s,"userGroupNames",{name:"getPartial",hash:{},data:a})},data:a}))+'\n\n<span class="time text-gray">'+o(e.lambda(null!=t?t.relativeTime:t,t))+'</span>\n</div>\n<div class="card__content -notification">\n<div data-role="post"></div>\n</div>\n'},useData:!0})}),define("home/views/NotificationCardUpvoteView",["home/views/common/NotificationCardPostView","home/templates/notificationCardUpvote"],function(e,t){"use strict";var n=e,i=n.extend({childClassName:" card-notif-upvote",template:t,getPost:function(e){return e.target}});return i}),define("home/templates/notificationCardChannelRecommend",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="card__reason  -recommendation">\n<div class="notification__icon">\n<span class="icon-heart text-error text-smaller icon__position"></span>\n</div>'+o(n.gettext.call(s,"%(userNames)s recommended your discussion %(thread)s",{name:"gettext",hash:{thread:n.getPartial.call(s,"threadLink",{name:"getPartial",hash:{},data:a}),userNames:n.getPartial.call(s,"userGroupNames",{name:"getPartial",hash:{},data:a})},data:a}))+'\n\n<span class="time text-gray">'+o(e.lambda(null!=t?t.relativeTime:t,t))+"</span>\n</div>\n"},useData:!0})}),define("home/views/NotificationCardChannelRecommendView",["home/views/common/ActivityCardView","home/mixins/withReason","home/mixins/asNotificationCard","home/templates/notificationCardChannelRecommend"],function(e,t,n,i){"use strict";var a=e,s=a.extend({className:"card-notif-recommend",template:i}),o=s.prototype;return t.call(o),n.call(o),s}),define("home/templates/notificationCardReply",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="card__reason">\n<div class="notification__icon -reply">\n<span class="icon-notification-reply text-success icon-small"></span>\n</div>'+o(n.gettext.call(s,"%(userName)s replied to you on %(thread)s",{name:"gettext",hash:{thread:n.getPartial.call(s,"threadLink",{name:"getPartial",hash:{},data:a}),userName:n.getPartial.call(s,"userName",null!=t?t.firstActor:t,{name:"getPartial",hash:{},data:a})},data:a}))+'\n\n<span class="time text-gray">'+o(e.lambda(null!=t?t.relativeTime:t,t))+'</span>\n</div>\n<div class="card__content -notification">\n<div class="card-comment" data-role="post"></div>\n</div>\n'},useData:!0})}),define("home/views/NotificationCardReplyView",["backbone","home/views/common/ActivityCardView","home/mixins/withReason","home/mixins/asNotificationCard","home/mixins/withSubviews","home/views/PostActivityCollectionView","home/templates/notificationCardReply"],function(e,t,n,i,a,s,o){"use strict";var r=t.extend({className:"card-notif-reply",template:o,regions:{postsRegion:"[data-role=post]"},onRender:function(){this.activateRegion(this.postsRegion,this.createPostCollectionView)},createPostCollectionView:function(){return new s({collection:new e.Collection(this.model.activities)})}}),l=r.prototype;return n.call(l),i.call(l),a.call(l),r}),define("home/templates/userCard",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<div class="card--user">\n<div class="user-card__block">\n'+(null!=(s=e.invokePartial(i.userCardBody,t,{name:"userCardBody",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</div>\n<div class="user-card__button">\n'+(null!=(s=e.invokePartial(i.userFollowButton,t,{name:"userFollowButton",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/UserCardView",["backbone-marionette","home/mixins/withAllstarPopover","home/templates/userCard","core/bus"],function(e,t,n,i){"use strict";var a=e.ItemView.extend({template:n,templateHelpers:function(){return{isSessionUser:this.model.isSessionUser()}},className:"card",events:{"click [data-action=toggle-follow]":"toggleFollow"},modelEvents:{"change:isFollowing":"handleFollowedClass"},handleFollowedClass:function(){this.$("[data-action=toggle-follow]").toggleClass("active",this.model.get("isFollowing"))},toggleFollow:function(e){e&&e.preventDefault(),this.model.get("isFollowing")?i.trigger("uiAction:unfollowUser",this.model,e):i.trigger("uiAction:followUser",this.model,e),this.model.toggleFollowed()}});return t.call(a.prototype),a}),define("home/templates/followerCard",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s=e.escapeExpression;return'<button class="button button-outline -border-muted text-error spacing-right-small"\ntitle="'+s(n.gettext.call(null!=t?t:{},"Remove Follower",{name:"gettext",hash:{},data:a}))+'"\ndata-action="remove-follower"\ndata-user="'+s(e.lambda(null!=t?t.id:t,t))+'">\n<span class="icon-cancel icon__position"></span>\n</button>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<div class="card--user">\n<div class="user-card__block">\n'+(null!=(s=e.invokePartial(i.userCardBody,t,{name:"userCardBody",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</div>\n<div class="user-card__button">\n'+(null!=(s=n["if"].call(null!=t?t:{},null!=t?t.showRemoveButton:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=e.invokePartial(i.userFollowButton,t,{name:"userFollowButton",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/FollowerCardView",["home/views/UserCardView","home/templates/followerCard"],function(e,t){"use strict";return e.extend({initialize:function(t){e.prototype.initialize.call(this,t),this.showRemoveButton=t.showRemoveButton},template:t,templateHelpers:function(){var t=e.prototype.templateHelpers.call(this);return t.showRemoveButton=this.showRemoveButton,t}})}),define("home/views/FollowerCollectionView",["underscore","jquery","core/strings","core/bus","home/views/FollowerCardView","home/views/common/FetchableCollectionView"],function(e,t,n,i,a,s){"use strict";var o=n.get;return s.extend({initialize:function(e){s.prototype.initialize.call(this,e),this.user=e.user},events:e.defaults({"click [data-action=remove-follower]":"removeFollower"},s.prototype.events),itemView:a,itemViewOptions:function(){return{showRemoveButton:this.user.isSessionUser()}},removeFollower:function(e){if(this.user.isSessionUser()){e.preventDefault();var a=t(e.currentTarget),s=a.attr("data-user"),r=this.collection.findWhere({id:s}),l=window.confirm(n.interpolate(o("Remove %(follower)s as a follower?"),{follower:r.getDisplayName()}));if(l)return this.collection.remove(r),i.trigger("removeFollower",r),this.user.removeFollower(r)}}})}),define("home/templates/notificationCardFollow",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){return'<div class="expandable">\n<div class="followers__expand">\n<a href="#" data-action="toggle-collapsed" class="expandable card-expand">\n<div class="icon-more-vert"></div>\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"See More",{name:"gettext",hash:{},data:a}))+"\n</a>\n</div>\n</div>\n"},3:function(e,t,n,i,a){var s=e.escapeExpression;return'<div class="collapsible">\n<div class="followers__collapse">\n<a class="button button-outline" href="/by/'+s(e.lambda(null!=t?t.sessionUsername:t,t))+'/followers/">\n'+s(n.gettext.call(null!=t?t:{},"See All Followers",{name:"gettext",hash:{},data:a}))+"\n</a>\n</div>\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div class="card__reason">\n<div class="notification__icon">\n<span class="icon-notification-follow icon__position text-small"></span>\n</div>'+r(n.gettext.call(o,"%(userNames)s followed you",{name:"gettext",hash:{userNames:n.getPartial.call(o,"userGroupNames",{name:"getPartial",hash:{},data:a})},data:a}))+'\n<span class="time text-gray">'+r(e.lambda(null!=t?t.relativeTime:t,t))+'</span>\n</div>\n<div data-role="users"></div>\n\n'+(null!=(s=n["if"].call(o,null!=t?t.shouldCollapse:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=n["if"].call(o,null!=t?t.hasOverflowActors:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")},useData:!0})}),define("home/views/NotificationCardFollowView",["underscore","backbone","home/views/common/ActivityCardView","home/mixins/withReason","home/mixins/asNotificationCard","home/mixins/asCollapsibleCard","home/mixins/withSubviews","home/models/Session","home/views/FollowerCollectionView","home/templates/notificationCardFollow"],function(e,t,n,i,a,s,o,r,l,c){"use strict";var d=n,u=d.extend({className:function(){return"card-notif-follow"+(this.shouldCollapse()?" card-collapsed":"")},initialize:function(){this.session=r.get(),this.initializeShownActors()},initializeShownActors:function(){this.shownActors||(this.shownActors=e.pluck(this.model.activities,"actor"))},shouldCollapse:function(){return this.initializeShownActors(),this.shownActors.length>3},template:c,templateHelpers:function(){return{hasOverflowActors:this.model.get("totalActors")>this.model.actors.length,sessionUsername:this.session.user.get("username"),shouldCollapse:this.shouldCollapse()}},regions:{usersRegion:"[data-role=users]"},onRender:function(){this.activateRegion(this.usersRegion,this.createUsersView)},createUsersView:function(){return new l({user:this.session.user,el:this.usersRegion.el,itemViewOptions:function(e,t){return{className:"followers__wrap"+(t>2?" collapsible":""),showRemoveButton:!0}},collection:new t.Collection(this.shownActors)})}}),h=u.prototype;return i.call(h),a.call(h),s.call(h),o.call(h),u}),define("home/templates/notificationCardAnnouncement",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return" has-image"},3:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<span class="card-content__media">\n'+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.announcement:t)?s.link:s,{name:"if",hash:{},fn:e.program(4,a,0),inverse:e.noop,data:a}))?s:"")+'<div style="background-image: url('+e.escapeExpression(e.lambda(null!=(s=null!=t?t.announcement:t)?s.image:s,t))+')" class="img-cards"></div>\n'+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.announcement:t)?s.link:s,{name:"if",hash:{},fn:e.program(6,a,0),inverse:e.noop,data:a}))?s:"")+"</span>\n"},4:function(e,t){var n,i=e.lambda,a=e.escapeExpression;return'<a href="'+a(i(null!=(n=null!=t?t.announcement:t)?n.link:n,t))+a(i(null!=t?t.linkArgDelimiter:t,t))+"utm_campaign="+a(i(null!=t?t.activityId:t,t))+'&utm_content=img&utm_source=note"\ndata-link-name="image">\n'},6:function(){return"</a>\n"},8:function(e,t){var n,i=e.lambda,a=e.escapeExpression;return'<a href="'+a(i(null!=(n=null!=t?t.announcement:t)?n.link:n,t))+a(i(null!=t?t.linkArgDelimiter:t,t))+"utm_campaign="+a(i(null!=t?t.activityId:t,t))+'&utm_content=title&utm_source=note"\nclass="link-gray-darker truncate"\ndata-truncate-lines="'+a(i(null!=t?t.numTitleLines:t,t))+'"\ndata-link-name="title">\n'},10:function(e,t){var n,i=e.lambda,a=e.escapeExpression;return'<p class="spacing-narrow spacing-top ">\n<a href="'+a(i(null!=(n=null!=t?t.announcement:t)?n.link:n,t))+a(i(null!=t?t.linkArgDelimiter:t,t))+"utm_campaign="+a(i(null!=t?t.activityId:t,t))+'&utm_content=btn&utm_source=note"\nclass="button button-outline text-medium">\n'+a(i(null!=(n=null!=t?t.announcement:t)?n.callToAction:n,t))+"\n</a>\n</p>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression,l=null!=t?t:{};return'<div class="card__reason">\n<div class="notification__icon -invite">\n<span class="icon-notification-invite text-brand icon-small"></span>\n</div>\n'+r(o(null!=(s=null!=t?t.announcement:t)?s.subject:s,t))+'\n<span class="time text-gray">'+r(o(null!=t?t.relativeTime:t,t))+'</span>\n</div>\n<div class="card__content -notification'+(null!=(s=n["if"].call(l,null!=(s=null!=t?t.announcement:t)?s.image:s,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'">\n'+(null!=(s=n["if"].call(l,null!=(s=null!=t?t.announcement:t)?s.image:s,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+'\n<div class="card-content__body">\n<h2 class="discussion-title" dir="auto">\n'+(null!=(s=n["if"].call(l,null!=(s=null!=t?t.announcement:t)?s.link:s,{name:"if",hash:{},fn:e.program(8,a,0),inverse:e.noop,data:a}))?s:"")+r(o(null!=(s=null!=t?t.announcement:t)?s.title:s,t))+"\n"+(null!=(s=n["if"].call(l,null!=(s=null!=t?t.announcement:t)?s.link:s,{name:"if",hash:{},fn:e.program(6,a,0),inverse:e.noop,data:a}))?s:"")+'</h2>\n\n<div class="card-content__summary text-medium">\n<div class="truncate" data-truncate-lines="3" dir="auto">\n'+r(o(null!=(s=null!=t?t.announcement:t)?s.body:s,t))+"\n</div>\n</div>\n\n"+(null!=(s=n["if"].call(l,null!=(s=null!=t?t.announcement:t)?s.callToAction:s,{name:"if",hash:{},fn:e.program(10,a,0),inverse:e.noop,data:a}))?s:"")+"</div>\n</div>\n"},useData:!0})}),define("home/views/NotificationCardAnnouncementView",["home/views/common/ActivityCardView","home/mixins/withReason","home/mixins/asNotificationCard","home/templates/notificationCardAnnouncement"],function(e,t,n,i){"use strict";var a=e,s=a.extend({template:i,templateHelpers:function(){var e=this.getAnnouncement(),t=e.get("link")&&e.get("link").indexOf("?")>0?"&":"?";return{announcement:e.toJSON(),linkArgDelimiter:t,activityId:this.model.activities[0].get("backendId")}},className:"card-notif-announcement",getAnnouncement:function(){
return this.model.activities[0].object},getAnalyticsPayload:function(e){var t=this.getAnnouncement();return{verb:e,object_type:"note",object_id:this.model.activities[0].get("backendId"),note_template_id:t.get("templateId"),note_template_name:t.get("templateName")}}});return t.call(s.prototype),n.call(s.prototype),s}),define("home/templates/notificationCardThreadInvite",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return" has-image"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression,l=e.lambda;return'<div class="card__reason">\n<div class="notification__icon -invite">\n<span class="icon-notification-invite text-brand icon-small"></span>\n</div>'+r(n.gettext.call(o,"%(userName)s invited you to a new discussion on %(parent)s",{name:"gettext",hash:{parent:n.getPartial.call(o,"channelAwareForumLink",null!=(s=null!=t?t.thread:t)?s.forum:s,{name:"getPartial",hash:{},data:a}),userName:n.getPartial.call(o,"userName",null!=t?t.firstActor:t,{name:"getPartial",hash:{},data:a})},data:a}))+'\n<span class="time text-gray">'+r(l(null!=t?t.relativeTime:t,t))+'</span>\n</div>\n<div class="card__content -notification'+(null!=(s=n["if"].call(o,null!=t?t.image:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'">\n'+(null!=(s=e.invokePartial(i.cardContentImage,t,{name:"cardContentImage",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<div class="card-content__body">\n'+(null!=(s=e.invokePartial(i.threadTitle,t,{name:"threadTitle",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<div class="card-content__summary text-medium">\n<div class="truncate" data-truncate-lines="3" dir="auto">\n'+r(l(null!=t?t.threadDescription:t,t))+'\n</div>\n</div>\n<p class="spacing-narrow spacing-top ">\n<a href="'+r(l(null!=t?t.discussionRoute:t,t))+'"\nclass="button button-outline text-medium"\ndata-thread-id="'+r(l(null!=(s=null!=t?t.thread:t)?s.id:s,t))+'">\nJoin Discussion\n</a>\n</p>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/NotificationCardThreadInviteView",["home/views/common/ActivityCardView","home/mixins/withReason","home/mixins/asNotificationCard","home/mixins/withTruncate","home/templates/notificationCardThreadInvite"],function(e,t,n,i,a){"use strict";var s=e,o=s.extend({className:"card-notif-invite card-notif-note",template:a,templateHelpers:function(){return{threadDescription:this.model.thread.getPlainDescription(),image:this.model.thread.getImage(),numTitleLines:3}},initialize:function(){this.listenTo(this.model.thread,"change:content",this.render)},getAnalyticsPayload:function(e){var t=this.model.thread,n=this.model.activities[0].get("backendId");return{verb:e,object_type:"note",object_id:n,note_template_id:n,note_template_name:["thread invite",t.forum.id,t.get("slug")].join(" ")}}});return t.call(o.prototype),n.call(o.prototype),i.call(o.prototype),o}),define("home/templates/notificationCardChannelInvite",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="card__reason">\n<div class="notification__icon -invite">\n<span class="icon-notification-invite text-brand icon-small"></span>\n</div>'+o(n.gettext.call(s,"%(userName)s invited you to check out the channel %(channel)s",{name:"gettext",hash:{channel:n.getPartial.call(s,"channelLink",null!=t?t.channel:t,{name:"getPartial",hash:{},data:a}),userName:n.getPartial.call(s,"userName",null!=t?t.firstActor:t,{name:"getPartial",hash:{},data:a})},data:a}))+'\n<span class="time text-gray">'+o(e.lambda(null!=t?t.relativeTime:t,t))+'</span>\n</div>\n<div class="card__content -notification" data-role="content">\n</div>\n'},useData:!0})}),define("home/views/NotificationCardChannelInviteView",["home/views/ForumCardView","home/views/common/ActivityCardView","home/mixins/withReason","home/mixins/withSubviews","home/mixins/asNotificationCard","home/mixins/withTruncate","home/mixins/withChannelAvatar","home/templates/notificationCardChannelInvite"],function(e,t,n,i,a,s,o,r){"use strict";var l=t,c=function(){return this.model.activities[0].channel},d=l.extend({className:"card-notif-channel-invite card-notif-note",regions:{contentRegion:"[data-role=content]"},template:r,templateHelpers:function(){return{channel:c.call(this).toJSON()}},onRender:function(){this.activateRegion(this.contentRegion,this.createContentView)},createContentView:function(){return new e({model:c.call(this).primaryForum,className:""})},getAnalyticsPayload:function(e){var t=c.call(this),n=this.model.activities[0].get("backendId");return{verb:e,object_type:"note",object_id:n,note_template_id:n,note_template_name:["channel invite",t.id].join(" ")}}});return n.call(d.prototype),a.call(d.prototype),s.call(d.prototype),o.call(d.prototype,c),i.call(d.prototype),d}),define("home/templates/notificationCardCreate",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return" has-image"},3:function(e,t,n,i,a){return'<button\nclass="button button-outline -border-muted text-error text-medium spacing-right-small"\ndata-action="delete">\n<span class="icon-tiny icon-cancel spacing-right-small"></span>\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Delete",{name:"gettext",hash:{},data:a}))+"\n</button>\n"},5:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<span class="text-small text-gray">\n'+o(n.gettext.call(s,"This discussion was deleted.",{name:"gettext",hash:{},data:a}))+'\n<a href="#" data-action="restore">'+o(n.gettext.call(s,"Undo",{name:"gettext",hash:{},data:a}))+"</a>\n</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression,l=e.lambda;return'<div class="card__reason">\n<div class="notification__icon -new-discussion">\n<span class="icon-create-discussion text-smaller"></span>\n</div>'+r(n.gettext.call(o,"%(userName)s started a discussion on %(parent)s",{name:"gettext",hash:{parent:n.getPartial.call(o,"channelAwareForumLink",null!=(s=null!=t?t.thread:t)?s.forum:s,{name:"getPartial",hash:{},data:a}),userName:n.getPartial.call(o,"userName",null!=t?t.firstActor:t,{name:"getPartial",hash:{},data:a})},data:a}))+'\n\n<span class="time text-gray">'+r(l(null!=t?t.relativeTime:t,t))+'</span>\n</div>\n\n<div class="card__content -notification'+(null!=(s=n["if"].call(o,null!=t?t.image:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'">\n'+(null!=(s=e.invokePartial(i.cardContentImage,t,{name:"cardContentImage",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<div class="card-content__body">\n'+(null!=(s=e.invokePartial(i.threadTitle,t,{name:"threadTitle",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<div class="card-content__summary text-medium">\n<div class="truncate" data-truncate-lines="3" dir="auto">\n'+r(l(null!=t?t.threadDescription:t,t))+'\n</div>\n</div>\n<div class="spacing-top spacing-narrow align">\n'+(null!=(s=n.unless.call(o,null!=(s=null!=t?t.thread:t)?s.isDeleted:s,{name:"unless",hash:{},fn:e.program(3,a,0),inverse:e.program(5,a,0),data:a}))?s:"")+"</div>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/NotificationCardCreateView",["home/models/Session","home/views/common/ActivityCardView","home/mixins/withReason","home/mixins/asNotificationCard","home/mixins/withTruncate","home/templates/notificationCardCreate"],function(e,t,n,i,a,s){"use strict";var o=t,r=o.extend({className:"card-notif-create card-notif-invite card-notif-note",template:s,templateHelpers:function(){return{threadDescription:this.model.thread.getPlainDescription(),image:this.model.thread.getImage(),numTitleLines:3}},events:{"click [data-action=delete]":"deleteThread","click [data-action=restore]":"restoreThread"},initialize:function(){this.session=e.get(),this.listenTo(this.model.thread,"change:content",this.render),this.listenTo(this.model.thread,"change:isDeleted",this.render)},deleteThread:function(){this.model.thread.confirmDelete(!0)},restoreThread:function(){this.model.thread.restore()}}),l=r.prototype;return n.call(l),i.call(l),a.call(l),r}),define("core/mixins/withForumFollowing",["underscore"],function(e){"use strict";function t(e){return{events:{"click [data-action=toggle-follow]":"toggleFollow"},initialize:function(){this.bindToForum()},templateHelpers:function(){return{isFollowing:this.getIsFollowing()}},bindToForum:function(){var t=e.call(this);t&&this.listenTo(t,"change:isFollowing",this.updateFollowedState)},getIsFollowing:function(){var t=e.call(this);return t&&t.get("isFollowing")},updateFollowedState:function(){this.$("[data-action=toggle-follow]").toggleClass("active",this.getIsFollowing())},toggleFollow:function(t){t&&(t.preventDefault(),t.stopPropagation());var n=e.call(this);n&&(n.toggleFollowed(),this.trigger("toggled:follow",t))}}}function n(n){var i=n||function(){return this.model},a=t(i);this.bindToForum=e.wrap(this.bindToForum,function(e){e&&e.call(this),a.bindToForum.call(this)}),this.initialize=e.wrap(this.initialize,function(e,t){e.call(this,t),a.initialize.call(this,t)}),this.templateHelpers=e.wrap(this.templateHelpers,function(t){var n=e.isFunction(t)?t.call(this):t;return e.extend(a.templateHelpers.call(this),n)}),this.events=e.extend({},a.events,this.events),e.extend(this,e.pick(a,"toggleFollow","updateFollowedState","getIsFollowing"))}return n}),define("home/templates/notificationCardAddMod",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<a href="/home/channel/'+r(o(null!=(s=null!=(s=null!=t?t.forum:t)?s.channelInfo:s)?s.slug:s,t))+'/"\nclass="avatar"\ndata-link-name="channel_avatar"\ndata-channel-slug="'+r(o(null!=(s=null!=(s=null!=t?t.forum:t)?s.channelInfo:s)?s.slug:s,t))+'">\n'+(null!=(s=e.invokePartial(i.channelAvatarWithDefault,t,{name:"channelAvatarWithDefault",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</a>\n<div class="forum-info truncate-line">\n<a class="name"\nhref="/home/channel/'+r(o(null!=(s=null!=(s=null!=t?t.forum:t)?s.channelInfo:s)?s.slug:s,t))+'/"\ndata-link-name="channel_name"\ndata-channel-slug="'+r(o(null!=(s=null!=(s=null!=t?t.forum:t)?s.channelInfo:s)?s.slug:s,t))+'">\n\n'+(null!=(s=e.invokePartial(i.channelAwareForumName,null!=t?t.forum:t,{name:"channelAwareForumName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</a>\n<p class="description truncate-line">\n'+r(o(null!=(s=null!=(s=null!=(s=null!=t?t.forum:t)?s.channelInfo:s)?s.options:s)?s.description:s,t))+"\n</p>\n</div>\n"},3:function(e,t,n,i,a){var s;return(null!=(s=e.invokePartial(i.forumAvatarLink,null!=t?t.forum:t,{name:"forumAvatarLink",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<div class="forum-info truncate-line">\n'+(null!=(s=e.invokePartial(i.forumLink,null!=t?t.forum:t,{name:"forumLink",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n"},5:function(e,t,n,i,a){return'<span class="button button-small text-gray-dark">\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"You've been removed.",{name:"gettext",hash:{},data:a}))+"\n</span>\n"},7:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<button class="button button-outline -border-muted text-error button-small spacing-right-small"\ntitle="'+o(n.gettext.call(s,"Resign as moderator",{name:"gettext",hash:{},data:a}))+'"\ndata-action="remove-moderator">\n<span class="icon-tiny icon-cancel spacing-right-small"></span>\n'+o(n.gettext.call(s,"Resign",{name:"gettext",hash:{},data:a}))+"\n</button>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div class="card__reason">\n<div class="notification__icon">\n<span class="icon-checkmark icon__position text-small text-success"></span>\n</div>'+r(n.gettext.call(o,"%(userNames)s added you as a moderator to %(forum)s",{name:"gettext",hash:{forum:n.getPartial.call(o,"channelAwareForumLink",null!=t?t.forum:t,{name:"getPartial",hash:{},data:a}),userNames:n.getPartial.call(o,"userGroupNames",{name:"getPartial",hash:{},data:a})},data:a}))+'\n<span class="time text-gray">'+r(e.lambda(null!=t?t.relativeTime:t,t))+'</span>\n</div>\n<div class="card__content -notification">\n<div class="card--user">\n<div class="user-card__block -add-mod">\n'+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.forum:t)?s.channelInfo:s,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+'</div>\n<div data-role="channel-actions" class="user-card__button btn-follow--mobile">\n'+(null!=(s=n["if"].call(o,null!=t?t.resigned:t,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.program(7,a,0),data:a}))?s:"")+(null!=(s=e.invokePartial(i.genericFollowButton,t,{name:"genericFollowButton",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/NotificationCardAddModView",["underscore","home/models/Session","home/views/common/ActivityCardView","home/mixins/withReason","home/mixins/asNotificationCard","home/mixins/withChannelAvatar","core/mixins/withForumFollowing","home/utils/confirmModal","home/templates/notificationCardAddMod","home/templates/confirmResignModerator"],function(e,t,n,i,a,s,o,r,l,c){"use strict";var d=n,u=d.extend({className:"card-notif-add-mod",events:{"click [data-action=remove-moderator]":"confirmRemoveModerator"},initialize:function(){this.session=t.get(),this.forum=this.getForum(),this.channel=this.forum.channel,this.session.loadModeratedForums().then(e.bind(this.render,this))},template:l,templateHelpers:function(){return{forum:this.forum.toJSON(),resigned:!this.sessionUserIsModerator()}},sessionUserIsModerator:function(){return e.contains(this.session.user.get("moderatedForums"),this.forum.id)},confirmRemoveModerator:function(t){t&&t.preventDefault();var n=this.channel&&this.channel.attributes.name||this.forum.attributes.name;r.confirmationPromise(r.TYPES.CONFIRM_CANCEL,c({name:n})).then(e.bind(this.removeModerator,this))},removeModerator:function(t){t&&(this.channel?this.session.user.moderateChannel(this.channel,!1).then(e.bind(this.render,this)):this.session.user.moderateForum(this.forum,!1).then(e.bind(this.render,this)))},getForum:function(){return this.model.activities[0].target}}),h=u.prototype;i.call(h),a.call(h);var m=function(){return this.forum&&this.forum.channel},p=function(){return this.forum};return s.call(h,m),o.call(h,p),u}),define("home/templates/notificationCardHighlightPost",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="card__reason">\n<div class="notification__icon text-brand">\n<span class="icon-trophy text-smaller text-warning"></span>\n</div>'+o(n.gettext.call(s,"%(name)s featured your comment on %(thread)s",{name:"gettext",hash:{thread:n.getPartial.call(s,"threadLink",{name:"getPartial",hash:{},data:a}),name:n.getPartial.call(s,"cardTitleInlineName",{name:"getPartial",hash:{},data:a})},data:a}))+'\n\n<span class="time text-gray">'+o(e.lambda(null!=t?t.relativeTime:t,t))+'</span>\n</div>\n<div class="card__content -notification">\n<div data-role="post"></div>\n</div>\n'},useData:!0})}),define("home/views/NotificationCardHighlightPostView",["home/views/common/NotificationCardPostView","home/templates/notificationCardHighlightPost"],function(e,t){"use strict";var n=e,i=n.extend({childClassName:"card-notif-highlight",template:t,getPost:function(e){return e.target}});return i}),define("home/templates/notificationCardMention",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="card__reason">\n<div class="notification__icon -reply">\n<span class="icon-mention text-brand icon-small"></span>\n</div>'+o(n.gettext.call(s,"%(userName)s mentioned you on %(thread)s",{name:"gettext",hash:{thread:n.getPartial.call(s,"threadLink",{name:"getPartial",hash:{},data:a}),userName:n.getPartial.call(s,"userName",null!=t?t.firstActor:t,{name:"getPartial",hash:{},data:a})},data:a}))+'\n\n<span class="time text-gray">'+o(e.lambda(null!=t?t.relativeTime:t,t))+'</span>\n</div>\n<div class="card__content -notification">\n<div class="card-comment" data-role="post"></div>\n</div>\n'},useData:!0})}),define("home/views/NotificationCardMentionView",["home/views/common/NotificationCardPostView","home/templates/notificationCardMention"],function(e,t){"use strict";var n=e,i=n.extend({childClassName:"card-notif-channel-post",template:t,getPost:function(e){return e.target}});return i}),define("home/templates/notificationFeedEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="empty-message">\n\n<svg class="art-empty-notifications" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 164.8 50" enable-background="new 0 0 164.8 50" xml:space="preserve"><path d="M0 11h13.7v3.6H0V11z" class="arm"/><path d="M15.4 11h4.2l18.1 37h-4.2L15.4 11z" class="arm"/><path d="M39 44.2h24.2V48H39V44.2z" class="arm"/><path d="M101.6 44.2h24.2V48h-24.2V44.2z" class="arm"/><path d="M145 11h4.2l-18.1 37h-4.2L145 11z" class="arm"/><path d="M151.1 11h13.7v3.6h-13.7V11z" class="arm"/><path d="M57.9 25c0-13.8 11.2-25 25-25s25 11.2 25 25s-11.2 25-25 25 S57.9 38.8 57.9 25z" class="body"/><path d="M71.1 20.7C71.8 26.5 76.8 31 82.9 31s11-4.5 11.8-10.3c-2.3 2.2-6.7 3-11.8 3S73.4 22.9 71.1 20.7z" class="mouth"/><path d="M63.3 16c0-2.1 1.8-3.9 4-3.9c2.2 0 4 1.7 4 3.9s-1.8 3.9-4 3.9 C65.1 19.9 63.3 18.1 63.3 16z" class="eye"/><path d="M94.4 15.6c0-2.1 1.8-3.8 4-3.8c2.2 0 4 1.7 4 3.8 c0 2.1-1.8 3.8-4 3.8C96.2 19.5 94.4 17.8 94.4 15.6z" class="eye"/></svg>\n\n<div class="notifications-empty-headline">'+o(n.gettext.call(s,"No Notifications",{name:"gettext",hash:{},data:a}))+"</div>\n"+o(n.gettext.call(s,"You must be new. Or quiet.",{name:"gettext",hash:{},data:a}))+"\n</div>\n"},useData:!0})}),define("home/views/NotificationFeedEmptyView",["backbone-marionette","home/templates/notificationFeedEmpty"],function(e,t){"use strict";var n=e.ItemView.extend({template:t});return n}),define("home/views/NotificationCardCollectionView",["underscore","core/bus","home/views/ActivityCardCollectionView","home/views/NotificationCardChannelPostView","home/views/NotificationCardUpvoteView","home/views/NotificationCardChannelRecommendView","home/views/NotificationCardReplyView","home/views/NotificationCardFollowView","home/views/NotificationCardAnnouncementView","home/views/NotificationCardThreadInviteView","home/views/NotificationCardChannelInviteView","home/views/NotificationCardCreateView","home/views/NotificationCardAddModView","home/views/NotificationCardHighlightPostView","home/views/NotificationCardMentionView","home/views/NotificationFeedEmptyView"],function(e,t,n,i,a,s,o,r,l,c,d,u,h,m,p,f){"use strict";var g=n.extend({itemView:function(e){var t=g.ITEM_VIEWS[e.model.get("verb")];return t?new t({model:e.model}):void 0},emptyView:f,initialize:function(){n.prototype.initialize.apply(this,arguments),this.listenTo(this,"after:item:added",this.onShowNotification);var i=e.debounce(e.bind(t.trigger,t,"after:render"),100);this.listenTo(this,"after:item:added",i),this.listenToOnce(this,"showFirstItem",function(){t.trigger("showFirstCard","notifications")})},onShowNotification:function(e){e.model&&e.model===this.collection.at(0)&&this.model.trigger("clearUnreadCount")}},{ITEM_VIEWS:{favorite:a,reply:o,follow:r,send:l,threadInvite:c,channelInvite:d,create:u,recommend:s,"channel-post":i,"add-mod":h,highlight:m,mention:p}});return g}),define("home/templates/notifications",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="nav-notifs-settings dropdown" data-action="toggle-dropdown" data-dropdown="notif-settings">\n<a href="/home/settings/web/" title="'+o(n.gettext.call(s,"Control what notifications you see from %(Disqus)s.",{name:"gettext",hash:{Disqus:"Disqus"},data:a}))+'">\n<span class="icon-cog"></span>\n</a>\n<div class="dropdown-menu dropdown-notifs-settings">\n<header class="dropdown-notifs-settings-header">\n<h6>'+o(n.gettext.call(s,"Control Your Inbox",{name:"gettext",hash:{},data:a}))+"</h6>\n<p>"+o(n.gettext.call(s,"Use these settings to control what notifications you see from %(disqus)s. To change email notifications click %(here)s.",{name:"gettext",hash:{here:n.tag.call(s,"a",{name:"tag",hash:{text:n.gettext.call(s,"here",{name:"gettext",hash:{},data:a}),"data-action":"notification-settings",href:"#"},data:a}),disqus:"Disqus"},data:a}))+'</a></p>\n</header>\n<ul class="dropdown-notifs-settings-options">\n<li class="dropdown-notifs-settings-option">\n<label><input data-action="filter-toggle" data-filter="likepost" type="checkbox" name="upvotes" value="upvotes">'+o(n.gettext.call(s,"Hide upvotes",{name:"gettext",hash:{},data:a}))+'</label>\n</li>\n<li class="dropdown-notifs-settings-option">\n<label><input data-action="filter-toggle" data-filter="invite" type="checkbox" name="invite" value="invite">'+o(n.gettext.call(s,"Hide invitations",{name:"gettext",hash:{},data:a}))+"</label>\n</li>\n</ul>\n</div>\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div data-role="motd-alert"></div>\n<div class="section-contained">\n<div class="layout layout--tablet-no-aside">\n<div class="layout__main">\n<div class="layout__nav">\n<ul class="nav--no-aside">\n<li data-action="switch-tab" data-tab="all" class="nav__item active">\n<a href="/home/inbox/" class="nav-lnk -color-muted truncate-line">\n<div class="nav-lnk__blk">\n<span class="nav-lnk__icon icon icon-recent"></span>\n<span class="button__text">'+r(n.gettext.call(o,"Most Recent",{name:"gettext",hash:{},data:a}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n<li data-action="switch-tab" data-tab="replies" class="nav__item">\n<a href="/home/inbox/replies/" class="nav-lnk -color-muted truncate-line">\n<div class="nav-lnk__blk">\n<span class="nav-lnk__icon icon icon-replies"></span>\n<span class="button__text">'+r(n.gettext.call(o,"Replies",{name:"gettext",hash:{},data:a}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n<li class="nav__spacing hidden-md"></li>\n<li class="nav__item">\n<a href="/home/settings/web/" class="nav-lnk -color-muted truncate-line">\n<div class="nav-lnk__blk">\n<span class="nav-lnk__icon icon icon-settings"></span>\n<span class="button__text">'+r(n.gettext.call(o,"Settings",{name:"gettext",hash:{},data:a}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n</ul>\n</div>\n<div class="layout__content">\n<div data-role="email-verification-alert"></div>\n<div class="nav-notifs sidebar-fixed notifs-fixed visible-sidebar">\n<div class="nav-notifs-body">\n<h2 class="nav-notifs-title">'+r(n.gettext.call(o,"Notifications",{name:"gettext",hash:{},data:a}))+"</h2>\n"+(null!=(s=n.unless.call(o,null!=t?t.isLoggedOut:t,{name:"unless",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'<div class="nav-notifs-refresh">\n<a class="nav-refresh" data-action="refresh-drawer" href="#">\n<svg class="icon-refresh" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="338.2 -95.3 790.6 790.6" enable-background="new 338.2 -95.3 790.6 790.6" xml:space="preserve"><path d="M976.8 454.2l152-172.8h-98.9c-4.7-74.4-35.9-143.6-88.7-195.9C885.7 30.3 812.4 0 734.8 0 C571.7 0 439.1 134.5 439.1 300s132.6 300 295.7 300c66.2 0 131-22.5 182.5-63.4l9.3-7.4l-63.9-69.6l-8 6.1 c-34.7 26.3-76.1 40.2-119.8 40.2c-111.8 0-202.6-92.4-202.6-206S623 94.2 734.8 94.2c52.5 0 102.3 20.6 140.3 57.8 c35.3 34.7 56.6 80.3 60.6 129.4H823.5L976.8 454.2z"/></svg>\n</a>\n</div>\n</div>\n<ul class="nav-tabs">\n<li class="active" data-action="switch-tab" data-tab="all">\n<a class="truncate-line" href="/home/inbox/">\n'+r(n.gettext.call(o,"Most Recent",{name:"gettext",hash:{},data:a}))+'\n</a>\n</li>\n<li data-action="switch-tab" data-tab="replies">\n<a class="truncate-line" href="/home/inbox/replies/"><span class="icon-forward"></span>\n'+r(n.gettext.call(o,"Replies",{name:"gettext",hash:{},data:a}))+'\n</a>\n</li>\n</ul>\n</div>\n<div class="sidebar-scrollable notifs-scrollable scrollable-measure-selector"\ndata-role="content-area"></div>\n</div>\n</div>\n<aside class="layout__aside hidden-lg">\n<div data-role="recommend-module" data-recommend-type="user" data-jester-area="recommended-users" class="module--aside"></div>\n<div data-role="recommend-module" data-recommend-type="forum" data-jester-area="recommended-forums" class="module--aside"></div>\n<div class="text-smaller text-gray">\n'+(null!=(s=e.invokePartial(i.homeFooter,t,{name:"homeFooter",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n</aside>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/NotificationsView",["underscore","home/utils/sidebarUtils","home/views/common/TabbedView","home/views/common/FetchableCollectionLayout","home/views/NotificationCardCollectionView","home/views/MotdAlertView","home/views/RecommendationsModuleView","home/templates/notifications","home/mixins/withClickLinkTracking","home/mixins/withEmailVerificationAlert"],function(e,t,n,i,a,s,o,r,l,c){"use strict";var d=n.extend({defaultTab:"all",template:r,events:e.defaults({"click a[data-link-name]":"trackClickLink"},n.prototype.events),regions:e.defaults({recommendedUsersModuleRegion:"[data-role=recommend-module][data-recommend-type=user]",recommendedForumsModuleRegion:"[data-role=recommend-module][data-recommend-type=forum]",motdAlertRegion:"[data-role=motd-alert]"},n.prototype.regions),onDomRefresh:function(){n.prototype.onDomRefresh.call(this),this.recommendedUsersModuleRegion.show(o.createUserRecommendedModuleView({model:this.model.interestingUsers})),this.recommendedForumsModuleRegion.show(o.createForumRecommendedModuleView({model:this.model.interestingForums})),this.options.disableMOTD||this.motdAlertRegion.show(new s)},getTrackingSection:function(e){return"replies"===e&&e},getMetaAttrs:function(){return"Notifications"},getTabView:function(e){var t=this.model[e];if(t)return new i({model:t,collection:t.get("items"),fetchableCollectionView:a,infiniteScroll:!0})}});return l.call(d.prototype),t.isSidebar()||c.call(d.prototype),d}),define("home/templates/notificationCardLogin",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="card-wrap card--notification">\n<div class="card__reason">\n<div class="notification__icon">\n<span class="icon icon-megaphone icon__position"></span>\n</div>\n'+o(n.gettext.call(s,"%(disqus)s Announcement",{name:"gettext",hash:{disqus:"Disqus"},data:a}))+'\n</div>\n\n<div class="card__content -notification has-image">\n<a href="#" class="card-content__media" data-action="login">\n<div style="background-image: url('+o(n.urlfor.call(s,"cdn",{name:"urlfor",hash:{},data:a}))+'/img/notifications_logged_out.png)" class="img-cards"></div>\n</a>\n\n<div class="card-content__body">\n<h2 class="discussion-title" dir="auto">\n<a href="#" data-action="login" class="link-gray-darker truncate">\n'+o(n.gettext.call(s,"Get more with a %(disqus)s account!",{name:"gettext",hash:{disqus:"Disqus"},data:a}))+'\n</a>\n</h2>\n<div class="card-content__summary">\n'+o(n.gettext.call(s,"Signing up means that you'll now be able to find old comments, discover new discussions, and get notified when someone replies to you.",{name:"gettext",hash:{},data:a}))+'\n</div>\n<div class="spacing-top spacing-bottom">\n<button data-action="login" class="button button-fill--brand text-medium">\n'+o(n.gettext.call(s,"Log In or Sign Up",{name:"gettext",hash:{},data:a}))+"\n</button>\n</div>\n</div>\n</div>\n</div>\n"},useData:!0})}),define("home/views/NotificationCardLoginView",["backbone-marionette","home/templates/notificationCardLogin","home/utils/navigationUtils"],function(e,t,n){"use strict";var i=e.ItemView.extend({className:"card-notif-invite card-notif-note",events:{"click [data-action=login]":"navigateToLogin"},template:t,navigateToLogin:function(e){e&&e.preventDefault(),n.navigateToLogin()}});return i}),define("home/views/NotificationsLoggedOutView",["underscore","home/views/NotificationsView","home/views/NotificationCardLoginView"],function(e,t,n){"use strict";var i=t.extend({templateHelpers:function(){var n=t.prototype.templateHelpers;return e.defaults({isLoggedOut:!0},e.isFunction(n)?n.call(this):n)},getTabView:function(){return new n}});return i}),define("home/templates/forumView",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression,l=e.lambda;return'<div class="section-expanded sidebar-fixed">\n<div class="cover cover-forum" data-role="cover-area"></div>\n</div>\n<div class="section-contained">\n<div class="layout">\n<div class="layout__main">\n<div class="layout__nav hidden-sidebar">\n<ul class="nav--aside">\n<li data-action="switch-tab" data-tab="recent" class="nav__item">\n<a title="'+r(n.gettext.call(o,"Latest Discussions",{name:"gettext",hash:{},data:a}))+'" class="truncate-line nav-lnk -color-muted"\nhref="/home/forum/'+r(l(null!=t?t.id:t,t))+'/">\n<div class="nav-lnk__blk">\n<span class="button__text">'+r(n.gettext.call(o,"Latest Discussions",{name:"gettext",hash:{},data:a}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n\n</a>\n</li>\n<li data-action="switch-tab" data-tab="commenters" class="nav__item">\n<a title="'+r(n.gettext.call(o,"Top Commenters",{name:"gettext",hash:{},data:a}))+'" class="truncate-line nav-lnk -color-muted"\nhref="/home/forum/'+r(l(null!=t?t.id:t,t))+'/commenters/">\n<div class="nav-lnk__blk">\n<span class="button__text">'+r(n.gettext.call(o,"Top Commenters",{name:"gettext",hash:{},data:a}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n</ul>\n</div>\n<div class="layout__content">\n<div class="sidebar-scrollable forum-scrollable scrollable-measure-selector"\ndata-role="content-area"></div>\n</div>\n</div>\n<aside class="layout__aside hidden-md">\n<div data-role="sign-up-module"></div>\n<div data-role="recommend-module" data-recommend-type="forum" data-jester-area="recommended-forums" class="module--aside"></div>\n<div data-role="recommend-module" data-recommend-type="user" data-jester-area="recommended-users" class="module--aside"></div>\n<div class="text-smaller text-gray">\n'+(null!=(s=e.invokePartial(i.homeFooter,t,{name:"homeFooter",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n</aside>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/mixins/asForumProfileCard",["underscore","home/utils/layoutUtils","home/mixins/withTruncate","home/mixins/withThreadCardDefaultFooter"],function(e,t,n,i){"use strict";var a=function(){n.apply(this,arguments),i.apply(this,arguments),this.initialize=e.wrap(this.initialize,function(t){t.apply(this,e.rest(arguments));
var n=this.model.thread||this.model;this.listenTo(n,"change:content",this.render),this.numTitleLines=3}),this.serializeData=e.wrap(this.serializeData,function(n){var i=n.apply(this,e.rest(arguments)),a=this.model.thread||this.model;return e.defaults(i,{image:a.getImage(),canShowThreadImage:!t.isNarrowLayout(),thread:a.toJSON(),numTitleLines:this.numTitleLines})})};return a}),define("home/templates/forumProfileCardRecent",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return" no-image"},3:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.image:t,{name:"if",hash:{},fn:e.program(4,a,0),inverse:e.noop,data:a}))?s:""},4:function(e,t){var n,i=e.lambda,a=e.escapeExpression;return'<a href="'+a(i(null!=(n=null!=t?t.thread:t)?n.link:n,t))+'"\nclass="discussion-image"\ndata-link-name="image"\ndata-link-out="'+a(i(null!=(n=null!=t?t.thread:t)?n.signedLink:n,t))+'"\ndata-thread-id="'+a(i(null!=(n=null!=t?t.thread:t)?n.id:n,t))+'">\n\n<img src="'+a(i(null!=(n=null!=t?t.image:t)?n.src:n,t))+'" alt="'+a(i(null!=(n=null!=t?t.image:t)?n.title:n,t))+'">\n</a>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression,l=e.lambda;return'<div class="card-discussion'+(null!=(s=n.unless.call(o,null!=t?t.image:t,{name:"unless",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'">\n<div class="card-aside">\n'+(null!=(s=n["if"].call(o,null!=t?t.canShowThreadImage:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+'</div>\n<div class="card-body">\n<div class="card-reason">\n'+r(n.gettext.call(o,"Recent activity",{name:"gettext",hash:{},data:a}))+" "+r(l(null!=t?t.relativeTime:t,t))+"\n</div>\n"+(null!=(s=e.invokePartial(i.threadTitle,t,{name:"threadTitle",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<div class="card-summary">\n<div class="card-summary-content truncate" data-truncate-lines="2" dir="auto">\n'+(null!=(s=l(null!=t?t.threadDescriptionHTML:t,t))?s:"")+'\n</div>\n</div>\n<footer class="card-footer" data-role="footer"></div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/ForumProfileCardRecentView",["underscore","home/views/common/ActivityCardView","home/mixins/asForumProfileCard","home/templates/forumProfileCardRecent"],function(e,t,n,i){"use strict";var a=t,s=a.prototype,o=a.extend({className:"card card-profile card-profile-forum",template:i,serializeData:function(){var t=s.serializeData.apply(this,arguments),n=this.model.thread;return e.defaults(t,{relativeTime:this.model.getRelativeTimestamp(),target:this.model.activities[0].target.toJSON(),threadDescriptionHTML:n.getDefaultDescription()})}});return n.call(o.prototype),o}),define("home/views/ForumProfileCardCollectionView",["home/views/common/FetchableCollectionView","home/views/ForumProfileCardRecentView","home/mixins/withViewFeedTracking"],function(e,t,n){"use strict";var i=e.extend({className:"cards",itemView:t});return n.call(i.prototype),i}),define("home/templates/forumCover",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t){return'<p class="cover-description">\n'+e.escapeExpression(e.lambda(null!=t?t.plainDescription:t,t))+"\n</p>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression,l=null!=t?t:{};return'<div class="section-contained">\n<div class="cover-body">\n<div class="cover-body-left">\n<div class="cover-profile-content" dir="auto">\n<div class="cover-profile-name-wrapper">\n<a href="'+r(o(null!=t?t.url:t,t))+'" data-link-out="'+r(o(null!=t?t.signedUrl:t,t))+'"><img class="cover-favicon" src="'+r(o(null!=t?t.faviconImage:t,t))+'" alt="'+(null!=(s=e.invokePartial(i.forumName,t,{name:"forumName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'"></a>\n<a href="'+r(o(null!=t?t.url:t,t))+'" data-link-out="'+r(o(null!=t?t.signedUrl:t,t))+'"><h1 class="cover-profile-name truncate-line">'+(null!=(s=e.invokePartial(i.forumName,t,{name:"forumName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</h1></a>\n<div class="cover-profile-action">\n'+(null!=(s=e.invokePartial(i.genericFollowButton,t,{name:"genericFollowButton",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n</div>\n"+(null!=(s=n["if"].call(l,null!=t?t.plainDescription:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'<ul class="cover-attributes">\n<li class="cover-attribute">\n<a href="'+r(o(null!=t?t.url:t,t))+'" data-link-out="'+r(o(null!=t?t.signedUrl:t,t))+'">'+r(o(null!=t?t.friendlyUrl:t,t))+'</a>\n</li>\n</ul>\n<div class="cover-profile-action-mobile">\n'+(null!=(s=e.invokePartial(i.genericFollowButton,t,{name:"genericFollowButton",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</div>\n</div>\n</div>\n</div>\n</div>\n<div class="cover-nav-wrapper visible-sidebar">\n<div class="section-contained">\n<nav class="cover-nav cover-nav-profile-user">\n<ul class="cover-nav-options">\n<li class="cover-nav-option active" data-action="switch-tab" data-tab="recent">\n<a title="'+r(n.gettext.call(l,"Latest Discussions",{name:"gettext",hash:{},data:a}))+'" class="truncate-line" href="/home/forum/'+r(o(null!=t?t.id:t,t))+'/">\n<span class="hidden-md">'+r(n.gettext.call(l,"Latest Discussions",{name:"gettext",hash:{},data:a}))+'</span>\n<span class="visible-md">'+r(n.gettext.call(l,"Latest",{name:"gettext",hash:{},data:a}))+'</span>\n</a>\n</li>\n<li class="cover-nav-option" data-action="switch-tab" data-tab="commenters">\n<a title="'+r(n.gettext.call(l,"Top Commenters",{name:"gettext",hash:{},data:a}))+'" class="truncate-line" href="/home/forum/'+r(o(null!=t?t.id:t,t))+'/commenters/">\n<span class="hidden-md">'+r(n.gettext.call(l,"Top Commenters",{name:"gettext",hash:{},data:a}))+'</span>\n<span class="visible-md">'+r(n.gettext.call(l,"Commenters",{name:"gettext",hash:{},data:a}))+"</span>\n</a>\n</li>\n</ul>\n</nav>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ForumCoverView",["backbone-marionette","home/models/Session","home/templates/forumCover"],function(e,t,n){"use strict";var i=e.ItemView.extend({template:n,templateHelpers:function(){return{friendlyUrl:this.model.getFriendlyUrl(),plainDescription:this.model.getPlainDescription()}},events:{"click [data-action=toggle-follow]":"toggleFollow"},modelEvents:{"change:name":"render","change:isFollowing":"handleFollowedClass"},initialize:function(){this.session=t.get(),this.listenTo(this.session,"setModeratedForums",this.render)},handleFollowedClass:function(){this.$("[data-action=toggle-follow]").toggleClass("active",this.model.get("isFollowing"))},toggleFollow:function(e){e&&e.preventDefault(),this.model.toggleFollowed()}},{getModel:function(e){return e.forum||e}});return i}),define("home/templates/forumProfileRecentEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="empty-message">\n\n<svg class="art-empty-community" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 94 128" enable-background="new 0 0 94 128" xml:space="preserve"><path class="house" d="M61 118.4l-9.8-10c-0.5-0.5-1.3-0.5-1.8 0l-9.8 10c-0.5 0.5-0.3 1 0.4 1h2v7.7c0 0.6 0 1 1 1h4.8v-7.7h5 v7.7h5c0.8 0 0.8-0.4 0.8-1v-7.7h2C61.3 119.3 61.5 118.9 61 118.4z" /><path class="bubble-top" d="M75.2 21C75.2 9.4 66.2 0 55 0C43.8 0 34.8 9.4 34.8 21c0 3.1 0.7 6.1 1.8 8.7l-3.4 8.5l8.7-1.2 c3.5 3.1 8.1 5 13.1 5C66.2 42 75.2 32.6 75.2 21z M56.4 26.6h-1.9V22h-5.1v4.5h-1.9V15.8h1.9v4.5h5.1v-4.5h1.9V26.6z M60.9 26.6 h-1.9v-8.1h1.9V26.6z M61 17.2h-2v-1.8h2V17.2z"/><path class="bubble-left" d="M79.3 47c-8 0-14.5 6.7-14.5 15c0 2.2 0.5 4.3 1.3 6.2l-2.4 6.1l6.2-0.9c2.5 2.2 5.8 3.6 9.3 3.6 c8 0 14.5-6.7 14.5-15S87.3 47 79.3 47z M80.5 66.6H79v-3.7h-4.2v3.7h-1.6v-8.9h1.6v3.7H79v-3.7h1.6V66.6z M84.3 66.6h-1.5v-6.7h1.5 V66.6z M84.3 58.9h-1.6v-1.5h1.6V58.9z" /><path class="bubble-right" d="M48.4 72c0-13.8-10.8-25-24.1-25C11 47 0.2 58.2 0.2 72S11 97 24.3 97c5.9 0 11.4-2.2 15.6-5.9l10.3 1.5 l-4-10.2C47.7 79.2 48.4 75.7 48.4 72z M26.4 78.6h-2.2v-5.3h-6v5.3H16V66h2.2v5.3h6V66h2.2V78.6z M31.7 78.6h-2.2v-9.5h2.2V78.6z M31.8 67.6h-2.3v-2.1h2.3V67.6z"/></svg>\n\n'+o(n.gettext.call(s,"This community hasn't been busy recently.",{name:"gettext",hash:{},data:a}))+'</br><a href="/">'+o(n.gettext.call(s,"Head back home to find interesting discussions »",{name:"gettext",hash:{},data:a}))+"</a>\n</div>\n"},useData:!0})}),define("home/views/ForumProfileRecentEmptyView",["backbone-marionette","home/templates/forumProfileRecentEmpty"],function(e,t){"use strict";var n=e.ItemView.extend({template:t});return n}),define("home/templates/forumProfileTopCommentersEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="empty-message">\n\n<svg class="art-empty-community" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 94 128" enable-background="new 0 0 94 128" xml:space="preserve"><path class="house" d="M61 118.4l-9.8-10c-0.5-0.5-1.3-0.5-1.8 0l-9.8 10c-0.5 0.5-0.3 1 0.4 1h2v7.7c0 0.6 0 1 1 1h4.8v-7.7h5 v7.7h5c0.8 0 0.8-0.4 0.8-1v-7.7h2C61.3 119.3 61.5 118.9 61 118.4z" /><path class="bubble-top" d="M75.2 21C75.2 9.4 66.2 0 55 0C43.8 0 34.8 9.4 34.8 21c0 3.1 0.7 6.1 1.8 8.7l-3.4 8.5l8.7-1.2 c3.5 3.1 8.1 5 13.1 5C66.2 42 75.2 32.6 75.2 21z M56.4 26.6h-1.9V22h-5.1v4.5h-1.9V15.8h1.9v4.5h5.1v-4.5h1.9V26.6z M60.9 26.6 h-1.9v-8.1h1.9V26.6z M61 17.2h-2v-1.8h2V17.2z"/><path class="bubble-left" d="M79.3 47c-8 0-14.5 6.7-14.5 15c0 2.2 0.5 4.3 1.3 6.2l-2.4 6.1l6.2-0.9c2.5 2.2 5.8 3.6 9.3 3.6 c8 0 14.5-6.7 14.5-15S87.3 47 79.3 47z M80.5 66.6H79v-3.7h-4.2v3.7h-1.6v-8.9h1.6v3.7H79v-3.7h1.6V66.6z M84.3 66.6h-1.5v-6.7h1.5 V66.6z M84.3 58.9h-1.6v-1.5h1.6V58.9z" /><path class="bubble-right" d="M48.4 72c0-13.8-10.8-25-24.1-25C11 47 0.2 58.2 0.2 72S11 97 24.3 97c5.9 0 11.4-2.2 15.6-5.9l10.3 1.5 l-4-10.2C47.7 79.2 48.4 75.7 48.4 72z M26.4 78.6h-2.2v-5.3h-6v5.3H16V66h2.2v5.3h6V66h2.2V78.6z M31.7 78.6h-2.2v-9.5h2.2V78.6z M31.8 67.6h-2.3v-2.1h2.3V67.6z"/></svg>\n\n'+o(n.gettext.call(s,"Darn. No one comments in this community.",{name:"gettext",hash:{},data:a}))+'</br><a href="/">'+o(n.gettext.call(s,"Head back home to find interesting discussions »",{name:"gettext",hash:{},data:a}))+"</a>\n</div>\n"},useData:!0})}),define("home/views/ForumProfileTopCommentersEmptyView",["backbone-marionette","home/templates/forumProfileTopCommentersEmpty"],function(e,t){"use strict";var n=e.ItemView.extend({template:t});return n}),define("home/views/UserCollectionView",["home/mixins/withItemRemovalSkipped","home/views/UserCardView","home/views/common/FetchableCollectionView","home/mixins/withViewFeedTracking"],function(e,t,n,i){"use strict";var a=n.extend({itemView:t,className:"cards",emptyViewOptions:function(){return{model:this.options.user}}});return e.call(a.prototype),i.call(a.prototype),a}),define("home/templates/loginOverlay",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t){return e.escapeExpression(e.lambda(null!=t?t.prompt:t,t))+"\n"},3:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Sign up to join great discussions or start your own.",{name:"gettext",hash:{},data:a}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div class="login-overlay__content text-center text-light" id="explore-overlay">\n<h2 class="text-large text-bold">\n'+(null!=(s=n["if"].call(o,null!=t?t.prompt:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+'</h2>\n<section data-step="networks" class="spacing-bottom login-overlay__container">\n<div class="spacing-top spacing-bottom-narrow align">\n<button class="button button-fill -dark-hover -facebook text-medium align__item--grow spacing-right" data-action="auth" data-network="facebook">Facebook</button>\n<button class="button button-fill -dark-hover -twitter text-medium align__item--grow spacing-right" data-action="auth" data-network="twitter">Twitter</button>\n<button class="button button-fill -dark-hover -email text-medium align__item--grow" data-action="change-step show-login-overlay" data-target="disqus-signup">'+r(n.gettext.call(o,"Email",{name:"gettext",hash:{},data:a}))+'</button>\n</div>\n<div>\n<button data-action="auth" data-network="disqus" class="button button-inline text-medium">'+r(n.gettext.call(o,"Have an account? Log in.",{name:"gettext",hash:{},data:a}))+'</button>\n</div>\n</section>\n\n<section data-step="disqus-signup" class="is-hidden spacing-top-double login-overlay__container">\n<form data-role="disqus-signup">\n<div class="spacing-top spacing-bottom form-attribute-input" data-attribute="display_name">\n<input type="text" class="input--textbox -padded" placeholder="'+r(n.gettext.call(o,"Name",{name:"gettext",hash:{},data:a}))+'" name="display_name">\n<p class="form-message-error spacing-narrow text-small text-left" data-role="attribute-error"></p>\n</div>\n<div class="spacing-bottom form-attribute-input" data-attribute="email">\n<input type="text" class="input--textbox -padded" placeholder="'+r(n.gettext.call(o,"Email",{name:"gettext",hash:{},data:a}))+'" name="email">\n<p class="form-message-error spacing-narrow text-small text-left" data-role="attribute-error"></p>\n</div>\n<div class="spacing-bottom form-attribute-input" data-attribute="password">\n<input type="password" class="input--textbox -padded" placeholder="'+r(n.gettext.call(o,"Password",{name:"gettext",hash:{},data:a}))+'" name="password">\n<p class="form-message-error spacing-narrow text-small text-left" data-role="attribute-error"></p>\n</div>\n<p class="spacing-bottom text-small">\n'+r(n.gettext.call(o,"By signing up you agree to the %(disqus)s %(rules)s, %(tos)s, and %(privacyPolicy)s.",{name:"gettext",hash:{privacyPolicy:n.tag.call(o,"a",{name:"tag",hash:{"class":"text-semibold link-inverted",target:"_blank",href:"https://help.disqus.com/customer/portal/articles/466259-privacy-policy",text:n.gettext.call(o,"Privacy Policy",{name:"gettext",hash:{},data:a})},data:a}),tos:n.tag.call(o,"a",{name:"tag",hash:{"class":"text-semibold link-inverted",target:"_blank",href:"https://help.disqus.com/customer/portal/articles/466260-terms-of-service",text:n.gettext.call(o,"Terms of Service",{name:"gettext",hash:{},data:a})},data:a}),rules:n.tag.call(o,"a",{name:"tag",hash:{"class":"text-semibold link-inverted",target:"_blank",href:"https://help.disqus.com/customer/portal/articles/1753105-basic-rules-for-disqus-powered-profiles-and-discussions",text:n.gettext.call(o,"Basic Rules",{name:"gettext",hash:{},data:a})},data:a}),disqus:"Disqus"},data:a}))+'\n</p>\n<div class="form-submit spacing-bottom" data-role="submit-btn-container">\n<button class="button button-fill -dark-gray button-wide button-large text-bold">'+r(n.gettext.call(o,"Sign up",{name:"gettext",hash:{},data:a}))+'</button>\n<div class="spinner-small spinner--centered"></div>\n</div>\n</form>\n<div>\n<button data-action="auth" data-network="disqus" class="link-inverted text-medium">'+r(n.gettext.call(o,"Have an account? Log in.",{name:"gettext",hash:{},data:a}))+'</button>\n</div>\n</section>\n</div>\n<div class="login-overlay__transparency"></div>'},useData:!0})}),define("home/views/LoginOverlayView",["underscore","home/views/common/LoginFormView","home/templates/loginOverlay"],function(e,t,n){"use strict";var i=t.extend({events:e.defaults({"click [data-action~=show-login-overlay]":"showAsOverlay"},t.prototype.events),template:n,templateHelpers:function(){return{prompt:this.prompt}},className:"login-overlay__wrapper hidden-sidebar",initialize:function(e){t.prototype.initialize.call(this,e),this.prompt=e&&e.prompt},showAsOverlay:function(){this.$el.removeClass("is-footer").addClass("is-overlay"),this.trigger("shown:overlay")},showAsFooter:function(e){this.$el.removeClass("is-overlay").toggleClass("is-footer",!!e)}});return i}),define("home/templates/signUpAsideModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="aside__wrap -brand text-center" data-role="login-prompt-module">\n<h2 class="text-large text-bold">'+o(n.gettext.call(s,"There's more to talk about...",{name:"gettext",hash:{},data:a}))+"</h2>\n<p>"+o(n.gettext.call(s,"Great discussions are happening here on %(disqus)s. You'll never be bored.",{name:"gettext",hash:{disqus:"Disqus"},data:a}))+'</p>\n<p>\n<button class="button button-outline -border-light text-medium button-wide" data-action="show-login-overlay">\n'+o(n.gettext.call(s,"Join %(disqus)s",{name:"gettext",hash:{disqus:"Disqus"},data:a}))+"\n</button>\n</p>\n</div>\n"},useData:!0})}),define("home/mixins/withLoginOverlay",["jquery","underscore","backbone-marionette","home/models/Session","home/views/LoginOverlayView","home/templates/signUpAsideModule","home/utils/layoutUtils"],function(e,t,n,i,a,s,o){"use strict";var r={regions:{loginModuleRegion:"[data-role=sign-up-module]"},events:{"click [data-action~=show-login-overlay]":"showLoginOverlay"},initialize:function(n,i){n.call(this,i),this.boundEnsureLoginPromptInViewport=t.bind(this.ensureLoginPromptInViewport,this),e(window).scroll(this.boundEnsureLoginPromptInViewport)},onClose:function(){this.unbindScrollHandler(),this.loginOverlayView&&this.loginOverlayView.close()},onRender:function(e){t.isFunction(e)&&e.call(this);var i=function(){return new n.ItemView({template:s})};this.activateRegion?this.activateRegion(this.loginModuleRegion,i):this.loginModuleRegion.show(i())},ensureLoginPromptInViewport:t.debounce(function(){var e=this.$("[data-role=login-prompt-module]"),t=!e.length||!o.isElementInViewport(e);this.showLoginFooter(t)},200),unbindScrollHandler:function(){e(window).off("scroll",this.boundEnsureLoginPromptInViewport)},showLoginOverlay:function(){this.loginOverlayView.showAsOverlay()},showLoginFooter:function(e){this.loginOverlayView.showAsFooter(e)},onDomRefresh:function(e,n){t.isFunction(n)&&n.call(this),this.loginOverlayView||(this.loginOverlayView=new a(e),this.listenTo(this.loginOverlayView,"shown:overlay",this.unbindScrollHandler),this.$el.after(this.loginOverlayView.render().$el))}};return function(e){i.isKnownToBeLoggedOut()&&(this.regions=t.extend({},r.regions,this.regions),this.events=t.extend({},r.events,this.events),this.initialize=t.wrap(this.initialize,r.initialize),this.onRender=t.wrap(this.onRender,r.onRender),this.onDomRefresh=t.wrap(this.onDomRefresh,t.partial(r.onDomRefresh,{prompt:e})),t.extend(this,t.pick(r,["showLoginFooter","showLoginOverlay","ensureLoginPromptInViewport","unbindScrollHandler"])))}}),define("home/views/ForumProfileView",["underscore","core/strings","home/templates/forumView","home/views/common/FetchableCollectionLayout","home/views/common/TabbedView","home/models/Session","home/utils/backboneUtils","home/views/RecommendationsModuleView","home/views/ForumProfileCardCollectionView","home/views/ForumCoverView","home/views/ForumProfileRecentEmptyView","home/views/ForumProfileTopCommentersEmptyView","home/views/UserCollectionView","home/mixins/withClickLinkTracking","home/mixins/withLoginOverlay"],function(e,t,n,i,a,s,o,r,l,c,d,u,h,m,p){"use strict";var f=t.get,g=a.extend({defaultTab:"recent",template:n,regions:e.defaults({coverRegion:"[data-role=cover-area]",recommendedUsersModuleRegion:"[data-role=recommend-module][data-recommend-type=user]",recommendedForumsModuleRegion:"[data-role=recommend-module][data-recommend-type=forum]"},a.prototype.regions),events:e.defaults({"click a[data-link-name]":"trackClickLink"},a.prototype.events),initialize:function(){a.prototype.initialize.apply(this,arguments);var e=s.get();e.loadPromise().then(function(){e.userProfile.forumsFollowing.ensureFetched()})},getTabView:function(e){var t;switch(e){case"recent":return t=new i({model:this.model.recent,collection:this.model.recent.get("items"),fetchableCollectionView:l,emptyView:d,infiniteScroll:!0});case"commenters":return t=new i({user:this.model.user,model:this.model.mostLikedUsers,collection:this.model.mostLikedUsers.get("items"),fetchableCollectionView:h,emptyView:u,infiniteScroll:!0}),t.$el.attr({"class":"card-wrap"}),t}},getTrackingSection:function(e){switch(e){case"recent":return"recent_threads";case"commenters":return"top_commenters"}},renderCover:function(){var t=new c({model:this.model.forum});t.listenTo(t,"dom:refresh",e.bind(this.updateTabClasses,this)),this.coverRegion.show(t)},onDomRefresh:function(){return this.$(this.coverRegion.el).length&&this.renderCover(),this.recommendedUsersModuleRegion.show(r.createUserRecommendedModuleView({model:this.model.interestingUsers})),this.recommendedForumsModuleRegion.show(r.createForumRecommendedModuleView({model:this.model.interestingForums})),a.prototype.onDomRefresh.apply(this,arguments)},getPageTitle:function(){var e=this.model.forum;return o.getPromiseFor(e,"name").then(function(e){return t.interpolate(f("%(forum)s · Conversations"),{forum:e})})},getMetaAttrs:function(){var e=this.model.forum;return this.getPageTitle().then(function(t){return{title:t,description:e.get("description"),image:e.has("favicon")&&e.get("favicon").cache,type:"article"}})},getPageTrackingParams:function(){var e=this.model.forum;return this.getPageTitle().then(function(t){return{forum:e.id,title:t}})},refreshRecommendedFeed:function(){this.model.popular.fetchItems({reset:!0})}});return m.call(g.prototype),p.call(g.prototype),g}),define("home/templates/topicCover",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=e.escapeExpression;return'<div class="cover-body-left">\n<h1 class="cover-title text-capitalized">'+s(e.lambda(null!=t?t.id:t,t))+'</h1>\n<p class="cover-description">'+s(n.gettext.call(null!=t?t:{},"Trending discussions",{name:"gettext",hash:{},data:a}))+"</p>\n</div>\n"},useData:!0})}),define("home/views/TopicCoverView",["backbone-marionette","home/utils/backboneUtils","home/templates/topicCover"],function(e,t,n){"use strict";var i=e.ItemView.extend({className:"cover-body",template:n,getMetaAttrs:function(){return t.getPromiseFor(this.model,"name").then(function(e){return e.charAt(0).toUpperCase()+e.slice(1)})}},{getModel:function(e){return e.topic||e}});return i}),define("home/templates/profileCover",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t){return'<div class="hidden-sidebar cover-profile-reputation">\n<span class="badge -reputation">'+e.escapeExpression(e.lambda(null!=t?t.userReputationLabel:t,t))+"</span>\n</div>\n"},3:function(e,t){var n,i=e.lambda,a=e.escapeExpression;return'<img src="'+a(i(null!=(n=null!=t?t.avatar:t)?n.cache:n,t))+'" alt="'+a(i(null!=t?t.username:t,t))+'" />\n'},5:function(e,t){return'<img src="'+e.escapeExpression(e.lambda(null!=t?t.CDN_ROOT:t,t))+'/img/avatar-default.png" />\n'},7:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<div class="cover-profile-action">\n'+(null!=(s=e.invokePartial(i.userFollowButton,t,{name:"userFollowButton",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+(null!=(s=n["if"].call(o,null!=t?t.isSessionUser:t,{name:"if",hash:{},fn:e.program(8,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=n.unless.call(o,null!=t?t.isSessionUser:t,{name:"unless",hash:{},fn:e.program(10,a,0),inverse:e.noop,data:a}))?s:"")+"</div>\n"},8:function(e,t,n,i,a){return'<a href="/home/settings/profile/" class="button button-fill button-small cover-profile-action-edit">\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Edit Profile",{name:"gettext",hash:{},data:a}))+"\n</a>\n"},10:function(e,t,n,i,a){var s;return null!=(s=e.invokePartial(i.profileCoverDropdown,t,{name:"profileCoverDropdown",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:""},12:function(e,t,n,i,a){var s;return'<div class="cover-profile-action-mobile">'+(null!=(s=e.invokePartial(i.userFollowButton,t,{name:"userFollowButton",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+(null!=(s=n.unless.call(null!=t?t:{},null!=t?t.isSessionUser:t,{name:"unless",hash:{},fn:e.program(10,a,0),inverse:e.noop,data:a}))?s:"")+"</div>\n"},14:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression,l=e.lambda;return'<div class="cover-nav-wrapper">\n<div class="section-contained">\n<nav class="cover-nav cover-nav-profile-user">\n<ul class="cover-nav-options">\n<li class="cover-nav-option" data-action="switch-tab" data-tab="comments">\n<a title="'+r(n.gettext.call(o,"Comments",{name:"gettext",hash:{},data:a}))+'" class="truncate-line" href="/by/'+r(l(null!=t?t.username:t,t))+'/comments/">\n'+r(n.gettext.call(o,"Comments",{name:"gettext",hash:{},data:a}))+"\n"+(null!=(s=n["if"].call(o,null!=t?t.showNumPosts:t,{name:"if",hash:{},fn:e.program(15,a,0),inverse:e.noop,data:a}))?s:"")+'</a>\n</li>\n<li class="cover-nav-option hidden-sidebar" data-action="switch-tab" data-tab="discussions">\n<a title="'+r(n.gettext.call(o,"Discussions",{name:"gettext",hash:{},data:a}))+'" class="truncate-line" href="/by/'+r(l(null!=t?t.username:t,t))+'/discussions/">\n'+r(n.gettext.call(o,"Discussions",{name:"gettext",hash:{},data:a}))+'\n</a>\n</li>\n<li class="cover-nav-option" data-action="switch-tab" data-tab="favorites">\n<a title="'+r(n.gettext.call(o,"Recommends",{name:"gettext",hash:{},data:a}))+'" class="truncate-line" href="/by/'+r(l(null!=t?t.username:t,t))+'/favorites/">\n'+r(n.gettext.call(o,"Recommends",{name:"gettext",hash:{},data:a}))+'\n</a>\n</li>\n<li class="cover-nav-option hidden-md" data-action="switch-tab" data-tab="followers">\n<a title="'+r(n.gettext.call(o,"Followers",{name:"gettext",hash:{},data:a}))+'" class="truncate-line" href="/by/'+r(l(null!=t?t.username:t,t))+'/followers/">\n'+r(n.gettext.call(o,"Followers",{name:"gettext",hash:{},data:a}))+"\n"+(null!=(s=n["if"].call(o,null!=t?t.showNumFollowers:t,{name:"if",hash:{},fn:e.program(17,a,0),inverse:e.noop,data:a}))?s:"")+'</a>\n</li>\n<li class="cover-nav-option visible-sidebar-md" data-action="switch-tab" data-tab="following">\n<a title="'+r(n.gettext.call(o,"Following",{name:"gettext",hash:{},data:a}))+'" class="truncate-line" href="/by/'+r(l(null!=t?t.username:t,t))+'/following/">\n'+r(n.gettext.call(o,"Following",{name:"gettext",hash:{},data:a}))+"\n"+(null!=(s=n["if"].call(o,null!=t?t.showNumTotalFollowing:t,{name:"if",hash:{},fn:e.program(19,a,0),inverse:e.noop,data:a}))?s:"")+"</a>\n</li>\n</ul>\n</nav>\n</div>\n</div>\n"},15:function(e,t){return'<span class="cover-nav-option-count">'+e.escapeExpression(e.lambda(null!=t?t.numPosts:t,t))+"</span>\n"},17:function(e,t){return'<span class="cover-nav-option-count hidden-md" data-role="num-followers">'+e.escapeExpression(e.lambda(null!=t?t.numFollowers:t,t))+"</span>\n"},19:function(e,t){return'<span class="cover-nav-option-count hidden-md" data-role="num-following">'+e.escapeExpression(e.lambda(null!=t?t.numTotalFollowing:t,t))+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.lambda,l=e.escapeExpression;return'<div class="section-contained">\n<div class="cover-body">\n'+(null!=(s=n["if"].call(o,null!=t?t.isDisqusNetMod:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'\n<div class="cover-body-left">\n<div class="cover-profile-avatar-wrapper">\n<a href="/by/'+l(r(null!=t?t.username:t,t))+'/" class="cover-profile-avatar">\n'+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.avatar:t)?s.cache:s,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.program(5,a,0),data:a}))?s:"")+'</a>\n</div>\n<div class="cover-profile-content" dir="auto">\n<div class="cover-profile-name-wrapper">\n<h1 class="cover-profile-name text-largest truncate-line">'+l(r(null!=t?t.name:t,t))+"</h1>\n"+(null!=(s=n.unless.call(o,null!=t?t.isBlocked:t,{name:"unless",hash:{},fn:e.program(7,a,0),inverse:e.noop,data:a}))?s:"")+'</div>\n<div class="cover-attribute-details">\n'+(null!=(s=e.invokePartial(i.profileCoverAttributes,t,{name:"profileCoverAttributes",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n\n"+(null!=(s=n.unless.call(o,null!=t?t.isBlocked:t,{name:"unless",hash:{},fn:e.program(12,a,0),inverse:e.noop,data:a}))?s:"")+"</div>\n</div>\n</div>\n</div>\n"+(null!=(s=n.unless.call(o,null!=t?t.isBlocked:t,{name:"unless",hash:{},fn:e.program(14,a,0),inverse:e.noop,data:a}))?s:"")},usePartial:!0,useData:!0})}),define("home/templates/spinnerTall",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(){return'<div class="spinner-wrapper tall">\n<div class="spinner tall"></div>\n</div>\n'},useData:!0})}),define("home/templates/reportUser",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="modal-header">\n<h4 class="modal-title">'+o(n.gettext.call(s,"Report %(user)s?",{name:"gettext",hash:{user:null!=t?t.user:t},data:a}))+'</h4>\n</div>\n<div class="modal-body">\n<h2 class="text-gray">'+o(n.gettext.call(s,"Choose why you're reporting this user",{name:"gettext",hash:{},data:a}))+'</h2>\n<form class="fieldset" role="group">\n<div class="fieldset__block align__item">\n<label class="fieldset__block--radio text-medium">\n<input type="radio" class="input--radio" name="reason" value="6" checked>\n<strong>'+o(n.gettext.call(s,"I disagree with this user",{name:"gettext",hash:{},data:a}))+'</strong>\n</label>\n<label class="fieldset__block--radio text-medium">\n<input type="radio" class="input--radio" name="reason" value="0">\n<strong>'+o(n.gettext.call(s,"Harassment",{name:"gettext",hash:{},data:a}))+"</strong> &mdash; "+o(n.gettext.call(s,"posted harassing comments or discussions targeting me, or encouraged others to do so",{name:"gettext",hash:{},data:a}))+'\n</label>\n<label class="fieldset__block--radio text-medium">\n<input type="radio" class="input--radio" name="reason" value="1">\n<strong>'+o(n.gettext.call(s,"Spam",{name:"gettext",hash:{},data:a}))+"</strong> &mdash; "+o(n.gettext.call(s,"posted spam comments or discussions",{name:"gettext",hash:{},data:a}))+'\n</label>\n<label class="fieldset__block--radio text-medium">\n<input type="radio" class="input--radio" name="reason" value="2">\n<strong>'+o(n.gettext.call(s,"Inappropriate profile",{name:"gettext",hash:{},data:a}))+"</strong> &mdash; "+o(n.gettext.call(s,"profile contains inappropriate images or text",{name:"gettext",hash:{},data:a}))+'\n</label>\n<label class="fieldset__block--radio text-medium">\n<input type="radio" class="input--radio" name="reason" value="3">\n<strong>'+o(n.gettext.call(s,"Threatening content",{name:"gettext",hash:{},data:a}))+"</strong> &mdash; "+o(n.gettext.call(s,"posted directly threatening content",{name:"gettext",hash:{},data:a}))+'\n</label>\n<label class="fieldset__block--radio text-medium">\n<input type="radio" class="input--radio" name="reason" value="4">\n<strong>'+o(n.gettext.call(s,"Impersonation",{name:"gettext",hash:{},data:a}))+"</strong> &mdash; "+o(n.gettext.call(s,"misrepresents themselves as yourself",{name:"gettext",hash:{},data:a}))+'\n</label>\n<label class="fieldset__block--radio text-medium">\n<input type="radio" class="input--radio" name="reason" value="5">\n<strong>'+o(n.gettext.call(s,"Private information",{name:"gettext",hash:{},data:a}))+"</strong> &mdash; "+o(n.gettext.call(s,"posted your personally identifiable information",{
name:"gettext",hash:{},data:a}))+'\n</label>\n</div>\n</form>\n<p class="form-description text-gray text-small spacing-top">\n'+o(n.gettext.call(s,"Before reporting, review the %(basicRules)s that apply to all %(disqus)s users. Keep in mind that %(disqus)s does not moderate communities. If you see something, report it first to the moderators or block the user.",{name:"gettext",hash:{basicRules:n.tag.call(s,"a",{name:"tag",hash:{text:n.gettext.call(s,"Basic Rules",{name:"gettext",hash:{},data:a}),target:"_blank",href:"//help.disqus.com/customer/en/portal/articles/1753105-basic-rules-for-disqus"},data:a}),disqus:"Disqus"},data:a}))+"\n</p>\n</div>\n"},useData:!0})}),define("home/templates/completeReportUser",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="modal-header">\n<h4 class="modal-title">'+o(n.gettext.call(s,"Report sent",{name:"gettext",hash:{},data:a}))+'</h4>\n</div>\n<div class="modal-body">\n<p>'+o(n.gettext.call(s,"Thank you for reporting this user. This helps moderators remove inappropriate comments and profiles. Disqus will take action against their account if they have violated our policies.",{name:"gettext",hash:{},data:a}))+"</p>\n</div>\n"},useData:!0})}),define("home/views/ProfileCoverView",["jquery","backbone-marionette","home/utils/confirmModal","home/mixins/withAllstarPopover","home/mixins/withTruncate","home/models/Session","home/templates/profileCover","home/templates/spinnerTall","home/templates/reportUser","home/templates/completeReportUser"],function(e,t,n,i,a,s,o,r,l,c){"use strict";var d=t.ItemView.extend({template:function(e){return e.name?o(e):r(e)},templateHelpers:function(){var e=s.get().user,t={sessionUserName:e.get("username"),isSessionUser:this.model.isSessionUser(),isDisqusNetMod:e.isDisqusNetMod(),numTotalFollowing:this.model.getNumTotalFollowing(),showNumPosts:this.model.has("numPosts"),showNumFollowers:this.model.has("numFollowers"),userReputationLabel:this.model.getUserReputationLabel(),numLines:3,showNumTotalFollowing:this.model.has("numFollowing")&&this.model.has("numForumsFollowing")};return this.model.get("isBlocked")&&(t.avatar=this.model.defaults.avatar),t},events:{"click [data-action=toggle-follow]":"toggleFollow","click [data-action=block-user]":"blockUser","click [data-action=prompt-report-user]":"promptReportUser"},modelEvents:{"change:name":"render","change:isBlocked":"render","change:isFlagged":"render","change:isFollowing":"handleFollowedClass","change:numFollowers":"updateNumFollowers","change:numFollowing":"updateNumFollowing","change:numForumsFollowing":"updateNumFollowing","change:numChannelsFollowing":"updateNumFollowing"},handleFollowedClass:function(){this.$("[data-action=toggle-follow]").toggleClass("active",this.model.get("isFollowing"))},updateNumFollowers:function(){this.$("[data-role=num-followers]").text(this.model.get("numFollowers"))},updateNumFollowing:function(){this.$("[data-role=num-following]").text(this.model.getNumTotalFollowing())},toggleFollow:function(e){e&&e.preventDefault(),this.model.toggleFollowed()},promptReportUser:function(e){e&&e.preventDefault(),n.confirmationPromise(n.TYPES.CONFIRM_CANCEL,l({user:this.model.get("username")})).then(function(e,t){e&&this.reportUser(t.find("input[name=reason]:checked").val())}.bind(this))},reportUser:function(e){this.model.report(e).success(n.confirmationPromise.bind(this,n.TYPES.CLOSE,c())).fail(this.model.trigger.bind(this.model,"reportError"))},blockUser:function(e){e&&e.preventDefault();var t=this.model;t.block().fail(t.trigger.bind(t,"blockError"))},onDomRefresh:function(){e(".tooltipped").tooltip()}});return a.call(d.prototype),i.call(d.prototype),d}),define("home/mixins/asProfileCard",["underscore","home/models/Session","home/utils/layoutUtils","home/mixins/withAllstarPopover","home/mixins/withTruncate"],function(e,t,n,i,a){"use strict";var s=function(){a.apply(this,arguments),i.call(this),this.initialize=e.wrap(this.initialize,function(n){n.apply(this,e.rest(arguments)),this.session=t.get(),this.model.thread.isAuthorSessionUser(this.session),this.listenTo(this.model.thread,"change:content change:isAuthor",this.render),this.listenTo(this.session,"change:id",this.render),this.numTitleLines=3}),this.serializeData=e.wrap(this.serializeData,function(t){var i=t.apply(this,e.rest(arguments)),a=this.model.thread;return e.defaults(i,{discussionRoute:a&&a.getDiscussionRoute(),canShowThreadImage:!n.isNarrowLayout(),image:a&&a.getImage(),numTitleLines:this.numTitleLines,relativeTime:this.model.getRelativeTimestamp(),firstActor:this.model.actors[0]&&this.model.actors[0].toJSON(),isSpam:a.get("isSpam"),isAuthor:a.get("isAuthor")})})};return s}),define("home/templates/profileCardPost",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s;return'<span class="icon-forward"></span>\n'+(null!=(s=e.invokePartial(i.userName,null!=t?t.replyAuthor:t,{name:"userName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")},3:function(e,t,n,i,a){var s;return'<div class="spacing-bottom-small">\n<span class="label label-danger">'+e.escapeExpression(e.lambda(null!=t?t.hiddenExplanation:t,t))+"</span>\n"+(null!=(s=e.invokePartial(i.spamActions,t,{name:"spamActions",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n"},5:function(){return"hidden"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.lambda,l=e.escapeExpression;return(null!=(s=e.invokePartial(i.userAvatar,null!=t?t.author:t,{name:"userAvatar",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<div class="comment-body">\n<header class="comment-header">\n<div class="align-min-tablet">\n<div class="spacing-right">\n'+(null!=(s=e.invokePartial(i.userName,null!=t?t.author:t,{name:"userName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+(null!=(s=n["if"].call(o,null!=t?t.replyAuthor:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'<a class="link-gray time"\nhref="'+l(r(null!=t?t.discussionRoute:t,t))+"#comment-"+l(r(null!=t?t.id:t,t))+'"\ndata-link-name="timestamp"\ndata-thread-id="'+l(r(null!=(s=null!=t?t.thread:t)?s.id:s,t))+'">\n'+l(r(null!=t?t.relativeTime:t,t))+"\n</a>\n</div>\n"+(null!=(s=n["if"].call(o,null!=t?t.isHidden:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+'</div>\n</header>\n<div data-role="post-content"></div>\n<footer class="comment-actions '+(null!=(s=n["if"].call(o,null!=t?t.isHidden:t,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a}))?s:"")+'" data-role="post-actions">\n</footer>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/ProfilePostView",["underscore","handlebars","home/views/PostView","home/templates/profileCardPost"],function(e,t,n,i){"use strict";var a=n.extend({template:i,events:{"click [data-action=request-spam-review]":"requestSpamReview"},ui:{spamActions:"[data-role=spam-actions]"},initialize:function(e){e=e||{},e.shouldCollapse=!1,n.prototype.initialize.apply(this,arguments),this.replyAuthor=e.replyAuthor,this.bindToAuthor()},bindToAuthor:function(){return this.model.author?void this.listenTo(this.model.author,"change:flaggedForSpamReview",this.renderSpamAlert):void this.listenToOnce(this.model,"changeRelated:author",this.bindToAuthor)},renderSpamAlert:function(){var e=this.serializeData();e=this.mixinTemplateHelpers(e),this.ui.spamActions.html(t.partials.spamActions(e))},templateHelpers:function(){var t=n.prototype.templateHelpers.apply(this,arguments);return t=e.defaults({isAuthor:this.model.author.isSessionUser(),authorPendingSpamReview:this.model.author.get("flaggedForSpamReview"),replyAuthor:this.replyAuthor&&this.replyAuthor.toJSON()},t)},requestSpamReview:function(){this.model.author.requestSpamReview()}});return a}),define("home/views/ProfilePostCollectionView",["backbone-marionette","home/views/ProfilePostView"],function(e,t){"use strict";var n=e.CollectionView.extend({getItemView:function(){return t},itemViewOptions:function(e){var t=e.object,n={model:t};return"reply"===e.get("verb")&&(n.replyAuthor=e.target.author),n}});return n}),define("home/templates/profileCardComments",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<div class="card-discussion no-image">\n<div class="card-body">\n'+(null!=(s=e.invokePartial(i.profileCardReason,t,{name:"profileCardReason",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+(null!=(s=e.invokePartial(i.threadTitle,t,{name:"threadTitle",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<div class="card-comment" data-role="post"></div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/ProfileCardCommentsView",["backbone","home/views/common/ActivityCardView","home/mixins/asProfileCard","home/mixins/asCollapsibleCard","home/mixins/withSubviews","home/views/ProfilePostCollectionView","home/templates/profileCardComments"],function(e,t,n,i,a,s,o){"use strict";var r=t,l=r.extend({className:"card card-profile card-profile-post",template:o,regions:{postsRegion:"[data-role=post]"},onRender:function(){this.activateRegion(this.postsRegion,this.createPostCollectionView)},createPostCollectionView:function(){return new s({el:this.postsRegion.el,collection:new e.Collection(this.model.activities)})}}),c=l.prototype;return i.call(c),n.call(c),a.call(c),l}),define("home/templates/profileCardFavorite",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return" no-image"},3:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.image:t,{name:"if",hash:{},fn:e.program(4,a,0),inverse:e.noop,data:a}))?s:""},4:function(e,t){var n,i=e.lambda,a=e.escapeExpression;return'<a href="'+a(i(null!=(n=null!=t?t.thread:t)?n.link:n,t))+'"\nclass="discussion-image"\ndata-link-name="image"\ndata-link-out="'+a(i(null!=(n=null!=t?t.thread:t)?n.signedLink:n,t))+'"\ndata-thread-id="'+a(i(null!=(n=null!=t?t.thread:t)?n.id:n,t))+'">\n\n<img src="'+a(i(null!=(n=null!=t?t.image:t)?n.src:n,t))+'" alt="'+a(i(null!=(n=null!=t?t.image:t)?n.title:n,t))+'">\n</a>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div class="card-discussion'+(null!=(s=n.unless.call(o,null!=t?t.image:t,{name:"unless",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'">\n<div class="card-aside">\n'+(null!=(s=n["if"].call(o,null!=t?t.canShowThreadImage:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+'</div>\n<div class="card-body">\n'+(null!=(s=e.invokePartial(i.profileCardReason,t,{name:"profileCardReason",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+(null!=(s=e.invokePartial(i.threadTitle,t,{name:"threadTitle",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<div class="card-profile-activity">\n'+(null!=(s=e.invokePartial(i.userAvatar,null!=t?t.firstActor:t,{name:"userAvatar",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+r(n.gettext.call(o,"%(userName)s recommended",{name:"gettext",hash:{userName:n.getPartial.call(o,"userName",null!=t?t.firstActor:t,{name:"getPartial",hash:{},data:a})},data:a}))+' <span class="bullet">'+r(e.lambda(null!=t?t.relativeTime:t,t))+"</span>\n</div>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ProfileCardFavoriteView",["home/views/common/ActivityCardView","home/mixins/asProfileCard","home/templates/profileCardFavorite"],function(e,t,n){"use strict";var i=e,a=i.extend({className:"card card-profile card-profile-favorite",template:n});return t.call(a.prototype),a}),define("home/templates/profileCardCreateDiscussion",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div class="card-discussion no-image">\n<div class="card-body">\n'+(null!=(s=e.invokePartial(i.profileCardReason,t,{name:"profileCardReason",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+(null!=(s=e.invokePartial(i.threadTitle,t,{name:"threadTitle",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<div class="card-profile-activity">\n'+(null!=(s=e.invokePartial(i.userAvatar,null!=t?t.firstActor:t,{name:"userAvatar",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+r(n.gettext.call(o,"%(userName)s started a discussion",{name:"gettext",hash:{userName:n.getPartial.call(o,"userName",null!=t?t.firstActor:t,{name:"getPartial",hash:{},data:a})},data:a}))+' <span class="bullet">'+r(e.lambda(null!=t?t.relativeTime:t,t))+"</span>\n</div>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ProfileCardCreateDiscussionView",["home/views/common/ActivityCardView","home/mixins/asProfileCard","home/templates/profileCardCreateDiscussion"],function(e,t,n){"use strict";var i=e,a=i.extend({className:"card card-profile card-profile-discussion",template:n});return t.call(a.prototype),a}),define("home/views/ProfileCardCollectionView",["backbone","core/bus","home/views/common/FetchableCollectionView","home/views/ProfileCardCommentsView","home/views/ProfileCardFavoriteView","home/views/ProfileCardCreateDiscussionView","home/mixins/withViewFeedTracking"],function(e,t,n,i,a,s,o){"use strict";var r=n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments),this.listenToOnce(this,"showFirstItem",function(){t.trigger("showFirstCard","profile")})},itemView:function(t){switch(t.model.get("verb")){case"reply":case"post":return new i(t);case"favorite":return new a(t);case"create":return new s(t);default:return new e.View}},emptyViewOptions:function(){return{model:this.options.user}}});return o.call(r.prototype),r}),define("home/templates/profileCommentsEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="empty-message card-wrap">\n\n<img class="empty-message__img" src="'+o(n.urlfor.call(s,"cdn",{name:"urlfor",hash:{},data:a}))+'/img/empty-states/comments.png"/>\n\n<div class="empty-message__content">\n<h2 class="text-larger">'+o(n.gettext.call(s,"%(name)s hasn't commented yet",{name:"gettext",hash:{name:null!=t?t.name:t},data:a}))+'</h2>\n<p class="text-gray text-medium">'+o(n.gettext.call(s,"Comments %(name)s leaves on discussions will appear here.",{name:"gettext",hash:{name:null!=t?t.name:t},data:a}))+'</p>\n<a href="/home/explore/discussions/" class="button button-outline button-padding-wider text-large">'+o(n.gettext.call(s,"Find interesting discussions to join »",{name:"gettext",hash:{},data:a}))+"</a>\n</div>\n</div>\n"},useData:!0})}),define("home/views/ProfileCommentsEmptyView",["backbone-marionette","home/templates/profileCommentsEmpty"],function(e,t){"use strict";var n=e.ItemView.extend({template:t});return n}),define("home/templates/profileFavoritesEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="empty-message card-wrap">\n\n<img class="empty-message__img" src="'+o(n.urlfor.call(s,"cdn",{name:"urlfor",hash:{},data:a}))+'/img/empty-states/recommends.png"/>\n\n<div class="empty-message__content">\n<h2 class="text-larger">'+o(n.gettext.call(s,"%(name)s hasn't recommended a discussion yet",{name:"gettext",hash:{name:null!=t?t.name:t},data:a}))+'</h2>\n<p class="text-gray text-medium">'+o(n.gettext.call(s,"Recommending a discussion shares it with people that follow you. Just click the heart!",{name:"gettext",hash:{},data:a}))+'</p>\n<a href="/home/explore/discussions/" class="button button-outline button-padding-wider text-large">'+o(n.gettext.call(s,"Find interesting discussions »",{name:"gettext",hash:{},data:a}))+"</a>\n</div>\n</div>\n"},useData:!0})}),define("home/views/ProfileFavoritesEmptyView",["backbone-marionette","home/templates/profileFavoritesEmpty"],function(e,t){"use strict";var n=e.ItemView.extend({template:t});return n}),define("home/templates/profileFollowersEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="empty-message">\n\n<img class="empty-message__img" src="'+o(n.urlfor.call(s,"cdn",{name:"urlfor",hash:{},data:a}))+'/img/empty-states/followers.png"/>\n\n<div class="empty-message__content">\n<h2 class="text-larger">'+o(n.gettext.call(s,"Nobody is following",{name:"gettext",hash:{name:null!=t?t.name:t},data:a}))+'</h2>\n<p class="text-gray text-medium">'+o(n.gettext.call(s,"Following people helps you keep up with what they’re saying and recommending.",{name:"gettext",hash:{},data:a}))+'</p>\n<a href="/home/explore/people/" class="button button-outline button-padding-wider text-large">'+o(n.gettext.call(s,"Find interesting people to follow »",{name:"gettext",hash:{},data:a}))+"</a>\n</div>\n</div>\n"},useData:!0})}),define("home/views/ProfileFollowersEmptyView",["backbone-marionette","home/templates/profileFollowersEmpty"],function(e,t){"use strict";var n=e.ItemView.extend({template:t});return n}),define("home/templates/profileRecentEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="empty-message card-wrap">\n\n<img class="empty-message__img" src="'+o(n.urlfor.call(s,"cdn",{name:"urlfor",hash:{},data:a}))+'/img/empty-states/discussions.png"/>\n\n<div class="empty-message__content">\n<h2 class="text-larger">'+o(n.gettext.call(s,"%(name)s hasn't started any discussions yet",{name:"gettext",hash:{name:null!=t?t.name:t},data:a}))+'</h2>\n<p class="text-gray text-medium">'+o(n.gettext.call(s,"Discussions started by %(name)s will appear here. Anyone can start one on channels!",{name:"gettext",hash:{name:null!=t?t.name:t},data:a}))+'</p>\n<a href="/home/explore/" class="button button-outline button-padding-wider text-large">'+o(n.gettext.call(s,"Find a channel to start discussions on »",{name:"gettext",hash:{},data:a}))+"</a>\n</div>\n</div>\n"},useData:!0})}),define("home/views/ProfileRecentEmptyView",["backbone-marionette","home/templates/profileRecentEmpty"],function(e,t){"use strict";var n=e.ItemView.extend({template:t});return n}),define("home/templates/profileUserModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<div class="aside__subheadings">\n<h2 class="text-subheading">Moderation Links</h2>\n</div>\n<ul class="nav--aside">\n<li class="nav__item">\n<a href="https://disqus.com/admin/moderate/#/all/search/user:'+r(o(null!=t?t.username:t,t))+'" class="nav-lnk -color-muted text-small" target="_blank">\nView User in Mod Panel\n</a>\n</li>\n<li class="nav__item">\n<a href="https://disqus.com/disqus-admin/?action=user_lookup&username='+r(o(null!=t?t.username:t,t))+'" class="nav-lnk -color-muted text-small" target="_blank">\nLookup User in Admin Panel\n</a>\n</li>\n<li class="nav__spacing hidden-md"></li>\n<li class="nav__item">\n<a href="#" data-action="toggle-blacklist" class="nav-lnk -color-muted text-small">\n'+(null!=(s=n["if"].call(null!=t?t:{},null!=t?t.isOnGlobalBlacklist:t,{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.program(4,a,0),data:a}))?s:"")+'</a>\n</li>\n<li class="nav__item">\n<a href="https://disqus.com/disqus-admin/blacklists/" class="nav-lnk -color-muted text-small">\nView Global Blacklist\n</a>\n</li>\n</ul>\n'},2:function(){return"Remove from Global Blacklist\n"},4:function(){return"Add to Global Blacklist\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<div class="aside__wrap">\n<div class="aside__content text-gray-dark">\n'+(null!=(s=e.invokePartial(i.profileCoverAttributes,t,{name:"profileCoverAttributes",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n</div>\n"+(null!=(s=n["if"].call(null!=t?t:{},null!=t?t.isDisqusNetMod:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")},usePartial:!0,useData:!0})}),define("home/views/ProfileUserModuleView",["backbone-marionette","moment","home/mixins/withTruncate","home/templates/profileUserModule","home/models/Session"],function(e,t,n,i,a){"use strict";var s=e.ItemView.extend({template:i,events:{"click [data-action=toggle-blacklist]":"toggleBlacklist"},templateHelpers:function(){return{joinDate:t(this.model.get("joinedAt")).format("ll"),numLines:9,isDisqusNetMod:a.get().user.isDisqusNetMod()}},toggleBlacklist:function(){this.model.get("isOnGlobalBlacklist")?this.model.removeFromBlacklist():this.model.confirmBlacklist({notes:"Added via user profile",retroactive:!0})}});return n.call(s.prototype),s}),define("home/templates/profileModerationDetailsModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t){var n,i=e.lambda,a=e.escapeExpression;return'<div class="aside__subheadings">\n<h2 class="text-subheading">Comment Moderation</h2>\n</div>\n<div class="aside__wrap">\n<div class="aside-user__body align text-small text-center padding-default">\n<div class="align__item truncate-line">\n<h3 class="text-large text-gray-darker">'+a(i(null!=(n=null!=(n=null!=t?t.counts:t)?n.global:n)?n.approved:n,t))+'</h3>\nApproved\n</div>\n<div class="align__item truncate-line">\n<h3 class="text-large text-gray-darker">'+a(i(null!=(n=null!=(n=null!=t?t.counts:t)?n.global:n)?n.spam:n,t))+'</h3>\nSpam\n</div>\n<div class="align__item truncate-line">\n<h3 class="text-large text-gray-darker">'+a(i(null!=(n=null!=(n=null!=t?t.counts:t)?n.global:n)?n.flagged:n,t))+"</h3>\nFlagged\n</div>\n</div>\n</div>\n"},useData:!0})}),define("home/views/ProfileModerationDetailsModuleView",["backbone-marionette","home/templates/profileModerationDetailsModule"],function(e,t){"use strict";var n=e.ItemView.extend({template:t});return n}),define("home/templates/profileFollowingPeopleEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="empty-message">\n\n<img class="empty-message__img" src="'+o(n.urlfor.call(s,"cdn",{name:"urlfor",hash:{},data:a}))+'/img/empty-states/following-people.png"/>\n\n<div class="empty-message__content">\n<h2 class="text-larger">'+o(n.gettext.call(s,"%(name)s isn't following anyone",{name:"gettext",hash:{name:null!=t?t.name:t},data:a}))+'</h2>\n<p class="text-gray text-medium">'+o(n.gettext.call(s,"Following people helps you keep up with what they’re saying and recommending.",{name:"gettext",hash:{},data:a}))+'</p>\n<a href="/home/explore/people/" class="button button-outline button-padding-wider text-large">'+o(n.gettext.call(s,"Find interesting people to follow »",{name:"gettext",hash:{},data:a}))+"</a>\n</div>\n</div>\n"},useData:!0})}),define("home/views/ProfileFollowingPeopleEmptyView",["backbone-marionette","home/templates/profileFollowingPeopleEmpty"],function(e,t){"use strict";var n=e.ItemView.extend({template:t});return n}),define("home/templates/profileFollowingCommunitiesEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"You aren't following any communities",{name:"gettext",hash:{},data:a}))},3:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"%(name)s isn't following any communities",{name:"gettext",hash:{name:null!=t?t.name:t},data:a}))},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div class="empty-message">\n\n<img class="empty-message__img" src="'+r(n.urlfor.call(o,"cdn",{name:"urlfor",hash:{},data:a}))+'/img/empty-states/following-communities.png"/>\n\n<div class="empty-message__content">\n<h2 class="text-larger">'+(null!=(s=n["if"].call(o,null!=t?t.isSessionUser:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+'</h2>\n<p class="text-gray text-medium">'+r(n.gettext.call(o,"Following communities and channels helps you keep up with what their latest discussions.",{name:"gettext",hash:{},data:a}))+'</p>\n<a href="/home/explore/" class="button button-outline button-padding-wider text-large">'+r(n.gettext.call(o,"Find interesting communities to follow »",{name:"gettext",hash:{},data:a}))+"</a>\n</div>\n</div>\n"},useData:!0})}),define("home/views/ProfileFollowingCommunitiesEmptyView",["backbone-marionette","home/templates/profileFollowingCommunitiesEmpty"],function(e,t){"use strict";var n=e.ItemView.extend({template:t,templateHelpers:function(){return{isSessionUser:this.model.isSessionUser()}}});return n}),define("home/templates/profileFollowing",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=e.lambda,o=e.escapeExpression,r=null!=t?t:{};return'<ul class="nav-tabs">\n<li class="active" data-action="switch-tab" data-tab="people">\n<a href="/by/'+o(s(null!=t?t.username:t,t))+'/following/">\n'+o(n.gettext.call(r,"People %(numberFollowing)s",{name:"gettext",hash:{numberFollowing:n.tag.call(r,"span",{name:"tag",hash:{text:null!=t?t.numFollowing:t,"data-role":"num-following","class":"nav-tab-stat"},data:a})},data:a}))+'\n</a>\n</li>\n<li data-action="switch-tab" data-tab="sites">\n<a href="/by/'+o(s(null!=t?t.username:t,t))+'/following/sites/">\n'+o(n.gettext.call(r,"Communities %(numberFollowing)s",{name:"gettext",hash:{numberFollowing:n.tag.call(r,"span",{name:"tag",hash:{text:null!=t?t.numCommunitiesFollowing:t,"data-role":"num-forums-following","class":"nav-tab-stat"},data:a})},data:a}))+'\n</a>\n</li>\n</ul>\n<div data-role="content-area"></div>\n<div data-role="footer-area"></div>\n'},useData:!0})}),define("home/views/ProfileFollowingView",["underscore","home/views/common/TabbedView","home/views/UserCollectionView","home/views/ForumCardCollectionView","home/views/common/FetchableCollectionFooterView","home/views/ProfileFollowingPeopleEmptyView","home/views/ProfileFollowingCommunitiesEmptyView","home/templates/profileFollowing"],function(e,t,n,i,a,s,o,r){"use strict";var l=t.extend({defaultTab:"people",template:r,templateHelpers:function(){return{numCommunitiesFollowing:this.model.getNumCommunitiesFollowing()}},regions:e.defaults({footerRegion:"[data-role=footer-area]"},t.prototype.regions),modelEvents:{"change:numFollowing":"updateNumFollowing","change:numForumsFollowing":"updateNumForumsFollowing","change:numChannelsFollowing":"updateNumForumsFollowing"},initialize:function(e){t.prototype.initialize.apply(this,arguments),this.userProfile=e.userProfile},getDefaultOptions:function(e){var t="sites"===e?this.userProfile.forumsFollowing:this.userProfile.following;return{user:this.model,model:t,collection:t.items,emptyView:"people"===e?s:o,infiniteScroll:!0}},updateTabContent:function(e){t.prototype.updateTabContent.call(this,e),this.footerRegion.show(new a(this.getDefaultOptions(this.activeTab)))},updateNumFollowing:function(){this.$("[data-role=num-following]").text(this.model.get("numFollowing"))},updateNumForumsFollowing:function(){this.$("[data-role=num-forums-following]").text(this.model.getNumCommunitiesFollowing())},getTrackingSection:function(e){return"sites"===e?"following-communities":"following-default"},getTabView:function(e){var t,a=this.getDefaultOptions(e);switch(e){case"people":t=new n(a);break;case"sites":t=new i(a);break;default:return}return t.model.ensureFetched(),t}});return l}),define("home/templates/discussionsModuleItem",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return" no-image"},3:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.image:t,{name:"if",hash:{},fn:e.program(4,a,0),inverse:e.noop,data:a}))?s:""},4:function(e,t){var n,i=e.lambda,a=e.escapeExpression;return'<a href="'+a(i(null!=(n=null!=t?t.thread:t)?n.link:n,t))+'"\ndata-link-name="image"\ndata-link-out="'+a(i(null!=(n=null!=t?t.thread:t)?n.signedLink:n,t))+'"\ndata-thread-id="'+a(i(null!=(n=null!=t?t.thread:t)?n.id:n,t))+'">\n\n<img src="'+a(i(null!=(n=null!=t?t.image:t)?n.src:n,t))+'" alt="'+a(i(null!=(n=null!=t?t.image:t)?n.title:n,t))+'" class="img-fit-sm" />\n</a>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<div class="post-comments clearfix'+(null!=(s=n.unless.call(o,null!=t?t.image:t,{name:"unless",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'">\n<div class="pull-right spacing-left-small">\n'+(null!=(s=n["if"].call(o,null!=t?t.canShowThreadImage:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+'</div>\n<div class="card-body">\n<div class="text-medium spacing-bottom-narrow">\n'+(null!=(s=e.invokePartial(i.threadTitle,t,{name:"threadTitle",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</div>\n<div class="text-small text-gray link-inner-gray">\n'+(null!=(s=e.invokePartial(i.channelAwareForumLink,null!=(s=null!=t?t.thread:t)?s.forum:s,{name:"channelAwareForumLink",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<time class="time">'+e.escapeExpression(e.lambda(null!=t?t.relativeTime:t,t))+"</time>\n</div>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/DiscussionsModuleItemView",["backbone-marionette","home/utils/layoutUtils","home/templates/discussionsModuleItem"],function(e,t,n){"use strict";var i=e.ItemView.extend({className:"post-comments__wrapper",template:n,templateHelpers:function(){var e=this.model.thread;return{image:e&&e.getImage(),numTitleLines:3,canShowThreadImage:!t.isNarrowLayout()}}});return i}),define("home/views/common/EnclosedDiscussionsModuleView",["backbone-marionette","home/views/DiscussionsModuleItemView"],function(e,t){"use strict";var n=e.CompositeView.extend({className:"aside__wrap -padded",itemView:t,itemViewContainer:"[data-role=posts]",addItemView:function(t,n,i){return this.constructor.ITEMS_MAX&&i>this.constructor.ITEMS_MAX-1?void 0:e.CompositeView.prototype.addItemView.call(this,t,n,i)}});return n}),define("home/templates/profileRecommendedModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<header class="module-header text-center">\n<div class="module-header__icon">\n<span class="icon icon-latest-recommendation text-brand"></span>\n</div>\n<div class="module-header__title">\n<h2 class="module-header__heading">'+o(n.gettext.call(s,"Latest Recommendations",{name:"gettext",hash:{},data:a}))+'</h2>\n</div>\n</header>\n\n<div data-role="posts" class="module-body"></div>\n\n<footer data-action="switch-tab" data-tab="favorites" class="module-footer">\n<a href="/by/'+o(e.lambda(null!=t?t.username:t,t))+'/favorites/" class="nav-lnk -color-muted -flushed">\n<div class="nav-lnk__blk">'+o(n.gettext.call(s,"See All Recommendations",{name:"gettext",hash:{},data:a}))+'</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</footer>\n'},useData:!0})}),define("home/views/ProfileRecommendedModuleView",["home/views/common/EnclosedDiscussionsModuleView","home/templates/profileRecommendedModule"],function(e,t){
"use strict";var n=e.extend({template:t},{ITEMS_MAX:3});return n}),define("home/templates/profileCommentsModulePost",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<div class="post-comments">\n<div class="spacing-bottom-narrow">\n<a href="'+r(o(null!=t?t.discussionRoute:t,t))+"#comment-"+r(o(null!=(s=null!=(s=null!=t?t.postActivity:t)?s.object:s)?s.id:s,t))+'" class="link-gray-dark truncate" data-truncate-lines="2">\n'+r(o(null!=t?t.message:t,t))+'\n</a>\n</div>\n<div class="link-gray text-gray text-small">\n'+(null!=(s=e.invokePartial(i.channelAwareForumLink,null!=(s=null!=t?t.thread:t)?s.forum:s,{name:"channelAwareForumLink",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<time class="time">'+r(o(null!=t?t.relativeTime:t,t))+"</time>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ProfileCommentsModulePostView",["backbone-marionette","core/utils/html","home/templates/profileCommentsModulePost","home/mixins/withTruncate"],function(e,t,n,i){"use strict";var a=e.ItemView.extend({template:n,className:"post-comments__wrapper",templateHelpers:function(){var e=this.getPostActivity();return{discussionRoute:this.model.thread.getDiscussionRoute(),postActivity:e.toJSON(),relativeTime:e.getRelativeCreatedAt(),message:t.stripTags(e.object.get("message"))}},getPostActivity:function(){return this.model.activities[0]}});return i.call(a.prototype),a}),define("home/templates/profileCommentsModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<header class="module-header text-center">\n<div class="module-header__icon">\n<span class="icon icon-latest-comments text-brand"></span>\n</div>\n<div class="module-header__title">\n<h2 class="module-header__heading">'+o(n.gettext.call(s,"Latest Comments",{name:"gettext",hash:{},data:a}))+'</h2>\n</div>\n</header>\n\n<div data-role="posts" class="module-body"></div>\n\n<footer data-action="switch-tab" data-tab="comments" class="module-footer">\n<a href="/by/'+o(e.lambda(null!=t?t.username:t,t))+'/comments/" class="nav-lnk -color-muted -flushed">\n<div class="nav-lnk__blk">'+o(n.gettext.call(s,"See All Comments",{name:"gettext",hash:{},data:a}))+'</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</footer>\n'},useData:!0})}),define("home/views/ProfileCommentsModuleView",["backbone-marionette","home/views/ProfileCommentsModulePostView","home/templates/profileCommentsModule"],function(e,t,n){"use strict";var i=e.CompositeView.extend({template:n,className:"aside__wrap -padded",itemView:t,itemViewContainer:"[data-role=posts]",itemViewOptions:function(e,t){return t>2?{className:"hidden"}:void 0}});return i}),define("home/templates/profileModuleActiveForums",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){return'<div class="aside__subheadings">\n<h2 class="text-subheading">'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Frequented Communities",{name:"gettext",hash:{},data:a}))+'</h2>\n</div>\n<div class="aside__wrap">\n<div data-role="forums"></div>\n</div>\n'},useData:!0})}),define("home/views/UserActiveForumsModuleView",["backbone-marionette","home/views/FollowingCardView","home/templates/profileModuleActiveForums"],function(e,t,n){"use strict";var i=e.CompositeView.extend({template:n,itemView:t,itemViewContainer:"[data-role=forums]"});return i}),define("home/templates/blockedProfile",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="empty-message empty-message-private">\n<div class="empty-message-private-face-wrapper">\n<svg width="123" height="122" viewBox="0 0 123 122" xmlns="http://www.w3.org/2000/svg">\n<g fill="none" fill-rule="evenodd">\n<path d="M0 61C0 27.312 27.543 0 61.5 0S123 27.312 123 61s-27.543 61-61.5 61S0 94.688 0 61" fill="#FFF"/>\n<path d="M39 28.507C39 26.017 41.015 24 43.493 24 45.983 24 48 26.017 48 28.507 48 30.982 45.984 33 43.493 33 41.015 33 39 30.982 39 28.507M75 28.5c0-2.485 2.015-4.5 4.507-4.5C81.984 24 84 26.015 84 28.5S81.984 33 79.507 33C77.015 33 75 30.985 75 28.5" fill="#164B78"/>\n<path d="M83 40c0-6.62 5.38-12 12-12s12 5.38 12 12c0 6.622-5.38 12-12 12s-12-5.378-12-12M15 40c0-6.62 5.38-12 12-12s12 5.38 12 12c0 6.622-5.38 12-12 12s-12-5.378-12-12" fill="#CCE9FF"/>\n<path d="M93 38c0-1.107.893-2 2-2s2 .893 2 2-.893 2-2 2-2-.893-2-2M87 30c0-1.107.893-2 2-2s2 .893 2 2-.893 2-2 2-2-.893-2-2M97 30c0-1.107.893-2 2-2s2 .893 2 2-.893 2-2 2-2-.893-2-2M21 38c0-1.107.893-2 2-2s2 .893 2 2-.893 2-2 2-2-.893-2-2M15 30c0-1.107.893-2 2-2s2 .893 2 2-.893 2-2 2-2-.893-2-2M25 30c0-1.107.893-2 2-2s2 .893 2 2-.893 2-2 2-2-.893-2-2" fill="#2E9FFF"/>\n<g opacity=".5" stroke="#EF675D" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">\n<path d="M54.333 37.333L69.57 52.57M54.333 52.667L69.57 37.43"/>\n</g>\n</g>\n</svg>\n</div>\n<div class="empty-message__content">\n<p class="text-red text-large">'+o(n.gettext.call(s,"You've blocked this user.",{name:"gettext",hash:{},data:a}))+'</p>\n<p class="text-gray text-medium">'+o(n.gettext.call(s,"You won't see any comments from this user on Disqus in discussions, notifications, and more.",{name:"gettext",hash:{},data:a}))+'</p>\n<a href="/home/settings/blocking" class="button button-fill--brand button-medium">'+o(n.gettext.call(s,"Manage blocked users",{name:"gettext",hash:{},data:a}))+"</a>\n</div>\n</div>\n"},useData:!0})}),define("home/templates/profileView",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return'<div data-role="email-verification-alert"></div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<div class="section-expanded sidebar-fixed">\n<div class="cover cover-profile" data-role="cover-area"></div>\n</div>\n<div class="section-contained">\n<div class="layout -top-narrow">\n<div class="layout__main">\n<div class="layout__nav hidden-lg">\n<div data-role="user-module"></div>\n<div data-role="moderation-module"></div>\n<div data-role="active-forums-module" data-jester-area="active-forums-module"></div>\n</div>\n<div class="layout__content">\n<div class="hidden-sidebar" data-role="alert-message"></div>\n'+(null!=(s=n["if"].call(null!=t?t:{},null!=t?t.isSessionUser:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'<div class="sidebar-scrollable profile-scrollable scrollable-measure-selector"\ndata-role="content-area"></div>\n</div>\n</div>\n<aside class="layout__aside hidden-md">\n<div data-role="sign-up-module"></div>\n<div data-role="comments-module" data-jester-area="comments-module" class="module--aside"></div>\n<div data-role="recommended-module" data-jester-area="recommended-module" class="module--aside"></div>\n<div class="text-smaller text-gray">\n'+(null!=(s=e.invokePartial(i.homeFooter,t,{name:"homeFooter",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n</aside>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/templates/privateProfile",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){return'<div class="empty-message empty-message-private">\n<div class="empty-message-private-face-wrapper">\n<svg class="art-private-sunglasses"xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 150.5 25" enable-background="new 0 0 150.5 25" xml:space="preserve">\n<polygon points="10.5,0 10.5,5 31.5,5 31.5,10 35.5,10 35.5,15 40.5,15 40.5,20 45.5,20 45.5,25 80.5,25 80.5,20 85.5,20 85.5,15 90.5,15 90.5,10 100.5,10 100.5,15 105.5,15 105.5,20 140.5,20 140.5,15 145.5,15 145.5,10 150.5,10 150.5,5 150.5,0"/>\n<rect x="0.5" y="5" width="10" height="5"/>\n<rect x="40.5" y="5" width="5" height="5" class="shading"/>\n<rect x="45.5" y="10" width="5" height="5" class="shading"/>\n<rect x="50.5" y="15" width="5" height="5" class="shading"/>\n<rect x="60.5" y="15" width="5" height="5" class="shading"/>\n<rect x="55.5" y="10" width="5" height="5" class="shading"/>\n<rect x="110.5" y="10" width="5" height="5" class="shading"/>\n<rect x="120.5" y="10" width="5" height="5" class="shading"/>\n<rect x="50.5" y="5" width="5" height="5" class="shading"/>\n<rect x="105.5" y="5" width="5" height="5" class="shading"/>\n<rect x="115.5" y="5" width="5" height="5" class="shading"/>\n</svg>\n<svg class="art-private-face" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 130 130" enable-background="new 0 0 130 130" xml:space="preserve"><circle cx="65" cy="65" r="65"/><path d="M14 41.6c0-5.5 4.7-10 10.5-10S35 36.1 35 41.6s-4.7 10-10.5 10 S14 47.2 14 41.6z"/><path d="M95 40.6c0-5.5 4.7-10 10.5-10s10.5 4.5 10.5 10s-4.7 10-10.5 10 S95 46.2 95 40.6z"/><rect x="51" y="62.6" width="46" height="4"/></svg>\n</div>\n<div> \n<svg class="art-private-text" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 240 35" enable-background="new 0 0 240 35" xml:space="preserve">\n<rect x="80" width="5" height="35"/>\n<polygon points="165,0 160,0 160,10 155,10 155,15 160,15 160,35 165,35 165,15 170,15 170,10 165,10"/>\n<polygon points="180,10 180,0 175,0 175,35 180,35 180,15 190,15 190,10"/>\n<rect x="190" y="15" width="5" height="20"/>\n<polygon points="5,30 5,5 20,5 20,0 0,0 0,35 20,35 20,30"/>\n<polygon points="45,20 35,20 35,15 30,15 30,30 35,30 35,25 50,25 50,15 45,15"/>\n<rect x="35" y="10" width="10" height="5"/>\n<polygon points="60,10 60,15 70,15 70,30 60,30 60,35 75,35 75,10"/>\n<rect x="105" y="10" width="5" height="20"/>\n<rect x="120" y="10" width="5" height="20"/>\n<rect x="135" y="10" width="5" height="20"/>\n<rect x="145" y="10" width="5" height="25"/>\n<rect x="145" width="5" height="5"/>\n<polygon points="235,10 235,0 230,0 230,10 225,10 225,15 230,15 230,35 235,35 235,15 240,15 240,10"/>\n<rect x="215" y="10" width="5" height="25"/>\n<rect x="215" width="5" height="5"/>\n<rect x="110" y="30" width="10" height="5"/>\n<rect x="125" y="30" width="10" height="5"/>\n<rect x="35" y="30" width="10" height="5"/>\n<rect x="55" y="15" width="5" height="15"/>\n<rect x="20" y="5" width="5" height="25"/>\n</svg>\n</div>\n<div class="empty-message__content">\n<p class="text-gray text-medium">This user\'s activity is private <span class="icon-lock icon__position -inline-swap"></span></span></p>\n<a href="/home/explore/people/" class="button button-fill--brand button-padding-wider text-large">'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Find other interesting people »",{name:"gettext",hash:{},data:a}))+"</a>\n</div>\n\n</div>\n"},useData:!0})}),define("home/templates/profileAlertBlockError",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Unfortunately this user could not be blocked; you have reached the limit for number of users blocked.",{name:"gettext",hash:{},data:a}))+"\n"},3:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Something went wrong while trying to block this user. Please try again later.",{name:"gettext",hash:{},data:a}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<div class="alert alert--error text-small">\n<span class="icon-warning icon-tiny icon__position -inline"></span>\n'+(null!=(s=n["if"].call(null!=t?t:{},null!=t?t.isLimitError:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+"</div>\n"},useData:!0})}),define("home/templates/profileAlertPrivate",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){return'<div class="alert alert--brand text-small">\n<span class="icon-lock icon-tiny icon__position -inline"></span>\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"This user's profile has been set to private.",{name:"gettext",hash:{},data:a}))+"\n</div>\n"},useData:!0})}),define("home/views/ProfileView",["underscore","backbone-marionette","core/api","core/strings","home/utils/backboneUtils","home/views/common/TabbedView","home/views/ProfileCoverView","home/views/ProfileCardCollectionView","home/views/ProfileCommentsEmptyView","home/views/ProfileFavoritesEmptyView","home/views/ProfileFollowersEmptyView","home/views/ProfileRecentEmptyView","home/views/ProfileUserModuleView","home/views/ProfileModerationDetailsModuleView","home/views/common/FetchableCollectionLayout","home/views/ProfileFollowingView","home/views/FollowerCollectionView","home/views/ProfileRecommendedModuleView","home/views/ProfileCommentsModuleView","home/views/ProfileModuleEmptyView","home/views/UserActiveForumsModuleView","home/templates/blockedProfile","home/templates/profileView","home/templates/spinnerTall","home/templates/privateProfile","home/templates/profileAlertBlockError","home/templates/profileAlertPrivate","home/mixins/withClickLinkTracking","home/mixins/withEmailVerificationAlert","home/mixins/withLoginOverlay","home/models/Session"],function(e,t,n,i,a,s,o,r,l,c,d,u,h,m,p,f,g,v,b,w,x,y,_,k,C,T,S,E,F,P,M){"use strict";var A=i.get,D=s.extend({defaultTab:"comments",template:function(e){return e.user.name?_(e):k},templateHelpers:function(){return{isSessionUser:this.model.user.isSessionUser()}},regions:e.defaults({coverRegion:"[data-role=cover-area]",userModuleRegion:"[data-role=user-module]",recommendedModuleRegion:"[data-role=recommended-module]",commentsModuleRegion:"[data-role=comments-module]",alertRegion:"[data-role=alert-message]",activeForumsModuleRegion:"[data-role=active-forums-module]",moderationModuleRegion:"[data-role=moderation-module]"},s.prototype.regions),events:e.defaults({"click a[data-link-name]":"trackClickLink"},s.prototype.events),initialize:function(e){s.prototype.initialize.apply(this,arguments),this.listenTo(this.model.user,"change:isBlocked sync",this.render),this.subTab=e&&e.subTab,this.session=M.get(),this.listenTo(this,"change:activeTab",this.updateTabSpecificModules),this.listenTo(this.model,"moderationDetailsReady",this.onDomRefresh),this.listenTo(this.model.user,"blockError",this.onUserBlockError),this.listenTo(this.model.user,"reportError",this.onUserReportError)},getMetaAttrs:function(){var t=this.model.user;return a.getPromiseFor(t,"name").then(function(n){return{type:"profile",title:i.interpolate(A("%(name)s · Profile"),{name:n}),description:e.escape(t.get("about")),image:t.has("avatar")&&t.get("avatar").cache}})},updateTabContent:function(){if(this.model.isBlocked())this.contentRegion.show(new t.ItemView({template:y}));else if(this.model.isPrivate()&&!this.session.user.isDisqusNetMod()){this.contentRegion.show(new t.ItemView({template:C}));var n=this;e.defer(function(){n.$(".empty-message-private").addClass("loaded")})}else s.prototype.updateTabContent.apply(this,arguments)},updateTabSpecificModules:function(e){this.model.isPrivate()||this.model.isBlocked()||("comments"===e?(this.hideRegion(this.commentsModuleRegion),this.recommendedModuleRegion.$el.show()):("favorites"===e?this.hideRegion(this.recommendedModuleRegion):this.recommendedModuleRegion.$el.show(),this.commentsModuleRegion.$el.show(),this.commentsModuleRegion.currentView.render()))},hideRegion:function(e){e.$el&&e.$el.hide()},showProfileModerationModule:function(){this.moderationModuleRegion.show(new m({model:this.model.moderationDetails}))},onDomRefresh:function(){if(this.$(this.coverRegion.el).length&&this.coverRegion.show(new o({model:this.model.user})),!this.model.isBlocked()){var e=this.session.user.isDisqusNetMod();this.userModuleRegion.show(new h({model:this.model.user})),(!this.model.isPrivate()||e)&&(this.recommendedModuleRegion.show(new v({model:this.model.user,collection:this.model.favorites.items,emptyView:w})),this.commentsModuleRegion.show(new b({model:this.model.user,collection:this.model.posts.items,emptyView:w})),this.activeForumsModuleRegion.show(new x({model:this.model.mostActiveForums,collection:this.model.mostActiveForums.items,emptyView:w}))),this.model.isPrivate()&&e&&this.alertRegion.show(new t.ItemView({model:this.model.user,template:S})),e&&this.showProfileModerationModule()}s.prototype.onDomRefresh.apply(this,arguments)},onUserBlockError:function(e){var i=e&&e.responseJSON&&e.responseJSON.code;this.alertRegion.show(new t.ItemView({model:this.model.user,templateHelpers:{isLimitError:i===n.ERROR_CODES.MAX_ITEMS_REACHED},template:T}))},onUserReportError:function(){this.alertRegion.show(new t.ItemView({template:T}))},getTrackingSection:function(e){switch(e){case"following":return"following";case"followers":return"followers";case"comments":return"comments";case"favorites":return"favorites";case"discussions":return"discussions"}},getTabView:function(t){var n;switch(t){case"following":return n=new f({model:this.model.user,userProfile:this.model,activeTab:this.subTab}),n.$el.attr({"class":"card-wrap"}),this.listenTo(n,"badTab",e.bind(this.trigger,this,"badTab")),n;case"followers":return n=new p({user:this.model.user,model:this.model.followers,collection:this.model.followers.get("items"),fetchableCollectionView:g,emptyView:d,infiniteScroll:!0}),n.$el.attr({"class":"card-wrap"}),n;case"comments":return this.getProfileCardCollectionView(this.model.user,this.model.posts,l);case"favorites":return this.getProfileCardCollectionView(this.model.user,this.model.favorites,c);case"discussions":return this.getProfileCardCollectionView(this.model.user,this.model.threads,u);case"recent":return this.getProfileCardCollectionView(this.model.user,this.model.profileFeed,u)}},getProfileCardCollectionView:function(e,t,n){return new p({model:t,collection:t.get("items"),user:e,fetchableCollectionView:r,emptyView:n,infiniteScroll:!0})}});return E.call(D.prototype),F.call(D.prototype),P.call(D.prototype,i.interpolate(A("Join %(disqus)s to get your own profile like this."),{disqus:"Disqus"})),D}),define("home/templates/discussionCreate",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Starting a discussion:",{name:"gettext",hash:{},data:a}))+"\n"},3:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Edit your discussion:",{name:"gettext",hash:{},data:a}))+"\n"},5:function(e,t,n,i,a){var s=null!=t?t:{};return'<li class="spacing-narrow">\n'+e.escapeExpression(n.gettext.call(s,"%(emailMods)s to channel mods if you have concerns.",{name:"gettext",hash:{emailMods:n.tag.call(s,"a",{name:"tag",hash:{text:n.gettext.call(s,"Send an email",{name:"gettext",hash:{},data:a}),href:null!=t?t.emailHref:t,"class":"link-inverted text-semibold"},data:a})},data:a}))+"\n</li>\n"},7:function(e,t,n,i,a){var s,o=null!=t?t:{};return null!=(s=n["if"].call(o,n.gt.call(o,null!=(s=null!=(s=null!=t?t.thread:t)?s.forum:s)?s.daysThreadAlive:s,0,{name:"gt",hash:{},data:a}),{name:"if",hash:{},fn:e.program(8,a,0),inverse:e.noop,data:a}))?s:""},8:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<li class="spacing-narrow">\n'+(null!=(s=n["if"].call(o,n.eq.call(o,null!=(s=null!=(s=null!=t?t.thread:t)?s.forum:s)?s.daysThreadAlive:s,1,{name:"eq",hash:{},data:a}),{name:"if",hash:{},fn:e.program(9,a,0),inverse:e.program(11,a,0),data:a}))?s:"")+"</li>\n"},9:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Discussions automatically close after 1 day.",{name:"gettext",hash:{},data:a}))+"\n"},11:function(e,t,n,i,a){var s;return e.escapeExpression(n.gettext.call(null!=t?t:{},"Discussions automatically close after %(numDays)s days.",{name:"gettext",hash:{numDays:null!=(s=null!=(s=null!=t?t.thread:t)?s.forum:s)?s.daysThreadAlive:s},data:a}))+"\n"},13:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="alert alert--brand align-min-tablet align--between align--middle text-medium spacing-bottom">\n<div class="align__item">\n<strong>'+o(n.gettext.call(s,"First time creating a discussion?",{name:"gettext",hash:{},data:a}))+"</strong>\n"+o(n.gettext.call(s,"Checkout these %(formatTips)s to make sure it's the best it can be.",{name:"gettext",hash:{formatTips:n.tag.call(s,"button",{name:"tag",hash:{text:n.gettext.call(s,"formatting tips",{name:"gettext",hash:{},data:a}),"data-action":"show-formatting","class":"button-link-inverted text-medium"},data:a})},data:a}))+'\n</div>\n<div class="align__item button--formatting">\n<button class="button button-wide button-outline text-medium" data-action="show-formatting">\n'+o(n.gettext.call(s,"Formatting",{name:"gettext",hash:{},data:a}))+' <span class="icon-formatting text-gray-dark">A</span>\n</button>\n</div>\n</div>\n'},15:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<div class="spacing-bottom">\n<div class="alert -warning text-medium">\n'+e.escapeExpression(n.gettext.call(o,"%(channelName)s requires you to %(verifyEmail)s before starting a discussion.",{name:"gettext",hash:{channelName:null!=t?t.channelName:t,verifyEmail:n.tag.call(o,"a",{name:"tag",hash:{text:n.gettext.call(o,"verify your email address",{name:"gettext",hash:{},data:a}),"data-forum":null!=(s=null!=(s=null!=t?t.thread:t)?s.forum:s)?s.id:s,"data-action":"verify-email",href:"#"},data:a})},data:a}))+"\n</div>\n</div>\n"},17:function(){return" disabled"},19:function(){return' class="disabled"'},21:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="media spacing-bottom">\n<div class="media-left">\n<input id="dicussion-form-invite-checkbox" type="checkbox" name="invite-active-users">\n</div>\n<label for="dicussion-form-invite-checkbox" class="text-small text-gray-dark media-body media-heading">\n'+o(n.gettext.call(s,"Invite most active users",{name:"gettext",hash:{},data:a}))+'\n<p class="text-gray">\n'+o(n.gettext.call(s,"This will invite the most active users on %(channelName)s when you submit this discussion. Do this ONLY when the thread is final and ready for publishing.",{name:"gettext",hash:{channelName:null!=t?t.channelName:t},data:a}))+"\n</p>\n</label>\n</div>\n"},23:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Create Discussion",{name:"gettext",hash:{},data:a}))+"\n"},25:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Update Discussion",{name:"gettext",hash:{},data:a}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div data-role="banner"></div>\n<div class="section-contained form--discussion">\n<div class="layout">\n<div class="layout__main">\n<div class="layout__nav">\n<div class="aside__wrap -brand">\n<h2 class="text-large spacing-bottom-narrow">\n'+(null!=(s=n["if"].call(o,null!=t?t.isNew:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+'</h2>\n<ul class="list-bullet spacing-narrow text-medium">\n<li class="spacing-narrow">\n'+r(n.gettext.call(o,"Stay on topic for %(channelLink)s.",{name:"gettext",hash:{channelLink:n.tag.call(o,"a",{name:"tag",hash:{text:null!=t?t.channelName:t,href:null!=t?t.channelUrl:t,"class":"link-inverted text-semibold"},data:a})},data:a}))+"\n</li>\n"+(null!=(s=n["if"].call(o,null!=t?t.emailHref:t,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a}))?s:"")+'<li class="spacing-narrow">\n'+r(n.gettext.call(o,"Follow the %(channel)s Rules.",{name:"gettext",hash:{channel:"Channel"},data:a}))+"\n</li>\n"+(null!=(s=n["if"].call(o,null!=t?t.isNew:t,{name:"if",hash:{},fn:e.program(7,a,0),inverse:e.noop,data:a}))?s:"")+'</ul>\n</div>\n</div>\n<section class="layout__content">\n'+(null!=(s=n.unless.call(o,null!=t?t.sessionUserNumPosts:t,{name:"unless",hash:{},fn:e.program(13,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=n.unless.call(o,null!=t?t.sessionUserVerified:t,{name:"unless",hash:{},fn:e.program(15,a,0),inverse:e.noop,data:a}))?s:"")+'<form>\n<div class="card-wrap">\n<div class="card__body">\n<div class="form-attribute-input" data-role="channel-categories" data-attribute="category"></div>\n\n<div class="spacing-bottom form-attribute-input" data-attribute="title">\n<h3 class="spacing-default text-gray-darker">\n'+r(n.gettext.call(o,"Title",{name:"gettext",hash:{},data:a}))+'\n<span class="text-gray text-small">'+r(n.gettext.call(o,"(Required)",{name:"gettext",hash:{},data:a}))+'</span>\n</h3>\n<input class="input--textbox -text-large text-semibold" name="title" type="text"\nplaceholder="'+r(n.gettext.call(o,"Headline for your discussion",{name:"gettext",hash:{},data:a}))+'" value="'+r(e.lambda(null!=t?t.title:t,t))+'"'+(null!=(s=n.unless.call(o,null!=t?t.sessionUserVerified:t,{name:"unless",hash:{},fn:e.program(17,a,0),inverse:e.noop,data:a}))?s:"")+' />\n<div data-role="attribute-error" class="form-message-error spacing-default text-small"></div>\n</div>\n\n<div class="spacing-bottom form-attribute-input" data-attribute="topics displayName" data-role="topic-input"></div>\n\n<div class="spacing-bottom form-attribute-input" data-attribute="message">\n<h3 class="spacing-default text-gray-darker">'+r(n.gettext.call(o,"Describe your discussion",{name:"gettext",hash:{},data:a}))+'</h3>\n<div data-role="postbox"'+(null!=(s=n.unless.call(o,null!=t?t.sessionUserVerified:t,{name:"unless",hash:{},fn:e.program(19,a,0),inverse:e.noop,data:a}))?s:"")+'></div>\n<div data-role="attribute-error" class="form-message-error spacing-default text-small"></div>\n<div class="align align--between spacing-top-narrow" data-role="toolbar"></div>\n</div>\n</div>\n</div>\n<div class="align-min-tablet align--between spacing-bottom">\n<div class="align__item discussion-form__input-block">\n<div class="media spacing-bottom">\n<div class="media-left">\n<label class="text-small text-gray-dark media-body media-heading">\n<input type="checkbox" name="subscribe" checked>\n'+r(n.gettext.call(o,"Subscribe for email updates to this discussion",{name:"gettext",hash:{},data:a}))+"\n</label>\n</div>\n</div>\n"+(null!=(s=n["if"].call(o,null!=t?t.canInviteActiveUsers:t,{name:"if",hash:{},fn:e.program(21,a,0),inverse:e.noop,data:a}))?s:"")+'</div>\n<div class="align__item clearfix">\n<div class="align-max-mobile">\n<div class="align__item--swap-first discussion-form__loading">\n<div class="spinner-small"></div>\n</div>\n<button type="button" data-action="cancel-create" class="button text-medium align__item--swap-first">\n'+r(n.gettext.call(o,"Cancel",{name:"gettext",hash:{},data:a}))+'\n</button>\n<button type="submit" class="button button-fill--brand button--discussion-form text-medium align__item--swap-last"'+(null!=(s=n.unless.call(o,null!=t?t.sessionUserVerified:t,{name:"unless",hash:{},fn:e.program(17,a,0),inverse:e.noop,data:a}))?s:"")+">\n"+(null!=(s=n["if"].call(o,null!=t?t.isNew:t,{name:"if",hash:{},fn:e.program(23,a,0),inverse:e.program(25,a,0),data:a}))?s:"")+'</button>\n</div>\n</div>\n</div>\n</form>\n</section>\n</div>\n<aside class="layout__aside">\n<div class="card-wrap">\n<div class="card__header -default">\n<h3 class="text-gray-darker">\n'+r(n.gettext.call(o,"Basic Rules",{name:"gettext",hash:{},data:a}))+'\n</h3>\n</div>\n<div class="text-medium text-gray-darker card__body spacing-inner rules__wrapper -discussion">\n'+(null!=(s=e.invokePartial(i.homeRules,t,{name:"homeRules",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</div>\n</div>\n<div class="text-smaller text-gray hidden-md">\n'+(null!=(s=e.invokePartial(i.homeFooter,t,{name:"homeFooter",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n</aside>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/templates/editDiscussionCategory",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a,s,o){var r,l=e.lambda,c=e.escapeExpression,d=null!=t?t:{};return'<label class="align spacing-narrow">\n<div class="align__item spacing-right">\n<input type="radio" name="category" value="'+c(l(a&&a.key,t))+'" alt="'+c(l(t,t))+'" '+(null!=(r=n["if"].call(d,n.eq.call(d,a&&a.key,null!=o[1]?o[1].category:o[1],{name:"eq",hash:{},data:a}),{name:"if",hash:{},fn:e.program(2,a,0,s,o),inverse:e.noop,data:a}))?r:"")+' />\n</div>\n<div class="spacing-bottom-small align__item text-medium text-gray-darker">\n'+c(l(a&&a.key,t))+'\n<p class="text-gray">\n'+c(l(t,t))+"\n</p>\n</div>\n</label>\n"},2:function(){return"checked"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a,s,o){var r,l=null!=t?t:{},c=e.escapeExpression;return'<h3 class="text-gray-darker">\n'+c(n.gettext.call(l,"Choose Category",{name:"gettext",hash:{},data:a}))+'\n<span data-toggle="tooltip" data-placement="bottom"\ntitle="'+c(n.gettext.call(l,"%(channelTitle)s requires that you choose a category to guide your discussion. This helps maintain a common theme throughout discussions on this channel.",{name:"gettext",hash:{channelTitle:null!=t?t.name:t},data:a}))+'">\n<span class="icon-questions icon__position icon-tiny text-gray"></span>\n</span>\n</h3>\n<div data-role="attribute-error" class="form-message-error text-small spacing-default"></div>\n'+(null!=(r=n.each.call(l,null!=t?t.categories:t,{name:"each",hash:{},fn:e.program(1,a,0,s,o),inverse:e.noop,data:a}))?r:"")},useData:!0,useDepths:!0})}),define("home/views/EditDiscussionCategoryView",["jquery","backbone-marionette","home/templates/editDiscussionCategory"],function(e,t,n){"use strict";var i=t.ItemView.extend({template:n,className:"discussion-form__categories",templateHelpers:function(){return{categories:this.model.thread.forum.channel.getCategories(),existingCategory:this.existingCategory}},initialize:function(){this.existingCategory=this.model.topics.getCategoryTopics()[0]},events:{"change input[name=category]":"categoryChanged"},onDomRefresh:function(){this.$("[data-toggle=tooltip]").tooltip()},categoryChanged:function(t){this.model.set({category:e(t.currentTarget).val()})}});return i}),define("home/templates/topicInput",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<h3 class="spacing-default text-gray-darker">\n'+o(n.gettext.call(s,"Topics",{name:"gettext",hash:{},data:a}))+'\n</h3>\n\n<div data-attribute="topics" class="input-group">\n<div data-role="topics"></div>\n<input class="input-group__text" name="topics" type="text"\nplaceholder="'+o(n.gettext.call(s,"Add topics here, separate with commas.",{name:"gettext",hash:{},data:a}))+'" />\n</div>\n\n<div data-role="attribute-error" class="form-message-error text-small spacing-default"></div>\n'},useData:!0})}),define("home/views/TopicInputView",["underscore","backbone-marionette","home/models/Topic","home/templates/topicInput","home/views/TopicTagView"],function(e,t,n,i,a){"use strict";var s=t.CompositeView.extend({className:"topic-group__wrapper",template:i,itemView:a,itemViewContainer:"[data-role=topics]",initialize:function(){this.listenTo(this,"itemview:removeTag",this.handleRemoveTopicByTag)},events:{"keydown [name=topics]":"handleTopicInputKeydown","blur input[name=topics]":"handleTopicInputBlur"},ui:{topics:"[name=topics]"},handleTopicInputKeydown:function(t){if(e.contains(s.TOPIC_INSERTION_KEYS,t.keyCode)&&!t.shiftKey)t.preventDefault(),this.parseTopicInput();else if(8===t.keyCode){var n=this.ui.topics.val().length;if(!n){var i=e.last(this.collection.filter(function(e){return!e.get("hidden")}));i&&this.collection.remove(i)}}},
handleTopicInputBlur:function(){this.parseTopicInput()},parseTopicInput:function(){var t=this.ui.topics.val();if(t){var i=t.split(",");e.each(i,function(e){var t=n.getOrCreateTopic(e);t&&this.collection.add(t)},this),this.clearTopicInput()}},clearTopicInput:function(){this.ui.topics.val("")},handleRemoveTopicByTag:function(e){this.collection.remove(e.model)}},{TOPIC_INSERTION_KEYS:[9,188,13,186]});return s}),define("home/mixins/withChannelBanner",["underscore","home/models/Channel"],function(e,t){"use strict";var n=e.chain(t.BANNER_COLORS).keys().map(function(e){return"-"+e}).value().join(" "),i={ui:{bannerWrapper:"[data-role=banner]"},initialize:function(e,t){e.call(this,t),this.listenTo(this.model,"change:bannerColor change:banner change:options",this.updateBanner)},onRender:function(t){t&&t.apply(this,e.rest(arguments)),this.updateBanner()},updateBanner:function(){this.ui.bannerWrapper.removeClass(n).removeClass("-image-background").css({"background-image":""});var e=this.model.get("bannerColor"),t=this.model.get("banner")||this.model.get("options").alertBackground;t instanceof window.File&&(t="//media.disquscdn.com/home/channels/banner-image-upload.png"),t&&this.ui.bannerWrapper.addClass("-image-background").css({"background-image":"url("+t+")","background-position":"0 0;"}),e&&this.ui.bannerWrapper.addClass("-"+e.toLowerCase())}};return function(){this.ui=e.extend({},i.ui,this.ui),this.initialize=e.wrap(this.initialize,i.initialize),this.onRender=e.wrap(this.onRender,i.onRender),e.defaults(this,e.pick(i,["updateBanner"]))}}),define("home/templates/channelBanner",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<div class="banner__wrapper" data-role="banner">\n<a href="/home/channel/'+e.escapeExpression(e.lambda(null!=t?t.slug:t,t))+'/" class="link-inverted">\n<div class="channel-cover section-contained align align--middle">\n'+(null!=(s=e.invokePartial(i.channelCoverLogo,t,{name:"channelCoverLogo",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n</a>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ChannelBannerView",["backbone-marionette","home/mixins/withChannelBanner","home/mixins/withClickLinkTracking","home/templates/channelBanner"],function(e,t,n,i){"use strict";var a=e.ItemView.extend({template:i,events:{"click a":"trackClickLink"}}),s=a.prototype;return n.call(s,"channel_top_banner"),t.call(s),a}),define("home/models/formatting/LinkPopover",["backbone"],function(e){"use strict";var t=function(e){return!(e&&e.trim())},n=e.Model.extend({defaults:{originalText:"",text:"",url:""},validate:function(e){return t(e.text)?{attrName:"text",message:"Link text is required."}:t(e.url)?{attrName:"url",message:"Link URL is required."}:void 0}});return n}),define("home/templates/linkInsertTooltip",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t){var n=e.lambda,i=e.escapeExpression;return'<form data-role="link-form">\n<div class="spacing-bottom-narrow form-attribute-input" data-attribute="text">\n<input name="text" class="input--textbox" placeholder="Link text" value="'+i(n(null!=t?t.text:t,t))+'">\n<div data-role="attribute-error" class="form-message-error spacing-default text-small"></div>\n</div>\n<div class="spacing-bottom-narrow form-attribute-input" data-attribute="url">\n<input name="url" class="input--textbox" placeholder="Link URL" value="'+i(n(null!=t?t.url:t,t))+'">\n<div data-role="attribute-error" class="form-message-error spacing-default text-small"></div>\n</div>\n<div class="text-center">\n<button type="submit" data-action="insert-link" class="button button-outline button-wide button-small">\nAdd Link\n</button>\n</div>\n</form>\n'},useData:!0})}),define("home/views/BasePopoverView",["jquery","backbone"],function(e,t){"use strict";var n=t.View.extend({className:"popover notch-up notch--mobile-hidden",initialize:function(e){this.$target=e.$target},move:function(){this.$el.detach().appendTo(".viewport"),this.render(),this.delegateEvents(),this.updatePosition(this.$target,".viewport")},updatePosition:function(t,n){var i=t.offset().top,a=t.offset().left,s=t.height(),o=t.width(),r=this.$el.width(),l=e(window),c=l.width(),d=e(n).offset().top,u=this.constructor.calculateHorizontalAlignment(a,o,r,c);this.$el.toggleClass("-right","right"===u.position),this.$el.toggleClass("-left","left"===u.position),this.$el.css({top:i+s+this.constructor.TOP_MARGIN-d,left:u.left,bottom:"inherit","z-index":this.constructor.Z_INDEX})},show:function(){this.move(),this.$el.addClass("open")},hide:function(){this.$el.removeClass("open")},onBodyClick:function(t){var n=e(t.target);n.closest(this.$target).length||n.closest(this.$el).length||this.hide()}},{TOP_MARGIN:20,Z_INDEX:550,calculateHorizontalAlignment:function(e,t,n,i){var a,s,o=e-(n-t)/2,r=e+t-n,l=e,c=o+n>i&&r>0,d=0>o&&i>l+n,u=i>o+n&&o>0;return u?(s="centered",a=o):c?(s="right",a=r):d?(s="left",a=l):(s="leftEdge",a=0),{position:s,left:a}}});return n}),define("home/views/formatting/LinkPopoverView",["jquery","underscore","core/utils","home/templates/linkInsertTooltip","home/views/BasePopoverView"],function(e,t,n,i,a){"use strict";var s=n.preventDefaultHandler,o=a,r=o.prototype,l=o.extend({events:{"blur input":"saveModel","submit [data-role=link-form]":"insertLink"},template:i,initialize:function(){r.initialize.apply(this,arguments),this.listenTo(this.model,{"change:text":function(e,t){this.$("[name=text]").val(t)},"change:url":function(e,t){this.$("[name=url]").val(t)}}),this._open=!1,this.onBodyClick=t.bind(this.onBodyClick,this)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},remove:function(){this.removeBodyEvent(),r.remove.apply(this,arguments)},attachBodyEvent:function(){e("body").on("click",this.onBodyClick)},removeBodyEvent:function(){e("body").off("click",this.onBodyClick)},show:function(){t.delay(t.bind(function(){this.$("input").eq(0).focus()},this),50),this._open||(this._open=!0,this.attachBodyEvent(),r.show.apply(this,arguments))},hide:function(){r.hide.apply(this,arguments),this._open&&(this._open=!1,this.removeBodyEvent(),this.saveModel(),this.trigger("hide"))},saveModel:function(){this.model.set({url:this.$("[name=url]").val().trim(),text:this.$("[name=text]").val()})},insertLink:s(function(){this.saveModel(),this.model.isValid()?this.trigger("submit",this.model.toJSON()):this.displayError(this.model.validationError)}),displayError:function(e){this.$(".form-attribute-input").removeClass("is-error"),this.$("[data-attribute="+e.attrName+"]").addClass("is-error").find("[data-role=attribute-error]").text(e.message)}});return l}),define("home/templates/formattingButtons",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(){return'<button type="button" data-action="toggle-formatting" data-formatting="bold" class="button link-gray text-smaller">\n<strong title="Bold">B</strong>\n</button>\n<button type="button" data-action="toggle-formatting" data-formatting="italics" class="button link-gray text-smaller">\n<em title="Italic">I</em>\n</button>\n<button type="button" data-action="toggle-formatting" data-formatting="underline" class="button link-gray text-smaller">\n<u title="Underline">U</u>\n</button>\n<button type="button" data-action="toggle-formatting" data-formatting="blockquote" class="button link-gray text-smaller">\n❛❛\n</button>\n<button type="button" data-action="insert-link" class="button link-gray text-smaller">\n<span class="icon icon-link icon__position -inline icon-small" title="Link"></span>\n</button>\n'},useData:!0})}),define("home/views/formatting/FormattingButtonsView",["underscore","backbone","home/models/formatting/LinkPopover","home/views/formatting/LinkPopoverView","home/templates/formattingButtons"],function(e,t,n,i,a){"use strict";var s=t.View,o=s.prototype,r=s.extend({template:a,events:{"click [data-action=toggle-formatting]":"onFormattingClick","click [data-action=insert-link]":"onInsertLinkClick"},initialize:function(e){this.getPostbox=e.getPostbox,this.linkModel=new n},render:function(){return this.$el.html(this.template()),this._popoverView?this:(this._popoverView=new i({$target:this.$("[data-action=insert-link]"),model:this.linkModel}),this.listenTo(this._popoverView,{hide:function(){var e=window.document.activeElement;e&&"INPUT"===e.tagName||this.getPostbox().textarea.restoreSelection()},submit:function(e){this.insertFormattingTags("link",{url:e.url,text:e.text}),this._popoverView.hide(),this.linkModel.clear()}}),this)},remove:function(){this._popoverView&&this._popoverView.remove(),o.remove.apply(this,arguments)},insertFormattingTags:function(t,n){var i=this.getPostbox().textarea;if("link"===t){var a='<a href="'+e.escape(n.url)+'">'+this.constructor.escapeCommentHtml(n.text)+"</a>";i.insertAtCursor(a)}else{var s=r.FORMATTING_TAGS[t];if(!s)throw Error("Invalid formatting operation: "+t);i.insertAroundSelection("<"+s+">","</"+s+">")}},onFormattingClick:function(e){var t=e.currentTarget.getAttribute("data-formatting");this.insertFormattingTags(t)},onInsertLinkClick:function(){var e=this.getPostbox().textarea,t=e.getSelected(),n={originalText:t},i=this.linkModel.get("text");i&&i!==this.linkModel.get("originalText")||(n.text=t),this.linkModel.set(n),this._popoverView.show()}},{FORMATTING_TAGS:{bold:"strong",blockquote:"blockquote",italics:"em",underline:"u"},escapeCommentHtml:function(e){return e.replace(/&(?=\S)/g,"&amp;").replace(/<(?=\S)/g,"&lt;")}});return r}),define("home/templates/discussionCreateToolbar",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){return'<div class="input--formatting-region">\n<span data-role="formatting-buttons"></span>\n<span data-role="upload-button"></span>\n</div>\n\n<div class="align__item hidden-md">\n<button data-action="show-formatting" type="button" class="button text-smaller link-gray">\n<span class="icon-formatting">A</span>\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Formatting Help",{name:"gettext",hash:{},data:a}))+"\n</button>\n</div>\n"},useData:!0})}),define("home/templates/formatting",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="modal-formatting">\n<div class="modal-body text-medium">\n<h1 class="text-larger spacing-bottom-narrow">\n<span class="icon-formatting">A</span> '+o(n.gettext.call(s,"Formatting Tips",{name:"gettext",hash:{},data:a}))+'\n</h1>\n<div class="align-min-tablet modal-formatting__block">\n<label class="modal-formatting__label"><a>'+o(n.gettext.call(s,"Linking text",{name:"gettext",hash:{},data:a}))+'</a></label>\n<textarea class="modal-formatting__textarea">&lt;a href="https://www.website.com/"&gt;'+o(n.gettext.call(s,"This is a link",{name:"gettext",hash:{},data:a}))+'&lt;/a&gt;</textarea>\n</div>\n<div class="align-min-tablet modal-formatting__block">\n<label class="modal-formatting__label">'+o(n.gettext.call(s,"Line Break",{name:"gettext",hash:{},data:a}))+'</label>\n<textarea class="modal-formatting__textarea">&lt;br&gt;</textarea>\n</div>\n<div class="align-min-tablet modal-formatting__block">\n<label class="modal-formatting__label"><strong>'+o(n.gettext.call(s,"Bold",{name:"gettext",hash:{},data:a}))+'</strong></label>\n<textarea class="modal-formatting__textarea">&lt;strong&gt;'+o(n.gettext.call(s,"Defines bold text",{name:"gettext",hash:{},data:a}))+'&lt;/strong&gt;</textarea>\n</div>\n<div class="align-min-tablet modal-formatting__block">\n<label class="modal-formatting__label"><blockquote>'+o(n.gettext.call(s,"Block Quote",{name:"gettext",hash:{},data:a}))+'</blockquote></label>\n<textarea class="modal-formatting__textarea">&lt;blockquote&gt;'+o(n.gettext.call(s,"Defines a long quotation",{name:"gettext",hash:{},data:a}))+'&lt;/blockquote&gt;</textarea>\n</div>\n<div class="align-min-tablet modal-formatting__block">\n<label class="modal-formatting__label"><em>'+o(n.gettext.call(s,"Italic",{name:"gettext",hash:{},data:a}))+'</em></label>\n<textarea class="modal-formatting__textarea">&lt;em&gt;'+o(n.gettext.call(s,"Defines italic text",{name:"gettext",hash:{},data:a}))+'&lt;/em&gt;</textarea>\n</div>\n<div class="align-min-tablet modal-formatting__block">\n<label class="modal-formatting__label"><strike>'+o(n.gettext.call(s,"Strikethrough",{name:"gettext",hash:{},data:a}))+'</strike></label>\n<textarea class="modal-formatting__textarea">&lt;strike&gt;'+o(n.gettext.call(s,"Defines strikethrough text",{name:"gettext",hash:{},data:a}))+'&lt;/strike&gt;</textarea>\n</div>\n<div class="align-min-tablet modal-formatting__block">\n<label class="modal-formatting__label"><u>'+o(n.gettext.call(s,"Underlined",{name:"gettext",hash:{},data:a}))+'</u></label>\n<textarea class="modal-formatting__textarea">&lt;u&gt;'+o(n.gettext.call(s,"Defines underlined text",{name:"gettext",hash:{},data:a}))+"&lt;/u&gt;</textarea>\n</div>\n</div>\n</div>\n"},useData:!0})}),define("home/templates/uploadButton",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(){return'<button type="button" class="button text-smaller link-gray" data-action="attach" title="Upload Images">\n<span class="icon-photo icon__position -inline"></span>\n</button>\n<input type="file" class="hidden" data-role="media-upload" tabindex="-1" accept="image/*">\n'},useData:!0})}),define("home/views/DiscussionCreateToolbarView",["backbone-marionette","core/views/media/UploadButtonView","home/mixins/withSubviews","home/utils/confirmModal","home/views/formatting/FormattingButtonsView","home/templates/discussionCreateToolbar","home/templates/formatting","home/templates/uploadButton"],function(e,t,n,i,a,s,o,r){"use strict";var l=e.ItemView,c=l.prototype,d=l.extend({template:s,events:{"click [data-action=show-formatting]":"showFormatting"},regions:{formattingButtonsRegion:"[data-role=formatting-buttons]",uploadButtonRegion:"[data-role=upload-button]"},initialize:function(e){this.getPostbox=e.getPostbox},render:function(){return c.render.call(this),this.activateRegion(this.uploadButtonRegion,this.createUploadButton),this.activateRegion(this.formattingButtonsRegion,this.createFormattingButtons),this},createUploadButton:function(){var e=new t({el:this.uploadButtonRegion.el,template:r});return this.listenTo(e,"uploader:attachMedia",function(){var e=this.getPostbox();e.handleUploadViaButton.apply(e,arguments)}),e},createFormattingButtons:function(){return new a({el:this.formattingButtonsRegion.el,getPostbox:this.getPostbox})},showFormatting:function(){i.confirmationPromise(i.TYPES.CLOSE,o(this.model.thread.forum.channel.toJSON()))}});return n.call(d.prototype),d}),define("home/templates/discussionChannelInfo",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t){var n,i=e.lambda,a=e.escapeExpression;return'<img class="favicon" src="'+a(i(null!=(n=null!=t?t.options:t)?n.favicon:n,t))+'" alt="'+a(i(null!=t?t.name:t,t))+'"/>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<a class="discussion-origin-name truncate-line" href="/home/channel/'+r(o(null!=t?t.slug:t,t))+'/">\n'+(null!=(s=n["if"].call(null!=t?t:{},null!=(s=null!=t?t.options:t)?s.favicon:s,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+r(o(null!=t?t.name:t,t))+"\n</a>\n"},useData:!0})}),define("home/templates/threadSubmitError",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.escapeExpression;return'<div class="modal-header">\n<h4 class="modal-title">'+o(n.gettext.call(null!=t?t:{},"Uh oh, we weren't unable to save your discussion",{name:"gettext",hash:{},data:a}))+'</h4>\n</div>\n<div class="modal-body">\n<p>'+o(e.lambda(null!=(s=null!=t?t.responseJSON:t)?s.response:s,t))+"</p>\n</div>\n"},useData:!0})}),define("home/views/DiscussionCreateView",["underscore","backbone-marionette","core/mixins/withEmailVerifyLink","core/strings","home/mixins/withSubviews","home/models/Thread","home/templates/discussionCreate","home/utils/features","home/utils/backboneUtils","home/utils/confirmModal","home/utils/trackingUtils","home/views/PostReplyView","home/views/EditDiscussionCategoryView","home/views/TopicInputView","home/views/ChannelBannerView","home/views/DiscussionCreateToolbarView","home/templates/discussionChannelInfo","home/templates/threadSubmitError"],function(e,t,n,i,a,s,o,r,l,c,d,u,h,m,p,f,g,v){"use strict";var b=i.get,w=t.ItemView,x=w.prototype,y=w.extend({template:o,templateHelpers:function(){var t=this.model.thread.forum.channel.get("options").modEmail,n=e.contains(this.session.moderatedForums,this.model.thread.forum.id);return{isNew:this.isNew,sessionUserNumPosts:this.session.user.get("numPosts"),sessionUserVerified:this.session.user.get("isVerified"),emailHref:t?"mailto:"+t:"",channelName:this.model.thread.forum.channel.get("name"),channelUrl:"/home/channel/"+this.model.thread.forum.channel.get("slug")+"/",canInviteActiveUsers:n,canModifyTopics:this.canModifyTopics}},events:{submit:"submitThread","click [data-action=cancel-create]":"navigateBack","blur input[name=title]":"updateTitle"},ui:{title:"[name=title]",subscribe:"[name=subscribe]",inviteActiveUsers:"[name=invite-active-users]"},initialize:function(e){var t=this.model.thread;this.isNew=t.isNew(),d.setSection(this.isNew?"create":"edit"),this.listenTo(this.model,"change:category",this.categoryChanged),this.listenTo(this.model,"change",this.updateValidationErrors),this.listenTo(this.model.topics,"add remove reset",this.updateValidationErrors),this.listenTo(this.model,"invalid",this.handleValidationError),this.session=e.session},regions:{postboxRegion:"[data-role=postbox]",channelInfoRegion:"[data-role=channel-info]",categoriesRegion:"[data-role=channel-categories]",topicInputRegion:"[data-role=topic-input]",bannerRegion:"[data-role=banner]",toolbarRegion:"[data-role=toolbar]"},getThread:function(){return this.model.thread},getMetaAttrs:function(){return l.getPromiseFor(this.model.thread.forum,"name").then(function(e){return i.interpolate(b("Create new discussion on %(name)s"),{name:e})})},render:function(){if(x.render.call(this),!this.session.fetched)return void this.session.fetch().then(e.bind(this.render,this));this.activateRegion(this.postboxRegion,this.createPostbox),this.activateRegion(this.toolbarRegion,this.createToolbarView);var t=this.model.thread.forum.channel;if(t){this.activateRegion(this.channelInfoRegion,this.createChannelView),this.activateRegion(this.bannerRegion,this.createBanner),this.activateRegion(this.topicInputRegion,this.createTopicInput);var n=t.getCategories();n&&this.activateRegion(this.categoriesRegion,this.createCategoriesView)}return this},createToolbarView:function(){return new f({el:this.toolbarRegion.el,model:this.model,getPostbox:e.bind(function(){return this.postboxRegion.currentView},this)})},createBanner:function(){return new p({el:this.bannerRegion.el,model:this.model.thread.forum.channel})},createChannelView:function(){return new t.ItemView({el:this.channelInfoRegion.el,model:this.model.thread.forum.channel,template:g})},createCategoriesView:function(){var e=new h({model:this.model});return this.bindTitleCategoryHandlers(),e},categoryChanged:function(e,t){var n=this.ui.title,i=this.model._previousAttributes.category;if(i){var a=n.val().match(RegExp(i+s.CATEGORY_TITLE_SEPARATOR+"(.*)"));a&&n.val(a[1])}n.val(t+s.CATEGORY_TITLE_SEPARATOR+n.val()),this.updateTitle()},bindTitleCategoryHandlers:function(){if(!this.titleCategoryHandlerBound){var t=this.ui.title,n=e.partial(function(t,n){var i=t.get("category"),a=i&&(i+s.CATEGORY_TITLE_SEPARATOR).length;return!e.contains(y.NON_EDITING_KEYS,n.which)&&(a>this.selectionStart||this.selectionStart===a&&8===n.which)?!1:void 0},this.model);t.on("keydown",n),this.titleCategoryHandlerBound=!0}},submitThread:function(t){t.preventDefault();var n,i;!this._submitLocked&&this.model.isValid()&&(n=this.postboxRegion.currentView,i=n.textarea.get(),this._submitLocked=this.model.thread.save({title:this.ui.title.val(),message:i},{success:e.bind(this.handleThreadCreate,this),error:e.bind(this.handleSaveError,this)}),this._submitLocked&&this.$el.find("form").addClass("is-submitting"))},createPostbox:function(){var e=new u({model:this.model.thread,thread:this.model.thread,placeholder:b("Tell people what you want your discussion to be about.  Use gifs and images too."),session:this.session,canUseContentEditable:r.canUseContentEditable(),showSubmitButton:!1,showAvatar:!1,showMediaPreviews:!0,showMustVerifyAlert:!1});return this.listenTo(e,"blur",this.updateMessage),e},createTopicInput:function(){return new m({collection:this.model.topics})},handleThreadCreate:function(){var e=this.ui.subscribe.prop("checked");e&&this.model.thread.subscribe();var t=this.ui.inviteActiveUsers.prop("checked");t&&this.model.thread.inviteUserGroup("good_forum_commenters"),this.model.saveVisibleTopics(),this.isNew&&this.model.thread.set("isNew",!0),this.trigger("createThread")},updateTitle:function(){this.model.set({title:this.ui.title.val()})},updateMessage:function(){var e=this.postboxRegion.currentView;this.model.set({message:e.textarea.get()})},updateValidationErrors:function(){this.$(".form-attribute-input").removeClass("is-error"),this.model.isValid()},handleValidationError:function(t,n){e.each(n,function(e){this.$(".form-attribute-input[data-attribute*="+e.attrName+"]").addClass("is-error").find("[data-role=attribute-error]").text(e.message)},this)},handleSaveError:function(e,t){this._submitLocked=!1,this.$("form").removeClass("is-submitting"),c.confirmationPromise(c.TYPES.CLOSE,v(t))},navigateBack:function(){window.history.back()},getPageTrackingParams:function(){return{forum:this.model.thread.forum.id}}},{NON_EDITING_KEYS:[37,39,36,35,9,13]});return a.call(y.prototype),n.call(y.prototype),y}),define("home/templates/discussionBanner",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<div class="banner__wrapper grad-overlay__wrapper" data-role="banner">\n<div class="grad-overlay">\n<a href="/home/channel/'+e.escapeExpression(e.lambda(null!=t?t.slug:t,t))+'/">\n<div class="channel-cover section-contained align align--middle align--between">\n<div class="spacing-right truncate-line text-light">\n'+(null!=(s=e.invokePartial(i.channelCoverLogo,t,{name:"channelCoverLogo",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</div>\n<div class="visible-lg btn-follow--inverted btn-follow--plain">\n'+(null!=(s=e.invokePartial(i.genericFollowButton,t,{name:"genericFollowButton",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n</div>\n</a>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/DiscussionBannerView",["backbone-marionette","home/mixins/withChannelBanner","core/mixins/withChannelFollowing","home/mixins/withClickLinkTracking","home/templates/discussionBanner"],function(e,t,n,i,a){"use strict";var s=e.ItemView.extend({template:a,events:{"click a":"trackClickLink"},initialize:function(e){this.app=e.app,this.session=e.session,this.listenTo(this,"toggled:follow",this.render)}}),o=s.prototype;return i.call(o,"discussion_top_banner"),t.call(o),n.call(o,function(){return this.model}),s}),define("home/templates/discussionCoverActions",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return" -wide"},3:function(){return" is-recommended"},5:function(e,t){return'<span class="button__count">'+e.escapeExpression(e.lambda(null!=t?t.likes:t,t))+"</span>\n"},7:function(e,t,n,i,a){var s;return'<li class="dropdown" data-role="menu">\n<a href="#" class="button icon__rotate--right" data-toggle="dropdown">\n<span class="icon icon-show-more text-smaller"></span>\n</a>\n<ul class="dropdown-menu dropdown--cards dropdown--discussion" role="menu" aria-labeledby="drop-discover">\n<li>\n<a href="#" class="link text-semibold" data-action="toggle-subscription">\n'+(null!=(s=n["if"].call(null!=t?t:{},null!=t?t.userSubscription:t,{name:"if",hash:{},fn:e.program(8,a,0),inverse:e.program(10,a,0),data:a}))?s:"")+"</a>\n</li>\n</ul>\n</li>\n"},8:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Unsubscribe from discussion",{name:"gettext",hash:{},data:a}))+"\n"},10:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Subscribe to discussion",{name:"gettext",hash:{},data:a}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<ul class="list--inline">\n<li class="button__wrapper--recommend -count'+(null!=(s=n["if"].call(o,n.gt.call(o,null!=t?t.likes:t,9,{name:"gt",hash:{},data:a}),{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=n["if"].call(o,null!=t?t.favorited:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+'" data-action="favorite">\n<a class="button--recommend text-medium" href="#">\n<span class="button__heart icon-heart"></span>\n<span class="button__text hidden-md">'+r(n.gettext.call(o,"Recommend",{name:"gettext",hash:{},data:a}))+"</span>\n"+(null!=(s=n["if"].call(o,null!=t?t.likes:t,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a}))?s:"")+'</a>\n</li>\n<li class="dropdown" data-dropdown="enabled">\n<a class="button text-medium -share-discussion dropdown-toggle" data-toggle="dropdown" href="#">\n<span class="icon-share-discussion text-smaller icon__position"></span><span class="spacing-left-small hidden-md">'+r(n.gettext.call(o,"Share",{name:"gettext",hash:{},data:a}))+'</span>\n</a>\n<ul class="dropdown-menu dropdown--cards dropdown--share-discussion">\n<li>\n<a class="link" data-action="share" data-network="twitter" href="#">\n<span class="icon icon-twitter text-smaller icon__position -inline"></span>\n<strong>'+r(n.gettext.call(o,"Tweet this",{name:"gettext",hash:{},data:a}))+'</strong>\n</a>\n</li>\n<li>\n<a class="link" data-action="share" data-network="facebook" href="#">\n<span class="icon icon-facebook text-smaller icon__position -inline"></span>\n<strong>'+r(n.gettext.call(o,"Post to Facebook",{name:"gettext",hash:{},data:a}))+"</strong>\n</a>\n</li>\n</ul>\n</li>\n"+(null!=(s=n.unless.call(o,null!=t?t.isDeleted:t,{name:"unless",hash:{},fn:e.program(7,a,0),inverse:e.noop,data:a}))?s:"")+"</ul>\n"},useData:!0})}),define("home/views/DiscussionCoverActionsView",["home/views/ThreadCardDefaultFooterView","home/templates/discussionCoverActions"],function(e,t){"use strict";var n=e,i=n.prototype,a=n.extend({template:t,toggleThreadFavorited:function(e){i.toggleThreadFavorited.call(this,e),this.$("[data-action=favorite]").addClass("animate-recommend")}});return a}),define("home/views/common/DiscussionCoverBaseView",["backbone-marionette","core/strings","core/bus","home/models/Session","home/views/DiscussionBannerView","home/views/DiscussionCoverActionsView","home/views/TopicTagCollectionView","home/mixins/withLoginOverlay","home/mixins/withTruncate","home/mixins/withSubviews"],function(e,t,n,i,a,s,o,r,l,c){"use strict";var d=e.ItemView,u=t.get,h=d.extend({events:{"click [data-role=message] a":"trackClickLink"},trackClickLink:function(e){n.trigger("uiAction:clickLink",e,{adjective:"message"})},templateHelpers:function(){var e=this.model.thread,t=this.model.channel;return{relativeTime:e.getRelativeCreatedAt(),channel:t&&t.toJSON(),image:e.getImage(),discussionRoute:e.getDiscussionRoute(this.channel)}},initialize:function(e){this.app=e.app,this.session=i.get(),this.channel=this.model.channel,this.channel&&this.listenTo(this.channel,"change",this.render),this.listenTo(this.model.thread,{sync:this.render,"change:extending":this.render})},regions:{bannerRegion:"[data-role=banner]",topicsRegion:"[data-role=topics]",threadActionsRegion:"[data-role=thread-actions]"},onRender:function(){var e=this.model.channel;e&&(this.activateRegion(this.bannerRegion,this.createBanner),this.activateRegion(this.topicsRegion,this.createTopicsView)),this.activateRegion(this.threadActionsRegion,this.createThreadActions)},createBanner:function(){return new a({model:this.model.channel,app:this.app,session:this.session})},createThreadActions:function(){return new s({el:this.threadActionsRegion.el,model:this.model.thread,channel:this.model.channel})},createTopicsView:function(){var e=this.model.thread.topics,t=this.model.channel;return new o({collection:e,channel:t})}}),m=h.prototype;return r.call(m,t.interpolate(u("Join %(disqus)s to discover more great discussions like these."),{disqus:"Disqus"})),l.call(m),c.call(m),h}),define("home/templates/networkDiscussionCover",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return" is-deleted"},3:function(e,t){var n,i=e.lambda,a=e.escapeExpression;return'<a class="spacing-right" href="/home/forum/'+a(i(null!=(n=null!=(n=null!=t?t.thread:t)?n.forum:n)?n.id:n,t))+'/"\ndata-role="publisher-link">\n<img class="img-round-sm block__item" src="'+a(i(null!=(n=null!=(n=null!=(n=null!=t?t.thread:t)?n.forum:n)?n.favicon:n)?n.cache:n,t))+'" alt="'+a(i(null!=(n=null!=(n=null!=t?t.thread:t)?n.forum:n)?n.name:n,t))+'"/>\n</a>\n'},5:function(){return" has-image"},7:function(e,t){var n;return'<div class="card-content__media">\n<div style="background-image: url('+e.escapeExpression(e.lambda(null!=(n=null!=t?t.image:t)?n.src:n,t))+')" class="img-cards"></div>\n</div>\n'},9:function(e,t){return'<div class="spacing-bottom-small">\n<p class="truncate" data-truncate-lines="2" dir="auto">\n'+e.escapeExpression(e.lambda(null!=t?t.description:t,t))+"\n</p>\n</div>\n"},11:function(e,t){return'<div class="text-smaller link-inner-gray spacing-bottom-narrow">\n<span class="icon icon-communities icon__position -inline icon-tiny"></span>\n'+e.escapeExpression(e.lambda(null!=t?t.forumFriendlyUrl:t,t))+"\n</div>\n"},13:function(){return'<span class="icon icon-lock icon-tiny spacing-right-small"></span>\n'},15:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"1 Comment",{name:"gettext",hash:{},data:a}))+"\n"},17:function(e,t,n,i,a){var s;return e.escapeExpression(n.gettext.call(null!=t?t:{},"%(number)s Comments",{name:"gettext",hash:{number:null!=(s=null!=t?t.thread:t)?s.posts:s},data:a}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.lambda,l=e.escapeExpression;return'<div class="discussion-page--network">\n<header data-role="banner"></header>\n<div class="section-contained">\n<div class="layout layout--tablet-no-aside'+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.thread:t)?s.isDeleted:s,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'">\n<div class="layout__main">\n<div class="layout__content -centered">\n<header class="align align--middle spacing-bottom">\n'+(null!=(s=n["if"].call(o,null!=t?t.hasFavicon:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+'<div class="discussion__byline truncate-line">\n<a href="/home/forum/'+l(r(null!=(s=null!=(s=null!=t?t.thread:t)?s.forum:s)?s.id:s,t))+'/">\n<strong>'+l(r(null!=(s=null!=(s=null!=t?t.thread:t)?s.forum:s)?s.name:s,t))+'</strong>\n</a>\n<time class="bullet text-gray">'+l(r(null!=t?t.relativeTime:t,t))+'</time>\n</div>\n</header>\n<section class="discussion__content">\n<a href="'+l(r(null!=(s=null!=t?t.thread:t)?s.link:s,t))+'"\nclass="card-wrap -link"\ndata-role="article-link"\ndata-link-out="'+l(r(null!=(s=null!=t?t.thread:t)?s.signedLink:s,t))+'">\n<div class="card__content -network'+(null!=(s=n["if"].call(o,null!=t?t.image:t,{
name:"if",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a}))?s:"")+'">\n'+(null!=(s=n["if"].call(o,null!=t?t.image:t,{name:"if",hash:{},fn:e.program(7,a,0),inverse:e.noop,data:a}))?s:"")+'<div class="card-content__body">\n<h2 class="discussion-title text-brand link-default-hover" dir="auto">\n'+l(r(null!=(s=null!=t?t.thread:t)?s.clean_title:s,t))+'\n</h2>\n<div class="card-content__summary">\n'+(null!=(s=n["if"].call(o,null!=t?t.description:t,{name:"if",hash:{},fn:e.program(9,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=n["if"].call(o,null!=t?t.forumFriendlyUrl:t,{name:"if",hash:{},fn:e.program(11,a,0),inverse:e.noop,data:a}))?s:"")+'<div class="text-medium text-gray-darker">\n'+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.thread:t)?s.isClosed:s,{name:"if",hash:{},fn:e.program(13,a,0),inverse:e.noop,data:a}))?s:"")+"<strong>\n"+(null!=(s=n["if"].call(o,n.eq.call(o,null!=(s=null!=t?t.thread:t)?s.posts:s,1,{name:"eq",hash:{},data:a}),{name:"if",hash:{},fn:e.program(15,a,0),inverse:e.program(17,a,0),data:a}))?s:"")+"</strong>\n</div>\n</div>\n</div>\n</div>\n</a>\n</section>\n"+(null!=(s=e.invokePartial(i.threadPostActivity,t,{name:"threadPostActivity",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</div>\n</div>\n<div class="layout__aside hidden-lg">\n<div class="absolute__wrapper -aside">\n<div data-role="sign-up-module"></div>\n<div data-role="channel-module" data-jester-area="channel_sidebar" class="module--aside"></div>\n</div>\n</div>\n</div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/NetworkDiscussionCoverView",["underscore","backbone","home/views/ChannelsModuleView","home/views/common/DiscussionCoverBaseView","home/templates/networkDiscussionCover"],function(e,t,n,i,a){"use strict";var s=i,o=i.prototype,r=s.extend({template:a,templateHelpers:function(){var t=i.prototype.templateHelpers.apply(this,arguments),n=this.model.thread;return e.defaults({hasFavicon:n.forum.hasFavicon(),forumFriendlyUrl:n.forum.getFriendlyUrl(),description:n.getPlainDescription()},t)},regions:e.defaults({channelRegion:"[data-role=channel-module]"},o.regions),onRender:function(){o.onRender.call(this),this.activateRegion(this.channelRegion,this.createChannelsView)},createChannelsView:function(){var i=new t.Collection;return this.model.channels.ensureFetched().then(e.bind(function(){i.reset(e.shuffle(this.model.channels.items.models))},this)),new n({collection:i})}});return r}),define("core/WindowBus",["jquery","underscore","backbone","modernizr"],function(e,t,n,i){"use strict";var a=n.Model.extend({initialize:function(){i.localstorage&&e(window).on("storage",t.bind(this.onStorageEvent,this))},broadcast:function(e,t){if(i.localstorage){var n=JSON.stringify({name:e,data:t,time:(new Date).getTime()});try{window.localStorage.setItem(this.constructor.STORAGE_KEY,n)}catch(a){return}}},onStorageEvent:function(e){var t=e.originalEvent.key,n=e.originalEvent.newValue;if(n&&t===this.constructor.STORAGE_KEY)try{n=JSON.parse(n),this.trigger(n.name,n.data)}catch(i){return}}},{STORAGE_KEY:"disqus.bus"});return a}),define("home/templates/relatedDiscussion",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t){var n,i=e.lambda,a=e.escapeExpression;return'<div class="module-recent__media">\n<a href="'+a(i(null!=t?t.discussionRoute:t,t))+'">\n<img src="'+a(i(null!=(n=null!=t?t.image:t)?n.src:n,t))+'" class="img-fit-sm" />\n</a>\n</div>\n'},3:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"1 Comment",{name:"gettext",hash:{},data:a}))+"\n"},5:function(e,t,n,i,a){var s;return e.escapeExpression(n.gettext.call(null!=t?t:{},"%(number)s Comments",{name:"gettext",hash:{number:null!=(s=null!=t?t.thread:t)?s.posts:s},data:a}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.lambda,l=e.escapeExpression;return(null!=(s=n["if"].call(o,null!=t?t.image:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'<div class="media-body">\n<a href="'+l(r(null!=t?t.discussionRoute:t,t))+'" class="module-recent__title spacing-bottom-small">\n<div class="spacing-bottom-narrow">\n<h2 class="truncate" data-truncate-lines="2" dir="auto">\n'+l(r(null!=(s=null!=t?t.thread:t)?s.clean_title:s,t))+'\n</h2>\n</div>\n<p class="text-small text-gray">\n'+(null!=(s=n["if"].call(o,n.eq.call(o,null!=(s=null!=t?t.thread:t)?s.posts:s,1,{name:"eq",hash:{},data:a}),{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.program(5,a,0),data:a}))?s:"")+"</p>\n</a>\n</div>\n"},useData:!0})}),define("home/views/RelatedDiscussionView",["backbone-marionette","home/templates/relatedDiscussion","home/mixins/withTruncate"],function(e,t,n){"use strict";var i=e.ItemView.extend({template:t,className:"module-recent__item",initialize:function(e){this.hideImage=e&&e.hideImage},templateHelpers:function(){var e=this.model.thread;return{image:!this.hideImage&&this.model.thread.getImage(),discussionRoute:e.getDiscussionRoute()}}});return n.call(i.prototype),i}),define("home/templates/relatedDiscussionsModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{};return'<header class="module-header -plain">\n<div class="module-header__title">\n<h2 class="text-gray-darker">\n'+e.escapeExpression(n.gettext.call(s,"More from %(source)s",{name:"gettext",hash:{source:n.getPartial.call(s,"channelAwareForumLink",null!=t?t.forum:t,{name:"getPartial",hash:{},data:a})},data:a}))+'\n</h2>\n</div>\n</header>\n<div data-role="discussions" class="module-body"></div>\n'},useData:!0})}),define("home/views/RelatedDiscussionsModuleView",["backbone-marionette","home/views/RelatedDiscussionView","home/views/ProfileModuleEmptyView","home/templates/relatedDiscussionsModule"],function(e,t,n,i){"use strict";var a=e.CompositeView.extend({template:i,itemView:t,itemViewContainer:"[data-role=discussions]",emptyView:n});return a}),define("home/templates/discussionPageChannelInfo",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t){return'<img src="'+e.escapeExpression(e.lambda(null!=t?t.channelAvatar:t,t))+'" class="img-round-sm block__item" />\n'},3:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=(s=null!=t?t.options:t)?s.favicon:s,{name:"if",hash:{},fn:e.program(4,a,0),inverse:e.program(6,a,0),data:a}))?s:""},4:function(e,t){var n;return'<img src="'+e.escapeExpression(e.lambda(null!=(n=null!=t?t.options:t)?n.favicon:n,t))+'" class="img-round-sm block__item" />\n'},6:function(e,t,n,i,a){var s;return null!=(s=e.invokePartial(i.defaultChannelAvatar,t,{name:"defaultChannelAvatar",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:""},8:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<p class="spacing-narrow spacing-top">\n<a href="'+r(o(null!=(s=null!=(s=null!=t?t.channel:t)?s.options:s)?s.aboutUrlPath:s,t))+'"\ndata-link-name="about"\ndata-channel-slug="'+r(o(null!=(s=null!=t?t.channel:t)?s.slug:s,t))+'"\nclass="button button-outline button-wide text-medium">\n'+r(n.gettext.call(null!=t?t:{},"Community Guidelines",{name:"gettext",hash:{},data:a}))+"\n</a>\n</p>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression,l=null!=t?t:{};return'<div class="aside__wrap">\n<div class="aside__header padding-gutter -border-bottom ">\n<div class="align align--middle truncate-line text-medium--discussion">\n<a href="/home/channel/'+r(o(null!=t?t.slug:t,t))+'/" class="spacing-right">\n'+(null!=(s=n["if"].call(l,null!=t?t.channelAvatar:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+'</a>\n<a href="/home/channel/'+r(o(null!=t?t.slug:t,t))+'/" class="link-gray-darker truncate-line">\n<strong>'+r(o(null!=t?t.name:t,t))+'</strong>\n</a>\n</div>\n<p class="text-gray-dark spacing-top-narrow">\n'+r(o(null!=(s=null!=t?t.options:t)?s.description:s,t))+"\n</p>\n"+(null!=(s=n["if"].call(l,null!=(s=null!=t?t.options:t)?s.aboutUrlPath:s,{name:"if",hash:{},fn:e.program(8,a,0),inverse:e.noop,data:a}))?s:"")+'</div>\n<div class="padding-gutter align align--middle">\n'+(null!=(s=e.invokePartial(i.channelMetadataStats,t,{name:"channelMetadataStats",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</div>\n</div>\n<div class="aside__wrap" data-role="guidelines-section">\n<div class="aside__header -padded -border-bottom text-gray-darker">\n<h2>'+r(n.gettext.call(l,"Basic Rules",{name:"gettext",hash:{},data:a}))+'</h2>\n</div>\n<div class="padding-gutter">\n<div class="guidelines" data-role="guidelines">\n'+(null!=(s=e.invokePartial(i.homeRules,t,{name:"homeRules",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</div>\n<a data-link-name="guidelines"\nclass="curtain-truncate text-small"\ndata-action="expand" data-target="[data-role=guidelines]"\nhref="#"\ndata-channel-slug="'+r(o(null!=(s=null!=t?t.channel:t)?s.slug:s,t))+'">\n\n'+r(n.gettext.call(l,"Show guidelines",{name:"gettext",hash:{},data:a}))+'\n<span class="icon__position -inline icon-arrow icon"></span>\n</a>\n<a data-action="collapse" data-target="[data-role=guidelines]" class="hidden text-small" href="#">\n<span class="icon__position -inline icon-arrow-2 icon"></span>\n'+r(n.gettext.call(l,"Collapse guidelines",{name:"gettext",hash:{},data:a}))+"\n</a>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/DiscussionPageChannelInfoView",["backbone-marionette","home/mixins/withChannelAvatar","core/mixins/withChannelFollowing","home/mixins/withCollapsing","home/templates/discussionPageChannelInfo"],function(e,t,n,i,a){"use strict";var s=e.ItemView.extend({template:a,templateHelpers:function(){var e=this.model.primaryForum,t=e.get("numThreads"),n=e.get("numFollowers");return{numThreads:t&&t.toLocaleString(),numFollowers:n&&n.toLocaleString(),previouslyFollowing:this.previouslyFollowing}},initialize:function(e){this.app=e.app,this.session=e.session,this.previouslyFollowing=this.getIsFollowing(),this.bindToPrimaryForum(),this.listenTo(this,"toggled:follow",this.render)},bindToPrimaryForum:function(){return this.model.primaryForum?void this.listenTo(this.model.primaryForum,"change:numFollowers change:numThreads",this.render):void this.listenToOnce(this.model,"changeRelated:primaryForum",this.bindToPrimaryForum)}});return n.call(s.prototype,function(){return this.model}),t.call(s.prototype,function(){return this.model}),i.call(s.prototype,{maxHeight:200,collapsibleSelector:"[data-role=guidelines-section]"}),s}),define("home/mixins/withExpiration",["underscore","modernizr"],function(e,t){"use strict";var n=t.localstorage,i={templateHelpers:function(t){return e.isFunction(t)&&(t=t.call(this)),e.extend({viewExpired:!n||this.getRemainingViews()<=0},t)},events:{"click [data-action=force-expiration]":"forceExpire"},onShow:function(t){e.isFunction(t)&&t.call(this),this.decrementRemainingViews()},forceExpire:function(e){e&&e.preventDefault(),this.setRemainingViews(-1),this.remove()},decrementRemainingViews:e.once(function(){var e=this.getRemainingViews();e>0&&this.setRemainingViews(e-1)}),getRemainingViews:function(){if(n){var e=parseInt(window.localStorage.getItem(this.getExpirationKey()),10);if(!isNaN(e))return e}return this.getNumberOfViews()},getNumberOfViews:function(){return this.defaultViews||5},setRemainingViews:function(e){n&&window.localStorage.setItem(this.getExpirationKey(),e)},getExpirationKey:function(){return e.result(this,"expirationKey")}};return function(){this.templateHelpers=e.wrap(this.templateHelpers,i.templateHelpers),this.onShow=e.wrap(this.onShow,i.onShow),this.events=e.defaults({},this.events,i.events),e.extend(this,e.pick(i,"forceExpire","decrementRemainingViews","getRemainingViews","getNumberOfViews","setRemainingViews","getExpirationKey"))}}),define("home/templates/followChannelPrompt",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s;return null!=(s=n.unless.call(null!=t?t:{},null!=t?t.viewExpired:t,{name:"unless",hash:{},fn:e.program(2,a,0),inverse:e.noop,data:a}))?s:""},2:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div class="follow-prompt__wrapper">\n<div class="alert -outline spacing-narrow">\n<div class="media">\n'+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.options:t)?s.favicon:s,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+'<div class="media-right">\n<p class="text-larger">\n'+r(n.gettext.call(o,"Enjoy %(channelName)s?",{name:"gettext",hash:{channelName:n.tag.call(o,"strong",{name:"tag",hash:{text:null!=t?t.name:t},data:a})},data:a}))+'\n</p>\n<p class="spacing-narrow">\n'+r(n.gettext.call(o,"It's easy to keep up with %(channelName)s. Just follow and you'll start seeing the latest updates in your home feed. You can follow other channels too!",{name:"gettext",hash:{channelName:null!=t?t.name:t},data:a}))+"\n</p>\n"+(null!=(s=e.invokePartial(i.genericFollowButton,t,{name:"genericFollowButton",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n</div>\n</div>\n</div>\n"},3:function(e,t){var n,i=e.lambda,a=e.escapeExpression;return'<div class="media-left spacing-right">\n<a href="/home/channel/'+a(i(null!=t?t.slug:t,t))+'/">\n<img src="'+a(i(null!=(n=null!=t?t.options:t)?n.favicon:n,t))+'" alt="'+a(i(null!=t?t.name:t,t))+'" class="img-avatar-lg">\n</a>\n</div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.shouldShowAlert:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:""},usePartial:!0,useData:!0})}),define("home/views/FollowChannelPromptView",["backbone-marionette","remote/config","core/mixins/withChannelFollowing","home/mixins/withExpiration","home/models/Session","home/templates/followChannelPrompt"],function(e,t,n,i,a,s){"use strict";var o=e.ItemView.extend({template:s,templateHelpers:function(){return{shouldShowAlert:this.session.isLoggedIn()&&!this.model.primaryForum.get("isFollowing")}},initialize:function(){this.session=a.get(),this.expirationKey="followChannelPrompt-"+this.model.get("slug"),this.defaultViews=t.lounge.follow_channel_prompt_views,this.listenTo(this.session,"change:id",this.render)}});return n.call(o.prototype),i.call(o.prototype),o}),define("home/templates/userGeneratedDiscussionCover",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return" is-deleted"},3:function(){return" is-spam"},5:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="alert alert--brand spacing-bottom-double align-min-tablet align--between align--middle text-center">\n<div class="text-semibold">'+o(n.gettext.call(s,"Share your discussion to get comments!",{name:"gettext",hash:{},data:a}))+'</div>\n<div class="spacing-narrow">\n<button class="button button-inverted -border-light text-small" data-action="share" data-network="facebook">\n'+o(n.gettext.call(s,"Share on %(facebook)s",{name:"gettext",hash:{facebook:"Facebook"},data:a}))+'\n</button>\n<button class="button button-inverted -border-light text-small spacing-left" data-action="share" data-network="twitter">\n'+o(n.gettext.call(s,"Share on %(twitter)s",{name:"gettext",hash:{twitter:"Twitter"},data:a}))+"\n</button>\n</div>\n</div>\n"},7:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="alert alert--warning text-medium">\n<strong>'+o(n.gettext.call(s,"This discussion has been removed.",{name:"gettext",hash:{},data:a}))+"</strong>\n"+o(n.gettext.call(s,"Seem wrong? Contact %(support)s.",{name:"gettext",hash:{support:n.tag.call(s,"a",{name:"tag",hash:{text:n.gettext.call(s,"%(disqus)s Support",{name:"gettext",hash:{disqus:"Disqus"},data:a}),href:"http://disqus.com/support"},data:a})},data:a}))+"\n</div>\n"},9:function(){return'<span class="icon-lock icon-small spacing-right-small"></span>\n'},11:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"1 Comment",{name:"gettext",hash:{},data:a}))+"\n"},13:function(e,t,n,i,a){var s;return e.escapeExpression(n.gettext.call(null!=t?t:{},"%(number)s Comments",{name:"gettext",hash:{number:null!=(s=null!=t?t.thread:t)?s.posts:s},data:a}))+"\n"},15:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<a href="/home/edit/'+r(o(null!=(s=null!=(s=null!=t?t.thread:t)?s.forum:s)?s.id:s,t))+"/"+r(o(null!=(s=null!=t?t.thread:t)?s.slug:s,t))+'/" class="spacing-left text-semibold">\n<span class="icon-cog icon-small spacing-right-small"></span>'+r(n.gettext.call(null!=t?t:{},"Edit",{name:"gettext",hash:{},data:a}))+"\n</a>\n"},17:function(e,t,n,i,a){return'<a href="#"\nclass="tooltipped icon__position -inline -allstar"\ndata-action="show-allstar-modal"\ndata-toggle="tooltip"\ndata-placement="top"\ntitle="'+e.escapeExpression(n.gettext.call(null!=t?t:{},"All-Star",{name:"gettext",hash:{},data:a}))+'"><span class="icon-allstar allstar__icon"></span></a>'},19:function(e,t){var n;return'<div class="reading-block" data-role="message">\n'+(null!=(n=e.lambda(null!=t?t.description:t,t))?n:"")+"\n</div>\n"},21:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<a href="'+e.escapeExpression(e.lambda(null!=t?t.embedlyLink:t,t))+'"\nclass="card-wrap -link card-wrap--sm link-gray-dark"\ndata-role="article-link">\n<div class="card__content'+(null!=(s=n["if"].call(o,null!=t?t.image:t,{name:"if",hash:{},fn:e.program(22,a,0),inverse:e.noop,data:a}))?s:"")+'">\n'+(null!=(s=n["if"].call(o,null!=t?t.image:t,{name:"if",hash:{},fn:e.program(24,a,0),inverse:e.noop,data:a}))?s:"")+'<div class="card-content__body text-medium">\n'+(null!=(s=n["if"].call(o,null!=(s=null!=(s=null!=t?t.thread:t)?s.content:s)?s.title:s,{name:"if",hash:{},fn:e.program(26,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=n["if"].call(o,null!=(s=null!=(s=null!=t?t.thread:t)?s.content:s)?s.description:s,{name:"if",hash:{},fn:e.program(28,a,0),inverse:e.noop,data:a}))?s:"")+"</div>\n</div>\n</a>\n"},22:function(){return" has-image"},24:function(e,t){var n;return'<div class="card-content__media">\n<div style="background-image: url('+e.escapeExpression(e.lambda(null!=(n=null!=t?t.image:t)?n.src:n,t))+')" class="img-cards"></div>\n</div>\n'},26:function(e,t){var n;return'<h3 class="spacing-bottom-small text-brand link-default-hover" dir="auto">\n'+e.escapeExpression(e.lambda(null!=(n=null!=(n=null!=t?t.thread:t)?n.content:n)?n.title:n,t))+"\n</h3>\n"},28:function(e,t){var n;return'<p class="truncate-line link-default-hover" dir="auto">\n'+e.escapeExpression(e.lambda(null!=(n=null!=(n=null!=t?t.thread:t)?n.content:n)?n.description:n,t))+"\n</p>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression,l=e.lambda;return'<header data-role="banner"></header>\n<div class="section-contained">\n<div class="layout -top-spacing layout--tablet-no-aside'+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.thread:t)?s.isDeleted:s,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'">\n<div class="layout__main">\n<div class="layout__content -centered">\n<div class="alert alert--error spacing-bottom-double spam-hidden'+(null!=(s=n["if"].call(o,null!=t?t.showSpamAlert:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+'" data-role="spam-alert">\n<div class="align-min-tablet align--between align--middle">\n<div class="spacing-narrow">\n'+r(n.gettext.call(o,"This discussion has been marked as spam.",{name:"gettext",hash:{},data:a}))+'\n</div>\n<div>\n<button data-action="mark-spam" class="button button-small button-inverted -hover-opaque">'+r(n.gettext.call(o,"This isn't spam",{name:"gettext",hash:{},data:a}))+"</button>\n</div>\n</div>\n</div>\n"+(null!=(s=n["if"].call(o,null!=t?t.showSharePrompt:t,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a}))?s:"")+"\n"+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.thread:t)?s.isDeleted:s,{name:"if",hash:{},fn:e.program(7,a,0),inverse:e.noop,data:a}))?s:"")+'<div class="spacing-bottom">\n<header class="spacing-bottom-small" data-role="title-area">\n<div data-role="topics" class="topics--small topics--discussion"></div>\n<h1 class="text-title text-gray-darker">\n'+r(l(null!=(s=null!=t?t.thread:t)?s.clean_title:s,t))+'\n</h1>\n</header>\n<div class="padding-top-bottom">\n<a href="#disqus_thread" class="spacing-right text-semibold">\n'+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.thread:t)?s.isClosed:s,{name:"if",hash:{},fn:e.program(9,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=n["if"].call(o,n.eq.call(o,null!=(s=null!=t?t.thread:t)?s.posts:s,1,{name:"eq",hash:{},data:a}),{name:"if",hash:{},fn:e.program(11,a,0),inverse:e.program(13,a,0),data:a}))?s:"")+"</a>\n"+(null!=(s=n["if"].call(o,null!=t?t.canEdit:t,{name:"if",hash:{},fn:e.program(15,a,0),inverse:e.noop,data:a}))?s:"")+'</div>\n</div>\n<section class="discussion__content">\n<div class="align">\n<a class="spacing-right" href="/by/'+r(l(null!=(s=null!=(s=null!=t?t.thread:t)?s.author:s)?s.username:s,t))+'/">\n<img class="img-avatar-md block__item"\nsrc="'+r(l(null!=(s=null!=(s=null!=(s=null!=t?t.thread:t)?s.author:s)?s.avatar:s)?s.cache:s,t))+'" alt="'+r(l(null!=(s=null!=(s=null!=t?t.thread:t)?s.author:s)?s.name:s,t))+'" />\n</a>\n<div class="discussion__byline">\n'+(null!=(s=n["if"].call(o,null!=(s=null!=(s=null!=t?t.thread:t)?s.author:s)?s.isPowerContributor:s,{name:"if",hash:{},fn:e.program(17,a,0),inverse:e.noop,data:a}))?s:"")+'<a href="/by/'+r(l(null!=(s=null!=(s=null!=t?t.thread:t)?s.author:s)?s.username:s,t))+'/">\n<strong>'+r(l(null!=(s=null!=(s=null!=t?t.thread:t)?s.author:s)?s.name:s,t))+'</strong>\n</a>\n<br>\n<a href="/by/'+r(l(null!=(s=null!=(s=null!=t?t.thread:t)?s.author:s)?s.username:s,t))+'/" class="link-gray-dark">\n@'+r(l(null!=(s=null!=(s=null!=t?t.thread:t)?s.author:s)?s.username:s,t))+'\n</a>\n<time class="bullet text-gray">'+r(l(null!=t?t.relativeTime:t,t))+"</time>\n</div>\n</div>\n"+(null!=(s=n["if"].call(o,null!=t?t.description:t,{name:"if",hash:{},fn:e.program(19,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=n["if"].call(o,null!=t?t.hasEmbedlyData:t,{name:"if",hash:{},fn:e.program(21,a,0),inverse:e.noop,data:a}))?s:"")+'</section>\n<div class="visible-lg">\n'+(null!=(s=e.invokePartial(i.discussionModerationActions,t,{name:"discussionModerationActions",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n"+(null!=(s=e.invokePartial(i.threadPostActivity,t,{name:"threadPostActivity",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<div data-role="follow-channel-prompt"></div>\n</div>\n</div>\n<div class="layout__aside hidden-lg">\n<div class="absolute__wrapper -aside" data-role="right-module">\n<div data-role="sign-up-module"></div>\n'+(null!=(s=e.invokePartial(i.discussionModerationActions,t,{name:"discussionModerationActions",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'<div data-role="channel-info" class="module--plain" data-jester-area="channel_info"></div>\n<div data-role="related-stories" data-jester-area="related_sidebar"></div>\n</div>\n</div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/templates/guidelines",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return'<div class="padding-double">\n<h4 class="text-larger">'+e.escapeExpression(n.gettext.call(null!=t?t:{},"%(disqus)s Basic Rules",{name:"gettext",hash:{disqus:"Disqus"},data:a}))+'</h4>\n<div class="spacing-inner -medium spacing-top text-medium">'+(null!=(s=e.invokePartial(i.homeRules,t,{name:"homeRules",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/UserGeneratedDiscussionCoverView",["underscore","core/mixins/withRichMedia","core/WindowBus","core/UniqueModel","home/mixins/withAllstarPopover","home/mixins/withChannelAvatar","core/mixins/withChannelFollowing","home/mixins/withThreadSharing","home/models/UserProfile","home/views/RelatedDiscussionsModuleView","home/views/common/DiscussionCoverBaseView","home/views/DiscussionPageChannelInfoView","home/views/FollowChannelPromptView","home/templates/userGeneratedDiscussionCover","home/templates/guidelines","home/utils/confirmModal"],function(e,t,n,i,a,s,o,r,l,c,d,u,h,m,p,f){"use strict";var g=d,v=d.prototype,b=g.extend({template:m,templateHelpers:function(){var t=v.templateHelpers.apply(this,arguments),n=this.model.thread,i=n.get("content"),a=this.session.user.get("isGlobalAdmin"),s=n.get("canEdit"),o=n.get("canModerate"),r=n.get("isSpam");return e.defaults({description:n.getFullDescription(),hasEmbedlyData:i.title||i.description||i.image.url,embedlyLink:n.getLinks()[0],canEdit:s,isGlobalAdmin:a,showSharePrompt:n.get("isNew")&&n.author&&n.author.isSessionUser(),canModerate:o,isSpam:r,showSpamAlert:r&&o},t)},regions:e.defaults({followChannelPromptRegion:"[data-role=follow-channel-prompt]",channelInfoRegion:"[data-role=channel-info]",relatedStoriesRegion:"[data-role=related-stories]"},v.regions),events:e.defaults({"click [data-action=delete-thread]":"deleteThread","click [data-action=close-thread]":"closeThread","click [data-action=open-thread]":"openThread","click [data-action=mark-spam]":"toggleIsSpam","click [data-action=show-guidelines]":"showGuidelines","click [data-action=moderation-dropdown]":"toggleDropdown","click [data-action=blacklist-forum]":"blacklistAuthorOnForum","click [data-action=blacklist-global]":"toggleBlacklistAuthorGlobally"},v.events),initialize:function(t){v.initialize.call(this,t),this.model.thread.getModeratePermissions(this.session),this.model.thread.getEditPermissions(this.session),this.listenTo(this.model.thread,{"change:isClosed change:isDeleted change:canEdit change:canModerate":this.render,"change:isSpam":this.updateSpamIndicators}),this.model.thread.author?this.bindToAuthor():this.model.thread.fetchAuthor().then(e.bind(function(){this.bindToAuthor(),this.render()},this));var i=new n;this.listenTo(i,"posts.create",this.showFollowChannelPromptView),this.updateSpamIndicators()},updateSpamIndicators:function(){this.$("[data-role=spam-alert]").toggleClass("is-spam",this.model.thread.get("isSpam"))},bindToAuthor:function(){this.listenTo(this.model.thread.author,"change",this.render)},onRender:function(){v.onRender.call(this);var t=this.model.thread.getMedia();t&&t.length&&this.renderRichMedia(t),this.activateRegion(this.channelInfoRegion,e.partial(this.createChannelInfoView,this.model.channel)),this.activateRegion(this.relatedStoriesRegion,this.createRelatedLinksView)},createRelatedLinksView:function(){return new c({collection:this.model.coverRelatedCollection,className:"module--plain",model:this.model.thread})},showFollowChannelPromptView:function(t){this.model.channel&&this.model.channel.primaryForum&&!t.parent&&t.forum===this.model.channel.primaryForum.get("id")&&this.activateRegion(this.followChannelPromptRegion,e.partial(this.createFollowChannelPromptView,this.model.channel))},createChannelInfoView:function(e){return new u({model:e,app:this.app,session:this.session})},createFollowChannelPromptView:function(e){return new h({model:e})},blacklistAuthorOnForum:function(){this.getAuthorProfile().user.confirmBlacklist({forum:this.model.thread.forum.id,notes:"Added via discussion page",retroactive:!0})},toggleBlacklistAuthorGlobally:function(){var e=this.getAuthorProfile(),t=e.user;t.get("isOnGlobalBlacklist")?t.removeFromBlacklist():t.confirmBlacklist({notes:"Added via discussion page",retroactive:!0})},toggleIsSpam:function(){this.model.thread.toggleIsSpam()},getAuthorProfile:function(){return new i(l,this.model.thread.author.attributes)},deleteThread:function(){this.model.thread.confirmDelete()},closeThread:function(){this.model.thread.close()},openThread:function(){this.model.thread.open()},showGuidelines:function(){f.confirmationPromise(f.TYPES.CLOSE,p(this.model.thread.forum.channel.toJSON()))},toggleDropdown:function(){var e=this.$(".nav-dropdown__item");e.toggleClass("dropdown-open")}});return a.call(b.prototype),t.call(b.prototype),o.call(b.prototype,function(){return this.model.channel}),s.call(b.prototype,function(){return this.model.channel}),r.call(b.prototype),b}),define("home/utils/embed",["home/models/Session"],function(e){"use strict";var t=function(){var t=e.get().user;t.set({numPosts:t.get("numPosts")+1})},n=function(){};return{onEmbedComment:t,onEmbedLoaded:n}}),define("home/templates/embedContainer",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(){return'<div class="story-thread" id="disqus_thread" data-role="embed"></div>\n'},useData:!0})}),define("home/views/EmbedContainerView",["jquery","underscore","backbone-marionette","core/switches","core/utils/url/serialize","core/WindowBus","home/utils/embed","home/templates/embedContainer","home/mixins/withAllstarPopover"],function(e,t,n,i,a,s,o,r,l){"use strict";function c(e){var t=!i.isFeatureActive("home_ads_prevented",{forum:e.forum.id})&&e.forum.get("settings").supportLevel>=1;if(!t)return{};var n=e.forum.get("category").toLowerCase(),s=h[n]||h.entertainment;return{bin:"embed:promoted_discovery:dynamic:adsnative_ui:baseline_2016",experiment:"adsnative_ui",forum_id:s[1],service:"dynamic",variant:"baseline_2016",top_placement_url:a("https://disqusads.com/ads-iframe/adsnative/",{category:n,experiment:"adsnative_ui",forum_pk:s[1],provider:"adsnative",service:"dynamic",shortname:s[0],variant:"baseline_2016",video_allowed:0}),bottom_placement_url:""}}function d(t,n){var i=this;i.discovery={disable_all:!0},i.forum=t.forum.id,i.page.slug=t.get("slug"),i.page.title=t.get("title"),i.page.url=t.get("link"),i.experiment.force_auto_styles=!0,i.experiment.enable_scroll_container=!0,n&&(i.experiment.sort_order=n),i.callbacks.onNewComment.push(o.onEmbedComment),i.server_side=c(t),i.callbacks.onReady=[function(t,n){"#disqus_thread"===window.document.location.hash&&window.scrollTo(0,e(n.elem).offset().top-90)}]}var u=new s,h={business:["disqus-business","4082353"],celebrity:["disqus-arts-entertainment","4082366"],culture:["disqus-society","4082367"],entertainment:["disqus-arts-entertainment","4082366"],games:["disqus-hobbies-interests","4082372"],living:["disqus-health-fitness","4082385"],news:["disqus-news","4082391"],sports:["disqus-sports","4082395"],style:["disqus-style-fashion","4082396"],tech:["disqus-technology-computing","4082399"]},m=n.ItemView.extend({template:r,initialize:function(e){this.sortOrder=e&&e.sortOrder,this.listenTo(u,"click:allstar",this.showAllstarModal)},onShow:function(){this.model.id&&window.DISQUS.reset({reload:!0,config:t.partial(d,this.model,this.sortOrder)})}});return l.call(m.prototype),m}),define("home/views/LoungeView",["backbone-marionette"],function(e){"use strict";var t=e.ItemView;return t.extend({template:function(){return"hello world"}})}),define("home/templates/deletedThreadError",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="empty-message">\n<img src="'+o(n.urlfor.call(s,"cdn",{name:"urlfor",hash:{},data:a}))+'/img/Pam_Error.png" class="img-responsive" />\n<h2>'+o(n.gettext.call(s,"Darn it!",{name:"gettext",hash:{},data:a}))+'</h2>\n<div class="text-small">\n'+o(n.gettext.call(s,"This discussion could not be found.",{name:"gettext",hash:{},data:a}))+'\n</div>\n<div class="text-small">\n'+o(n.gettext.call(s,"Please visit %(discussDisqus)s to learn more.",{name:"gettext",hash:{discussDisqus:n.tag.call(s,"a",{name:"tag",hash:{text:"Discuss Disqus",href:"//disqus.com/home/channel/discussdisqus/"},data:a})},data:a}))+"\n</div>\n</div>\n"},useData:!0})}),define("home/templates/discussionPage",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){
return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){return'<div class="discussion-page">\n<section data-role="discussion-cover"></section>\n<div class="section-contained">\n<div class="layout -top-flush layout--tablet-no-aside">\n<div class="layout__main">\n<div class="layout__content -centered">\n<section class="discussion__comments" id="discussion-comments"></section>\n<div class="spacing-bottom spacing-top">\n<button data-action="scroll-top" class="button button-outline -border-muted button-padding-taller button-wide text-medium">\n<span class="icon-arrow-up icon-tiny spacing-right-small"></span>'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Back to Top",{name:"gettext",hash:{},data:a}))+"\n</button>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n"},useData:!0})}),define("home/views/DiscussionPageView",["jquery","underscore","core/bus","core/utils/storage","home/utils/backboneUtils","home/views/common/TabbedView","home/views/NetworkDiscussionCoverView","home/views/UserGeneratedDiscussionCoverView","home/views/EmbedContainerView","home/views/LoungeView","home/views/FetchingView","home/templates/deletedThreadError","home/templates/discussionPage","home/mixins/withClickLinkTracking"],function(e,t,n,i,a,s,o,r,l,c,d,u,h,m){"use strict";var p=s,f=p.prototype,g=p.extend({defaultTab:function(){var e,n=i.get("disqus.sort");return n&&(e=t.findKey(g.TAB_SORTS,function(e){return e===n})),e||"best"},saveDefaultTab:function(e){i.set("disqus.sort",g.TAB_SORTS[e]||g.TAB_SORTS.best)},template:function(e){return e.thread.isDeleted?u(e):h(e)},regions:t.defaults({cover:"[data-role=discussion-cover]",contentRegion:"#discussion-comments",relatedRegion:"[data-role=related]"},f.regions),initialize:function(e){f.initialize.call(this,e),this.app=e.app,this.listenToOnce(this.cover,"show",function(){n.trigger("showDiscussionCover","discussion")}),this.listenTo(this,"change:activeTab",this.saveDefaultTab),this.listenTo(this.model.thread,"sync",this.render),this.noEmbed=e.noEmbed},events:t.defaults({"click a[data-link-name]":"trackClickLink","click button[data-action=scroll-top]":"scrollToTop"},f.events),onDomRefresh:function(){f.onDomRefresh.call(this),this.showCover()},showCover:function(){if(this.model.thread.shouldFetch())return void this.cover.show(new d);var e=this.model.thread.get("isUserGenerated")?r:o,n=new e({model:this.model,app:this.app});n.listenTo(n,"dom:refresh",t.bind(this.updateTabClasses,this)),this.cover.show(n)},getPageTitle:function(){var t=this.model.thread;return e.when(a.getPromiseFor(t,"title"),a.getPromiseFor(t.forum,"name")).then(function(e,t){return e+" · "+t})},getMetaAttrs:function(){var e=this.model.thread;return this.getPageTitle().then(function(t){var n=e.getUserGeneratedImage();return{title:t,description:e.get("message"),image:n&&n.src,type:"article"}})},getChannelSlug:function(){var n=this.model.channel;if(n)return n.get("slug");if(!this.model.thread.shouldFetch())return null;var i=e.Deferred();return this.model.thread.fetch().then(t.bind(function(){var e=this.model.channel;i.resolve(e?e.get("slug"):null)},this)),i.promise()},getPageTrackingParams:function(){var n={forum:this.model.thread.forum.id};return e.when(this.getChannelSlug(),this.getPageTitle()).then(t.bind(function(e,t){e&&(n.channel_slug=e),t&&(n.title=t);var i=this.model.thread.author,a=i&&i.get("username");return a&&(n.author=a),n},this))},getTrackingSection:function(e){return e},getTabView:function(e){var t=this.noEmbed?c:l,n={model:this.model.thread,sortOrder:g.TAB_SORTS[e]||"popular"};return new t(n)},scrollToTop:function(){window.scrollTo(0,0)}},{TAB_SORTS:{best:"popular",newest:"desc",oldest:"asc"}});return m.call(g.prototype),g}),define("home/templates/welcome",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){return'<div class="spacing-bottom animate-fade-up-out">\n<span class="button button-fill--green text-medium">'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Email verified!",{name:"gettext",hash:{},data:a}))+"</span>\n</div>\n"},3:function(e,t,n,i,a){return'<div>\n<a class="text-small" href="/home/" data-action="complete-onboarding">\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Skip",{name:"gettext",hash:{},data:a}))+"\n</a>\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div class="welcome__wrapper text-center padding-default">\n'+(null!=(s=n["if"].call(o,null!=t?t.showVerifiedMessage:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'<div class="padding-gutter">\n<img class="img-responsive" src="'+r(n.urlfor.call(o,"cdn",{name:"urlfor",hash:{},data:a}))+'/img/empty-states/discussions.png">\n</div>\n<h1 class="text-largest text-gray-darker padding-default">\n'+r(n.gettext.call(o,"Welcome to %(disqus)s, %(name)s!",{name:"gettext",hash:{name:null!=(s=null!=t?t.user:t)?s.name:s,disqus:"Disqus"},data:a}))+'</h1>\n<p class="padding-default text-large text-gray-dark">\n'+r(n.gettext.call(o,"Easily find %(greatdiscussions)s being started by people just like you in our channels.",{name:"gettext",hash:{greatdiscussions:n.tag.call(o,"strong",{name:"tag",hash:{text:n.gettext.call(o,"great discussions",{name:"gettext",hash:{},data:a})},data:a})},data:a}))+'\n</p>\n<div class="padding-default">\n<a class="button button-fill--brand button-padding-wider text-large" href="/home/explore/">\n'+r(n.gettext.call(o,"Let's go!",{name:"gettext",hash:{},data:a}))+"\n</a>\n</div>\n"+(null!=(s=n.unless.call(o,null!=t?t.registeredThisWeek:t,{name:"unless",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+"</div>\n"},useData:!0})}),define("home/views/WelcomeView",["backbone-marionette","core/utils/url/parseQueryString","home/templates/welcome"],function(e,t,n){"use strict";return e.ItemView.extend({template:n,templateHelpers:function(){return{user:this.session.user.toJSON(),registeredThisWeek:this.session.user.registeredThisWeek(),showVerifiedMessage:this.showVerifiedMessage()}},events:{"click [data-action=complete-onboarding]":"completeOnboarding"},initialize:function(e){this.session=e.session,this.listenTo(this.session,"change:id",this.render)},showVerifiedMessage:function(){return!!t().email_verified},getMetaAttrs:function(){return"Welcome"},completeOnboarding:function(){this.session.user.setHomeOnboardComplete(!0)}})}),define("home/models/SearchManager",["underscore","backbone","core/UniqueModel","home/models/Feed","home/models/ActivityFeedItem","home/models/Thread","home/models/User","home/models/Forum","home/models/Post","home/models/activities/TrendingThreadActivity","home/collections/FeedItemCollection","core/api"],function(e,t,n,i,a,s,o,r,l,c,d,u){"use strict";var h=t.Collection.extend({parse:function(e){return e.response}}),m=function(e){e=new s(e);var t=new a({verb:"trending"},{activities:[new c({id:e.id,target:e})]});return t.thread=e,t},p=d.extend({parse:function(t){return e.map(t.response,m)},fetch:function(e){return t.Collection.prototype.fetch.call(this,e)}});return t.Model.extend({initialize:function(e){var t=u.getURL("users/search"),a=e.query;this.threads=new i({fetchOptions:{obj_type:"thread",query:a}},{collection:new p,collectionUrl:t}),this.forums=new i({fetchOptions:{obj_type:"forum",query:a}},{collection:new h(null,{model:n.boundModel(r)}),collectionUrl:t}),this.users=new i({fetchOptions:{obj_type:"user",query:a}},{collection:new h(null,{model:n.boundModel(o)}),collectionUrl:t}),this.posts=new i({fetchOptions:{obj_type:"post",query:a}},{collection:new h(null,{model:n.boundModel(l)}),collectionUrl:t}),this.myposts=new i({fetchOptions:{obj_type:"post",query:a,user:e.userId}},{collection:new h(null,{model:n.boundModel(l)}),collectionUrl:t})},fetchSearchResults:function(){this.threads.fetchItems({reset:!0}),this.forums.fetchItems({reset:!0}),this.users.fetchItems({reset:!0}),this.posts.fetchItems({reset:!0}),this.myposts.fetchItems({reset:!0})}})}),define("home/templates/searchResults",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<ul class="nav-tabs tabs-5">\n<li data-action="switch-tab" data-tab="threads" class="active">\n<a href="#">\n'+o(n.gettext.call(s,"Threads",{name:"gettext",hash:{},data:a}))+'\n</a>\n</li>\n<li data-action="switch-tab" data-tab="forums">\n<a href="#">\n'+o(n.gettext.call(s,"Communities",{name:"gettext",hash:{},data:a}))+'\n</a>\n</li>\n<li data-action="switch-tab" data-tab="users">\n<a href="#">\n'+o(n.gettext.call(s,"Users",{name:"gettext",hash:{},data:a}))+'\n</a>\n</li>\n<li data-action="switch-tab" data-tab="posts">\n<a href="#">\n'+o(n.gettext.call(s,"Comments",{name:"gettext",hash:{},data:a}))+'\n</a>\n</li>\n<li data-action="switch-tab" data-tab="myposts">\n<a href="#">\n'+o(n.gettext.call(s,"My Comments",{name:"gettext",hash:{},data:a}))+'\n</a>\n</li>\n</ul>\n\n<div data-role="content-area"></div>\n<div data-role="footer-area"></div>\n'},useData:!0})}),define("home/views/SearchResultsView",["home/views/common/TabbedView","home/views/ForumCardCollectionView","home/views/UserCollectionView","home/views/FeedEmptyView","home/views/ActivityCardWrapperView","home/views/PostCollectionView","home/views/ActivityCardCollectionView","home/templates/searchResults"],function(e,t,n,i,a,s,o,r){"use strict";return e.extend({defaultTab:"threads",template:r,getTabView:function(e){var r=this.model[e];switch(e){case"threads":return new o({itemView:a.extend({className:"card"}),model:r,collection:r.get("items")});case"forums":return new t({emptyView:i,model:r,collection:r.get("items")});case"users":return new n({emptyView:i,model:r,collection:r.get("items")});case"posts":return new s({className:"cards",emptyView:i,model:r,collection:r.get("items")});case"myposts":return new s({className:"cards",emptyView:i,model:r,collection:r.get("items")})}}})}),define("home/templates/searchPage",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(){return'<div class="cover section-contained" data-role="cover-area">\n<div class="cover-body search">\n<form>\n<span class="icon-search"></span>\n<input class="search-input" type="text" placeholder="Search" data-role="search-query">\n</div>\n</form>\n</div>\n<div id="container-content" class="section-contained">\n<div data-role="search-results"></div>\n</div>\n'},useData:!0})}),define("home/views/SearchPageLayout",["backbone-marionette","home/models/SearchManager","home/views/SearchResultsView","home/templates/searchPage"],function(e,t,n,i){"use strict";return e.Layout.extend({template:i,ui:{query:"[data-role=search-query]"},events:{submit:"handleSearchRequest"},regions:{resultsRegion:"[data-role=search-results]"},initialize:function(e){this.session=e.session},getMetaAttrs:function(){return"Search"},handleSearchRequest:function(e){e.preventDefault();var i=new t({query:this.ui.query.val(),userId:this.session.user.get("id")});i.fetchSearchResults(),this.resultsRegion.show(new n({model:i}))}})}),define("home/templates/channelCover",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div class="banner__wrapper" data-role="banner">\n<div class="grad-overlay">\n<div class="section-contained">\n<div class="channel-cover align align--middle align--between">\n<div class="metadata-hidden">\n'+(null!=(s=e.invokePartial(i.channelCoverLogo,t,{name:"channelCoverLogo",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</div>\n<div class="metadata-hidden visible-md spacing-left-small">\n<button\nclass="button button-inverted -thick text-large feed-content"\ntitle='+r(n.gettext.call(o,"Info",{name:"gettext",hash:{},data:a}))+'\ndata-action="show-metadata">\n'+r(n.gettext.call(o,"About",{name:"gettext",hash:{},data:a}))+'\n</button>\n</div>\n<div class="metadata-visible">\n<button\nclass="spacing-top-small link-inverted pull-left"\ntitle='+r(n.gettext.call(o,"Feed",{name:"gettext",hash:{},data:a}))+'\ndata-action="hide-metadata">\n<span class="icon icon-left-bracket text-large icon__position"></span>\n</button>\n<h1 class="text-largest text-center">'+r(n.gettext.call(o,"About this Channel",{name:"gettext",hash:{},data:a}))+"</h1>\n</div>\n</div>\n</div>\n</div>\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return null!=(s=n.unless.call(null!=t?t:{},null!=t?t.shouldFetch:t,{name:"unless",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:""},usePartial:!0,useData:!0})}),define("home/views/ChannelCoverView",["backbone-marionette","home/models/Session","home/mixins/withChannelBanner","home/templates/channelCover"],function(e,t,n,i){"use strict";var a=e.ItemView.extend({template:i,templateHelpers:function(){return{shouldFetch:this.model.shouldFetch()}},events:{"click [data-action=show-metadata]":"showMetadata","click [data-action=hide-metadata]":"hideMetadata"},initialize:function(){this.session=t.get(),this.listenTo(this.session,"change:id",this.render),this.listenTo(this.model,"changeRelated:primaryForum",this.render)},modelEvents:{sync:"render"},showMetadata:function(){this.trigger("showMetadata",!0)},hideMetadata:function(){this.trigger("showMetadata",!1)}}),s=a.prototype;return n.call(s),a}),define("home/templates/channelLeadingUser",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t){return'<div class="spacing-right">\n<span class="label--default">'+e.escapeExpression(e.lambda(null!=t?t.displayIndex:t,t))+"</span>\n</div>\n"},3:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.isModerator:t,{name:"if",hash:{},fn:e.program(4,a,0),inverse:e.noop,data:a}))?s:""},4:function(e,t,n,i,a){return'<span class="label--default -inline">'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Mod",{name:"gettext",hash:{},data:a}))+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return(null!=(s=n["if"].call(o,null!=t?t.displayIndex:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'<div class="avatar-sm__wrapper spacing-right-small">\n'+(null!=(s=e.invokePartial(i.userAvatar,t,{name:"userAvatar",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n<div>\n"+(null!=(s=e.invokePartial(i.userName,t,{name:"userName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+(null!=(s=n.unless.call(o,null!=t?t.hideModBadge:t,{name:"unless",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+"</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ChannelLeadingUserView",["underscore","backbone-marionette","home/mixins/withChannelAvatar","home/mixins/withAllstarPopover","home/templates/channelLeadingUser"],function(e,t,n,i,a){"use strict";var s=t.ItemView.extend({template:a,tagName:"li",className:"leader-list__item align align--middle",templateHelpers:function(){var t=this.model.get("moderatedForums")||[],n=this.channel&&this.channel.primaryForum;return{isModerator:n&&e.contains(t,n.id),displayIndex:this.showIndex&&this.index+1,hideModBadge:this.hideModBadge}},modelEvents:{"change:moderatedForums":"render"},initialize:function(e){e=e||{},this.channel=e.channel,this.index=e.index,this.showIndex=e.showIndex,this.hideModBadge=e.hideModBadge}});return n.call(s.prototype),i.call(s.prototype),s}),define("home/templates/channelLeadersEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t){return'<div class="text-center text-gray padding-double">'+e.escapeExpression(e.lambda(null!=t?t.message:t,t))+"</div>\n"},useData:!0})}),define("home/views/ChannelLeadersEmptyView",["backbone-marionette","core/strings","home/templates/channelLeadersEmpty"],function(e,t,n){"use strict";var i=t.get,a=e.ItemView.extend({template:n,templateHelpers:function(){return{message:this.constructor.MESSAGES[this.type]}},initialize:function(e){this.type=e.type}},{MESSAGES:{leaders:i("No top contributors yet"),mods:i("No moderators yet")}});return a}),define("home/views/ChannelLeadersCollectionView",["underscore","backbone-marionette","home/views/ChannelLeadingUserView","home/views/ChannelLeadersEmptyView"],function(e,t,n,i){"use strict";var a=t.CollectionView.extend({itemView:n,emptyView:i,tagName:"ul",className:"leader-list",initialize:function(e){this.collapsedSize=e.collapsedSize,this.type=e.type},itemViewOptions:function(t,i){if(this._showingEmptyView)return{type:this.type};var a=this.collapsedSize;return{channel:this.model.channel,index:i,showIndex:"leaders"===this.type,hideModBadge:"mods"===this.type,className:function(){var t=n.prototype.className;e.isFunction(t)&&(t=t.call(this));var s=t||"";return i>=a&&(s+=" collapsible"),s}}}});return a}),define("home/templates/channelLeadersModule",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<ul class="nav-tabs -small">\n<li data-action="switch-tab" data-tab="leaders">\n<a href="#">\n'+o(n.gettext.call(s,"Top Contributors",{name:"gettext",hash:{},data:a}))+'\n</a>\n</li>\n<li data-action="switch-tab" data-tab="mods">\n<a href="#">\n'+o(n.gettext.call(s,"Mods %(numberFollowing)s",{name:"gettext",hash:{numberFollowing:n.tag.call(s,"span",{name:"tag",hash:{text:null!=t?t.numMods:t,"class":"nav-tab-stat--simple"},data:a})},data:a}))+'\n</a>\n</li>\n</ul>\n<div data-role="leaders-content-area"></div>\n<div data-role="footer" data-action="expand-module" class="aside__expand text-small">'+o(n.gettext.call(s,"See More",{name:"gettext",hash:{},data:a}))+"</div>\n"},useData:!0})}),define("home/views/ChannelLeadersModuleView",["underscore","home/views/common/TabbedView","home/views/ChannelLeadersCollectionView","home/templates/channelLeadersModule"],function(e,t,n,i){"use strict";var a=t.extend({className:function(){return this.expanded?"":"collapsed"},defaultTab:function(){return this.model.moderators.items.length&&!this.model.leaders.items.length?"mods":"leaders"},template:i,templateHelpers:function(){return{numMods:this.model.moderators.items.length}},events:e.defaults({"click [data-action=expand-module]":"expandModule"},t.prototype.events),regions:e.defaults({contentRegion:"[data-role=leaders-content-area]"},t.prototype.events),ui:{footer:"[data-role=footer]"},initialize:function(n){t.prototype.initialize.call(this,e.extend({isModule:!0},n));var i=e.bind(this.render,this);this.model.ensureFetchedLeaders().then(i),this.model.ensureFetchedModerators().then(i),this.listenTo(this,"change:activeTab render",this.updateFooter)},expandModule:function(){this.expanded=!0,this.$el.attr("class",this.className()),this.updateFooter()},updateFooter:function(){var t=this.getTabCollection(this.activeTab||e.result(this,"defaultTab")),n=this.expanded||this.constructor.COLLAPSED_SIZE>=t.length;this.ui.footer.toggleClass("hidden",n)},getTabCollection:function(e){var t=this.constructor.TAB_CONTENT[e];return t?this.model[t].items:void 0},getTabView:function(e){var t=this.getTabCollection(e);if(t)return new n({collection:t,model:this.model,collapsedSize:this.constructor.COLLAPSED_SIZE,type:e})}},{TAB_CONTENT:{leaders:"leaders",mods:"moderators"},COLLAPSED_SIZE:5});return a}),define("home/templates/channelMetadata",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s;return'<div class="spacing-right">\n'+(null!=(s=n["if"].call(null!=t?t:{},null!=t?t.channel:t,{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.program(7,a,0),data:a}))?s:"")+"</div>\n"},2:function(e,t,n,i,a){var s;return null!=(s=n["if"].call(null!=t?t:{},null!=t?t.channelAvatar:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.program(5,a,0),data:a}))?s:""},3:function(e,t,n,i,a){var s;return'<img class="img-round-sm" src="'+e.escapeExpression(e.lambda(null!=t?t.channelAvatar:t,t))+'" alt="'+(null!=(s=e.invokePartial(i.forumName,t,{name:"forumName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'">\n'},5:function(e,t,n,i,a){var s;return null!=(s=e.invokePartial(i.defaultChannelAvatar,t,{name:"defaultChannelAvatar",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:""},7:function(e,t){var n;return'<img src="'+e.escapeExpression(e.lambda(null!=(n=null!=(n=null!=t?t.channel:t)?n.options:n)?n.favicon:n,t))+'" class="img-round-sm" />\n'},9:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<p class="spacing-narrow spacing-top">\n<a href="'+r(o(null!=(s=null!=(s=null!=t?t.channel:t)?s.options:s)?s.aboutUrlPath:s,t))+'"\ndata-link-name="about"\ndata-channel-slug="'+r(o(null!=(s=null!=t?t.channel:t)?s.slug:s,t))+'"\nclass="button button-outline button-wide">\n\n'+r(n.gettext.call(null!=t?t:{},"Community Guidelines",{name:"gettext",hash:{},data:a}))+"\n</a>\n</p>\n"},11:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div class="aside__wrap hidden" data-role="leaders"></div>\n<div class="aside__wrap" data-role="guidelines-section">\n<div class="aside__header -padded -border-bottom">\n<h2>'+r(n.gettext.call(o,"Basic Rules",{name:"gettext",hash:{},data:a}))+'</h2>\n</div>\n<div class="padding-gutter">\n<div class="guidelines" data-role="guidelines">\n'+(null!=(s=e.invokePartial(i.homeRules,t,{name:"homeRules",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</div>\n<a data-link-name="guidelines"\nclass="curtain-truncate text-small"\ndata-action="expand" data-target="[data-role=guidelines]"\nhref="#"\ndata-channel-slug="'+r(e.lambda(null!=(s=null!=t?t.channel:t)?s.slug:s,t))+'">\n\n'+r(n.gettext.call(o,"Show guidelines",{name:"gettext",hash:{},data:a}))+'\n<span class="icon__position -inline icon-arrow icon"></span>\n</a>\n<a data-action="collapse" data-target="[data-role=guidelines]" class="hidden text-small" href="#">\n<span class="icon__position -inline icon-arrow-2 icon"></span>\n'+r(n.gettext.call(o,"Collapse guidelines",{name:"gettext",hash:{},data:a}))+"\n</a>\n</div>\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.lambda,l=e.escapeExpression;return'<div class="metadata-wrapper">\n<div data-role="sign-up-module"></div>\n<div class="aside__wrap">\n<div class="aside__header padding-gutter -border-bottom">\n<div class="align align--middle">\n'+(null!=(s=n.if_any.call(o,null!=t?t.channel:t,null!=(s=null!=(s=null!=t?t.channel:t)?s.options:s)?s.favicon:s,{name:"if_any",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'<h2 class="spacing-bottom-small truncate-line">'+l(r(null!=(s=null!=t?t.channel:t)?s.name:s,t))+'</h2>\n</div>\n<p class="text-gray spacing-top-narrow ">\n'+l(r(null!=(s=null!=(s=null!=t?t.channel:t)?s.options:s)?s.description:s,t))+"\n"+(null!=(s=n["if"].call(o,null!=(s=null!=(s=null!=t?t.channel:t)?s.options:s)?s.aboutUrlPath:s,{name:"if",hash:{},fn:e.program(9,a,0),inverse:e.noop,data:a}))?s:"")+'</p>\n</div>\n<div class="padding-gutter align align--middle" data-role="stats">\n'+(null!=(s=e.invokePartial(i.channelMetadataStats,t,{name:"channelMetadataStats",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</div>\n</div>\n<div class="aside__wrap">\n<div class="aside__content padding-gutter text-center">\n<p class="spacing-top-narrow">'+l(n.gettext.call(o,"Have questions about channels?",{name:"gettext",hash:{},data:a}))+'</p>\n<p class="spacing-top-narrow">\n<a href="https://help.disqus.com/customer/en/portal/articles/2458906-channel-help" class="button button-outline button-wide">\n'+l(n.gettext.call(o,"Channel Help",{name:"gettext",hash:{},data:a}))+"\n</a>\n</p>\n</div>\n</div>\n"+(null!=(s=n.unless.call(o,null!=(s=null!=(s=null!=t?t.channel:t)?s.options:s)?s.isCurationOnlyChannel:s,{name:"unless",hash:{},fn:e.program(11,a,0),inverse:e.noop,data:a}))?s:"")+'<div data-role="create-channel-module"></div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/ChannelMetadataView",["underscore","backbone-marionette","handlebars","core/strings","home/views/ChannelLeadersModuleView","home/mixins/withChannelAvatar","core/mixins/withChannelFollowing","home/mixins/withCollapsing","home/mixins/withLoginOverlay","home/templates/channelMetadata"],function(e,t,n,i,a,s,o,r,l,c){"use strict";var d=i.get,u=t.Layout.extend({regions:{leadersRegion:"[data-role=leaders]"},template:c,templateHelpers:function(){var e=this.model.channel.primaryForum,t=e.get("numThreads"),n=e.get("numFollowers");return{numThreads:t&&t.toLocaleString(),numFollowers:n&&n.toLocaleString()}},initialize:function(){this.listenTo(this.model.channel,"sync",this.render),this.bindToPrimaryForum()},bindToPrimaryForum:function(){return this.model.channel.primaryForum?void this.listenTo(this.model.channel.primaryForum,"change:numFollowers change:numThreads",this.renderStats):void this.listenToOnce(this.model.channel,"changeRelated:primaryForum",this.bindToPrimaryForum)},renderStats:function(){var e=this.serializeData();e=this.mixinTemplateHelpers(e),this.$("[data-role=stats]").html(n.partials.channelMetadataStats(e))},onDomRefresh:function(){var t=e.bind(this.showLeadersModule,this);this.model.ensureFetchedLeaders().then(t),this.model.ensureFetchedModerators().then(t),this.leadersRegion.show(new a({model:this.model}))},showLeadersModule:function(){(this.model.leaders.items.length||this.model.moderators.items.length)&&this.$("[data-role=leaders]").removeClass("hidden")}});return o.call(u.prototype,function(){return this.model.channel}),s.call(u.prototype,function(){return this.model.channel}),r.call(u.prototype,{maxHeight:200,collapsibleSelector:"[data-role=guidelines-section]"}),l.call(u.prototype,i.interpolate(d("Join %(disqus)s to start your own channel like this one."),{disqus:"Disqus"})),u}),define("home/collections/CategoryCollection",["underscore","backbone","core/api","core/UniqueModel","home/activityExpander","home/models/Channel"],function(e,t,n,i,a,s){"use strict";var o,r=t.Collection.extend({url:n.getURL("channels/listCategories"),model:i.boundModel(s),parse:function(n){return n=t.Collection.prototype.parse.call(this,n.response),e.map(n.items,function(e){return a.buildChannel(n.objects,e.reference)})}},{get:function(){return o||(o=new r,o.fetch()),o}});return r}),define("home/templates/channelCreateForm",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s;return'<input class="input--textbox" name="name" type="text" '+(null!=(s=n.unless.call(null!=t?t:{},null!=t?t.sessionUserVerified:t,{name:"unless",hash:{},fn:e.program(2,a,0),inverse:e.noop,data:a}))?s:"")+" />\n"},2:function(){return" disabled"},4:function(e,t){return'<h2 class="text-larger spacing-bottom-narrow text-gray-darker">'+e.escapeExpression(e.lambda(null!=t?t.name:t,t))+"</h2>\n"},6:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"The best names are short, descriptive, and memorable",{name:"gettext",hash:{},data:a}))+"\n"},8:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"This can't be changed",{name:"gettext",hash:{},data:a}))+"\n"},10:function(){return"selected"},12:function(e,t,n,i,a,s,o){var r,l=e.lambda,c=e.escapeExpression,d=null!=t?t:{};return'<option value="'+c(l(null!=t?t.slug:t,t))+'" '+(null!=(r=n["if"].call(d,n.eq.call(d,null!=(r=null!=o[1]?o[1].primaryCategory:o[1])?r.id:r,null!=t?t.id:t,{name:"eq",hash:{},data:a}),{name:"if",hash:{},fn:e.program(10,a,0,s,o),inverse:e.noop,data:a}))?r:"")+">\n"+c(l(null!=t?t.name:t,t))+"\n</option>\n"},14:function(e,t,n,i,a,s,o){var r,l=e.lambda,c=e.escapeExpression,d=null!=t?t:{};return'<option value="'+c(l(a&&a.key,t))+'" '+(null!=(r=n["if"].call(d,n.eq.call(d,null!=o[1]?o[1].bannerColor:o[1],a&&a.key,{name:"eq",hash:{},data:a}),{name:"if",hash:{},fn:e.program(10,a,0,s,o),inverse:e.noop,data:a}))?r:"")+">\n"+c(l(t,t))+"\n</option>\n"},16:function(){return"checked"},18:function(e,t,n,i,a){var s;return'<div class="spacing-right-small">\n'+(null!=(s=e.invokePartial(i.channelAvatarWithDefault,t,{name:"channelAvatarWithDefault",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n"},20:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Create Channel",{name:"gettext",hash:{},data:a}))+"\n"},22:function(e,t,n,i,a){return e.escapeExpression(n.gettext.call(null!=t?t:{},"Update Channel",{name:"gettext",hash:{},data:a}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a,s,o){var r,l=null!=t?t:{},c=e.escapeExpression;return'<form data-role="channel-form">\n<div class="card-wrap">\n<div class="card__body">\n<div class="spacing-bottom form-attribute-input" data-attribute="name">\n<div class="spacing-default">\n<h3 class="text-gray-darker">\n'+c(n.gettext.call(l,"Name",{name:"gettext",hash:{},data:a}))+'\n</h3>\n<p class="spacing-narrow">\n'+(null!=(r=n["if"].call(l,null!=t?t.isNew:t,{name:"if",hash:{},fn:e.program(1,a,0,s,o),inverse:e.program(4,a,0,s,o),data:a}))?r:"")+'</p>\n<div data-role="attribute-error" class="form-message-error spacing-narrow"></div>\n<p class="text-gray spacing-bottom">\n'+(null!=(r=n["if"].call(l,null!=t?t.isNew:t,{name:"if",hash:{},fn:e.program(6,a,0,s,o),inverse:e.program(8,a,0,s,o),data:a}))?r:"")+'</p>\n</div>\n</div>\n<div class="spacing-bottom form-attribute-input" data-attribute="description">\n<div class="spacing-default">\n<h3 class="text-gray-darker">\n'+c(n.gettext.call(l,"Description",{name:"gettext",hash:{},data:a}))+'\n</h3>\n<p class="spacing-narrow">\n<textarea class="input--textbox" name="description" type="text" '+(null!=(r=n.unless.call(l,null!=t?t.sessionUserVerified:t,{name:"unless",hash:{},fn:e.program(2,a,0,s,o),inverse:e.noop,data:a}))?r:"")+">"+c(e.lambda(null!=(r=null!=t?t.options:t)?r.description:r,t))+'</textarea>\n</p>\n<div data-role="attribute-error" class="form-message-error spacing-narrow"></div>\n<p class="text-gray spacing-bottom">'+c(n.gettext.call(l,"Describe what your channel will be discussing in a sentence or two",{name:"gettext",hash:{},data:a}))+'</p>\n</div>\n</div>\n<div class="spacing-bottom">\n<div class="spacing-default">\n<h3 class="text-gray-darker">\n'+c(n.gettext.call(l,"Category",{name:"gettext",hash:{},data:a}))+'\n</h3>\n<p class="text-gray spacing-bottom">\n'+c(n.gettext.call(l,"To make it easy for others to find your channel",{name:"gettext",hash:{},data:a}))+'</p>\n</p>\n\n<span class="form-attribute-input" data-attribute="primaryCategory">\n<label class="align align--middle spacing-bottom-narrow">\n<div class="align align---middle">\n<div class="spacing-right-small spacing-top-small">\n'+c(n.gettext.call(l,"Category (required)",{name:"gettext",hash:{},data:a}))+'\n</div>\n<div class="spacing-left-small">\n<select class="input--select" name="primary-category" '+(null!=(r=n.unless.call(l,null!=t?t.sessionUserVerified:t,{name:"unless",hash:{},fn:e.program(2,a,0,s,o),inverse:e.noop,data:a}))?r:"")+'>\n<option value="" '+(null!=(r=n.unless.call(l,null!=t?t.primaryCategory:t,{name:"unless",hash:{},fn:e.program(10,a,0,s,o),inverse:e.noop,data:a}))?r:"")+"></option>\n"+(null!=(r=n.each.call(l,null!=t?t.categories:t,{name:"each",hash:{},fn:e.program(12,a,0,s,o),inverse:e.noop,data:a}))?r:"")+'</select>\n</div>\n</div>\n</label>\n<div data-role="attribute-error" class="form-message-error spacing-narrow"></div>\n<p class="text-gray spacing-bottom"></p>\n</span>\n</div>\n</div>\n\n<hr>\n\n<div class="spacing-bottom form-attribute-input" data-attribute="bannerColor">\n<div class="spacing-default">\n<h3 class="text-gray-darker">\n'+c(n.gettext.call(l,"Channel Color",{name:"gettext",hash:{},data:a}))+'\n</h3>\n<p class="text-gray spacing-bottom">\n'+c(n.gettext.call(l,"Shown in default banner and avatar",{name:"gettext",hash:{},
data:a}))+'</p>\n</p>\n<label class="align align--middle spacing-bottom-narrow">\n<div class="align align---middle">\n<div class="spacing-right-small spacing-top-small">\n'+c(n.gettext.call(l,"Color",{name:"gettext",hash:{},data:a}))+'\n</div>\n<div class="spacing-left-small">\n<select class="input--select" name="bannerColor" '+(null!=(r=n.unless.call(l,null!=t?t.sessionUserVerified:t,{name:"unless",hash:{},fn:e.program(2,a,0,s,o),inverse:e.noop,data:a}))?r:"")+">\n"+(null!=(r=n.each.call(l,null!=t?t.bannerColors:t,{name:"each",hash:{},fn:e.program(14,a,0,s,o),inverse:e.noop,data:a}))?r:"")+'</select>\n</div>\n</div>\n</label>\n<div data-role="attribute-error" class="form-message-error spacing-narrow"></div>\n<p class="text-gray spacing-bottom"></p>\n</div>\n</div>\n\n<hr>\n\n<div class="spacing-bottom">\n<div class="spacing-default">\n<h3 class="text-gray-darker">\n'+c(n.gettext.call(l,"Banner Background",{name:"gettext",hash:{},data:a}))+'\n</h3>\n<p class="text-gray spacing-bottom">\n'+c(n.gettext.call(l,"What's shown above",{name:"gettext",hash:{},data:a}))+'</p>\n</p>\n<label class="align align--middle spacing-bottom-narrow">\n<div class="spacing-right">\n<input type="radio" name="banner-type" value="color" checked>\n</div>\n<div class="align align--middle">\n<div class="spacing-right-small">\n'+c(n.gettext.call(l,"Use Channel Color",{name:"gettext",hash:{},data:a}))+'\n</div>\n</div>\n</label>\n<label class="align spacing-bottom-small">\n<div class="spacing-right">\n<input type="radio" name="banner-type" value="file" '+(null!=(r=n["if"].call(l,null!=t?t.banner:t,{name:"if",hash:{},fn:e.program(16,a,0,s,o),inverse:e.noop,data:a}))?r:"")+'>\n</div>\n<div>\n<div class="align align--middle spacing-bottom-small">\n<div class="spacing-right-small">\n'+c(n.gettext.call(l,"Custom Image",{name:"gettext",hash:{},data:a}))+'\n</div>\n<div class="spacing-left-small">\n<input type="file" name="banner-image" data-role="banner-image-file-upload">\n</div>\n</div>\n<p class="text-small text-gray">'+c(n.gettext.call(l,"For the best results: 1600 x 220 pixels. May be cropped otherwise.",{name:"gettext",hash:{},data:a}))+'</p>\n</div>\n</label>\n<div data-role="attribute-error" class="form-message-error spacing-narrow"></div>\n<p class="text-gray spacing-bottom"></p>\n</div>\n</div>\n<hr>\n<div class="spacing-bottom form-attribute-input" data-attribute="avatar">\n<div class="spacing-default">\n<h3 class="text-gray-darker">\n'+c(n.gettext.call(l,"Avatar",{name:"gettext",hash:{},data:a}))+'\n</h3>\n<p class="text-gray spacing-bottom">\n'+c(n.gettext.call(l,"Used when listing your channel",{name:"gettext",hash:{},data:a}))+'</p>\n</p>\n<label class="align align--middle spacing-bottom-narrow">\n<div class="spacing-right">\n<input type="radio" name="avatarType" value="default" checked>\n</div>\n<div class="align align--middle">\n<div class="spacing-right-small">\n'+c(n.gettext.call(l,"Default",{name:"gettext",hash:{},data:a}))+'\n</div>\n<div class="spacing-left-small" data-role="default-avatar">\n'+(null!=(r=e.invokePartial(i.defaultChannelAvatar,t,{name:"defaultChannelAvatar",data:a,helpers:n,partials:i,decorators:e.decorators}))?r:"")+'</div>\n</div>\n</label>\n<label class="align spacing-bottom-small">\n<div class="spacing-right">\n<input type="radio" name="avatarType" value="file" '+(null!=(r=n["if"].call(l,null!=t?t.channelAvatar:t,{name:"if",hash:{},fn:e.program(16,a,0,s,o),inverse:e.noop,data:a}))?r:"")+'>\n</div>\n<div>\n<div class="align align--middle spacing-bottom-small">\n<div class="spacing-right-small">\n'+c(n.gettext.call(l,"Custom Image",{name:"gettext",hash:{},data:a}))+"\n</div>\n"+(null!=(r=n["if"].call(l,null!=t?t.channelAvatar:t,{name:"if",hash:{},fn:e.program(18,a,0,s,o),inverse:e.noop,data:a}))?r:"")+'<div class="spacing-left-small">\n<input type="file" name="avatar" data-role="avatar-file-upload">\n</div>\n</div>\n<p class="text-small text-gray">'+c(n.gettext.call(l,"For the best results: 200 x 200 pixels",{name:"gettext",hash:{},data:a}))+'</p>\n</div>\n</label>\n<div data-role="attribute-error" class="form-message-error spacing-narrow"></div>\n<p class="text-gray spacing-bottom"></p>\n</div>\n</div>\n</div>\n</div>\n<div class="align align--between spacing-bottom">\n<div></div>\n<div class="align-max-mobile">\n<div class="discussion-form__loading">\n<div class="spinner-small"></div>\n</div>\n<button type="button" data-action="cancel-create" class="button text-medium">\n'+c(n.gettext.call(l,"Cancel",{name:"gettext",hash:{},data:a}))+'\n</button>\n<button type="submit" data-role="channel-form-button" class="button button-fill--brand button--discussion-form text-medium"'+(null!=(r=n.unless.call(l,null!=t?t.sessionUserVerified:t,{name:"unless",hash:{},fn:e.program(2,a,0,s,o),inverse:e.noop,data:a}))?r:"")+">\n"+(null!=(r=n["if"].call(l,null!=t?t.isNew:t,{name:"if",hash:{},fn:e.program(20,a,0,s,o),inverse:e.program(22,a,0,s,o),data:a}))?r:"")+"</button>\n</div>\n</div>\n</form>\n"},usePartial:!0,useData:!0,useDepths:!0})}),define("home/templates/channelCreateError",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=e.escapeExpression;return'<div class="modal-header">\n<h4 class="modal-title">'+o(n.gettext.call(null!=t?t:{},"Uh oh, we weren't able to create your channel",{name:"gettext",hash:{},data:a}))+'</h4>\n</div>\n<div class="modal-body">\n<p>'+o(e.lambda(null!=(s=null!=t?t.responseJSON:t)?s.response:s,t))+"</p>\n</div>\n"},useData:!0})}),define("home/views/ChannelCreateFormView",["underscore","backbone-marionette","handlebars","core/UniqueModel","home/models/Channel","home/collections/CategoryCollection","home/mixins/withChannelAvatar","home/templates/channelCreateForm","home/templates/channelCreateError","home/utils/confirmModal"],function(e,t,n,i,a,s,o,r,l,c){"use strict";var d=t.ItemView.extend({template:r,templateHelpers:function(){return{sessionUserVerified:this.session.user.get("isVerified"),bannerColors:a.BANNER_COLORS,categories:this.categories.toJSON(),isNew:this.isNew}},events:{submit:"submitChannel","keyup input[name=name]":"handleNameKeyup","change select[name=bannerColor]":"updateBanner","change input[name=banner-type]":"updateBanner","click input[name=banner-type][value=file]":"handleBannerTypeFileClick","change input[name=banner-image]":"handleBannerImageChange","click input[name=avatarType]":"handleAvatarTypeFileClick","change input[name=avatar]":"handleAvatarImageChanage","change select[name=primary-category]":"handlePrimaryCategoryChange","click [data-action=cancel-create]":"navigateBack"},ui:{name:"[name=name]",bannerColor:"[name=bannerColor]",description:"[name=description]",avatar:"[name=avatar]",bannerImage:"[name=banner-image]",defaultAvatar:"[data-role=default-avatar]",form:"[data-role=channel-form]",buttons:"[data-role=channel-form-button]",primaryCategory:"[name=primary-category]"},initialize:function(t){this.modelBackup=e.clone(this.model.attributes),this.session=t.session,this.categories=s.get(),this.isNew=this.model.isNew(),this.listenTo(this.model,"invalid",this.handleValidationError),this.listenTo(this.model,"change:bannerColor change:name",this.updateDefaultAvatar),this.listenTo(this.categories,"sync add remove",this.render)},onClose:function(){this.cancelChanges()},updateDefaultAvatar:function(){var e=this.model.get("name")||"",t=this.model.get("bannerColor");this.ui.defaultAvatar.html(n.partials.defaultChannelAvatar({bannerColorClass:t&&"-"+t,channelInitial:e.charAt(0)}))},getCategoryAttrs:function(e){return e?new i(a,{slug:e}).attributes:void 0},submitChannel:function(t){t.preventDefault(),this.$(".form-attribute-input").removeClass("is-error"),this.disableForm();var n=this.isNew?"created":"updated",i={name:this.isNew?this.ui.name.val():this.model.get("name"),bannerColor:this.ui.bannerColor.val(),description:this.ui.description.val(),primaryCategory:this.getCategoryAttrs(this.ui.primaryCategory.val())||null},a=this.$("[name=avatarType]:checked").val();if("file"===a){var s=this.getAvatarImageFile();s&&(i.avatar=s)}var o=this.getBannerType(),r="file"===o&&this.getBannerImageFile();r&&(i.banner=r),this.model.save(i,{avatarType:a,bannerType:o,success:e.bind(this.handleSaveSuccess,this,n),error:e.bind(this.handleSaveError,this)})},handleSaveSuccess:function(t,n){this.modelBackup=e.clone(this.model.attributes),this.enableForm(),this.trigger(t,n)},handleNameKeyup:function(){var e=this.ui.name.val().trim();this.model.set("name",e)},getBannerType:function(){return this.$("[name=banner-type]:checked").val()},getBannerImageFile:function(){return this.ui.bannerImage[0].files[0]},getAvatarImageFile:function(){return this.ui.avatar[0].files[0]},bannerImageExists:function(){return!!(this.getBannerImageFile()||this.model.get("banner")||this.modelBackup.banner||this.model.get("options").alertBackground||this.modelBackup.options.alertBackground)},avatarImageExists:function(){return!!(this.getAvatarImageFile()||this.model.get("avatar")||this.modelBackup.avatar||this.model.get("options").favicon||this.modelBackup.options.favicon)},handleBannerTypeFileClick:function(){return this.bannerImageExists()?void this.updateBanner():(this.ui.bannerImage.click(),!1)},handleAvatarTypeFileClick:function(){return this.avatarImageExists()?void 0:(this.ui.avatar.click(),!1)},handleBannerImageChange:function(){var e=!!this.bannerImageExists();this.$("input[name=banner-type][value=file]").prop("checked",e),this.$("input[name=banner-type][value=color]").prop("checked",!e),this.updateBanner()},handleAvatarImageChanage:function(){var e=!!this.avatarImageExists();this.$("input[name=avatarType][value=file]").prop("checked",e),this.$("input[name=avatarType][value=default]").prop("checked",!e)},updateBanner:function(){var e;"file"===this.getBannerType()&&(e=this.getBannerImageFile()||this.modelBackup.banner||this.modelBackup.options.alertBackground),this.model.set({bannerColor:this.ui.bannerColor.val(),banner:e})},cancelChanges:function(){this.model.set(this.modelBackup)},navigateBack:function(){this.cancelChanges(),window.history.back()},handleValidationError:function(t,n){this.enableForm(),e.each(n,function(e){this.$(".form-attribute-input[data-attribute*="+e.attrName+"]").addClass("is-error").find("[data-role=attribute-error]").text(e.message)},this)},handleSaveError:function(e,t){this.enableForm(),c.confirmationPromise(c.TYPES.CLOSE,l(t))},enableForm:function(){this.ui.form.removeClass("is-submitting"),this.ui.buttons.removeAttr("disabled")},disableForm:function(){this.ui.form.addClass("is-submitting"),this.ui.buttons.attr("disabled","disabled")}});return o.call(d.prototype),d}),define("home/templates/channelDiscussionFeed",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s,o=e.escapeExpression,r=null!=t?t:{};return'<div class="card-wrap -padded">\n<a href="/home/discuss/'+o(e.lambda(null!=(s=null!=(s=null!=t?t.channel:t)?s.primaryForum:s)?s.id:s,t))+'/" class="button button-padding-taller button-wide">\n<div class="align align--between align--middle">\n<div class="align__item">\n<span class="icon-create-discussion text-small icon__position -inline"></span>\n'+o(n.gettext.call(r,"What do you want to discuss?",{name:"gettext",hash:{},data:a}))+'\n</div>\n<div class="align__item">\n<button class="button button-outline text-medium">'+o(n.gettext.call(r,"Discuss",{name:"gettext",hash:{},data:a}))+"</button>\n</div>\n</div>\n</a>\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s;return(null!=(s=n.unless.call(null!=t?t:{},null!=(s=null!=(s=null!=t?t.channel:t)?s.options:s)?s.isCurationOnlyChannel:s,{name:"unless",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'<div data-role="content-area"></div>\n<div data-role="footer-area"></div>\n'},useData:!0})}),define("home/views/ChannelDiscussionFeedView",["home/views/common/FetchableCollectionLayout","home/templates/channelDiscussionFeed"],function(e,t){"use strict";var n=e.extend({template:t,templateHelpers:function(){return{channel:this.channel.toJSON()}},initialize:function(t){e.prototype.initialize.call(this,t),this.channel=t.channel}});return n}),define("home/templates/channelTopicTab",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t){return'<span class="button--tag -inverted button-large">'+e.escapeExpression(e.lambda(null!=t?t.topicName:t,t))+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div class="alert alert--topics">\n<div class="align align--between">\n<div class="align align--wrap align--middle">\n<div class="spacing-right">\n<strong>'+r(n.gettext.call(o,"Channel Topic",{name:"gettext",hash:{},data:a}))+":</strong>\n</div>\n"+(null!=(s=n["if"].call(o,null!=t?t.topicName:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'</div>\n\n<a href="/home/channel/'+r(e.lambda(null!=(s=null!=t?t.channel:t)?s.slug:s,t))+'/" class="link-green-dark" title="'+r(n.gettext.call(o,"Remove Filter",{name:"gettext",hash:{},data:a}))+'">\n<span class="icon-cancel icon-tiny"></span>\n</a>\n</div>\n</div>\n<div data-role="header-area"></div>\n<div data-role=\'content-area\'></div>\n<div data-role=\'footer-area\'></div>\n'},useData:!0})}),define("home/views/ChannelTopicTabView",["home/views/common/FetchableCollectionLayout","home/templates/channelTopicTab"],function(e,t){"use strict";var n=e.extend({template:t,templateHelpers:function(){return{topicName:this.filteredTopic.get("displayName"),channel:this.channel.toJSON()}},initialize:function(t){e.prototype.initialize.call(this,t),this.channel=t.channel,this.filteredTopic=t.filteredTopic,this.listenTo(this.filteredTopic,"change:displayName",this.render)}});return n}),define("home/templates/channelModeratorUser",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){return'<span class="label--default -inline">'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Creator",{name:"gettext",hash:{},data:a}))+"</span>\n"},3:function(e,t,n,i,a){return'<div class="user-card__button">\n<button class="button button-outline button-small" data-action="remove-moderator">\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Remove",{name:"gettext",hash:{},data:a}))+"\n</button>\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<div class="card--user">\n<div class="user-card__block">\n'+(null!=(s=e.invokePartial(i.userAvatar,t,{name:"userAvatar",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+(null!=(s=e.invokePartial(i.userName,t,{name:"userName",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+(null!=(s=n["if"].call(o,null!=t?t.isChannelOwner:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+"</div>\n"+(null!=(s=n.unless.call(o,null!=t?t.isChannelOwner:t,{name:"unless",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+"</div>\n"},usePartial:!0,useData:!0})}),define("home/views/ChannelModeratorUserView",["backbone-marionette","home/templates/channelModeratorUser"],function(e,t){"use strict";var n=e.ItemView.extend({className:"card",template:t,templateHelpers:function(){return{isChannelOwner:this.isChannelOwner}},initialize:function(e){this.channel=e.channel;var t=this.channel.get("owner_id");this.isChannelOwner=t===this.model.get("id")},events:{"click [data-action=remove-moderator]":"removeModerator"},removeModerator:function(){this.model.moderateChannel(this.channel,!1)}});return n}),define("home/templates/channelModeratorForm",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<form data-role="channel-moderator-form">\n<div class="form-attribute-input" data-attribute="username">\n<div class="align spacing-bottom">\n<div class="align__item--grow spacing-right">\n<input class="input--textbox" name="username" type="text"\nplaceholder="'+o(n.gettext.call(s,"Add a new moderator by username",{name:"gettext",hash:{},data:a}))+'" >\n</div>\n<button type="submit" class="button button-outline button-small">\n'+o(n.gettext.call(s,"Add",{name:"gettext",hash:{},data:a}))+'\n</button>\n</div>\n<p data-role="attribute-error" class="form-message-error spacing-bottom-narrow text-semibold text-small"></p>\n</div>\n<p data-role="subtext" class="spacing-narrow text-gray text-small">\n'+o(n.gettext.call(s,"People you add will receive a notification that they're now a moderator of this channel.",{name:"gettext",hash:{},data:a}))+"\n</p>\n</form>\n"},useData:!0})}),define("home/views/ChannelModeratorFormView",["underscore","backbone-marionette","core/strings","core/UniqueModel","home/models/User","home/templates/channelModeratorForm"],function(e,t,n,i,a,s){"use strict";var o=n.get,r=t.ItemView.extend({template:s,ui:{username:"input[name=username]",form:"form[data-role=channel-moderator-form]",submit:"button[type=submit]"},events:{submit:"addModerator","blur input[name=username]":"clearValidationErrors"},addModerator:function(t){t&&t.preventDefault();var n=this.ui.username.val(),s=new i(a,{username:n}),o=this.model.validateNewModerator(s);return o?void this.handleValidationError(this.model,o):(this.disableForm(),void s.moderateChannel(this.model.channel,!0).always(e.bind(this.enableForm,this)).done(e.bind(this.clearForm,this)).fail(e.bind(this.handleSaveError,this)))},handleSaveError:function(e){var t=e.responseJSON.response;/User matching query does not exist/.test(t)?t=o("No user exists with that username"):/(?:You must be authenticated)|(?:You do not have admin privileges)/.test(t)&&(t=o("You do not have permission to add moderators to this channel")),this.handleValidationError(this.model,{attrName:"username",message:t})},handleValidationError:function(t,n){e.isArray(n)||(n=[n]),e.each(n,function(e){this.$(".form-attribute-input[data-attribute*="+e.attrName+"]").addClass("is-error").find("[data-role=attribute-error]").text(e.message)},this)},clearValidationErrors:function(){this.$(".form-attribute-input.is-error").removeClass("is-error")},clearForm:function(){this.ui.username.val("")},enableForm:function(){this.ui.form.removeClass("is-submitting"),this.ui.submit.removeAttr("disabled")},disableForm:function(){this.ui.form.addClass("is-submitting"),this.ui.submit.attr("disabled","disabled")}});return r}),define("home/templates/channelModerators",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="padding-default">\n<div class="spacing-default">\n<h1 class="text-larger text-gray-darker spacing-bottom-narrow">'+o(n.gettext.call(s,"Moderators",{name:"gettext",hash:{},data:a}))+'</h1>\n<p class="text-gray">'+o(n.gettext.call(s,"Add moderators to help manage your channel. Moderators can mark discussions and comments as spam, as well as ban unwanted users.",{name:"gettext",hash:{},data:a}))+'</p>\n</div>\n</div>\n<section data-role="moderators" class="channel-mod__list"></section>\n<div class="padding-default">\n<section data-role="moderator-form" class="spacing-default"></section>\n</div>\n'},useData:!0})}),define("home/views/ChannelModeratorsView",["backbone-marionette","home/views/ChannelModeratorUserView","home/views/ChannelModeratorFormView","home/mixins/withSubviews","home/templates/channelModerators"],function(e,t,n,i,a){"use strict";var s=e.ItemView.extend({template:a,className:"card-wrap",regions:{moderatorsRegion:"[data-role=moderators]",moderatorFormRegion:"[data-role=moderator-form]"},onRender:function(){this.activateRegion(this.moderatorsRegion,this.createModeratorsView),this.activateRegion(this.moderatorFormRegion,this.createModeratorFormView)},createModeratorsView:function(){return new e.CollectionView({itemView:t,itemViewOptions:{channel:this.model.channel},collection:this.model.moderators.items})},createModeratorFormView:function(){return new n({model:this.model})}});return i.call(s.prototype),s}),define("home/templates/channelProfile",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s,o=e.escapeExpression;return'<li data-action="switch-tab" data-tab="recent" class="nav__item">\n<a href="/home/channel/'+o(e.lambda(null!=(s=null!=t?t.channel:t)?s.slug:s,t))+'/recent/" data-action="hide-metadata" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="nav-lnk__icon icon icon-discussions"></span>\n<span class="button__text">'+o(n.gettext.call(null!=t?t:{},"Latest",{name:"gettext",hash:{},data:a}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n'},3:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression,l=e.lambda;return'<section data-role="admin-nav" class="hidden-lg">\n<div class="aside__subheadings">\n<h2 class="text-subheading">'+r(n.gettext.call(o,"Channel settings",{name:"gettext",hash:{},data:a}))+'</h2>\n</div>\n<ul class="nav--aside">\n<li class="nav__item" data-action="switch-tab" data-tab="basics">\n<a href="/home/channel/'+r(l(null!=(s=null!=t?t.channel:t)?s.slug:s,t))+'/basics/" data-action="hide-metadata" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="button__text">'+r(n.gettext.call(o,"Basics",{name:"gettext",hash:{},data:a}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n<li class="nav__item" data-action="switch-tab" data-tab="moderators">\n<a href="/home/channel/'+r(l(null!=(s=null!=t?t.channel:t)?s.slug:s,t))+'/moderators/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="button__text">'+r(n.gettext.call(o,"Moderators",{name:"gettext",hash:{},data:a}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n</ul>\n</section>\n'},5:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression,l=e.lambda;return'<section data-role="admin-nav" class="hidden-lg">\n<div class="aside__subheadings">\n<h2 class="text-subheading">'+r(n.gettext.call(o,"Admin links",{name:"gettext",hash:{},data:a}))+'</h2>\n</div>\n<ul class="nav--aside">\n<li class="nav__item">\n<a href="//'+r(l(null!=(s=null!=(s=null!=t?t.channel:t)?s.primaryForum:s)?s.id:s,t))+'.disqus.com/admin/moderate/" class="nav-lnk -color-muted" target="_blank">\n'+r(n.gettext.call(o,"Moderate",{name:"gettext",hash:{},data:a}))+'\n</a>\n</li>\n<li class="nav__item">\n<a href="//'+r(l(null!=(s=null!=(s=null!=t?t.channel:t)?s.primaryForum:s)?s.id:s,t))+'.disqus.com/admin/access/banned/" class="nav-lnk -color-muted" target="_blank">\n'+r(n.gettext.call(o,"Banned users",{name:"gettext",hash:{},data:a}))+"\n</a>\n</li>\n"+(null!=(s=n["if"].call(o,null!=t?t.isDisqusAdmin:t,{name:"if",hash:{},fn:e.program(6,a,0),inverse:e.noop,data:a}))?s:"")+"</ul>\n</section>\n"},6:function(e,t,n,i,a){var s,o=e.escapeExpression;return'<li class="nav__item">\n<a href="//'+o(e.lambda(null!=(s=null!=(s=null!=t?t.channel:t)?s.primaryForum:s)?s.id:s,t))+'.disqus.com/admin/analytics/" class="nav-lnk -color-muted" target="_blank">\n'+o(n.gettext.call(null!=t?t:{},"Analytics",{name:"gettext",hash:{},data:a}))+"\n</a>\n</li>\n"},8:function(e,t,n,i,a,s,o){var r,l=null!=t?t:{};return'<div class="hidden-lg">\n<div class="aside__subheadings text-subheading">\n<h2>\n'+e.escapeExpression(n.gettext.call(l,"Channel topics",{name:"gettext",hash:{},data:a}))+'\n</h2>\n</div>\n<div class="aside__wrap">\n<ul class="tag-list">\n'+(null!=(r=n.each.call(l,null!=t?t.trendingTopics:t,{name:"each",hash:{},fn:e.program(9,a,0,s,o),inverse:e.noop,data:a}))?r:"")+"</ul>\n</div>\n</div>\n"},9:function(e,t,n,i,a,s,o){var r,l=e.lambda,c=e.escapeExpression;return'<li data-action="switch-tab" data-tab="topic-'+c(l(null!=t?t.identifier:t,t))+'">\n<a href="/home/channel/'+c(l(null!=(r=null!=o[1]?o[1].channel:o[1])?r.slug:r,t))+"/topics/"+c(l(null!=t?t.identifier:t,t))+'" class="button--tag">\n'+c(l(null!=t?t.displayName:t,t))+"\n</a>\n</li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a,s,o){var r,l=null!=t?t:{},c=e.escapeExpression;return'<header data-role="cover"></header>\n<div class="nav-wrapper feed-content" id="content-area">\n</div>\n<div class="section-contained">\n<div class="layout">\n<div class="layout__main">\n<nav class="layout__nav">\n<section data-role="default-nav">\n<div class="aside__subheadings hidden-lg">\n<h2 class="text-subheading">'+c(n.gettext.call(l,"Discussions",{name:"gettext",hash:{},data:a}))+'</h2>\n</div>\n<ul class="nav--aside">\n<li data-action="switch-tab" data-tab="top" class="nav__item">\n<a href="/home/channel/'+c(e.lambda(null!=(r=null!=t?t.channel:t)?r.slug:r,t))+'/top/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="nav-lnk__icon icon icon-popular"></span>\n<span class="button__text">'+c(n.gettext.call(l,"Recommended",{name:"gettext",hash:{},data:a}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n'+(null!=(r=n.unless.call(l,null!=(r=null!=(r=null!=t?t.channel:t)?r.options:r)?r.isCurationOnlyChannel:r,{name:"unless",hash:{},fn:e.program(1,a,0,s,o),inverse:e.noop,data:a}))?r:"")+"</ul>\n</section>\n\n"+(null!=(r=n["if"].call(l,null!=t?t.isSessionUserChannelOwner:t,{name:"if",hash:{},fn:e.program(3,a,0,s,o),inverse:e.noop,data:a}))?r:"")+(null!=(r=n["if"].call(l,null!=t?t.isChannelModerator:t,{name:"if",hash:{},fn:e.program(5,a,0,s,o),inverse:e.noop,data:a}))?r:"")+"\n"+(null!=(r=n["if"].call(l,null!=t?t.trendingTopics:t,{name:"if",hash:{},fn:e.program(8,a,0,s,o),inverse:e.noop,data:a}))?r:"")+'</nav>\n<section class="layout__content feed-content">\n<div data-role="email-verification-alert"></div>\n<div data-role="content-area"></div>\n</section>\n</div>\n<aside class="layout__aside metadata-content" data-role="metadata">\n</aside>\n</div>\n</div>\n'},useData:!0,useDepths:!0})}),define("home/views/ChannelProfileView",["underscore","core/utils/releaseUtils","home/utils/backboneUtils","home/utils/confirmModal","home/utils/navigationUtils","home/views/common/TabbedView","home/views/ChannelCoverView","home/views/ChannelMetadataView","home/views/ChannelCardCollectionView","home/views/ChannelCreateFormView","home/views/common/FetchableCollectionLayout","home/views/ChannelFeedFooterView","home/views/UserCollectionView","home/views/ChannelDiscussionFeedView","home/views/ChannelTopicTabView","home/views/ChannelModeratorsView","home/templates/channelProfile","home/templates/guidelines","home/templates/spinnerTall","core/UniqueModel","home/models/Session","home/models/Topic","home/mixins/withClickLinkTracking","home/mixins/withEmailVerificationAlert","core/strings"],function(e,t,n,i,a,s,o,r,l,c,d,u,h,m,p,f,g,v,b,w,x,y,_,k,C){"use strict";var T=C.get,S=s.extend({className:"channel-profile",defaultTab:function(){return"top"},template:function(e){return e.channel.name?g(e):b(e)},templateHelpers:function(){var e=t.isDisqusAdmin(this.session.user),n=e||this.model.moderators.items.contains(this.session.user);return{isDisqusAdmin:e,isChannelModerator:n,isSessionUserChannelOwner:this.isSessionUserChannelOwner()}},regions:e.defaults({coverRegion:"[data-role=cover]",metadataRegion:"[data-role=metadata]"},s.prototype.regions),initialize:function(t){t&&"guidelines"===t.activeTab&&(t.activeTab=e.result(this,"defaultTab"),this.listenToOnce(this,"show",this.showGuidelines)),this.session=x.get(),s.prototype.initialize.apply(this,arguments),this.listenTo(this.model.channel,"sync",this.render),this.listenTo(this.model.moderators,"items:sync",this.render),this.model.trendingTopics&&this.listenTo(this.model.trendingTopics,"items:sync",this.render),this.listenTo(this,"change:activeTab",this.updateTabSpecificModules)},events:e.defaults({"click a[data-link-name]":"trackClickLink","click [data-action=show-guidelines]":"showGuidelines","click [data-action=hide-metadata]":"hideMetadata"},s.prototype.events),hideMetadata:function(){this.trigger("showMetadata",!1)},showGuidelines:function(){var e=this;n.getPromiseFor(this.model.channel,"name").then(function(){var t=v(e.model.channel.toJSON());i.confirmationPromise(i.TYPES.CLOSE,t).always(function(){a.navigate("/home/channel/"+e.model.id+"/",{replace:!0,silent:!0})})})},onDomRefresh:function(){if(this.$(this.coverRegion.el).length){var e=new o({model:this.model.channel});this.listenTo(e,"showMetadata",this.showMetadata),this.coverRegion.show(e),this.metadataRegion.show(new r({model:this.model})),s.prototype.onDomRefresh.apply(this,arguments)}},updateTabSpecificModules:function(e){var t=/^topic-.+/.test(e);this.$("[data-role=default-nav]").toggleClass("hidden",t)},showMetadata:function(e){this.$el.toggleClass("metadata-view",e)},getTrackingSection:function(e){return e},getTabView:function(e){var t;switch(e){case"recent":return new m({model:this.model.recentActivities,collection:this.model.recentActivities.items,fetchableCollectionView:l,fetchableCollectionFooterView:u,channel:this.model.channel,isChannelFeed:!0,infiniteScroll:!0,filterVerbs:["trending"]});case"top":return new m({model:this.model.topActivities,collection:this.model.topActivities.items,fetchableCollectionView:l,fetchableCollectionFooterView:u,channel:this.model.channel,isChannelFeed:!0,infiniteScroll:!0});case"followers":return t=new d({model:this.model.followers,collection:this.model.followers.items,fetchableCollectionView:h,fetchableCollectionFooterView:u,infiniteScroll:!0}),t.$el.attr({"class":"card-wrap"}),t;case"basics":return this.isSessionUserChannelOwner()?(t=new c({model:this.model.channel,session:this.session}),this.listenTo(t,"updated",function(e){a.navigate("/home/channel/"+e.id+"/",{trigger:!0})}),t):void this.trigger("badTab");case"moderators":return this.isSessionUserChannelOwner()?new f({model:this.model}):void this.trigger("badTab")}var n=e.match(/^topic-(.+)/);if(n){if(!this.model.trendingTopics)return;var i=n[1],s=this.model.getFetchedTopicFilteredFeed(i);return new p({model:s,collection:s.items,fetchableCollectionView:l,fetchableCollectionFooterView:u,filteredTopic:new w(y,{identifier:i}),channel:this.model.channel,isChannelFeed:!0,infiniteScroll:!0})}},isSessionUserChannelOwner:function(){return this.model.channel.get("owner_id")===this.session.user.get("id")},getPageTitle:function(){var e=this.model.channel;return n.getPromiseFor(e,"name").then(function(e){return C.interpolate(T("%(name)s Channel"),{name:e})})},getMetaAttrs:function(){var e=this.model.channel;return this.getPageTitle().then(function(t){var n=e.get("options")||{};return{title:t,image:n.coverImage?n.coverImage.cache:n.tile,description:n.description,type:"article"}})},getPageTrackingParams:function(){var e=this.model.channel;return this.getPageTitle().then(function(t){return{channel_slug:e.get("slug"),title:t}})}});return _.call(S.prototype),k.call(S.prototype),S}),define("home/models/SettingsApp",["core/config","home/models/common/BaseSettings"],function(e,t){"use strict";var n=t.extend({url:function(){return e.urls.apiSettings+"apps/"+this.id+"/"},toJSON:function(){return{id:this.get("id"),name:this.get("name")}}});return n}),define("home/collections/SettingsAppCollection",["backbone","core/config","home/models/SettingsApp"],function(e,t,n){"use strict";var i=e.Collection.extend({url:t.urls.apiSettings+"apps/",model:n});return i}),define("home/collections/SettingsBlockListCollection",["core/api","core/collections/PaginatedCollection","core/UniqueModel","home/models/User"],function(e,t,n,i){"use strict";var a=t.extend({PER_PAGE:10,url:e.getURL("users/block/list.json"),model:n.boundModel(i)});return a}),define("home/models/SettingsModeration",["core/config","home/models/common/BaseSettings","core/UniqueModel"],function(e,t,n){
"use strict";var i=t.extend({url:e.urls.apiSettings+"moderation/",toJSON:function(){return{disable_approved:this.get("disable_approved"),receive_unapproved:this.get("receive_unapproved"),receive_spam:this.get("receive_spam"),forum_subscriptions:this.get("forum_subscriptions")}}});return n.addType("SettingsModeration",i),i}),define("home/models/SettingsProfile",["underscore","core/config","home/models/common/BaseSettings","home/models/User","core/UniqueModel"],function(e,t,n,i,a){"use strict";var s=n.extend({url:t.urls.apiSettings+"profile/",useMultiPartForm:!0,initialize:function(){var e={};e[i.prototype.idAttribute]=this.id,this.user=new a(i,e),this.listenTo(this,"change",this.updateUser)},save:function(t,i){return t||(t=e.pick(this.attributes,["display_name","about","location","url","is_private","avatar_file","avatar_source","avatar_facebook","avatar_twitter"])),n.prototype.save.call(this,t,i)},updateUser:function(){var t=e.defaults({cache:this.get("avatar_cache"),permalink:this.get("avatar_permalink"),isCustom:!/noavatar/.test(this.get("avatar_cache"))},this.user.get("avatar"));this.user.set({about:this.get("about"),avatar:t,name:this.get("display_name"),isPrivate:this.get("is_private"),location:this.get("location"),url:this.get("url")})}});return a.addType("SettingsProfile",s),s}),define("home/models/SettingsEmailNotifications",["core/config","home/models/common/BaseSettings","core/UniqueModel"],function(e,t,n){"use strict";var i=t.extend({url:e.urls.apiSettings+"email/",toJSON:function(){return{receive_notifications:this.get("receive_notifications"),subscribe_thread_on_post:this.get("subscribe_thread_on_post"),replies_to_comments:this.get("replies_to_comments"),digest_frequency:this.get("digest_frequency")}}},{FREQUENCY_NEVER:"never"});return n.addType("SettingsEmailNotifications",i),i}),define("home/templates/settingsBlockingButtons",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return" disabled"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div class="fieldset" role="group">\n<button class="button button-outline text-medium spacing-right" data-action="prev-page"'+(null!=(s=n.unless.call(o,null!=t?t.hasPrev:t,{name:"unless",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+">"+r(n.gettext.call(o,"Previous",{name:"gettext",hash:{},data:a}))+'</button>\n<button class="button button-outline text-medium" data-action="next-page"'+(null!=(s=n.unless.call(o,null!=t?t.hasNext:t,{name:"unless",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+">"+r(n.gettext.call(o,"Next",{name:"gettext",hash:{},data:a}))+"</button>\n</div>\n"},useData:!0})}),define("home/views/SettingsUserBlockingNavView",["backbone-marionette","home/templates/settingsBlockingButtons"],function(e,t){"use strict";return e.ItemView.extend({events:{"click [data-action=prev-page]":"prevPage","click [data-action=next-page]":"nextPage"},template:t,initialize:function(){this.listenTo(this.collection,"remove sync",this.render)},templateHelpers:function(){return{hasNext:this.collection.hasNext(),hasPrev:this.collection.hasPrev()}},prevPage:function(e){e.preventDefault(),this.collection.prev()},nextPage:function(e){e.preventDefault(),this.collection.next()}})}),define("home/templates/settingsBlockingEmpty",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){return'<p class="text-gray text-medium">\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},'You aren\'t blocking any users. To block a user, go to their profile and select "Block User" from the dropdown.',{name:"gettext",hash:{},data:a}))+"\n</p>\n"},useData:!0})}),define("home/templates/settingsBlockingUser",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=e.lambda,o=e.escapeExpression;return'<div class="card--user">\n<div class="user-card__block">\n<a href="/by/'+o(s(null!=t?t.username:t,t))+'/">\n<strong>'+o(s(null!=t?t.name:t,t))+'</strong>\n</a>\n</div>\n<div class="user-card__button">\n<button class="button button-fill--brand text-medium" data-action="unblock" data-username="'+o(s(null!=t?t.username:t,t))+'">'+o(n.gettext.call(null!=t?t:{},"Unblock",{name:"gettext",hash:{},data:a}))+"</button>\n</div>\n</div>\n"},useData:!0})}),define("home/views/SettingsBlockingUserListView",["backbone-marionette","home/templates/settingsBlockingEmpty","home/templates/settingsBlockingUser"],function(e,t,n){"use strict";var i=e.CollectionView.extend({itemView:e.ItemView.extend({template:n,className:"block-list"}),emptyView:e.ItemView.extend({template:t,className:"block-list"})});return i}),define("home/templates/settingsBlocking",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<form class="form">\n<div class="form__header--mobile visible-md">\n<a href="/home/settings/" class="form__header--mobile-back"><span class="icon-left-bracket"></span></a>\n<h2>'+o(n.gettext.call(s,"Blocking",{name:"gettext",hash:{},data:a}))+'</h2>\n</div>\n<div class="form__header">\n<h1 class="form-heading hidden-md">'+o(n.gettext.call(s,"Blocking",{name:"gettext",hash:{},data:a}))+'</h1>\n<p class="form-description text-gray text-medium">'+o(n.gettext.call(s,"Manage the users you've previously blocked on your account. Blocking hides a user's activity across Disqus. Learn more about User Blocking in our %(helpDoc)s.",{name:"gettext",hash:{helpDoc:n.tag.call(s,"a",{name:"tag",hash:{text:n.gettext.call(s,"help documentation",{name:"gettext",hash:{},data:a}),href:"https://help.disqus.com/customer/portal/articles/2460515"},data:a})},data:a}))+'</p>\n</div>\n<div data-role="alert-message"></div>\n<div data-role="users"></div>\n<div class="form__footer" data-role="buttons"></div>\n</form>\n'},useData:!0})}),define("home/templates/settingsBlockingAlertError",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){return'<div class="alert alert--error text-small text-center">\n<span class="icon-warning icon-tiny icon__position -inline"></span>\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Something went wrong while trying to unblock this user. Please check your internet connection and try again.",{name:"gettext",hash:{},data:a}))+'\n<button class="link-inverted spacing-left" data-action="close-alert">\n<span class="icon-cancel icon__position"></span>\n</button>\n</div>\n'},useData:!0})}),define("home/views/SettingsBlockingView",["backbone-marionette","core/api","home/views/SettingsUserBlockingNavView","home/views/SettingsBlockingUserListView","home/templates/settingsBlocking","home/templates/settingsBlockingAlertError"],function(e,t,n,i,a,s){"use strict";var o=e.Layout.extend({events:{"click [data-action=unblock]":"unblockUser","click [data-action=close-alert]":"closeAlert"},template:a,regions:{alertRegion:"[data-role=alert-message]",buttonsRegion:"[data-role=buttons]",usersRegion:"[data-role=users]"},closeAlert:function(e){e.preventDefault(),this.alertRegion.close()},unblockUser:function(n){n.preventDefault();var i=n.target.getAttribute("data-username"),a=this.collection,o=a.findWhere({username:i}),r=function(){a.remove(o),a.size()||a.fetch()};this.alertRegion.close(),o.unblock().then(r).fail(function(n){var i=n&&n.responseJSON&&n.responseJSON,a=i&&i.code;return a===t.ERROR_CODES.OBJ_NOT_FOUND&&"UserBlock matching query does not exist."===i.response?void r():void this.alertRegion.show(new e.ItemView({template:s}))}.bind(this))},onDomRefresh:function(){this.usersRegion.show(new i({collection:this.collection})),this.buttonsRegion.show(new n({collection:this.collection}))}});return o}),define("home/templates/settingsDelete",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<form class="form">\n<div class="form__header--mobile visible-md">\n<a href="/home/settings/" class="form__header--mobile-back"><span class="icon-left-bracket"></span></a>\n<h2>'+o(n.gettext.call(s,"Confirm Account Deletion",{name:"gettext",hash:{},data:a}))+'</h2>\n</div>\n<div class="form__header">\n<h1 class="form-heading">'+o(n.gettext.call(s,"Confirm Account Deletion",{name:"gettext",hash:{},data:a}))+'</h1>\n<p class="form-description text-gray text-medium">'+o(n.gettext.call(s,"Doing this will delete any registered sites under this account and the comments contained within them. Comments made by this account on other sites with replies will only be anonymized in order to maintain the context of their discussions. Are you sure?",{name:"gettext",hash:{},data:a}))+'</p>\n</div>\n<div class="form__content">\n<div class="fieldset" role="group" data-role="notification">\n<div class="fieldset__label align__item text-gray">\n'+o(n.gettext.call(s,"Let us know why you're leaving (required)",{name:"gettext",hash:{},data:a}))+'\n</div>\n<div class="fieldset__block align__item">\n<div class="fieldset__block--radio">\n<label class="text-medium">\n<input type="radio" name="reason" value="0">\n'+o(n.gettext.call(s,"I can't get %(Disqus)s to work on my site.",{name:"gettext",hash:{Disqus:"Disqus"},data:a}))+'\n</label>\n</div>\n<p class="fieldset__description -radio text-gray text-small hidden" data-role="delete-resolution">\n'+o(n.gettext.call(s,"The best place to start is our %(knowledgeBase)s. If you are still having issues shoot us an email at %(helpEmail)s and we'll get you taken care of.",{name:"gettext",hash:{helpEmail:n.tag.call(s,"a",{name:"tag",hash:{text:"help@disqus.com",href:"mailto:help@disqus.com"},data:a}),knowledgeBase:n.tag.call(s,"a",{name:"tag",hash:{text:n.gettext.call(s,"Knowledge Base",{name:"gettext",hash:{},data:a}),target:"_blank",href:"https://help.disqus.com"},data:a})},data:a}))+'\n</p>\n<div class="fieldset__block--radio">\n<label class="text-medium">\n<input type="radio" name="reason" value="1">\n'+o(n.gettext.call(s,"I receive too many emails notifications.",{name:"gettext",hash:{},data:a}))+'\n</label>\n</div>\n<p class="fieldset__description -radio text-gray text-small hidden" data-role="delete-resolution">\n'+o(n.gettext.call(s,"To help suppress the amount of email notifications you're receiving, you can change your options here: %(emailNotifications)s.",{name:"gettext",hash:{emailNotifications:n.tag.call(s,"a",{name:"tag",hash:{text:n.gettext.call(s,"Settings &gt; Email Notifications",{name:"gettext",hash:{},data:a}),href:"https://disqus.com/home/settings/email/"},data:a})},data:a}))+'\n</p>\n<div class="fieldset__block--radio">\n<label class="text-medium">\n<input type="radio" name="reason" value="2">\n'+o(n.gettext.call(s,"I spend too much time using %(Disqus)s.",{name:"gettext",hash:{Disqus:"Disqus"},data:a}))+'\n</label>\n</div>\n<p class="fieldset__description -radio text-gray text-small hidden" data-role="delete-resolution">\n'+o(n.gettext.call(s,"One way to control your interaction with %(Disqus)s is to limit the number of emails you receive from us at %(emailNotifications)s.",{name:"gettext",hash:{emailNotifications:n.tag.call(s,"a",{name:"tag",hash:{text:n.gettext.call(s,"Settings &gt; Email Notifications",{name:"gettext",hash:{},data:a}),href:"https://disqus.com/home/settings/email/"},data:a}),Disqus:"Disqus"},data:a}))+'\n</p>\n<div class="fieldset__block--radio">\n<label class="text-medium">\n<input type="radio" name="reason" value="3">\n'+o(n.gettext.call(s,"I don't find %(Disqus)s useful.",{name:"gettext",hash:{Disqus:"Disqus"},data:a}))+'\n</label>\n</div>\n<p class="fieldset__description -radio text-gray text-small hidden" data-role="delete-resolution">\n'+o(n.gettext.call(s,"You may find %(Disqus)s more useful by connecting with more of your friends.",{name:"gettext",hash:{Disqus:"Disqus"},data:a}))+"\n"+o(n.gettext.call(s,"You can add more of your friends here %(followLink)s or by learning about all our features: %(aboutLink)s",{name:"gettext",hash:{aboutLink:n.tag.call(s,"a",{name:"tag",hash:{text:"https://disqus.com/about/",href:"https://disqus.com/about/"},data:a}),followLink:n.tag.call(s,"a",{name:"tag",hash:{text:"https://disqus.com/follow/",href:"https://disqus.com/follow/"},data:a})},data:a}))+'\n</p>\n<div class="fieldset__block--radio">\n<label class="text-medium">\n<input type="radio" name="reason" value="4">\n'+o(n.gettext.call(s,"I can't change my name.",{name:"gettext",hash:{},data:a}))+'\n</label>\n</div>\n<p class="fieldset__description -radio text-gray text-small hidden" data-role="delete-resolution">\n'+o(n.gettext.call(s,"You can change your display name by going to your %(profileSettings)s",{name:"gettext",hash:{profileSettings:n.tag.call(s,"a",{name:"tag",hash:{text:n.gettext.call(s,"Profile settings",{name:"gettext",hash:{},data:a}),href:"https://disqus.com/home/settings/profile/"},data:a})},data:a}))+'\n</p>\n<div class="fieldset__block--radio">\n<label class="text-medium">\n<input type="radio" name="reason" value="5">\n'+o(n.gettext.call(s,"Other",{name:"gettext",hash:{},data:a}))+'\n</label>\n</div>\n<p class="fieldset__description -radio text-gray text-small hidden" data-role="delete-resolution">\n'+o(n.gettext.call(s,"Could you explain it further?",{name:"gettext",hash:{},data:a}))+'\n<br>\n<textarea class="input--textbox" id="delete-other" name="details"></textarea>\n</p>\n</div>\n</div>\n<div class="fieldset" role="group">\n<label for="settings-delete-passwordusername" class="fieldset__label align__item text-gray">'+o(n.gettext.call(s,"Password",{name:"gettext",hash:{},data:a}))+'</label>\n<div class="fieldset__block align__item">\n<div class="fieldset__block--text">\n<input type="password" class="input--textbox" name="password" id="settings-delete-password" required>\n</div>\n</div>\n</div>\n<div class="fieldset" role="group">\n<div class="fieldset__block align__item">\n<p class="fieldset__description text-gray text-small">\n'+o(n.gettext.call(s,"Please note that it may take up to 24 hours for your account to be removed from the system.",{name:"gettext",hash:{},data:a}))+'\n</p>\n<p class="fieldset__description fieldset__description--error text-small" data-role="error-alert"></p>\n</div>\n</div>\n</div>\n<div class="form__footer">\n<div class="fieldset" role="group">\n<div class="fieldset__label" data-role="save-status"><div class="spinner-small"></div><div class="icon-checkmark"></div></div>\n<div class="fieldset__block"><input type="submit" class="button button-fill--brand text-medium" value="'+o(n.gettext.call(s,"Delete my account",{name:"gettext",hash:{},data:a}))+'"></div>\n</div>\n</div>\n</form>\n'},useData:!0})}),define("home/views/SettingsDeleteView",["jquery","underscore","core/api","core/strings","home/templates/settingsDelete","home/views/common/BaseSettingsView"],function(e,t,n,i,a,s){"use strict";var o=i.get,r=s.extend({template:a,events:{"submit form":"handleDeleteAccount","change input[type=radio]":"handleReasonChange"},initialize:function(t){this.session=t.session,e(window).scrollTop(0)},handleReasonChange:function(t){t.preventDefault();var n=e(t.currentTarget);this.$("[data-role=delete-resolution]").addClass("hidden"),n.parent().next("[data-role=delete-resolution]").removeClass("hidden")},handleDeleteAccount:function(n){n.preventDefault();var i=o("This will delete your account permanently. Are you sure?");if(window.confirm(i)){this.updateStatus("is-saving");var a=t.reduce(e(n.originalEvent.target).serializeArray(),function(e,t){return e[t.name]=t.value,e},{});this.deleteAccount(a).done(t.bind(this.session.logout,this.session)).fail(t.bind(this.showError,this))}},showError:function(e){var t=e.responseJSON,n=this.$("[data-role=error-alert]");n.text(2===t.code?"Invalid password."===t.response?o("Invalid password."):o("Please select a reason."):t.response),this.updateStatus("")},deleteAccount:function(e){return n.call("internal/users/delete",{method:"POST",data:e})}});return r}),define("home/templates/settingsProfile",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){return'<option value="gravatar">'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Gravatar",{name:"gettext",hash:{},data:a}))+"</option>\n"},3:function(e,t,n,i,a){return'<option value="twitter">'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Twitter",{name:"gettext",hash:{},data:a}))+"</option>\n"},5:function(e,t,n,i,a){return'<option value="facebook">'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Facebook",{name:"gettext",hash:{},data:a}))+"</option>\n"},7:function(e,t){var n;return'<input type="hidden" name="avatar_twitter" value="'+e.escapeExpression(e.lambda(null!=(n=null!=(n=null!=t?t.remotes:t)?n.twitter:n)?n.avatar_url:n,t))+'">\n'},9:function(e,t){var n;return'<input type="hidden" name="avatar_facebook"value="'+e.escapeExpression(e.lambda(null!=(n=null!=(n=null!=t?t.remotes:t)?n.facebook:n)?n.username:n,t))+'">\n'},11:function(e,t,n,i,a){var s;return null!=(s=n.each.call(null!=t?t:{},null!=(s=null!=t?t.errors:t)?s.avatar_file:s,{name:"each",hash:{},fn:e.program(12,a,0),inverse:e.noop,data:a}))?s:""},12:function(e,t){return'<p class="fieldset__description fieldset__description--error text-small">'+e.escapeExpression(e.lambda(t,t))+"</p>\n"},14:function(){return"is-error"},16:function(e,t,n,i,a){var s;return null!=(s=n.each.call(null!=t?t:{},null!=(s=null!=t?t.errors:t)?s.display_name:s,{name:"each",hash:{},fn:e.program(12,a,0),inverse:e.noop,data:a}))?s:""},18:function(e,t,n,i,a){var s;return null!=(s=n.each.call(null!=t?t:{},null!=(s=null!=t?t.errors:t)?s.about:s,{name:"each",hash:{},fn:e.program(12,a,0),inverse:e.noop,data:a}))?s:""},20:function(e,t,n,i,a){var s;return null!=(s=n.each.call(null!=t?t:{},null!=(s=null!=t?t.errors:t)?s.url:s,{name:"each",hash:{},fn:e.program(12,a,0),inverse:e.noop,data:a}))?s:""},22:function(e,t,n,i,a){var s;return null!=(s=n.each.call(null!=t?t:{},null!=(s=null!=t?t.errors:t)?s.location:s,{name:"each",hash:{},fn:e.program(12,a,0),inverse:e.noop,data:a}))?s:""},24:function(){return" checked"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression,l=e.lambda;return'<form class="form">\n<div class="form__header--mobile visible-md">\n<a href="/home/settings/" class="form__header--mobile-back"><span class="icon-left-bracket"></span></a>\n<h2>'+r(n.gettext.call(o,"Profile",{name:"gettext",hash:{},data:a}))+'</h2>\n</div>\n<div class="form__header">\n<h1 class="form-heading hidden-md">'+r(n.gettext.call(o,"Profile",{name:"gettext",hash:{},data:a}))+'</h1>\n<p class="form-description text-gray text-medium">\n'+r(n.gettext.call(o,"Control your profile information, both what it says and what other people see. User profiles are shown across all Disqus sites. To understand what's acceptable to display on profiles, please see %(helpDoc)s.",{name:"gettext",hash:{helpDoc:n.tag.call(o,"a",{name:"tag",hash:{text:n.gettext.call(o,"these rules",{name:"gettext",hash:{},data:a}),target:"blank",href:"https://help.disqus.com/customer/portal/articles/1753105-basic-rules-for-disqus-powered-profiles-and-discussions"},data:a})},data:a}))+'\n</p>\n</div>\n<div class="form__content">\n<div class="fieldset" role="group">\n<div class="fieldset__label align__item text-gray">'+r(n.gettext.call(o,"Avatar",{name:"gettext",hash:{},data:a}))+'</div>\n<div class="fieldset__block align__item">\n<div class="fieldset__avatar align">\n<div class="fieldset__avatar--img align__item"><img src="'+r(l(null!=t?t.avatar_cache:t,t))+'" alt="profile image" data-role="avatar-img"></div>\n<div class="fieldset__avatar--options align__item">\n<select name="avatar_source">\n<option value="">'+r(n.gettext.call(o,"Choose a method",{name:"gettext",hash:{},data:a}))+'</option>\n<option value="computer">'+r(n.gettext.call(o,"Upload from computer",{name:"gettext",hash:{},data:a}))+'</option>\n<option value="default">'+r(n.gettext.call(o,"Default",{name:"gettext",hash:{},data:a}))+"</option>\n"+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.remotes:t)?s.gravatar:s,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.remotes:t)?s.twitter:s,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.remotes:t)?s.facebook:s,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a}))?s:"")+"</select>\n"+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.remotes:t)?s.twitter:s,{name:"if",hash:{},fn:e.program(7,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.remotes:t)?s.facebook:s,{name:"if",hash:{},fn:e.program(9,a,0),inverse:e.noop,data:a}))?s:"")+'<input type="file" name="avatar_file" data-role="avatar-file-upload" class="hidden">\n'+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.errors:t)?s.avatar_file:s,{name:"if",hash:{},fn:e.program(11,a,0),inverse:e.noop,data:a}))?s:"")+'</div>\n</div>\n</div>\n</div>\n<div class="fieldset" role="group">\n<label for="settings-name" class="fieldset__label align__item text-gray">'+r(n.gettext.call(o,"Name",{name:"gettext",hash:{},data:a}))+'</label>\n<div class="fieldset__block align__item '+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.errors:t)?s.display_name:s,{name:"if",hash:{},fn:e.program(14,a,0),inverse:e.noop,data:a}))?s:"")+'">\n<div class="fieldset__block--text">\n<input type="text" id="settings-name" name="display_name" class="input--textbox" value="'+r(l(null!=t?t.display_name:t,t))+'">\n</div>\n'+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.errors:t)?s.display_name:s,{name:"if",hash:{},fn:e.program(16,a,0),inverse:e.noop,data:a}))?s:"")+'<p class="fieldset__description text-gray text-small">\n'+r(n.gettext.call(o,"If blank, your username will be shown instead. To change your username, go to %(accountSettings)s.",{name:"gettext",hash:{accountSettings:n.tag.call(o,"a",{name:"tag",hash:{text:n.gettext.call(o,"Account",{name:"gettext",hash:{},data:a}),href:"/home/settings/account/"},data:a})},data:a}))+'\n</p>\n</div>\n</div>\n<div class="fieldset" role="group">\n<label for="settings-bio" class="fieldset__label align__item text-gray">'+r(n.gettext.call(o,"Biography",{name:"gettext",hash:{},data:a}))+'</label>\n<div class="fieldset__block align__item '+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.errors:t)?s.about:s,{name:"if",hash:{},fn:e.program(14,a,0),inverse:e.noop,data:a}))?s:"")+'">\n<div class="fieldset__block--text">\n<input type="text" id="settings-bio" name="about" class="input--textbox" value="'+r(l(null!=t?t.about:t,t))+'">\n</div>\n'+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.errors:t)?s.about:s,{name:"if",hash:{},fn:e.program(18,a,0),inverse:e.noop,data:a}))?s:"")+'<p class="fieldset__description text-gray text-small">\n'+r(n.gettext.call(o,"Describe yourself in a sentence or two. 200 characters max.",{name:"gettext",hash:{},data:a}))+'\n</p>\n</div>\n</div>\n<div class="fieldset" role="group">\n<label for="settings-website" class="fieldset__label align__item text-gray">'+r(n.gettext.call(o,"Website",{name:"gettext",hash:{},data:a}))+'</label>\n<div class="fieldset__block align__item '+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.errors:t)?s.url:s,{name:"if",hash:{},fn:e.program(14,a,0),inverse:e.noop,data:a}))?s:"")+'">\n<div class="fieldset__block--text">\n<input type="text" id="settings-website" class="input--textbox" name="url" value="'+r(l(null!=t?t.url:t,t))+'">\n</div>\n'+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.errors:t)?s.url:s,{name:"if",hash:{},fn:e.program(20,a,0),inverse:e.noop,data:a}))?s:"")+'<p class="fieldset__description text-gray text-small">\n'+r(n.gettext.call(o,"Link to your profile or website.",{name:"gettext",hash:{},data:a}))+'\n</p>\n</div>\n</div>\n<div class="fieldset" role="group">\n<label for="settings-location" class="fieldset__label align__item text-gray">'+r(n.gettext.call(o,"Location",{name:"gettext",hash:{},data:a}))+'</label>\n<div class="fieldset__block align__item '+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.errors:t)?s.location:s,{name:"if",hash:{},fn:e.program(14,a,0),inverse:e.noop,data:a}))?s:"")+'">\n<div class="fieldset__block--text">\n<input type="text" id="settings-location" class="input--textbox" name="location" value="'+r(l(null!=t?t.location:t,t))+'">\n</div>\n'+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.errors:t)?s.location:s,{name:"if",hash:{},fn:e.program(22,a,0),inverse:e.noop,data:a}))?s:"")+'<p class="fieldset__description  text-gray text-small">'+r(n.gettext.call(o,"Where you're commenting from. 100 characters max.",{name:"gettext",hash:{},data:a}))+'</p>\n</div>\n</div>\n<div class="fieldset" role="group">\n<div class="fieldset__label align__item text-gray">'+r(n.gettext.call(o,"Privacy",{name:"gettext",hash:{},data:a}))+'</div>\n<div class="fieldset__block align__item">\n<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input type="checkbox" name="is_private"'+(null!=(s=n["if"].call(o,null!=t?t.is_private:t,{name:"if",hash:{},fn:e.program(24,a,0),inverse:e.noop,data:a}))?s:"")+">\n"+r(n.gettext.call(o,"Keep your profile activity private",{name:"gettext",hash:{},data:a}))+'\n</label>\n</div>\n<p class="fieldset__description  text-gray text-small">'+r(n.gettext.call(o,"This means no one can follow you or see comments on your profile.",{name:"gettext",hash:{},data:a}))+'</p>\n</div>\n</div>\n</div>\n<div class="form__footer">\n<div class="fieldset" role="group">\n<div class="fieldset__label" data-role="save-status"><div class="spinner-small"></div><div class="icon-checkmark"></div></div>\n<div class="fieldset__block"><button class="button button-fill--brand button-padding-wider text-medium" data-role="save-btn" disabled>'+r(n.gettext.call(o,"Save",{name:"gettext",hash:{},data:a}))+"</button></div>\n</div>\n</div>\n</form>\n"},useData:!0})}),define("home/views/SettingsProfileView",["jquery","underscore","core/config","home/templates/settingsProfile","home/views/common/BaseSettingsView"],function(e,t,n,i,a){"use strict";var s=a.extend({template:i,events:t.defaults({"change select[name=avatar_source]":"sourceChangeHandler"},a.prototype.events),serializeData:function(){var e=a.prototype.serializeData.call(this,arguments);return t.defaults(e,{remotes:this.model.get("remotes"),avatar_cache:this.model.get("avatar_cache")})},sourceChangeHandler:function(t){var n=e(t.originalEvent.target),i=e("[data-role=avatar-file-upload]"),a=this.$el.find("[data-role=avatar-img]"),s=n.val();"computer"===s?i.removeClass("hidden"):(i.addClass("hidden"),a.attr("src",this.getAvatar(s)))},getAvatar:function(e){switch(e){case"gravatar":return"https://www.gravatar.com/avatar/"+this.model.get("remotes").gravatar.username;case"twitter":return this.ensureHttpsUrl(this.model.get("remotes").twitter.avatar_url);case"facebook":return"https://graph.facebook.com/"+this.model.get("remotes").facebook.username.replace("facebook-","")+"/picture?&height=92&width=92";case"default":return n.urls.avatar.generic}},ensureHttpsUrl:function(e){return e.replace("http:","https:")},getFormData:function(){var e=a.prototype.getFormData.apply(this,arguments);return e.is_private=!!e.is_private,e.avatar_file=this.$form.find("input[name=avatar_file]")[0].files[0]||"",e}});return s}),define("home/templates/settingsMenu",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){return'<div class="empty-message">\n'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Pick a settings page on the left",{name:"gettext",hash:{},data:a}))+"\n</div>\n"},useData:!0})}),define("home/views/SettingsMenuView",["backbone-marionette","home/templates/settingsMenu"],function(e,t){"use strict";var n=e.ItemView.extend({template:t});return n}),define("home/templates/settingsAccount",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){return'<div class="alert alert--success text-semibold">'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Email verified. Now choose a username before someone else grabs it!",{name:"gettext",hash:{},data:a}))+"</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return(null!=(s=n["if"].call(o,null!=t?t.showVerifiedMessage:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'<div data-role="account-form"></div>\n<div data-role="connected-accounts"></div>\n<div class="form">\n<div class="form__header">\n<h1 class="form-heading">'+r(n.gettext.call(o,"Personalization",{name:"gettext",hash:{},data:a}))+'</h1>\n<p class="form-description text-gray text-medium">\n'+r(n.gettext.call(o,"%(Disqus)s collects anonymous data from you in order to deliver better targeted content and advertising.",{name:"gettext",hash:{Disqus:"Disqus"},data:a}))+'\n</p>\n</div>\n<div class="form__content">\n<a href="https://help.disqus.com/customer/portal/articles/1657951" class="button button-fill--brand text-medium inline__item">'+r(n.gettext.call(o,"Configure",{name:"gettext",hash:{},data:a}))+'</a>\n</div>\n</div>\n\n<div data-role="delete-form"></div>\n'},useData:!0})}),define("core/engagement/vendor/visibly",[],function(){var e={q:document,p:void 0,prefixes:["webkit","ms","o","moz","khtml"],props:["VisibilityState","visibilitychange","Hidden"],m:["focus","blur"],visibleCallbacks:[],hiddenCallbacks:[],genericCallbacks:[],_callbacks:[],cachedPrefix:"",fn:null,onVisible:function(e){"function"==typeof e&&this.visibleCallbacks.push(e)},onHidden:function(e){"function"==typeof e&&this.hiddenCallbacks.push(e)},getPrefix:function(){if(!this.cachedPrefix)for(var e=0;b=this.prefixes[e++];)if(b+this.props[2]in this.q)return this.cachedPrefix=b},visibilityState:function(){return this._getProp(0)},hidden:function(){return this._getProp(2)},visibilitychange:function(e){"function"==typeof e&&this.genericCallbacks.push(e);var t=this.genericCallbacks.length;if(t)if(this.cachedPrefix)for(;t--;)this.genericCallbacks[t].call(this,this.visibilityState());else for(;t--;)this.genericCallbacks[t].call(this,arguments[0])},isSupported:function(){return this._getPropName(2)in this.q},_getPropName:function(e){return""==this.cachedPrefix?this.props[e].substring(0,1).toLowerCase()+this.props[e].substring(1):this.cachedPrefix+this.props[e]},_getProp:function(e){return this.q[this._getPropName(e)]},_execute:function(e){if(e){this._callbacks=1==e?this.visibleCallbacks:this.hiddenCallbacks;for(var t=this._callbacks.length;t--;)this._callbacks[t]()}},_visible:function(){e._execute(1),e.visibilitychange.call(e,"visible")},_hidden:function(){e._execute(2),e.visibilitychange.call(e,"hidden")},_nativeSwitch:function(){this[this._getProp(2)?"_hidden":"_visible"]()},_listen:function(){try{this.isSupported()?this.q.addEventListener(this._getPropName(1),function(){e._nativeSwitch.apply(e,arguments)},1):this.q.addEventListener?(window.addEventListener(this.m[0],this._visible,1),window.addEventListener(this.m[1],this._hidden,1)):this.q.attachEvent&&(this.q.attachEvent("onfocusin",this._visible),this.q.attachEvent("onfocusout",this._hidden))}catch(t){}},init:function(){this.getPrefix(),this._listen()}};return e.init(),e}),define("core/engagement/page",["jquery","underscore","backbone","core/bus","core/utils","core/engagement/vendor/visibly"],function(e,t,n,i,a,s){"use strict";var o=t.extend(n.Events,{_initialized:!1,isEngaged:!1,resetTimeout:null,ACTIVE_TIMEOUT:6e4});return o._markNotEngaged=function(){o.isEngaged&&(o.isEngaged=!1,o.trigger("change:isEngaged",o.isEngaged,o))},o._markIsEngaged=function(){o.resetTimeout&&o.resetTimeout(),o.isEngaged||(o.isEngaged=!0,o.trigger("change:isEngaged",o.isEngaged,o));
},o.start=function(){o._initialized||(o._initialized=!0,s.hidden()||o._markIsEngaged(),s.onVisible(o._markIsEngaged),s.onHidden(o._markNotEngaged),a.isMobileUserAgent()||(o.resetTimeout=t.debounce(o._markNotEngaged,o.ACTIVE_TIMEOUT),o.resetTimeout(),e(window.document).on("mousemove keyup",o._markIsEngaged),e(window).on("scroll",o._markIsEngaged),o.listenTo(i.frame,"window.mousemove window.scroll window.click",o._markIsEngaged)))},o.stop=function(){o._initialized&&(o._initialized=!1,o.resetTimeout=null,o.stopListening(),o.off(),s.visibleCallbacks=[],s.hiddenCallbacks=[],e(window.document).off("mousemove keyup",o._markIsEngaged),e(window).off("scroll",o._markIsEngaged),o._markNotEngaged())},o}),define("home/templates/settingsConnectedAccounts",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s;return'<div class="fieldset__block--button">\n<button class="button button-fill--brand text-medium" data-action="disconnect" data-social="facebook">'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Disconnect",{name:"gettext",hash:{},data:a}))+'</button>\n<small class="text-gray text-small">\n'+(null!=(s=e.invokePartial(i.settingsAccountSocialLink,null!=(s=null!=t?t.items:t)?s.facebook:s,{name:"settingsAccountSocialLink",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</small>\n</div>\n"},3:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="fieldset__block--button">\n<button class="button button-fill--brand text-medium" data-action="connect" data-social="facebook">'+o(n.gettext.call(s,"Connect",{name:"gettext",hash:{},data:a}))+'</button>\n<small class="text-gray text-small">'+o(n.gettext.call(s,"Connect your Facebook account",{name:"gettext",hash:{},data:a}))+"</small>\n</div>\n"},5:function(e,t,n,i,a){var s;return'<div class="fieldset__block--button">\n<button class="button button-fill--brand text-medium" data-action="disconnect" data-social="twitter">'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Disconnect",{name:"gettext",hash:{},data:a}))+'</button>\n<small class="text-gray text-small">\n'+(null!=(s=e.invokePartial(i.settingsAccountSocialLink,null!=(s=null!=t?t.items:t)?s.twitter:s,{name:"settingsAccountSocialLink",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</small>\n</div>\n"},7:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="fieldset__block--button">\n<button class="button button-fill--brand text-medium" data-action="connect" data-social="twitter">'+o(n.gettext.call(s,"Connect",{name:"gettext",hash:{},data:a}))+'</button>\n<small class="text-gray text-small">'+o(n.gettext.call(s,"Connect your Twitter account",{name:"gettext",hash:{},data:a}))+"</small>\n</div>\n"},9:function(e,t,n,i,a){var s;return'<div class="fieldset__block--button">\n<button class="button button-fill--brand text-medium" data-action="disconnect" data-social="google">'+e.escapeExpression(n.gettext.call(null!=t?t:{},"Disconnect",{name:"gettext",hash:{},data:a}))+'</button>\n<small class="text-gray text-small">\n'+(null!=(s=e.invokePartial(i.settingsAccountSocialLink,null!=(s=null!=t?t.items:t)?s.google:s,{name:"settingsAccountSocialLink",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</small>\n</div>\n"},11:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="fieldset__block--button">\n<button class="button button-fill--brand text-medium" data-action="connect" data-social="google">'+o(n.gettext.call(s,"Connect",{name:"gettext",hash:{},data:a}))+'</button>\n<small class="text-gray text-small">'+o(n.gettext.call(s,"Connect your Google account",{name:"gettext",hash:{},data:a}))+"</small>\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div class="form">\n<div class="form__header">\n<h1 class="form-heading">'+r(n.gettext.call(o,"Connected Accounts",{name:"gettext",hash:{},data:a}))+'</h1>\n<p class="form-description text-gray text-medium">\n'+r(n.gettext.call(o,"Connect your social media accounts for one-click login and to show off your online presence on your %(Disqus)s profile.",{name:"gettext",hash:{Disqus:"Disqus"},data:a}))+'\n</p>\n<p class="form-error text-medium" data-role="connected-accounts-alert"></p>\n</div>\n<div class="form__content">\n<div class="fieldset" role="group">\n<div class="fieldset__label align__item text-gray">'+r(n.gettext.call(o,"Facebook",{name:"gettext",hash:{},data:a}))+'</div>\n<div class="fieldset__block align__item">\n'+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.items:t)?s.facebook:s,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+'</div>\n</div>\n<div class="fieldset" role="group">\n<div class="fieldset__label align__item text-gray">'+r(n.gettext.call(o,"Twitter",{name:"gettext",hash:{},data:a}))+'</div>\n<div class="fieldset__block align__item">\n'+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.items:t)?s.twitter:s,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.program(7,a,0),data:a}))?s:"")+'</div>\n</div>\n<div class="fieldset" role="group">\n<div class="fieldset__label align__item text-gray">'+r(n.gettext.call(o,"Google",{name:"gettext",hash:{},data:a}))+'</div>\n<div class="fieldset__block align__item">\n'+(null!=(s=n["if"].call(o,null!=(s=null!=t?t.items:t)?s.google:s,{name:"if",hash:{},fn:e.program(9,a,0),inverse:e.program(11,a,0),data:a}))?s:"")+"</div>\n</div>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/SettingsConnectedAccountsView",["jquery","backbone-marionette","underscore","core/config","core/engagement/page","core/strings","core/utils","home/models/Session","home/models/SettingsSocialAccount","home/templates/settingsConnectedAccounts"],function(e,t,n,i,a,s,o,r,l,c){"use strict";var d=s.get,u=t.ItemView.extend({template:c,events:{"click [data-action=connect]":"connectHandler","click [data-action=disconnect]":"disconnectHandler"},initialize:function(){this.listenTo(this.collection,"reset remove add",this.render),this.session=r.get()},disconnectHandler:function(t){t.preventDefault();var i=e(t.originalEvent.target),a=i.attr("data-social"),s=this.collection.get(a),o=this;s.destroy({wait:!0}).fail(n.bind(o.showDisconnectError,o)).done(function(e){e.success||(this.collection.add(s),o.showDisconnectError())})},showDisconnectError:function(){this.updateSocialStatus(d("Can't disconnect your account."))},connectHandler:function(t){t.preventDefault();var n=e(t.originalEvent.target),i=n.attr("data-social");this.authenticate(i)},authenticate:function(e){var t=this.openAuthWindow(e);o.isMobileUserAgent()?this.checkStatusOnPageVisible(e):this.pollAuthWindow(e,t)},openAuthWindow:function(e){var t="location=0,status=0,width=800,height=400",n=this.getConnectUrl(e);return window.open(n,e+"Window",t)},getConnectUrl:function(e){return i.urls.oauth[e]+"?ctkn="+this.session.getCsrfToken()},pollAuthWindow:function(e,t){var n=this,i=setInterval(function(){t.closed&&(clearInterval(i),n.getAuthenticationStatus(e))},1e3)},checkStatusOnPageVisible:function(e){var t=this,n=function(i){i&&(t.getAuthenticationStatus(e),a.off("change:isEngaged",n))};a.on("change:isEngaged",n)},getAuthenticationStatus:function(e){var t=this,i=new l({id:e});i.fetch().fail(n.bind(t.showConnectError,t)).done(function(e){e.success?t.collection.add(i):t.showConnectError()})},showConnectError:function(){this.updateSocialStatus(d("Can't connect to your account."))},updateSocialStatus:function(e){this.$("[data-role=connected-accounts-alert]").text(e)}});return u}),define("home/templates/settingsDeleteForm",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<div class="form">\n<div class="form__header">\n<h1 class="form-heading">'+o(n.gettext.call(s,"Delete Your %(Disqus)s Account",{name:"gettext",hash:{Disqus:"Disqus"},data:a}))+'</h1>\n<p class="form-description text-gray text-medium">'+o(n.gettext.call(s,"This can't be reversed, so make sure you're sure this is what you want.",{name:"gettext",hash:{},data:a}))+'</p>\n</div>\n<div class="form__content">\n<a href="#" class="button button-fill--brand text-medium inline__item" data-action="switch-tab" data-tab="delete">'+o(n.gettext.call(s,"Delete",{name:"gettext",hash:{},data:a}))+"</a>\n</div>\n</div>\n"},useData:!0})}),define("home/views/SettingsDeleteFormView",["backbone-marionette","home/templates/settingsDeleteForm"],function(e,t){"use strict";var n=e.ItemView.extend({template:t});return n}),define("home/views/SettingsAccountView",["backbone-marionette","core/utils/url/parseQueryString","home/mixins/withSubviews","home/templates/settingsAccount","home/views/SettingsAccountFormView","home/views/SettingsConnectedAccountsView","home/views/SettingsDeleteFormView"],function(e,t,n,i,a,s,o){"use strict";var r=e.ItemView.extend({template:i,regions:{connectedAccountsRegion:"[data-role=connected-accounts]",formRegion:"[data-role=account-form]",deleteRegion:"[data-role=delete-form]"},templateHelpers:function(){return{showVerifiedMessage:this.showVerifiedMessage()}},initialize:function(e){this.session=e.session},showVerifiedMessage:function(){return!!t().email_verified},onRender:function(){this.activateRegion(this.connectedAccountsRegion,this.createConnectedAccountsView),this.activateRegion(this.formRegion,this.createFormView),this.activateRegion(this.deleteRegion,this.createDeleteFormView)},createFormView:function(){return new a({el:this.formRegion.el,model:this.model})},createDeleteFormView:function(){return new o({el:this.deleteRegion.el,session:this.session})},createConnectedAccountsView:function(){return new s({el:this.connectedAccountsRegion.el,collection:this.model.socialAccounts})}});return n.call(r.prototype),r}),define("home/templates/settingsEmail",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return" checked"},3:function(){return' checked="checked"'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<form class="form">\n<div class="form__header--mobile visible-md">\n<a href="/home/settings/" class="form__header--mobile-back"><span class="icon-left-bracket"></span></a>\n<h2>'+r(n.gettext.call(o,"Email Notifications",{name:"gettext",hash:{},data:a}))+'</h2>\n</div>\n<div class="form__header">\n<h1 class="form-heading hidden-md">'+r(n.gettext.call(o,"Email Notifications",{name:"gettext",hash:{},data:a}))+'</h1>\n<p class="form-description text-gray text-medium">'+r(n.gettext.call(o,"Control the emails %(Disqus)s sends you.",{name:"gettext",hash:{Disqus:"Disqus"},data:a}))+'</p>\n</div>\n<div class="form__content">\n<div class="fieldset" role="group">\n<div class="fieldset__label align__item text-gray">'+r(n.gettext.call(o,"Enable Emails",{name:"gettext",hash:{},data:a}))+'</div>\n<div class="fieldset__block align__item">\n<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input type="checkbox" name="receive_notifications"'+(null!=(s=n["if"].call(o,null!=t?t.receive_notifications:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+">\n"+r(n.gettext.call(o,"Receive emails from %(Disqus)s",{name:"gettext",hash:{Disqus:"Disqus"},data:a}))+'\n</label>\n</div>\n</div>\n</div>\n<div class="fieldset" role="group" data-role="notification">\n<div class="fieldset__label align__item text-gray">'+r(n.gettext.call(o,"Digests",{name:"gettext",hash:{},data:a}))+'</div>\n<div class="fieldset__block align__item">\n<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input type="checkbox" name="receive_digests"'+(null!=(s=n["if"].call(o,n.ne.call(o,null!=t?t.digest_frequency:t,null!=t?t.FREQUENCY_NEVER:t,{name:"ne",hash:{},data:a}),{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+">\n"+r(n.gettext.call(o,"Receive %(Disqus)s Digest emails",{name:"gettext",hash:{Disqus:"Disqus"},data:a}))+'\n</label>\n</div>\n<div class="fieldset__block--radio" data-role="notification-digest">\n<label class="text-medium">\n<input type="radio" name="digest_frequency" value="daily"'+(null!=(s=n["if"].call(o,n.eq.call(o,null!=t?t.digest_frequency:t,"daily",{name:"eq",hash:{},data:a}),{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+">\n"+r(n.gettext.call(o,"Daily",{name:"gettext",hash:{},data:a}))+'\n</label>\n</div>\n<div class="fieldset__block--radio" data-role="notification-digest">\n<label class="text-medium">\n<input type="radio" name="digest_frequency" value="weekly"'+(null!=(s=n["if"].call(o,n.eq.call(o,null!=t?t.digest_frequency:t,"weekly",{name:"eq",hash:{},data:a}),{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+">\n"+r(n.gettext.call(o,"Weekly",{name:"gettext",hash:{},data:a}))+'\n</label>\n</div>\n<p class="fieldset__description text-gray text-small">\n'+r(n.gettext.call(o,"Digests give you a daily or weekly view of activity on %(Disqus)s, customized for you. Visit the %(digestFaq)s to learn more.",{name:"gettext",hash:{digestFaq:n.tag.call(o,"a",{name:"tag",hash:{text:n.gettext.call(o,"Digest FAQ",{name:"gettext",hash:{},data:a}),target:"blank",href:"https://help.disqus.com/customer/portal/articles/808919-disqus-digests"},data:a}),Disqus:"Disqus"},data:a}))+'\n</p>\n</div>\n</div>\n<div class="fieldset" role="group" data-role="notification">\n<div class="fieldset__label align__item text-gray">'+r(n.gettext.call(o,"Replies",{name:"gettext",hash:{},data:a}))+'</div>\n<div class="fieldset__block align__item">\n<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input type="checkbox" name="replies_to_comments"'+(null!=(s=n["if"].call(o,null!=t?t.replies_to_comments:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+">\n"+r(n.gettext.call(o,"Receive an email when someone replies to your comments",{name:"gettext",hash:{},data:a}))+'\n</label>\n</div>\n</div>\n</div>\n<div class="fieldset" role="group" data-role="notification">\n<div class="fieldset__label align__item text-gray">'+r(n.gettext.call(o,"Subscribe",{name:"gettext",hash:{},data:a}))+'</div>\n<div class="fieldset__block align__item">\n<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input type="checkbox" name="subscribe_thread_on_post"'+(null!=(s=n["if"].call(o,null!=t?t.subscribe_thread_on_post:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+">\n"+r(n.gettext.call(o,"Subscribe automatically to discussions you comment on",{name:"gettext",hash:{},data:a}))+'\n</label>\n</div>\n<p class="fieldset__description text-gray text-small">'+r(n.gettext.call(o,"You'll get an email for every new comment on discussions you're subscribed to.",{name:"gettext",hash:{},data:a}))+'</p>\n</div>\n</div>\n</div>\n<div class="form__footer">\n<div class="fieldset" role="group">\n<div class="fieldset__label" data-role="save-status"><div class="spinner-small"></div><div class="icon-checkmark"></div></div>\n<div class="fieldset__block"><button class="button button-fill--brand button-padding-wider text-medium" data-role="save-btn" disabled>'+r(n.gettext.call(o,"Save",{name:"gettext",hash:{},data:a}))+"</button></div>\n</div>\n</div>\n</form>\n"},useData:!0})}),define("home/views/SettingsEmailView",["jquery","underscore","home/models/SettingsEmailNotifications","home/templates/settingsEmail","home/views/common/BaseSettingsView"],function(e,t,n,i,a){"use strict";var s=a.extend({template:i,events:t.defaults({"change input[name=receive_notifications]":"receiveNotificationsChangeHandler","change input[name=receive_digests]":"receiveDigestsChangeHandler"},a.prototype.events),templateHelpers:function(){return{FREQUENCY_NEVER:n.FREQUENCY_NEVER}},receiveDigestsChangeHandler:function(t){this.updateDigestsDisplay(e(t.originalEvent.target).is(":checked"))},receiveNotificationsChangeHandler:function(t){this.updateNotificationsDisplay(e(t.originalEvent.target).is(":checked"))},onDomRefresh:function(){this.updateNotificationsDisplay(this.model.get("receive_notifications")),this.updateDigestsDisplay(this.shouldReceiveDigests())},shouldReceiveDigests:function(){var e=this.model.get("digest_frequency");return e&&e!==n.FREQUENCY_NEVER},updateDigestsDisplay:function(e){var t=this.$el.find("[data-role=notification-digest]");e?(t.show(),this.setDefaultDigestFrequency()):t.hide()},setDefaultDigestFrequency:function(){this.$el.find("input[name=digest_frequency]:checked").val()||this.$el.find("input[name=digest_frequency][value=daily]").attr("checked","checked")},updateNotificationsDisplay:function(e){var t=this.$el.find("[data-role=notification]");e?t.removeClass("fieldset--hidden"):t.addClass("fieldset--hidden")},getFormData:function(){var e=a.prototype.getFormData.apply(this,arguments);return e.receive_notifications=!!e.receive_notifications,e.replies_to_comments=!!e.replies_to_comments,e.subscribe_thread_on_post=!!e.subscribe_thread_on_post,e.digest_frequency=e.receive_digests?e.digest_frequency:n.FREQUENCY_NEVER,e}});return s}),define("home/templates/settingsWeb",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return"checked"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<form class="form">\n<div class="form__header--mobile visible-md">\n<a href="/home/settings/" class="form__header--mobile-back"><span class="icon-left-bracket"></span></a>\n<h2>'+r(n.gettext.call(o,"Web Notifications",{name:"gettext",hash:{},data:a}))+'</h2>\n</div>\n<div class="form__header">\n<h1 class="form-heading hidden-md">'+r(n.gettext.call(o,"Web Notifications",{name:"gettext",hash:{},data:a}))+'</h1>\n<p class="form-description text-gray text-medium">\n'+r(n.gettext.call(o,"Control what %(Disqus)s notifies you about in your %(inbox)s. Looking for email instead? Go to %(emailNotifications)s.",{name:"gettext",hash:{Disqus:"Disqus",emailNotifications:n.tag.call(o,"a",{name:"tag",hash:{text:n.gettext.call(o,"Email Notifications",{name:"gettext",hash:{},data:a}),"data-tab":"email","data-action":"switch-tab",href:"/home/settings/email/"},data:a}),inbox:n.tag.call(o,"a",{name:"tag",hash:{text:n.gettext.call(o,"Notifications",{name:"gettext",hash:{},data:a}),href:"/home/inbox/"},data:a})},data:a}))+'\n</p>\n</div>\n<div class="form__content">\n<div class="fieldset" role="group">\n<div class="fieldset__label align__item text-gray">'+r(n.gettext.call(o,"Notify you when",{name:"gettext",hash:{},data:a}))+'</div>\n<div class="fieldset__block align__item">\n<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input data-role="filter-checkbox" data-filter="likepost" type="checkbox" name="show-upvote-notification" value="likepost" '+(null!=(s=n["if"].call(o,null!=t?t.showUpvoteNotification:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+">\n"+r(n.gettext.call(o,"Someone upvotes your comment",{name:"gettext",hash:{},data:a}))+'\n</label>\n</div>\n<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input data-role="filter-checkbox" data-filter="invite" type="checkbox" name="show-invite-notification" value="invite" '+(null!=(s=n["if"].call(o,null!=t?t.showInviteNotification:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+">\n"+r(n.gettext.call(o,"Someone invites you to a discussion",{name:"gettext",hash:{},data:a}))+'\n</label>\n</div>\n<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input data-role="filter-checkbox" data-filter="favoritethread" type="checkbox" name="show-recommend-notification" value="favoritethread" '+(null!=(s=n["if"].call(o,null!=t?t.showRecommendNotification:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+">\n"+r(n.gettext.call(o,"Someone recommends a discussion you started",{name:"gettext",hash:{},data:a}))+'\n</label>\n</div>\n<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input data-role="filter-checkbox" data-filter="threadreplies" type="checkbox" name="show-threadreplies-notification" value="threadreplies" '+(null!=(s=n["if"].call(o,null!=t?t.showThreadRepliesNotification:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+">\n"+r(n.gettext.call(o,"Someone comments on a discussion you started",{name:"gettext",hash:{},data:a}))+'\n</label>\n</div>\n<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input data-role="filter-checkbox" data-filter="mentions" type="checkbox" name="show-mentions-notification" value="mentions" '+(null!=(s=n["if"].call(o,null!=t?t.showMentionsNotification:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+">\n"+r(n.gettext.call(o,"Someone mentions you in a discussion",{name:"gettext",hash:{},data:a}))+'\n</label>\n</div>\n</div>\n</div>\n</div>\n<div class="form__footer">\n<div class="fieldset" role="group">\n<div class="fieldset__label" data-role="save-status"><div class="spinner-small"></div><div class="icon-checkmark"></div></div>\n<div class="fieldset__block"><button class="button button-fill--brand button-padding-wider text-medium" disabled data-role="save-btn">'+r(n.gettext.call(o,"Save",{name:"gettext",hash:{},data:a}))+"</button></div>\n</div>\n</div>\n</form>\n"},useData:!0})}),define("home/views/SettingsWebView",["jquery","underscore","backbone-marionette","home/mixins/withFetchingView","home/models/TimelineFilter","home/templates/settingsWeb"],function(e,t,n,i,a,s){"use strict";var o=n.ItemView.extend({events:{"submit form":"submitHandler","change input[type=checkbox]":"changeHandler"},template:s,initialize:function(){this.listenToOnce(this.collection,"reset",this.doneFetching),this.listenTo(this.collection,"sync",this.render)},templateHelpers:function(){return{showUpvoteNotification:!this.collection.get(a.FILTER_LIKEPOST),showInviteNotification:!this.collection.get(a.FILTER_INVITE),showRecommendNotification:!this.collection.get(a.FILTER_RECOMMEND),showThreadRepliesNotification:!this.collection.get(a.FILTER_THREADREPLIES),showMentionsNotification:!this.collection.get(a.FILTER_MENTIONS)}},onRender:function(){this.$form=this.$("form"),this.$checkboxes=this.$form.find("[data-role=filter-checkbox]"),this.$saveStatus=this.$("[data-role=save-status]"),this.saveBtn=this.$("[data-role=save-btn]")[0]},changeHandler:function(){var e=t.chain(this.$checkboxes).filter(this.hasFilterChanged,this).value();this.saveBtn.disabled=!e.length},doneFetching:function(){this.collection.fetched=!0},isDoneFetching:function(){return this.collection.fetched},submitHandler:function(n){n.preventDefault(),this.updateStatus("is-saving");var i=t.chain(this.$checkboxes).filter(this.hasFilterChanged,this).map(this.updateFilter,this).value();e.when.apply(e,i).done(t.bind(this.updateStatus,this,"is-saved"))},hasFilterChanged:function(t){var n=e(t),i=n.is(":checked"),a=this.collection.get(n.attr("data-filter"));return i&&a||!i&&!a},updateFilter:function(t){var n=e(t),i=n.is(":checked")?"removeFilter":"addFilter";return this.collection[i](n.attr("data-filter"))},updateStatus:function(e){this.$el.find("[data-role=save-status]").removeClass("is-saving is-saved").addClass(e)}});return i.call(o.prototype),o}),define("home/templates/settingsApps",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s=e.lambda,o=e.escapeExpression;return'<div class="fieldset" role="group" data-role="app-field">\n<div class="fieldset__label align__item text-gray">'+o(s(null!=t?t.name:t,t))+'</div>\n<div class="fieldset__block align__item">\n<div class="fieldset__block--button">\n<button class="button button-fill--brand text-medium" data-action=\'revoke-app\' data-app-id=\''+o(s(null!=t?t.id:t,t))+"'>"+o(n.gettext.call(null!=t?t:{},"Revoke Access",{name:"gettext",hash:{},data:a}))+"</button>\n</div>\n</div>\n</div>\n"},3:function(e,t,n,i,a){return'<p class="form-description text-gray text-medium">'+e.escapeExpression(n.gettext.call(null!=t?t:{},"You haven't given access to any applications yet.",{name:"gettext",hash:{},data:a}))+"</p>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div class="form">\n<div class="form__header--mobile visible-md">\n<a href="/home/settings/" class="form__header--mobile-back"><span class="icon-left-bracket"></span></a>\n<h2>'+r(n.gettext.call(o,"Apps",{name:"gettext",hash:{},data:a}))+'</h2>\n</div>\n<div class="form__header">\n<h1 class="form-heading hidden-md">'+r(n.gettext.call(o,"Apps",{name:"gettext",hash:{},data:a}))+'</h1>\n<p class="form-description text-gray text-medium">'+r(n.gettext.call(o,"Control what apps can access your %(Disqus)s account.",{name:"gettext",hash:{Disqus:"Disqus"},data:a}))+'</p>\n</div>\n<div class="form__content">\n'+(null!=(s=n.each.call(o,null!=t?t.items:t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?s:"")+"</div>\n</div>\n"},useData:!0})}),define("home/views/SettingsAppsView",["jquery","backbone-marionette","core/strings","home/mixins/withFetchingView","home/templates/settingsApps"],function(e,t,n,i,a){"use strict";var s=n.get,o=t.ItemView.extend({events:{"click [data-action=revoke-app]":"revokeAppHandler"},template:a,initialize:function(){this.listenToOnce(this.collection,"reset",this.doneFetching),this.listenTo(this.collection,"reset remove",this.render)},doneFetching:function(){this.collection.fetched=!0},isDoneFetching:function(){return this.collection.fetched},revokeAppHandler:function(t){var i=e(t.originalEvent.target).attr("data-app-id"),a=this.collection.get(i);if(a){var o=n.interpolate(s("Revoke access for %(appName)s?"),{appName:a.get("name")});window.confirm(o)&&a.destroy({wait:!0})}}});return i.call(o.prototype),o}),define("home/templates/settingsModeration",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div class="fieldset" role="group">\n<div class="fieldset__label align__item text-gray">'+r(n.gettext.call(o,"Receive email notifications for comments that are",{name:"gettext",hash:{},data:a}))+'</div>\n<div class="fieldset__block align__item">\n<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input type="checkbox" name="receive_approved"'+(null!=(s=n.unless.call(o,null!=t?t.disable_approved:t,{name:"unless",hash:{},fn:e.program(2,a,0),inverse:e.noop,data:a}))?s:"")+">\n"+r(n.gettext.call(o,"Newly posted",{name:"gettext",hash:{},data:a}))+'\n</label>\n</div>\n<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input type="checkbox" name="receive_unapproved"'+(null!=(s=n["if"].call(o,null!=t?t.receive_unapproved:t,{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.noop,data:a}))?s:"")+">\n"+r(n.gettext.call(o,"Pending (waiting for moderation)",{name:"gettext",hash:{},data:a}))+'\n</label>\n</div>\n<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input type="checkbox" name="receive_spam"'+(null!=(s=n["if"].call(o,null!=t?t.receive_spam:t,{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.noop,data:a}))?s:"")+">\n"+r(n.gettext.call(o,"Marked as spam",{name:"gettext",hash:{},data:a}))+'\n</label>\n</div>\n</div>\n</div>\n<div class="fieldset" role="group">\n<div class="fieldset__label align__item text-gray">'+r(n.gettext.call(o,"Sites to receive emails for",{name:"gettext",hash:{},data:a}))+'</div>\n<div class="fieldset__block align__item">\n'+(null!=(s=n.each.call(o,null!=t?t.forum_subscriptions:t,{name:"each",hash:{},fn:e.program(4,a,0),inverse:e.noop,data:a}))?s:"")+'</div>\n</div>\n</div>\n<div class="form__footer">\n<div class="fieldset" role="group">\n<div class="fieldset__label" data-role="save-status"><div class="spinner-small"></div><div class="icon-checkmark"></div></div>\n<div class="fieldset__block"><button class="button button-fill--brand button-padding-wider text-medium" data-role="save-btn" disabled>'+r(n.gettext.call(o,"Save",{name:"gettext",hash:{},data:a}))+"</button></div>\n</div>\n</div>\n"},2:function(){return" checked"},4:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<div class="fieldset__block--checkbox">\n<label class="text-medium">\n<input type="checkbox" name="forum_'+r(o(a&&a.key,t))+'"'+(null!=(s=n["if"].call(null!=t?t:{},null!=t?t.subscribed:t,{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.noop,data:a}))?s:"")+">\n"+r(o(null!=t?t.name:t,t))+" ("+r(o(null!=t?t.url:t,t))+")\n</label>\n</div>\n"},6:function(e,t,n,i,a){var s=null!=t?t:{};return'<p class="form-description text-gray text-medium">\n'+e.escapeExpression(n.gettext.call(s,"You aren't moderating any sites. To add a new site, %(addSite)s.",{name:"gettext",hash:{addSite:n.tag.call(s,"a",{name:"tag",hash:{text:n.gettext.call(s,"go here",{name:"gettext",hash:{},data:a}),target:"_blank",href:"https://publishers.disqus.com/engage?utm_source=Home-Settings"},data:a})},data:a}))+"\n</p>\n\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<form class="form">\n<div class="form__header--mobile visible-md">\n<a href="/home/settings/" class="form__header--mobile-back"><span class="icon-left-bracket"></span></a>\n<h2>'+r(n.gettext.call(o,"Moderation",{name:"gettext",hash:{},data:a}))+'</h2>\n</div>\n<div class="form__header">\n<h1 class="form-heading hidden-md">'+r(n.gettext.call(o,"Moderation",{name:"gettext",hash:{},data:a}))+'</h1>\n<p class="form-description text-gray text-medium">\n'+r(n.gettext.call(o,"Control which moderation email notifications you receive for sites you moderate. To moderate comments posted on your site and adjust your site's settings, visit your %(moderatorLink)s.",{name:"gettext",hash:{moderatorLink:n.tag.call(o,"a",{name:"tag",hash:{text:n.gettext.call(o,"moderation panel",{name:"gettext",hash:{},data:a}),href:"/admin/"},data:a})},data:a}))+'\n</p>\n</div>\n<div class="form__content">\n'+(null!=(s=n["if"].call(o,null!=t?t.moderatesForums:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(6,a,0),data:a}))?s:"")+"</form>\n"},useData:!0})}),define("home/views/SettingsModerationView",["jquery","underscore","home/templates/settingsModeration","home/views/common/BaseSettingsView"],function(e,t,n,i){"use strict";var a=i.extend({template:n,templateHelpers:function(){return{moderatesForums:!t.isEmpty(this.model.get("forum_subscriptions"))}},getFormData:function(){var n=i.prototype.getFormData.apply(this,arguments);n.receive_unapproved=!!n.receive_unapproved,n.receive_spam=!!n.receive_spam,n.disable_approved=!n.receive_approved;var a=e.extend(!0,{},this.model.attributes.forum_subscriptions);return t.each(a,function(e,t){e.subscribed=!!n["forum_"+t],delete n["forum_"+t]}),n.forum_subscriptions=a,n}});return a}),define("home/templates/settings",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div class="section-contained">\n<div class="layout layout--tablet-no-aside layout--mobile-flush settings--root" data-role="settings-layout">\n<div class="layout__main">\n<div class="layout__nav">\n<ul class="nav-stacked">\n<li data-action="switch-tab" data-tab="profile" class="nav__item active">\n<a href="/home/settings/profile/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n'+r(n.gettext.call(o,"Profile",{name:"gettext",hash:{},data:a}))+'\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n<li data-action="switch-tab" data-tab="account" class="nav__item">\n<a href="/home/settings/account/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n'+r(n.gettext.call(o,"Account",{name:"gettext",hash:{},data:a}))+'\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n<li data-action="switch-tab" data-tab="email" class="nav__item">\n<a href="/home/settings/email/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n'+r(n.gettext.call(o,"Email Notifications",{
name:"gettext",hash:{},data:a}))+'\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n<li data-action="switch-tab" data-tab="web" class="nav__item">\n<a href="/home/settings/web/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n'+r(n.gettext.call(o,"Web Notifications",{name:"gettext",hash:{},data:a}))+'\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n<li data-action="switch-tab" data-tab="apps" class="nav__item">\n<a href="/home/settings/apps/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n'+r(n.gettext.call(o,"Apps",{name:"gettext",hash:{},data:a}))+'\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n<li data-action="switch-tab" data-tab="moderation" class="nav__item">\n<a href="/home/settings/moderation/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n'+r(n.gettext.call(o,"Moderation",{name:"gettext",hash:{},data:a}))+'\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n<li data-action="switch-tab" data-tab="blocking" class="nav__item">\n<a href="/home/settings/blocking/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n'+r(n.gettext.call(o,"Blocking",{name:"gettext",hash:{},data:a}))+'\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n</ul>\n</div>\n<div class="layout__content">\n<div data-role="email-verification-alert"></div>\n<div data-role="content-area"></div>\n</div>\n</div>\n<aside class="layout__aside hidden-lg">\n<div class="aside__wrap -brand">\n<div class="aside__content--settings text-center">\n<img src="'+r(n.urlfor.call(o,"cdn",{name:"urlfor",hash:{},data:a}))+'/img/Pam_Settings.png" width="170" height="93" />\n<h2 class="text-large">'+r(n.gettext.call(o,"Get more from Disqus",{name:"gettext",hash:{},data:a}))+"</h2>\n<p>"+r(n.gettext.call(o,"Follow channels for a personalized experience. Jump into channels to start your own discussion.",{name:"gettext",hash:{},data:a}))+'</p>\n<p>\n<a href="/home/explore" class="button button-inverted button-small button-padding-wider">'+r(n.gettext.call(o,"Find Channels To Join",{name:"gettext",hash:{},data:a}))+'</a>\n</p>\n</div>\n</div>\n<div class="text-smaller text-gray">\n'+(null!=(s=e.invokePartial(i.homeFooter,t,{name:"homeFooter",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</div>\n</aside>\n</div>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/SettingsLayout",["underscore","core/bus","core/strings","home/collections/SettingsAppCollection","home/collections/SettingsBlockListCollection","core/UniqueModel","home/models/SettingsModeration","home/models/SettingsProfile","home/models/SettingsAccount","home/models/SettingsEmailNotifications","home/views/common/TabbedView","home/views/SettingsBlockingView","home/views/SettingsDeleteView","home/views/SettingsProfileView","home/views/SettingsMenuView","home/views/SettingsAccountView","home/views/SettingsEmailView","home/views/SettingsWebView","home/views/SettingsAppsView","home/views/SettingsModerationView","home/mixins/withEmailVerificationAlert","home/templates/settings"],function(e,t,n,i,a,s,o,r,l,c,d,u,h,m,p,f,g,v,b,w,x,y){"use strict";var _=n.get,k=d.extend({defaultTab:"menu",template:y,initialize:function(t){this.session=t.session,this.user=this.session.user,this.getSettingsAppCollection=e.once(this.getSettingsAppCollection),this.getNotificationFilters=e.once(this.getNotificationFilters),this.listenTo(this,"change:activeTab",this.updateLayoutClass),this.listenTo(this,"change:activeTab",this.trackOpenSection),d.prototype.initialize.apply(this,arguments)},updateLayoutClass:function(){this.$el.find("[data-role=settings-layout]").removeClass("settings--root settings--page").addClass(this.activeTab===this.defaultTab?"settings--root":"settings--page")},getMetaAttrs:function(){return _("Settings")},getSettingsAppCollection:function(){var e=new i;return e.fetch({reset:!0}),e},getNotificationFilters:function(){var e=this.session.getOrCreateNotifications();return e.filters.fetch({reset:!0}),e.filters},getSettingsBlockListCollection:function(){var e=new a;return e.fetch(),e},getTabView:function(e){switch(e){case"menu":return new p({model:this.session.user});case"profile":return new m({model:new s(r,{id:this.session.user.id})});case"account":return new f({session:this.session,model:new s(l,{id:this.session.user.id})});case"email":return new g({model:new s(c,{id:this.session.user.id})});case"web":return new v({collection:this.getNotificationFilters()});case"apps":return new b({collection:this.getSettingsAppCollection()});case"moderation":return new w({model:new s(o,{id:this.session.user.id})});case"delete":return new h({session:this.session,model:new s(l,{id:this.session.user.id})});case"blocking":return new u({collection:this.getSettingsBlockListCollection()})}},getTrackingSection:function(e){return e},trackOpenSection:function(){t.trigger("openSection",this)}});return x.call(k.prototype),k}),define("home/templates/userChannels",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return" hidden"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<div data-role="email-verification-alert"></div>\n\n<div class="spacing-bottom'+(null!=(s=n["if"].call(o,null!=t?t.hideManagedChannels:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'" data-role="managed-channels-wrapper">\n<div class="card-wrap" data-role="managed-channels"></div>\n</div>\n\n<h2 class="text-subheading spacing-narrow">'+e.escapeExpression(n.gettext.call(o,"Following",{name:"gettext",hash:{},data:a}))+'</h2>\n<div class="card-wrap" data-role="followed-channels"></div>\n'},useData:!0})}),define("home/views/UserChannelsView",["underscore","backbone-marionette","home/mixins/withSubviews","home/mixins/withEmailVerificationAlert","home/views/ForumCardCollectionView","home/views/ProfileFollowingCommunitiesEmptyView","home/templates/userChannels"],function(e,t,n,i,a,s,o){"use strict";var r=t.ItemView.extend({template:o,templateHelpers:function(){return{hideManagedChannels:this.shouldHideManagedChannels()}},regions:{managedChannelsRegion:"[data-role=managed-channels]",followedChannelsRegion:"[data-role=followed-channels]"},initialize:function(){this.listenTo(this.model.managedChannels.items,"reset add",function(){this.$("[data-role=managed-channels-wrapper]").toggleClass("hidden",this.shouldHideManagedChannels())})},shouldHideManagedChannels:function(){return 0===this.model.managedChannels.items.length},onRender:function(){this.activateRegion(this.managedChannelsRegion,e.partial(this.createChannelsView,this.model.managedChannels)),this.activateRegion(this.followedChannelsRegion,e.partial(this.createFollowedChannelsView,this.model.followedChannels))},createFollowedChannelsView:function(e){return this.createChannelsView(e,{infiniteScroll:!0,emptyView:s})},createChannelsView:function(t,n){return new a(e.extend({user:this.model.user,model:t,collection:t.items},n))}});return n.call(r.prototype),i.call(r.prototype),r}),define("home/templates/channels",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({compiler:[7,">= 4.0.0"],main:function(){return'<div class="section-contained">\n<div class="layout layout--tablet-no-aside">\n<div class="layout__main">\n<section data-role="content-area" class="spacing-bottom-large"></section>\n</div>\n<div class="layout__aside hidden-lg">\n<section data-role="recommend-module" data-recommend-type="forum" class="module--aside"></section>\n<section data-role="recommend-module" data-recommend-type="channel" class="module--aside"></section>\n<section data-role="recommend-module" data-recommend-type="user" class="module--aside"></section>\n</div>\n</div>\n</div>\n'},useData:!0})}),define("home/views/ChannelsView",["underscore","backbone","backbone-marionette","core/strings","home/models/Session","home/views/RecommendationsModuleView","home/views/UserChannelsView","home/views/HomepageChannelsModuleView","home/mixins/withEmailConfirmedModal","home/mixins/withSubviews","home/templates/channels"],function(e,t,n,i,a,s,o,r,l,c,d){"use strict";var u=i.get,h=n.ItemView.extend({template:d,regions:{recommendedUsersModuleRegion:"[data-role=recommend-module][data-recommend-type=user]",recommendedChannelsModuleRegion:"[data-role=recommend-module][data-recommend-type=channel]",contentRegion:"[data-role=content-area]"},initialize:function(){var t=a.get();t.loadPromise().always(e.bind(this.render,this))},onRender:function(){this.activateRegion(this.contentRegion,this.createContentView),this.activateRegion(this.recommendedUsersModuleRegion,this.createUserRecommendedModuleView),this.model.promotedChannels.ensureFetched().then(e.bind(function(){var t=this.model.promotedChannels.chain().reject(function(e){return e.primaryForum.get("isFollowing")}).shuffle().value();t.length&&this.activateRegion(this.recommendedChannelsModuleRegion,e.bind(this.createChannelRecommendedModuleView,this,t))},this))},createContentView:function(){return new o({model:this.model.sessionUserProfile})},createUserRecommendedModuleView:function(){return s.createUserRecommendedModuleView({model:this.model.interestingUsers})},createChannelRecommendedModuleView:function(e){return new r({collection:new t.Collection(e)})},getMetaAttrs:function(){return u("Channels")}});return l.call(h.prototype),c.call(h.prototype),h}),define("home/mixins/withReactSubviews",["underscore"],function(e){"use strict";var t,n,i={},a=function(t,n){i[n.path]=t,n.module=t,n.fetching=!1,e.each(n.onFetch,function(e){e&&e()})},s=function(t,n){n.ref=t,e.each(n.onRef,function(e){e.call(n.ref)})},o=function(e,s){return e.onFetch.push(s),i[e.path]?void a(i[e.path],e):void(e.fetching||(e.fetching=!0,require([e.path],function(i){t&&n?a(i,e):require(["react","react-dom"],function(s,o){t=s,n=o,a(i,e)})})))},r=function(i){this.initialize=e.wrap(this.initialize,function(t){t.apply(this,e.rest(arguments)),this._components=e.chain(i).map(function(e){return[e,{path:e,onFetch:[],onRef:[]}]}).object().value()}),this.renderReactSubview=function(i,a,r,l){var c=this._components[i];if(c){if(!c.module)return void o(c,e.bind(this.renderReactSubview,this,i,a,r,l));var d=n.render(t.createElement(t.createClass({displayName:"wrapper",getInitialState:function(){return a},render:function(){return t.createElement("div",{"data-view-type":"react"},t.createElement(c.module,this.state))}})),r,l);s(d,c)}},this.updateComponentProps=function(e,t){var n=this._components[e];if(n)return n.ref?void n.ref.setState(t):void n.onRef.push(function(){n.ref.setState(t)})}};return r.forget=function(){i={},t=void 0,n=void 0},r}),define("home/views/ExploreChannelGroupsReactViewWrapper",["underscore","backbone-marionette","home/mixins/withReactSubviews","home/utils/navigationUtils"],function(e,t,n,i){"use strict";var a=t.ItemView.extend({template:function(){return""},initialize:function(e){this.channelGroupsCollection=e.channelGroupsCollection,this.rankings=e.rankings,this.explorePath=e.explorePath},getChannelGroups:function(){return this.channelGroupsCollection.invoke("toJSON")},onDomRefresh:function(){this.channelGroupsCollection.length||this.channelGroupsCollection.once("sync",e.bind(function(){this.updateComponentProps(this.constructor.COMPONENTS.CONTENT,{channelGroups:this.getChannelGroups()})},this)),this.renderReactSubview(this.constructor.COMPONENTS.CONTENT,{channelGroups:this.getChannelGroups(),rankings:this.rankings,navigationUtils:i,explorePath:this.explorePath},this.$el[0])}},{COMPONENTS:{CONTENT:"core/views/react/ExploreChannelGroupsView"}});return n.call(a.prototype,a.COMPONENTS),a}),define("home/views/AllstarCollectionView",["home/views/UserCollectionView"],function(e){"use strict";var t=e.extend({addItemView:function(t,n,i){return t.get("isPrivate")?void 0:e.prototype.addItemView.call(this,t,n,i)}});return t}),define("home/templates/explore",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){return'<li data-action="switch-tab" data-tab="people" class="nav__item">\n<a href="/home/explore/people/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="button__text">'+e.escapeExpression(n.gettext.call(null!=t?t:{},"People",{name:"gettext",hash:{},data:a}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n'},3:function(e,t,n,i,a){var s=null!=t?t:{},o=e.escapeExpression;return'<header data-role="header" data-tab="people" class="hidden module-header text-center">\n<div class="align-inline spacing-top">\n<div class="module-header__icon spacing-right text-larger">\n<span class="icon-allstar allstar__icon icon__position"></span>\n</div>\n<div class="module-header__title">\n<h1 class="text-larger text-darker">'+o(n.gettext.call(s,"All-Stars",{name:"gettext",hash:{},data:a}))+'</h1>\n</div>\n</div>\n<p class="text-medium text-gray spacing-bottom-narrow">'+o(n.gettext.call(s,"The star contributors and heart of the community. %(learnMore)s",{name:"gettext",hash:{learnMore:n.tag.call(s,"a",{name:"tag",hash:{text:"Learn more.",href:"https://disqus.com/home/channel/announcements/discussion/channel-announcements/all_stars/"},data:a})},data:a}))+"</p>\n</header>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div class="section-contained">\n<div class="layout layout--tablet-no-aside">\n<div class="layout__main">\n<aside class="layout__nav">\n<ul class="nav--no-aside">\n<li data-action="switch-tab" data-tab="channels" class="nav__item active">\n<a href="/home/explore/channels/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="button__text">'+r(n.gettext.call(o,"Channels",{name:"gettext",hash:{},data:a}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n'+(null!=(s=n["if"].call(o,null!=t?t.showPeople:t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'<li data-action="switch-tab" data-tab="discussions" class="nav__item">\n<a href="/home/explore/discussions/" class="nav-lnk -color-muted">\n<div class="nav-lnk__blk">\n<span class="button__text">'+r(n.gettext.call(o,"Discussions",{name:"gettext",hash:{},data:a}))+'</span>\n</div>\n<div class="nav-lnk__pointer">\n<span class="icon icon-right-bracket"></span>\n</div>\n</a>\n</li>\n</ul>\n</aside>\n<div class="layout__content">\n<div class="content__wrap">\n<header data-role="header" data-tab="channels" class="hidden module-header text-center">\n'+(null!=(s=e.invokePartial(i.channelsHeader,t,{name:"channelsHeader",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+"</header>\n"+(null!=(s=n["if"].call(o,null!=t?t.showPeople:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+'<header data-role="header" data-tab="discussions" class="hidden module-header text-center">\n<div class="align-inline spacing-top">\n<div class="module-header__icon spacing-right text-larger">\n<span class="icon-notification-response text-brand icon__position"></span>\n</div>\n<div class="module-header__title">\n<h1 class="text-larger text-darker">'+r(n.gettext.call(o,"Discussions",{name:"gettext",hash:{},data:a}))+'</h1>\n</div>\n</div>\n<p class="text-medium text-gray spacing-bottom-narrow">'+r(n.gettext.call(o,"What people are talking about.",{name:"gettext",hash:{},data:a}))+'</p>\n</header>\n<section id="content-area" data-role="content-area"></section>\n</div>\n</div>\n</div>\n</div>\n</div>\n'},usePartial:!0,useData:!0})}),define("home/views/ExploreView",["core/switches","core/constants/exploreModuleConstants","home/models/Session","home/views/common/TabbedView","home/views/common/FetchableCollectionLayout","home/views/HideOnEndFooterView","home/views/ExploreChannelGroupsView","home/views/ExploreChannelGroupsReactViewWrapper","home/views/AllstarCollectionView","home/templates/explore"],function(e,t,n,i,a,s,o,r,l,c){"use strict";var d=e.isFeatureActive("homeReact"),u=i.extend({defaultTab:"channels",template:c,templateHelpers:function(){return{showPeople:!n.isKnownToBeLoggedOut()}},initialize:function(e){e=e||{},i.prototype.initialize.call(this,e),this.channelId=e.channelId,this.channelFeed=e.channelFeed,this.session=n.get(),this.listenTo(this,"change:activeTab",this.updateHeader)},updateHeader:function(e){this.$("[data-role=header]").addClass("hidden"),this.$("[data-role=header][data-tab="+e+"]").removeClass("hidden")},getTabView:function(e){var n=t.TABS;switch(e){case"channels":return this.model.exploreChannelCollection.ensureFetched(),d?new r({channelGroupsCollection:this.model.exploreChannelCollection,rankings:[n.TOP,n.POPULAR,n.RECENT],explorePath:e}):new o({collection:this.model.exploreChannelCollection,activeTab:this.channelId,channelFeed:this.channelFeed,channelTabs:[n.TOP,n.POPULAR,n.RECENT],exploreTab:e});case"people":return this.model.allStars.ensureFetched(),new a({model:this.model.allStars,collection:this.model.allStars.items,fetchableCollectionView:l,fetchableCollectionFooterView:s,infiniteScroll:!0});case"discussions":return this.model.exploreChannelCollection.ensureFetched(),new o({collection:this.model.exploreChannelCollection,activeTab:this.channelId,channelFeed:this.channelFeed,channelTabs:[n.DISCUSSIONS],exploreTab:e})}}});return u}),define("home/templates/completeOnboarding",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(e,t,n,i,a){var s,o=e.lambda,r=e.escapeExpression;return'<div class="onboard-complete__channel spacing-top">\n<span data-steps="'+r(o(null!=t?t.steps:t,t))+'" data-duration="550" class="onboard-complete__avatar relative__wrapper inline_block spacing-right">\n<span class="onboard-complete__img">'+(null!=(s=e.invokePartial(i.channelAvatarWithDefault,null!=t?t.channel:t,{name:"channelAvatarWithDefault",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</span>\n<span class="onboard-complete__checkmark icon-checkmark"></span>\n</span>\n<strong>'+r(o(null!=(s=null!=t?t.channel:t)?s.name:s,t))+"</strong>\n</div>\n"},3:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<div class="spacing-top">\n'+(null!=(s=n["if"].call(o,n.eq.call(o,null!=t?t.overflowCount:t,1,{name:"eq",hash:{},data:a}),{name:"if",hash:{},fn:e.program(4,a,0),inverse:e.program(6,a,0),data:a}))?s:"")+"</div>\n"},4:function(){return"<strong>… and 1 other</strong>\n"},6:function(e,t){return"<strong>… and "+e.escapeExpression(e.lambda(null!=t?t.overflowCount:t,t))+" others</strong>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{},r=e.escapeExpression;return'<div class="onboard-complete">\n<span class="spinner"></span>\n\n<section data-steps="1" data-duration="700" class="onboard-complete__step text-gray-darker">\n<strong>'+r(n.gettext.call(o,"Building your feed…",{name:"gettext",hash:{},data:a}))+'</strong>\n</section>\n\n<section data-steps="'+r(e.lambda(null!=t?t.channelsShownSteps:t,t))+'" data-role="channels" class="onboard-complete__step text-center text-gray-darker">\n<strong>'+r(n.gettext.call(o,"Adding channels you followed…",{name:"gettext",hash:{},data:a}))+"</strong>\n"+(null!=(s=n.each.call(o,null!=t?t.channels:t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+(null!=(s=n.if_all.call(o,null!=t?t.overflowCount:t,null!=t?t.isEnglish:t,{name:"if_all",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a}))?s:"")+"</section>\n</div>\n"},usePartial:!0,useData:!0})}),define("home/views/CompleteOnboardingView",["underscore","backbone-marionette","home/mixins/withOnboarding","home/templates/completeOnboarding"],function(e,t,n,i){"use strict";var a=t.ItemView.extend({template:i,templateHelpers:function(){var t=this.getChannelsFollowing(),n=this.getChannelsForRender(t);return{isEnglish:"en"===window.document.documentElement.lang,channels:n,overflowCount:Math.max(t.length-this.constructor.NUM_CHANNELS_SHOWN,0),channelsShownSteps:e.range(this.constructor.ACTIVATE_CHANNEL_LIST_STEP,this.constructor.ACTIVATE_CHANNEL_LIST_STEP+this.constructor.NUM_CHANNELS_SHOWN+1).join(" ")}},getChannelsForRender:function(t){var n=this;return e.chain(t).first(this.constructor.NUM_CHANNELS_SHOWN).map(function(t,i){return{channel:t.channel.toJSON(),steps:e.range(i+n.constructor.ACTIVATE_CHANNEL_LIST_STEP+1,n.constructor.ACTIVATE_CHANNEL_LIST_STEP+n.constructor.NUM_CHANNELS_SHOWN+1).join(" ")}}).value()},onShow:function(){this.activateSteps(1)},activateSteps:function(t){this.$("[data-steps]").removeClass("active");var n=this.$("[data-steps~="+t+"]");if(!n.length)return void this.trigger("complete");n.addClass("active");var i=this.$("[data-steps~="+t+"][data-duration]").attr("data-duration")||this.constructor.DEFAULT_STEP_DURATION;e.delay(e.bind(this.activateSteps,this,t+1),i)}},{DEFAULT_STEP_DURATION:1e3,ACTIVATE_CHANNEL_LIST_STEP:2,NUM_CHANNELS_SHOWN:3});return n.call(a.prototype),a}),define("home/templates/onboarding",["handlebars","handlebars.partials","core/extensions/handlebars.helpers"],function(e){return e.template({1:function(){return" is-complete"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,a){var s,o=null!=t?t:{};return'<div class="onboard-banner align align--stretch'+(null!=(s=n.unless.call(o,null!=t?t.numRemainingSteps:t,{name:"unless",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'" data-role="banner-wrapper">\n'+(null!=(s=e.invokePartial(i.onboardingBanner,t,{name:"onboardingBanner",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</div>\n<div class="onboard-banner-scrolled text-center text-semibold'+(null!=(s=n.unless.call(o,null!=t?t.numRemainingSteps:t,{name:"unless",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a}))?s:"")+'" data-role="fixed-banner">\n<div class="onboard-banner-scrolled__message" data-role="instructions">\n'+(null!=(s=e.invokePartial(i.onboardingBannerInstructions,t,{name:"onboardingBannerInstructions",data:a,helpers:n,partials:i,decorators:e.decorators}))?s:"")+'</div>\n<button data-action="finish" class="onboard-banner-scrolled__continue button button-medium button-outline button-padding-wider -border-light">\n'+e.escapeExpression(n.gettext.call(o,"Continue",{name:"gettext",hash:{},data:a}))+' &raquo;\n</button>\n</div>\n<div class="onboard__channels section-contained-narrow content__wrap" data-role="explore"></div>\n<div class="onboard-overlay is-hidden align align--middle align--center" data-role="overlay"></div>\n'},usePartial:!0,useData:!0})}),define("home/views/OnboardingView",["jquery","handlebars","underscore","backbone-marionette","core/constants/exploreModuleConstants","core/utils/url/parseQueryString","core/UniqueModel","home/mixins/withOnboarding","home/models/Session","home/models/Forum","home/views/CompleteOnboardingView","home/views/ExploreChannelGroupsView","home/templates/onboarding"],function(e,t,n,i,a,s,o,r,l,c,d,u,h){"use strict";var m=i.Layout.extend({className:"is-onboard-welcome",template:h,templateHelpers:function(){var e=this.constructor.NUM_STEPS;return{numTotalSteps:e,numRemainingSteps:Math.max(e-this.getStepNumber()+1,0),emailVerified:!!s().email_verified,canSkip:this.userCanSkip(),sessionUser:this.user&&this.user.toJSON()}},regions:{exploreRegion:"[data-role=explore]",overlayRegion:"[data-role=overlay]"},ui:{bannerWrapper:"[data-role=banner-wrapper]",fixedBanner:"[data-role=fixed-banner]"},events:{"click [data-action=finish]":"showCompleteOverlay","click [data-action=hide-welcome]":"hideWelcomeOverlay"},initialize:function(t){t=t||{},this.channelId=t.channelId,this.initForum(),this.session=l.get(),this.session.loadPromise().then(n.bind(function(){this.user=this.session.user,this.render()},this)),this.listenTo(this,"change:stepNumber",this.updateBanners),this.onScroll=n.bind(this.onScroll,this),e(window).on("scroll",this.onScroll)},onClose:function(){e(window).off("scroll",this.onScroll)},initForum:function(){var e=s().forum_id;return e&&(this.forum=new o(c,{id:e}),this.forum.shouldFetch())?void this.forum.fetch().always(n.bind(this.handleWelcome,this)):void this.handleWelcome()},onScroll:n.debounce(function(){var t=e(window).scrollTop()>=this.bannerBottom;this.ui.fixedBanner.toggleClass("is-visible",t)},100),updateBanners:function(){var e=this.serializeData();this.mixinTemplateHelpers(e),this.ui.bannerWrapper.html(t.partials.onboardingBanner(e)),this.ui.bannerWrapper.toggleClass("is-complete",!e.numRemainingSteps),this.ui.fixedBanner.toggleClass("is-complete",!e.numRemainingSteps)},onDomRefresh:function(){var e=a.TABS;this.collection.ensureFetched(),this.exploreRegion.show(new u({collection:this.collection,activeTab:this.channelId,channelTabs:[e.TOP],exploreTab:"channels"})),this.bannerBottom=this.ui.bannerWrapper.outerHeight()},handleWelcome:function(){return this.forum?(this.overlayRegion.ensureEl(),void this.overlayRegion.$el.removeClass("is-hidden").html(t.partials.welcomeOverlay({forum:this.forum.toJSON()}))):void this.beginWelcomeAnimation()},showCompleteOverlay:function(){var e=new d;this.listenTo(e,"complete",this.completeOnboarding),this.overlayRegion.show(e),this.overlayRegion.$el.removeClass("is-hidden")},hideWelcomeOverlay:function(){this.overlayRegion.ensureEl(),this.overlayRegion.$el.addClass("is-hidden"),this.beginWelcomeAnimation()},beginWelcomeAnimation:function(){n.delay(n.bind(this.$el.removeClass,this.$el,"is-onboard-welcome"),this.constructor.WELCOME_MESSAGE_DURATION)}},{WELCOME_MESSAGE_DURATION:2e3});return r.call(m.prototype),m}),define("home/viewmodels/DiscussionCreateViewModel",["underscore","backbone","home/utils/backboneUtils","home/models/Thread","home/models/Topic","core/UniqueModel","home/collections/TopicCollection"],function(e,t,n,i,a,s,o){"use strict";var r=t.Model.extend({editableThreadAttrs:["title","message"],initialize:function(t,a){this.thread=a.thread||new i({forum:a.forum}),this.thread.forum.shouldFetch()&&this.thread.forum.fetch(),this.topics=new o([],{thread:this.thread}),this.listenTo(this,"change:category",this.updateTopicCategory),n.getPromiseFor(this.thread,"id").then(e.bind(this.onThreadInit,this))},onThreadInit:function(){s.set(i,this.thread),this.set(this.thread.pick(this.editableThreadAttrs)),this.topics.add(this.thread.topics.models),this.initCategory()},initCategory:function(){var e=this.thread.forum.channel,t=e&&e.getCategories();if(t){var n=this.topics.getCategoryTopics();if(!n.length){var s=this.get("title").split(i.CATEGORY_TITLE_SEPARATOR)[0];s&&t[s]&&(n=[a.getOrCreateTopic(s)])}n.length&&(n[0].set({hidden:!0}),this.set({category:n[0].get("displayName")}))}},updateTopicCategory:function(t,n){if(n){var i=this.topics.getCategoryTopics();e.each(i,this.topics.remove,this.topics);var s=a.getOrCreateTopic(n);s.set({hidden:!0}),this.topics.add(s)}},validate:function(t){var n=e.compact([this.thread.validate(e.pick(t,this.editableThreadAttrs)),this.topics.validate()]);return n.length?n:null},toJSON:function(){return e.defaults({thread:this.thread.toJSON()},t.Model.prototype.toJSON.call(this))},saveVisibleTopics:function(){this.topics.save()}});return r}),define("home/viewmodels/ChannelsViewModel",["backbone","core/UniqueModel","home/collections/ChannelCollection","home/models/FollowRecommendationFeed","home/models/Session"],function(e,t,n,i,a){"use strict";var s=e.Model.extend({initialize:function(){var e={fetchOptions:{limit:5}};this.interestingUsers=i.createUserFollowRecommendationFeed(e),this.promotedChannels=new n([],{listName:"promoted"}),this.sessionUserProfile=a.get().userProfile},ensureFetched:function(){this.interestingUsers.ensureFetched(),this.promotedChannels.ensureFetched(),this.sessionUserProfile.ensureFetchedAllChannels()}});return t.addType("ChannelsViewModel",s),s}),define("home/collections/common/SelectiveCollection",["jquery","underscore","backbone"],function(e,t,n){"use strict";var i=n.Collection.extend({initialize:function(t,i){if(t)throw Error("SelectiveCollection should be initialized with undefined models to be allowed to populate itself from a given toSelect collection");if(!(i&&i.toSelect&&i.toSelect instanceof n.Collection))throw Error("SelectiveCollection must be initialized with a toSelect collection");this.toSelect=i.toSelect,this.shouldSelect=i.shouldSelect||this.shouldSelect,this.maxSize=i.maxSize,this.order=i.order||this.order,this.selectComplete=e.Deferred(),this.toSelect.length?this.selectFrom(this.toSelect):this.toSelect.once("sync",this.selectFrom,this)},selectFrom:function(e){if(!e.length)return void this.completeSelection();this.maxSize=t.isNumber(this.maxSize)?this.maxSize:e.length;var n=this.order(e);this.resolveSelectability(n.shift(),n)},resolveSelectability:function(t,n){if(!t)return void this.completeSelection();var i=this;e.when(this.shouldSelect(t)).then(function(e){e&&i.select(t),i.maxSize>i.length?i.resolveSelectability(n.shift(),n):i.completeSelection()})},isComplete:function(){return this.selectComplete.promise()},completeSelection:function(){this.selectComplete.resolve()},select:function(e){return this.length>=this.maxSize?void this.completeSelection():void this.add(e)},shouldSelect:function(){return!0},order:function(e){return e.toArray()}});return i}),define("home/viewmodels/DiscussionViewModel",["underscore","backbone","core/UniqueModel","home/collections/common/SelectiveCollection","home/models/ChannelProfile","home/models/ChannelProfileFeed"],function(e,t,n,i,a,s){"use strict";var o={},r=t.Model,l=r.prototype,c=r.extend({initialize:function(e,t){this.thread=t.thread,this.channel=t.channel||this.thread.forum.channel,!this.channel&&this.thread.shouldFetch()&&this.listenToOnce(this.thread,"sync",function(){this.channel=this.thread.forum.channel,this.trigger("changeRelated:channel")}),this.channels=new n(s,{listName:s.LIST_NAMES.promoted}),this.buildRelatedCollections()},buildRelatedCollections:function(){if(this.channel){var e=new n(a,{id:this.channel.id,channel:this.channel});e.ensureFetchedTopActivities();var t=e.topActivities.get("items"),s=this;this.coverRelatedCollection=new i(void 0,{toSelect:t,maxSize:5,shouldSelect:function(e){return e.thread!==s.thread},order:function(e){return e.shuffle()}})}},isKnownToBeNetworkThread:function(){return this.thread.has("isUserGenerated")&&!this.thread.get("isUserGenerated")},ensureFetched:function(){this.channels.ensureFetched(),this.ensureFetchedChannel()},ensureFetchedChannel:function(){this.channel?this.channel.ensureFetchedWithCounters():this.listenTo(this,"changeRelated:channel",this.ensureFetchedChannel)},toJSON:function(t){return e.defaults({thread:this.thread.toJSON()},l.toJSON.call(this,t))}},{getOrCreate:function(e,t){var n=t&&t.thread,i=n&&o[n.cid];if(i)return i;var a=new c(e,t);return n&&(o[n.cid]=a),a.ensureFetched(),a}});return c}),define("home/models/TopicFeed",["home/collections/FeedItemCollection","core/UniqueModel","home/models/Feed"],function(e,t,n){"use strict";var i=n.extend({initialize:function(){n.prototype.initialize.call(this,{},{collectionClass:e,collectionOptions:{type:"profile",target:"topic:"+this.id}})},shouldFetch:function(){return!this.get("items").length},fetch:function(e){this.get("items").length||this.fetchItems(e)},parse:function(e){return e.response}});return t.addType("TopicFeed",i),i}),define("home/collections/MostLikedUserCollection",["underscore","core/api","core/collections/PaginatedCollection","core/UniqueModel","home/models/User"],function(e,t,n,i,a){"use strict";return n.extend({initialize:function(e,t){this.forum=t.forum},model:i.boundModel(a),url:t.getURL("forums/listMostLikedUsers"),fetch:function(t){return t=t||{},t.data=e.defaults({forum:this.forum,limit:20},t.data),n.prototype.fetch.call(this,t)},parse:function(){var t=n.prototype.parse.apply(this,arguments);return e.each(t,function(e){
e.verb="topcommenter"}),e.filter(t,function(e){return parseFloat(e.rep)>.7?e:void 0})}})}),define("home/models/ForumFeed",["home/collections/FeedItemCollection","core/UniqueModel","home/models/Feed"],function(e,t,n){"use strict";var i=n.extend({initialize:function(){n.prototype.initialize.call(this,{},{collectionClass:e,collectionOptions:{type:"profile",target:"forum:"+this.id}})},shouldFetch:function(){return!this.get("items").length&&!this.get("fetching")},fetch:function(e){this.get("items").length||this.get("fetching")||this.fetchItems(e)},parse:function(e){return e.response}});return t.addType("ForumFeed",i),i}),define("home/models/ForumProfile",["underscore","backbone","core/UniqueModel","home/collections/MostLikedUserCollection","home/models/Feed","home/models/FollowRecommendationFeed","home/models/Forum","home/models/ForumFeed"],function(e,t,n,i,a,s,o,r){"use strict";var l=t.Model.extend({initialize:function(t,l){this.initializeRelated("forum",e.defaults({forum:{id:this.id}},l),o),this.recent=new n(r,{id:this.id});var c={forum:this.id};this.mostLikedUsers=new a({fetchOptions:c},{collectionClass:i}),this.interestingForums=s.createForumFollowRecommendationFeed(),this.interestingUsers=s.createUserFollowRecommendationFeed()},ensureFetched:function(){this.interestingForums.ensureFetched(),this.interestingUsers.ensureFetched()},toJSON:function(){return e.defaults({forum:this.forum.toJSON(),recent:this.recent.toJSON(),mostLikedUsers:this.mostLikedUsers.toJSON()},t.Model.prototype.toJSON.call(this))}});return n.addType("ForumProfile",l),l}),define("home/models/ActivityFeed",["underscore","home/models/Feed","home/collections/FeedItemCollection"],function(e,t,n){"use strict";var i=t.extend({initialize:function(i,a){t.prototype.initialize.call(this,i,e.extend({collectionClass:n},a))}});return i}),define("home/models/HomepageProfile",["jquery","underscore","backbone","core/UniqueModel","core/strings","core/config","home/models/Session","home/models/Feed","home/models/ChannelProfile","home/models/ChannelProfileFeed","home/models/FollowRecommendationFeed","home/models/ActivityFeed","home/collections/FeedItemCollection"],function(e,t,n,i,a,s,o,r,l,c,d,u,h){"use strict";var m=a.get,p=n.Model.extend({initialize:function(){var e={routingVersion:s.feedApiVersion};this.popular=new u({fetchOptions:e},{collectionOptions:{type:"home"}}),this.comments=new r({fetchOptions:e},{collectionClass:h,collectionOptions:{type:"comments"}}),this.discussions=new u({fetchOptions:e},{collectionOptions:{type:"discussions"}}),this.interestingChannels=new i(c,{listName:c.LIST_NAMES.promoted}),this.interestingUsers=d.createUserFollowRecommendationFeed(),this.spotlightProfile=new i(l,{id:this.constructor.SPOTLIGHT_ID,channel:this.constructor.SPOTLIGHT_ID},{topActivitiesOptions:{fetchOptions:{limit:3}}})},ensureFetchedSpotlightProfile:function(){this.spotlightProfile.ensureFetchedTopActivities()},ensureFetched:function(){o.isKnownToBeLoggedOut()?(this.comments.set({fetched:!0}),this.comments.fetchPromise=e.Deferred().resolve().promise(),this.popular.set({fetched:!0}),this.discussions.set({fetched:!0}),this.ensureFetchedSpotlightProfile()):(this.popular.ensureFetched().always(t.bind(function(){this.popular.items.length||this.ensureFetchedSpotlightProfile()},this)),this.comments.ensureFetched(),this.discussions.ensureFetched()),this.commentsPromise=this.comments.fetchPromise,this.interestingUsers.ensureFetched(),this.interestingChannels.ensureFetched()},initializeAndFetchInterestingForums:function(){this.interestingForums||(this.interestingForums=d.createForumFollowRecommendationFeed()),this.interestingForums.ensureFetched()}},{SPOTLIGHT_ID:"spotlight",MAX_SPOTLIGHT_ITEMS:{NUM:3,TEXT:m("3")}});return i.addType("HomepageProfile",p),p}),define("home/models/ExploreViewModel",["backbone","core/api","core/collections/ChannelCollection","home/models/Feed","home/collections/PaginatedUserCollection"],function(e,t,n,i,a){"use strict";var s=e.Model.extend({initialize:function(){this.exploreChannelCollection=new n([],{listName:"explore"}),this.allStars=new i({},{collectionClass:a,collectionUrl:t.getURL("internal/users/listPowerContributors")})}});return s}),define("home/backbone.overrides",["underscore","backbone","core/api","core/UniqueModel"],function(e,t,n,i){"use strict";t.ajax=e.wrap(t.ajax,function(e,t){return t.traditional=!0,/(?:disqus\.com|dev.disqus.org[^\/]*)\/api/.test(t.url)?n.call(t.url,t):e(t)}),t.Model.prototype.initializeRelated=function(t,n,a){var s=n&&n[t]||this.get(t);if(!s)throw Error("missing the id, attributes, or model for related model "+t);if(e.isString(s)||e.isNumber(s)){var o=s;s={},s[a.prototype.idAttribute||"id"]=o}s instanceof a||(s=new i(a,s,n)),this.unset(t),this[t]=s}}),define("home/overrides/marionette.overrides",["backbone-marionette"],function(e){"use strict";e.CompositeView.prototype.rerenderModel=function(){var e=this.$(this.itemViewContainer).detach();this.$el.html(this.renderModel()),this.$(this.itemViewContainer).replaceWith(e),this.triggerMethod("render",this)}}),define("Router",["underscore","jquery","modernizr","backbone","backbone-marionette","home/templates/preload","home/views/MainLayout","home/views/HomepageView","home/views/AnonHomepageView","home/views/ActivityFeedView","home/views/NotificationsView","home/views/NotificationsLoggedOutView","home/views/ForumProfileView","home/views/TopicCoverView","home/views/ProfileView","home/views/DiscussionCreateView","home/views/DiscussionPageView","home/views/WelcomeView","home/views/SearchPageLayout","home/views/ChannelProfileView","home/views/SettingsLayout","home/views/ChannelsView","home/views/ExploreView","home/views/OnboardingView","home/viewmodels/DiscussionCreateViewModel","home/viewmodels/ChannelsViewModel","home/viewmodels/DiscussionViewModel","home/collections/common/ExtensibleCollection","home/collections/ChannelCollection","home/models/Session","core/UniqueModel","home/models/UserProfile","home/models/TopicFeed","home/models/Thread","home/models/Forum","home/models/Channel","home/models/ChannelProfile","home/models/ForumProfile","home/models/HomepageProfile","home/models/ExploreViewModel","home/utils/navigationUtils","home/utils/trackingUtils","core/utils/releaseUtils","core/utils/url/parseQueryString","core/api","core/engagement/page","core/strings","remote/config","core/config/urls","home/backbone.overrides","home/overrides/marionette.overrides","disqus.sdk"],function(e,t,n,i,a,s,o,r,l,c,d,u,h,m,p,f,g,v,b,w,x,y,_,k,C,T,S,E,F,P,M,A,D,V,R,N,O,I,U,L,q,H,j,$,z,B,W,G,Y){"use strict";var J=n.localstorage,K=function(e){(new window.Image).src=Y.jester+"/stat.gif?event="+e},X=W.get,Q=i.Router.extend({name:"home",routes:{"home/discuss/:forum(/)":"startDiscussion","home/edit/:forum/:thread(/)":"editDiscussion","home/search(/)":"search","home/user(s)(/:username)(/:feed)(/)":"profile","home/user(s)/(:username)(/:feed)(/:subfeed)(/)":"profile","by/:username(/:feed)(/)":"profile","by/:username(/:feed)(/:subfeed)(/)":"profile","home/inbox(/:feed)(/)":"inbox","home/preload(/)":"preload","home/account(/)":"account","home/notifications(/)":"notifications","home/topic(s)/:topicId(/)":"topics","home/forum(s)/:forumId(/:feed)(/)":"forums","home/discussion(s)/:forum/:thread(/:activeTab)(/:permalink)(/)":"discussion","home/ndiscussion(s)/:forum/:thread(/:activeTab)(/:permalink)(/)":"nativeDiscussion","home/follow/channel(s)/:channelId(/)":"followChannel","home/channel(s)(/)":"channelsPage","home/channel(s)/:channelId(/:feed)(/)":"channels","home/channel(s)/:channelId/topics/:topic(/)":"channelTopics","home/channel(s)/:channelId/discussion(s)/:forumId/:thread(/:activeTab)(/:permalink)(/)":"channelDiscussion","home/channel(s)/:channelId/ndiscussion(s)/:forumId/:thread(/:activeTab)(/:permalink)(/)":"nativeChannelDiscussion","home/settings(/:section)/":"settings","home/discover(/)":"channelsPage","home/explore(/)":"explore","home/explore/:activeTab(/)":"explore","home/explore/channels/:channelId(/:activeTab)(/)":"exploreChannel","home/explore/discussions/:channelId(/)":"exploreDiscussions","home(/:feed)(/)":"home"},initialize:function(e){this.CDN_ROOT=e.CDN_ROOT,this.feeds={},this.listenTo(this,"route",this.handleRouteChange),this.listenTo(this,"route",this.logRouteChange),this.messages=[]},bootstrap:function(){this.initSession(),this.initTracking(),this.initPageEngagementTracking(),this.initLinkHandling(),this.initMainLayout()},initTracking:function(){H.init(),H.trackVisit()},initLinkHandling:function(){t("body").on("click","a[href]",e.bind(q.handleLinkClicks,q))},initSession:function(){var t=this.session=P.get();return t.load(),t.loadPromise().then(e.bind(function(){window.Raven&&window.Raven.setUser({id:t.user.get("id"),username:t.user.get("username")}),this.loadModeratedForums()},this)),t.loadPromise().fail(function(){var e=t.provider();e&&K("home.session.rejected."+("disqus"===e?"disqus":"remote"))}),this.initUserProfile(),t},initMainLayout:function(){this.layout=new o({container:"body",session:this.session,app:this})},getCurrentView:function(){return this.layout.content.currentView},initPageEngagementTracking:function(){B.start()},loadModeratedForums:function(){this.session.loadModeratedForums()},logRouteChange:function(e){K(this.name+".route."+e)},initUserProfile:function(){var e=P.fromCookie().username;e?this.session.initUserProfile(e):this.session.once("change:id",function(e){this.session.initUserProfile(e.get("username"))},this)},execute:function(){z.off("error",q.navigateToLoginOnAuthFail),H.pageChanged(),i.Router.prototype.execute.apply(this,arguments)},ensureAuthenticated:function(t){return z.off("error",q.navigateToLoginOnAuthFail),P.isKnownToBeLoggedOut()?q.navigateToLogin():(z.on("error",q.navigateToLoginOnAuthFail),void this.session.loadPromise().then(e.bind(t,this,e.tail(arguments)),q.navigateToLogin))},ensureOnboardingComplete:function(t){return P.isKnownToBeLoggedOut()?t.apply(this):void this.session.loadPromise().always(e.bind(function(){this.session.isLoggedIn()&&this.session.user.shouldHomeOnboard()?e.defer(this.navigateToOnboarding):t.apply(this)},this))},navigateToOnboarding:function(){var n="home/explore/",i=$(),a={};i.email_verified&&(a.email_verified=i.email_verified),i.forum_id&&(a.forum_id=i.forum_id),e.size(a)&&(n+="?"+t.param(a)),q.navigate(n,{trigger:!0,replace:!0})},ensureCanCreateOnChannel:function(t,n){var i=new M(R,{id:n});return i.shouldFetch()?(i.fetch(),void this.listenToOnce(i,"sync",e.bind.apply(e,[this.ensureCanCreateOnChannel,this].concat(e.toArray(arguments))))):!i.channel&&"gabalafou-test"!==n||!i.channel.userCanCreate(this.session.user)?this.notFound():void t.apply(this,e.tail(arguments))},ensureTab:function(e,t){e.listenTo(e,"badTab",function(){q.navigate(t,{silent:!0,replace:!0})})},preventBlacklisted:function(t){e.contains(G.timelines.BLACKLISTED_FORUMS,t.forum)&&(window.top.location="https://help.disqus.com/customer/portal/articles/1689402-redirected-from-home")},preload:function(){this.preloadView=new(a.ItemView.extend({template:s})),this.layout.showView(this.preloadView)},handleRouteChange:function(e){this.setCurrentRouteName(e),q.coerceTrailingSlash(window.location)},setCurrentRouteName:function(e){this._previousRouteName=this.getCurrentRouteName(),this._currentRouteName=e},getCurrentRouteName:function(){return this._currentRouteName},getPreviousRouteName:function(){return this._previousRouteName},onboarding:function(){return this.ensureAuthenticated(function(){this.layout.showView(new v({session:this.session}),{lightBackground:!0})})},_explore:function(e){this.session.loadPromise().always(Function.bind.call(function(){var t=this.session.isLoggedIn()&&this.session.user.shouldHomeOnboard();t?(e.collection=new F([],{listName:"explore"}),this.layout.showView(new k(e))):(e.model=new L,this.layout.showView(new _(e)))},this))},explore:function(e){return this._explore({activeTab:e})},exploreChannel:function(e,t){return this._explore({activeTab:"channels",channelId:e,channelFeed:t})},exploreDiscussions:function(e){return this._explore({activeTab:"discussions",channelId:e})},renavigateToProfile:function(e){var t=e.get("username");return t?(q.navigate("/by/"+t+"/",{replace:!0}),void this.profile(t)):(q.navigate("/home/",{replace:!0}),void this.home())},settings:function(e){return this.ensureAuthenticated(function(){this.layout.showView(new x({session:this.session,activeTab:e}))})},channelsPage:function(){return P.isKnownToBeLoggedOut()?(q.navigate("/",{replace:!0}),this.home()):void this.ensureOnboardingComplete(function(){var e=new M(T,{id:"discover-view-model"});e.ensureFetched(),this.layout.showView(new y({model:e}))})},search:function(){this.layout.showView(new b({session:this.session}))},profile:function(t,n,i){if(-1!==window.location.pathname.indexOf("home/user")&&q.navigate(window.location,{replace:!0,silent:!0}),!t)return this.ensureAuthenticated(function(){var e=this.session,t=e.user;return t.get("username")?void this.renavigateToProfile(t):void this.listenToOnce(e,"change:id",this.renavigateToProfile)});var a=e.find(M.pool(A),function(e){return e.user.get("username")===t});a||(a=new M(A,{username:t})),a.ensureFetched();var s=new p({model:a,activeTab:n,subTab:i});this.ensureTab(s,"/by/"+t+"/"),this.layout.showView(s)},home:function(t,n){var i=P.isKnownToBeLoggedOut();return i?void($().email_verified?q.navigateToLogin():q.navigateToHomepage()):void this.ensureOnboardingComplete(function(){"/home/"===window.location.pathname&&q.navigate(window.location,{replace:!0,silent:!0});var a,s;if(i){var o=new F([],{listName:"explore"});o.ensureFetched(),s=new l({collection:o}),this.layout.showView(s,{lightBackground:!0})}else a=new M(U,{id:"home-view-model"}),a.ensureFetched(),s=new r({model:a,activeTab:t}),this.ensureTab(s,"/"),this.layout.showView(s);e.isFunction(n)&&n(),this.cleanLocalStorage()})},cleanLocalStorage:function(){if(J)try{window.localStorage.removeItem("dhome_v2oo"),window.localStorage.removeItem("whatsNewViewsRemaining"),window.localStorage.removeItem("v2SwitchoverViewsRemaining")}catch(e){}},account:function(){return q.navigate("/home/settings/account/",{trigger:!0,replace:!0})},notifications:function(){return q.navigate("/home/settings/email/",{trigger:!0,replace:!0})},ensureAdmin:function(t,n){var i=this.session;return i.fetched?j.isDisqusAdmin(i.user)?t.apply(this,n):this.notFound():void i.fetch().then(e.bind(this.ensureAdmin,this,t,n),e.bind(this.notFound,this))},followChannel:function(e){return"disqusfun"===e?this.ensureAdmin(this._followChannel,arguments):this._followChannel.apply(this,arguments)},_followChannel:function(e){this.ensureAuthenticated(function(){var t=new M(N,{slug:e});t.primaryForum&&!t.primaryForum.get("isFollowing")?t.primaryForum.follow():this.listenToOnce(t,"changeRelated:primaryForum",function(){t.primaryForum.get("isFollowing")||t.primaryForum.follow()}),q.navigate("/home/channel/"+e+"/",{trigger:!0,replace:!0})})},channels:function(e){return"disqusfun"===e||"gabalafou-test"===e?this.ensureAdmin(this._channels,arguments):this._channels.apply(this,arguments)},channelTopics:function(e,t){return this.channels(e,"topic-"+t)},_channels:function(e,t){var n=new M(O,{id:e,channel:e});n.ensureFetched();var i=new w({model:n,activeTab:t});this.ensureTab(i,"home/channel/"+e+"/"),this.layout.showView(i)},_forums:function(e,t){var n=new M(I,{id:e}),i=n.forum,a=this;if(i.channel)return void q.navigate("/home/channel/"+i.channel.id+"/",{trigger:!0,replace:!0});i.fetch().then(function(){i.channel&&a._forums(e)},this.notFound),n.ensureFetched();var s=new h({model:n,activeTab:t});this.ensureTab(s,"/home/forum/"+e+"/"),this.layout.showView(s)},forums:function(e){return this.preventBlacklisted({forum:e}),"disqus-disqusfun"===e?this.ensureAdmin(this._forums,arguments):this._forums.apply(this,arguments)},topics:function(e){var t=new M(D,{id:e});t.shouldFetch()&&t.fetch();var n=new c({coverView:m,model:t,collection:t.get("items")});this.layout.showView(n)},inbox:function(e){var t,n=this.session.getOrCreateNotifications();if(n.ensureFetchedRecommendations(),!this.isSSOAuthenticated&&P.isKnownToBeLoggedOut())t=new u({model:n});else{if(window.location.search.indexOf("email_verified")>-1){var i=W.interpolate(X("Your email's verified! Have a look around -- %(Disqus)s is a lot more than comments"),{Disqus:"Disqus"});this.messages.push({message:i})}t=new d({model:n,activeTab:e,disableMOTD:this.disableMOTD})}this.ensureTab(t,"/home/inbox/"),this.layout.showView(t)},_showDiscussionForm:function(t,n){var i=new f({session:this.session,model:new C({},e.extend({forum:t},n))});this.listenTo(i,"createThread",function(){var e=i.getThread();(new E).add(e),q.navigate(e.getDiscussionRoute(),{trigger:!0})}),this.layout.showView(i)},startDiscussion:function(e){return this.ensureAuthenticated(function(){this.ensureCanCreateOnChannel(function(){this._showDiscussionForm.apply(this,arguments)},e)},arguments)},editDiscussion:function(n,i){var a=this.session,s=V.getOrCreateThread(n,i),o=[s.getEditPermissions(a)];return s.shouldFetch()&&o.push(s.fetch()),t.when.apply(t,o).then(e.bind(function(e){return e?this._showDiscussionForm(n,{thread:s}):void q.navigate(s.getDiscussionRoute(),{trigger:!0,replace:!0})},this),e.bind(this.notFound,this))},discussionPage:function(t,n,i,a){a=a||{};var s=V.getOrCreateThread(t,n,a.threadFetchOptions),o=S.getOrCreate({},{channel:a.channel,thread:s}),r=new g(e.extend({model:o,session:this.session,activeTab:i,app:this},a));this.layout.showView(r,{lightBackground:!0})},_discussion:function(e,t,n,i){return this.preventBlacklisted({forum:e}),"disqus-disqusfun"===e?this.ensureAdmin(this.discussionPage,[e,t,n,i]):this.discussionPage(e,t,n,i)},discussion:function(e,t,n){return this._discussion(e,t,n)},channelDiscussion:function(e,t,n,i,a){a=a||{};var s=new M(N,{slug:e});return s.shouldFetch()&&s.fetch(),this._discussion(t,n,i,{channel:s,threadFetchOptions:{data:{related:["author"]}},noEmbed:a.noEmbed})},nativeDiscussion:function(e,t,n){return this._discussion(e,t,n,{noEmbed:!0})},nativeChannelDiscussion:function(e,t,n,i){return this.channelDiscussion(e,t,n,i,{noEmbed:!0})},notFound:q.notFoundRouteHandler});return Q}),define("home/mixins/asEmbedApp",["jquery","underscore","core/api","core/frameBus","core/bus","core/utils","home/utils/navigationUtils"],function(e,t,n,i,a,s,o){"use strict";var r,l={initialize:function(n){r=e.Deferred(),this.name="embed_sidebar",this.mainLayoutIsRendered=e.Deferred(),this.listenTo(i,"mainlayoutRendered",this.mainLayoutIsRendered.resolve),this.listenTo(a,"after:render",function(){i.sendHostMessage("after:render")}),n.apply(this,t.rest(arguments)),this.listenTo(i,"showPath",this.loadPath),this.listenTo(i,"open",this.openDrawer),i.sendHostMessage("ready")},initUserProfile:function(e){r.done(e)},loadModeratedForums:e.noop,setSsoHeaders:function(e){n.headers({"X-Disqus-Publisher-API-Key":e.apiKey,"X-Disqus-Remote-Auth":e.remoteAuthS3})},loadPath:function(e){e.sso&&e.sso.apiKey&&e.sso.remoteAuthS3&&(this.setSsoHeaders(e.sso),this.isSSOAuthenticated=!0),r.resolveWith(this),this.disableMOTD=e.disableMOTD,this.mainLayoutIsRendered.done(function(){o.navigate(e.path,{trigger:!0}),i.sendHostMessage("openReady")})},openDrawer:function(){var t=e("body");t.addClass("active"),t.one(s.transitionEndEvent,function(){i.sendHostMessage("after:render")})}},c={initialize:function(e){this.listenToOnce(i,"setForum",function(e){this.forum={shortname:e}}),e.apply(this,t.rest(arguments))},fetch:function(e,n){return r.then(t.bind(e,this,n))},fetchFollowedForums:e.noop,fetchFollowedChannels:e.noop},d=function(e,n){e.initialize=t.wrap(e.initialize,l.initialize),e.initUserProfile=t.wrap(e.initUserProfile,l.initUserProfile),e.loadModeratedForums=l.loadModeratedForums,e.setSsoHeaders=l.setSsoHeaders,e.loadPath=l.loadPath,e.openDrawer=l.openDrawer,e.navigateToPath=l.navigateToPath,e.isSSOAuthenticated=l.isSSOAuthenticated,n.initialize=t.wrap(n.initialize,c.initialize),n.fetch=t.wrap(n.fetch,c.fetch),n.fetchFollowedForums=c.fetchFollowedForums,n.fetchFollowedChannels=c.fetchFollowedChannels};return d}),+function(e){"use strict";function t(t){e(i).remove(),e(a).each(function(){var i=n(e(this)),a={relatedTarget:this};i.hasClass("open")&&(i.trigger(t=e.Event("hide.bs.dropdown",a)),t.isDefaultPrevented()||i.removeClass("open").trigger("hidden.bs.dropdown",a))})}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&e(n);return i&&i.length?i:t.parent()}var i=".dropdown-backdrop",a="[data-toggle=dropdown]",s=function(t){e(t).on("click.bs.dropdown",this.toggle)};s.prototype.toggle=function(i){var a=e(this);if(!a.is(".disabled, :disabled")){var s=n(a),o=s.hasClass("open");if(t(),!o){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var r={relatedTarget:this};if(s.trigger(i=e.Event("show.bs.dropdown",r)),i.isDefaultPrevented())return;s.toggleClass("open").trigger("shown.bs.dropdown",r),a.focus()}return!1}},s.prototype.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var i=e(this);if(t.preventDefault(),t.stopPropagation(),!i.is(".disabled, :disabled")){var s=n(i),o=s.hasClass("open");if(!o||o&&27==t.keyCode)return 27==t.which&&s.find(a).focus(),i.click();var r=" li:not(.divider):visible a",l=s.find("[role=menu]"+r+", [role=listbox]"+r);if(l.length){var c=l.index(l.filter(":focus"));38==t.keyCode&&c>0&&c--,40==t.keyCode&&l.length-1>c&&c++,~c||(c=0),l.eq(c).focus()}}}};var o=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new s(this)),"string"==typeof t&&i[t].call(n)})},e.fn.dropdown.Constructor=s,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",a,s.prototype.toggle).on("keydown.bs.dropdown.data-api",a+", [role=menu], [role=listbox]",s.prototype.keydown)}(jQuery),define("bootstrap/dropdown",["jquery"],function(){}),+function(e){"use strict";var t=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.prototype.init=function(t,n,i){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(i);for(var a=this.options.trigger.split(" "),s=a.length;s--;){var o=a[s];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var r="hover"==o?"mouseenter":"focusin",l="hover"==o?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,i){n[e]!=i&&(t[e]=i)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show()},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},t.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(t),t.isDefaultPrevented())return;var n=this,i=this.tip();this.setContent(),this.options.animation&&i.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,o=s.test(a);o&&(a=a.replace(s,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(a),this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);var r=this.getPosition(),l=i[0].offsetWidth,c=i[0].offsetHeight;if(o){var d=this.$element.parent(),u=a,h=document.documentElement.scrollTop||document.body.scrollTop,m="body"==this.options.container?window.innerWidth:d.outerWidth(),p="body"==this.options.container?window.innerHeight:d.outerHeight(),f="body"==this.options.container?0:d.offset().left;a="bottom"==a&&r.top+r.height+c-h>p?"top":"top"==a&&0>r.top-h-c?"bottom":"right"==a&&r.right+l>m?"left":"left"==a&&f>r.left-l?"right":a,i.removeClass(u).addClass(a)}var g=this.getCalculatedOffset(a,r,l,c);this.applyPlacement(g,a),this.hoverState=null;var v=function(){n.$element.trigger("shown.bs."+n.type)};e.support.transition&&this.$tip.hasClass("fade")?i.one(e.support.transition.end,v).emulateTransitionEnd(150):v()}},t.prototype.applyPlacement=function(t,n){var i,a=this.tip(),s=a[0].offsetWidth,o=a[0].offsetHeight,r=parseInt(a.css("margin-top"),10),l=parseInt(a.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(l)&&(l=0),t.top=t.top+r,t.left=t.left+l,e.offset.setOffset(a[0],e.extend({using:function(e){a.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),a.addClass("in");var c=a[0].offsetWidth,d=a[0].offsetHeight;if("top"==n&&d!=o&&(i=!0,t.top=t.top+o-d),/bottom|top/.test(n)){var u=0;0>t.left&&(u=-2*t.left,t.left=0,a.offset(t),c=a[0].offsetWidth,d=a[0].offsetHeight),this.replaceArrow(u-s+c,c,"left")}else this.replaceArrow(d-o,d,"top");i&&a.offset(t)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(){function t(){"in"!=n.hoverState&&i.detach(),n.$element.trigger("hidden.bs."+n.type)}var n=this,i=this.tip(),a=e.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?i.one(e.support.transition.end,t).emulateTransitionEnd(150):t(),this.hoverState=null,this)},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},t.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-n}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},t.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},t.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=t?e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var i=e(this),a=i.data("bs.tooltip"),s="object"==typeof n&&n;(a||"destroy"!=n)&&(a||i.data("bs.tooltip",a=new t(this,s)),"string"==typeof n&&a[n]())})},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(jQuery),define("bootstrap/tooltip",["jquery"],function(){}),+function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this[this.isShown?"hide":"show"](e)},t.prototype.show=function(t){var n=this,i=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var i=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show().scrollTop(0),n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var a=e.Event("shown.bs.modal",{relatedTarget:t});i?n.$element.find(".modal-dialog").one(e.support.transition.end,function(){n.$element.focus().trigger(a)}).emulateTransitionEnd(300):n.$element.focus().trigger(a)}))},t.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one(e.support.transition.end,e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.focus()},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&n;if(this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()):t&&t()};var n=e.fn.modal;e.fn.modal=function(n,i){return this.each(function(){var a=e(this),s=a.data("bs.modal"),o=e.extend({},t.DEFAULTS,a.data(),"object"==typeof n&&n);
s||a.data("bs.modal",s=new t(this,o)),"string"==typeof n?s[n](i):o.show&&s.show(i)})},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),i=n.attr("href"),a=e(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),s=a.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},a.data(),n.data());n.is("a")&&t.preventDefault(),a.modal(s,this).one("hide",function(){n.is(":visible")&&n.focus()})}),e(document).on("show.bs.modal",".modal",function(){e(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){e(document.body).removeClass("modal-open")})}(jQuery),define("bootstrap/modal",["jquery"],function(){}),+function(e){"use strict";var t=function(n,i){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,i),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},t.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t=e.Event("show.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var i=n.data("bs.collapse");if(i&&i.transitioning)return;n.collapse("hide"),i||n.data("bs.collapse",null)}var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var o=e.camelCase(["scroll",a].join("-"));this.$element.one(e.support.transition.end,e.proxy(s,this)).emulateTransitionEnd(350)[a](this.$element[0][o])}}},t.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return e.support.transition?void this.$element[n](0).one(e.support.transition.end,e.proxy(i,this)).emulateTransitionEnd(350):i.call(this)}}},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var i=e(this),a=i.data("bs.collapse"),s=e.extend({},t.DEFAULTS,i.data(),"object"==typeof n&&n);!a&&s.toggle&&"show"==n&&(n=!n),a||i.data("bs.collapse",a=new t(this,s)),"string"==typeof n&&a[n]()})},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(t){var n,i=e(this),a=i.attr("data-target")||t.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),s=e(a),o=s.data("bs.collapse"),r=o?"toggle":i.data(),l=i.attr("data-parent"),c=l&&e(l);o&&o.transitioning||(c&&c.find('[data-toggle=collapse][data-parent="'+l+'"]').not(i).addClass("collapsed"),i[s.hasClass("in")?"addClass":"removeClass"]("collapsed")),s.collapse(r)})}(jQuery),define("bootstrap/collapse",["jquery"],function(){}),function(e){function t(t){this.$element=e(t),this.original_text=this.$element.html(),this.settings=e.extend({},e.fn.trunk8.defaults)}function n(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText}function i(e){if(n(e)===e)return e.split(/\s/g);for(var t,a,s=[],o=/<([a-z]+)([^<]*)(?:>(.*?(?!<\1>)*)<\/\1>|\s+\/>)(['.?!,]*)|((?:[^<>\s])+['.?!,]*\w?|<br\s?\/?>)/gi,r=o.exec(e);r&&t!==o.lastIndex;)t=o.lastIndex,r[5]?s.push(r[5]):r[1]&&s.push({tag:r[1],attribs:r[2],content:r[3],after:r[4]}),r=o.exec(e);for(a=0;s.length>a;a++)"string"!=typeof s[a]&&s[a].content&&(s[a].content=i(s[a].content));return s}function a(t,n,i){t=t.replace(i,"");var a=function(n,s){var o,r,l,c,d="";for(c=0;n.length>c;c++)o=n[c],l=e.trim(t).split(" ").length,e.trim(t).length&&("string"==typeof o?(/<br\s*\/?>/.test(o)||(1===l&&e.trim(t).length<=o.length?(o=t,("p"===s||"div"===s)&&(o+=i),t=""):t=t.replace(o,"")),d+=e.trim(o)+(c===n.length-1||1>=l?"":" ")):(r=a(o.content,o.tag),o.after&&(t=t.replace(o.after,"")),r&&(o.after||(o.after=" "),d+="<"+o.tag+o.attribs+">"+r+"</"+o.tag+">"+o.after)));return d},s=a(n);return s.slice(s.length-i.length)===i&&(s+=i),s}function s(){var t,s,o,l,d,u,h=this.data("trunk8"),m=h.settings,p=m.width,f=m.side,g=m.fill,v=m.parseHTML,b=r.getLineHeight(this)*m.lines,w=h.original_text,x=w.length,y="";if(this.html(w),d=this.text(),v&&n(w)!==w&&(u=i(w),w=n(w),x=w.length),p===c.auto){if(this.height()<=b)return;for(t=0,s=x-1;s>=t;)o=t+(s-t>>1),l=r.eatStr(w,f,x-o,g),v&&u&&(l=a(l,u,g)),this.html(l),this.height()>b?s=o-1:(t=o+1,y=y.length>l.length?y:l);this.html(""),this.html(y),m.tooltip&&this.attr("title",d)}else isNaN(p)?e.error('Invalid width "'+p+'".'):(o=x-p,l=r.eatStr(w,f,o,g),this.html(l),m.tooltip&&this.attr("title",w))}var o,r,l={center:"center",left:"left",right:"right"},c={auto:"auto"};t.prototype.updateSettings=function(t){this.settings=e.extend(this.settings,t)},o={init:function(n){return this.each(function(){var i=e(this),a=i.data("trunk8");a||i.data("trunk8",a=new t(this)),a.updateSettings(n),s.call(i)})},update:function(t){return this.each(function(){var n=e(this);t&&(n.data("trunk8").original_text=t),s.call(n)})},revert:function(){return this.each(function(){var t=e(this).data("trunk8").original_text;e(this).html(t)})},getSettings:function(){return e(this.get(0)).data("trunk8").settings}},r={eatStr:function(t,n,i,a){var s,o,c=t.length,d=r.eatStr.generateKey.apply(null,arguments);if(r.eatStr.cache[d])return r.eatStr.cache[d];if(("string"!=typeof t||0===c)&&e.error('Invalid source string "'+t+'".'),0>i||i>c)e.error('Invalid bite size "'+i+'".');else if(0===i)return t;switch("string"!=typeof(a+"")&&e.error("Fill unable to be converted to a string."),n){case l.right:return r.eatStr.cache[d]=e.trim(t.substr(0,c-i))+a;case l.left:return r.eatStr.cache[d]=a+e.trim(t.substr(i));case l.center:return s=c>>1,o=i>>1,r.eatStr.cache[d]=e.trim(r.eatStr(t.substr(0,c-s),l.right,i-o,""))+a+e.trim(r.eatStr(t.substr(c-s),l.left,o,""));default:e.error('Invalid side "'+n+'".')}},getLineHeight:function(t){var n=e(t).css("float");"none"!==n&&e(t).css("float","none");var i=e(t).css("position");"absolute"===i&&e(t).css("position","static");var a,s=e(t).html();return e(t).html("i"),a=e(t).parent().innerHeight(),e(t).html(s).css({"float":n,position:i}),a}},r.eatStr.cache={},r.eatStr.generateKey=function(){return Array.prototype.join.call(arguments,"")},e.fn.trunk8=function(t){return o[t]?o[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.trunk8"):o.init.apply(this,arguments)},e.fn.trunk8.defaults={fill:"&hellip;",lines:1,side:l.right,tooltip:!0,width:c.auto,parseHTML:!1}}(jQuery),define("jquery.trunk8",["jquery"],function(){}),define("home/main",["home/config","home/utils/layoutUtils","Router","home/models/Session","core/config/urls","jquery","backbone","home/mixins/asEmbedApp","home/utils/sidebarUtils","home/utils/navigationUtils","bootstrap/dropdown","bootstrap/tooltip","bootstrap/modal","bootstrap/collapse","jquery.trunk8"],function(e,t,n,i,a,s,o,r,l,c){"use strict";function d(){var e=window.location;if(e.hash.length>1&&("/home"===e.pathname||"/home/"===e.pathname)){var t={pathname:"/home/"+e.hash.slice(1).replace(/^\//,""),search:e.search,hash:"",host:e.host};if(c.matchesRoute(t))return c.navigate(t,!0)}return o.history.loadUrl()}var u=function(e){window.IS_DEV?require(["fixtures/fixtures"],e):e()};return{_init:function(i){var a=new n(i);a.bootstrap(),t.isNarrowLayout()&&(s.fn.tooltip=s.noop),window.DISQUS=window.DISQUS||{},window.DISQUS.home={app:a},u(function(){o.history.start({pushState:!0,hashChange:!1,root:e.appRoot,silent:!0}),d()||a.notFound()})},init:function(e){a.cdn=e.CDN_ROOT;var t=this;l.isSidebar()&&r(n.prototype,i.prototype),s(function(){t._init(e)})}}}),!function(e,t){"use strict";function n(e,t){var n,i;t=t||{},e="raven"+e.substr(0,1).toUpperCase()+e.substr(1),document.createEvent?(n=document.createEvent("HTMLEvents"),n.initEvent(e,!0,!0)):(n=document.createEventObject(),n.eventType=e);for(i in t)u(t,i)&&(n[i]=t[i]);if(document.createEvent)document.dispatchEvent(n);else try{document.fireEvent("on"+n.eventType.toLowerCase(),n)}catch(a){}}function i(e){this.name="RavenConfigError",this.message=e}function a(e){var t=K.exec(e),n={},a=7;try{for(;a--;)n[J[a]]=t[a]||""}catch(s){throw new i("Invalid DSN: "+e)}if(n.pass)throw new i("Do not specify your private key in the DSN!");return n}function s(e){return void 0===e}function o(e){return"function"==typeof e}function r(e){return"[object String]"===$.toString.call(e)}function l(e){return"object"==typeof e&&null!==e}function c(e){for(var t in e)return!1;return!0}function d(e){return l(e)&&"[object Error]"===$.toString.call(e)||e instanceof Error}function u(e,t){return $.hasOwnProperty.call(e,t)}function h(e,t){var n,i;if(s(e.length))for(n in e)u(e,n)&&t.call(null,n,e[n]);else if(i=e.length)for(n=0;i>n;n++)t.call(null,n,e[n])}function m(e,t){var i=[];e.stack&&e.stack.length&&h(e.stack,function(e,t){var n=p(t);n&&i.push(n)}),n("handle",{stackInfo:e,options:t}),g(e.name,e.message,e.url,e.lineno,i,t)}function p(e){if(e.url){var t,n={filename:e.url,lineno:e.line,colno:e.column,"function":e.func||"?"},i=f(e);if(i){var a=["pre_context","context_line","post_context"];for(t=3;t--;)n[a[t]]=i[t]}return n.in_app=!(H.includePaths.test&&!H.includePaths.test(n.filename)||/(Raven|TraceKit)\./.test(n["function"])||/raven\.(min\.)?js$/.test(n.filename)),n}}function f(e){if(e.context&&H.fetchContext){for(var t=e.context,n=~~(t.length/2),i=t.length,a=!1;i--;)if(t[i].length>300){a=!0;break}if(a){if(s(e.column))return;return[[],t[n].substr(e.column,50),[]]}return[t.slice(0,n),t[n],t.slice(n+1)]}}function g(e,t,n,i,a,s){var o,r;H.ignoreErrors.test&&H.ignoreErrors.test(t)||(t+="",t=b(t,H.maxMessageLength),r=e+": "+t,r=b(r,H.maxMessageLength),a&&a.length?(n=a[0].filename||n,a.reverse(),o={frames:a}):n&&(o={frames:[{filename:n,lineno:i,in_app:!0}]}),H.ignoreUrls.test&&H.ignoreUrls.test(n)||(!H.whitelistUrls.test||H.whitelistUrls.test(n))&&y(v({exception:{type:e,value:t},stacktrace:o,culprit:n,message:r},s)))}function v(e,t){return t?(h(t,function(t,n){e[t]=n}),e):e}function b(e,t){return t>=e.length?e:e.substr(0,t)+"…"}function w(){return+new Date}function x(){if(document.location&&document.location.href){var e={headers:{"User-Agent":navigator.userAgent}};return e.url=document.location.href,document.referrer&&(e.headers.Referer=document.referrer),e}}function y(e){var t={project:U,logger:H.logger,platform:"javascript"},i=x();i&&(t.request=i),e=v(t,e),e.tags=v(v({},H.tags),e.tags),e.extra=v(v({},H.extra),e.extra),e.extra=v({"session:duration":w()-W},e.extra),c(e.tags)&&delete e.tags,O&&(e.user=O),H.release&&(e.release=H.release),o(H.dataCallback)&&(e=H.dataCallback(e)||e),e&&!c(e)&&(!o(H.shouldSendCallback)||H.shouldSendCallback(e))&&(R=e.event_id||(e.event_id=S()),E("debug","Raven about to send:",e),C()&&(H.transport||_)({url:N,auth:{sentry_version:"4",sentry_client:"raven-js/"+Y.VERSION,sentry_key:I},data:e,options:H,onSuccess:function(){n("success",{data:e,src:N})},onError:function(){n("failure",{data:e,src:N})}}))}function _(e){e.auth.sentry_data=JSON.stringify(e.data);var t=k(),n=e.url+"?"+P(e.auth);(e.options.crossOrigin||""===e.options.crossOrigin)&&(t.crossOrigin=e.options.crossOrigin),t.onload=e.onSuccess,t.onerror=t.onabort=e.onError,t.src=n}function k(){return document.createElement("img")}function C(){return q?N?!0:(X||E("error","Error: Raven has not been configured."),X=!0,!1):!1}function T(e){for(var t,n=[],i=0,a=e.length;a>i;i++)t=e[i],r(t)?n.push(t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):t&&t.source&&n.push(t.source);return RegExp(n.join("|"),"i")}function S(){var t=e.crypto||e.msCrypto;if(!s(t)&&t.getRandomValues){var n=new Uint16Array(8);t.getRandomValues(n),n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;var i=function(e){for(var t=e.toString(16);4>t.length;)t="0"+t;return t};return i(n[0])+i(n[1])+i(n[2])+i(n[3])+i(n[4])+i(n[5])+i(n[6])+i(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})}function E(e){B[e]&&Y.debug&&B[e].apply(z,A.call(arguments,1))}function F(){var t=e.RavenConfig;t&&Y.config(t.dsn,t.config).install()}function P(e){var t=[];return h(e,function(e,n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}),t.join("&")}var M={remoteFetching:!1,collectWindowErrors:!0,linesOfContext:7,debug:!1},A=[].slice,D="?";M.wrap=function(e){function t(){try{return e.apply(this,arguments)}catch(t){throw M.report(t),t}}return t},M.report=function(){function n(e){r(),p.push(e)}function i(e){for(var t=p.length-1;t>=0;--t)p[t]===e&&p.splice(t,1)}function a(){l(),p=[]}function s(e,t){var n=null;if(!t||M.collectWindowErrors){for(var i in p)if(u(p,i))try{p[i].apply(null,[e].concat(A.call(arguments,2)))}catch(a){n=a}if(n)throw n}}function o(e,t,n,i,a){var o=null;if(v)M.computeStackTrace.augmentStackTraceWithInitialElement(v,t,n,e),c();else if(a)o=M.computeStackTrace(a),s(o,!0);else{var r={url:t,line:n,column:i};r.func=M.computeStackTrace.guessFunctionName(r.url,r.line),r.context=M.computeStackTrace.gatherContext(r.url,r.line),o={message:e,url:document.location.href,stack:[r]},s(o,!0)}return h?h.apply(this,arguments):!1}function r(){m||(h=e.onerror,e.onerror=o,m=!0)}function l(){m&&(e.onerror=h,m=!1,h=t)}function c(){var e=v,t=f;f=null,v=null,g=null,s.apply(null,[e,!1].concat(t))}function d(t,n){var i=A.call(arguments,1);if(v){if(g===t)return;c()}var a=M.computeStackTrace(t);if(v=a,g=t,f=i,e.setTimeout(function(){g===t&&c()},a.incomplete?2e3:0),n!==!1)throw t}var h,m,p=[],f=null,g=null,v=null;return d.subscribe=n,d.unsubscribe=i,d.uninstall=a,d}(),M.computeStackTrace=function(){function t(t){if(!M.remoteFetching)return"";try{var n=function(){try{return new e.XMLHttpRequest}catch(t){return new e.ActiveXObject("Microsoft.XMLHTTP")}},i=n();return i.open("GET",t,!1),i.send(""),i.responseText}catch(a){return""}}function n(e){if(!r(e))return[];if(!u(w,e)){var n="",i="";try{i=document.domain}catch(a){}-1!==e.indexOf(i)&&(n=t(e)),w[e]=n?n.split("\n"):[]}return w[e]}function i(e,t){var i,a=/function ([^(]*)\(([^)]*)\)/,o=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,r="",l=10,c=n(e);if(!c.length)return D;for(var d=0;l>d;++d)if(r=c[t-d]+r,!s(r)){if(i=o.exec(r))return i[1];if(i=a.exec(r))return i[1]}return D}function a(e,t){var i=n(e);if(!i.length)return null;var a=[],o=Math.floor(M.linesOfContext/2),r=o+M.linesOfContext%2,l=Math.max(0,t-o-1),c=Math.min(i.length,t+r-1);t-=1;for(var d=l;c>d;++d)s(i[d])||a.push(i[d]);return a.length>0?a:null}function o(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function l(e){return o(e).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function c(e,t){for(var i,a,s=0,o=t.length;o>s;++s)if((i=n(t[s])).length&&(i=i.join("\n"),a=e.exec(i)))return{url:t[s],line:i.substring(0,a.index).split("\n").length,column:a.index-i.lastIndexOf("\n",a.index)-1};return null}function d(e,t,i){var a,s=n(t),r=RegExp("\\b"+o(e)+"\\b");return i-=1,s&&s.length>i&&(a=r.exec(s[i]))?a.index:null}function h(t){for(var n,i,a,s,r=[e.location.href],d=document.getElementsByTagName("script"),u=""+t,h=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,m=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,p=0;d.length>p;++p){var f=d[p];f.src&&r.push(f.src)}if(a=h.exec(u)){var g=a[1]?"\\s+"+a[1]:"",v=a[2].split(",").join("\\s*,\\s*");n=o(a[3]).replace(/;$/,";?"),i=RegExp("function"+g+"\\s*\\(\\s*"+v+"\\s*\\)\\s*{\\s*"+n+"\\s*}")}else i=RegExp(o(u).replace(/\s+/g,"\\s+"));if(s=c(i,r))return s;if(a=m.exec(u)){var b=a[1];if(n=l(a[2]),i=RegExp("on"+b+"=[\\'\"]\\s*"+n+"\\s*[\\'\"]","i"),s=c(i,r[0]))return s;if(i=RegExp(n),s=c(i,r))return s}return null}function m(e){if(!s(e.stack)&&e.stack){for(var t,n,o=/^\s*at (.*?) ?\(?((?:(?:file|https?|chrome-extension):.*?)|<anonymous>):(\d+)(?::(\d+))?\)?\s*$/i,r=/^\s*(.*?)(?:\((.*?)\))?@((?:file|https?|chrome).*?):(\d+)(?::(\d+))?\s*$/i,l=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:ms-appx|http|https):.*?):(\d+)(?::(\d+))?\)?\s*$/i,c=e.stack.split("\n"),u=[],h=/^(.*) is undefined$/.exec(e.message),m=0,p=c.length;p>m;++m){if(t=r.exec(c[m]))n={url:t[3],func:t[1]||D,args:t[2]?t[2].split(","):"",line:+t[4],column:t[5]?+t[5]:null};else if(t=o.exec(c[m]))n={url:t[2],func:t[1]||D,line:+t[3],column:t[4]?+t[4]:null};else{if(!(t=l.exec(c[m])))continue;n={url:t[2],func:t[1]||D,line:+t[3],column:t[4]?+t[4]:null}}!n.func&&n.line&&(n.func=i(n.url,n.line)),n.line&&(n.context=a(n.url,n.line)),u.push(n)}return u.length?(u[0].line&&!u[0].column&&h?u[0].column=d(h[1],u[0].url,u[0].line):u[0].column||s(e.columnNumber)||(u[0].column=e.columnNumber+1),{name:e.name,message:e.message,url:document.location.href,stack:u}):null}}function p(e){var t=e.stacktrace;if(!s(e.stacktrace)&&e.stacktrace){for(var n,o=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,r=t.split("\n"),l=[],c=0,d=r.length;d>c;c+=2)if(n=o.exec(r[c])){var u={line:+n[1],column:+n[2],func:n[3]||n[4],args:n[5]?n[5].split(","):[],url:n[6]};if(!u.func&&u.line&&(u.func=i(u.url,u.line)),u.line)try{u.context=a(u.url,u.line)}catch(h){}u.context||(u.context=[r[c+1]]),l.push(u)}return l.length?{name:e.name,message:e.message,url:document.location.href,stack:l}:null}}function f(t){var s=t.message.split("\n");if(4>s.length)return null;var o,r,d,h,m=/^\s*Line (\d+) of linked script ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,p=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,f=/^\s*Line (\d+) of function script\s*$/i,g=[],v=document.getElementsByTagName("script"),b=[];for(r in v)u(v,r)&&!v[r].src&&b.push(v[r]);for(r=2,d=s.length;d>r;r+=2){var w=null;if(o=m.exec(s[r]))w={url:o[2],func:o[3],line:+o[1]};else if(o=p.exec(s[r])){w={url:o[3],func:o[4]};var x=+o[1],y=b[o[2]-1];if(y&&(h=n(w.url))){h=h.join("\n");var _=h.indexOf(y.innerText);_>=0&&(w.line=x+h.substring(0,_).split("\n").length)}}else if(o=f.exec(s[r])){var k=e.location.href.replace(/#.*$/,""),C=o[1],T=RegExp(l(s[r+1]));h=c(T,[k]),w={url:k,line:h?h.line:C,func:""}}if(w){w.func||(w.func=i(w.url,w.line));var S=a(w.url,w.line),E=S?S[Math.floor(S.length/2)]:null;w.context=S&&E.replace(/^\s*/,"")===s[r+1].replace(/^\s*/,"")?S:[s[r+1]],g.push(w)}}return g.length?{name:t.name,message:s[0],url:document.location.href,stack:g}:null}function g(e,t,n,s){var o={url:t,line:n};if(o.url&&o.line){e.incomplete=!1,o.func||(o.func=i(o.url,o.line)),o.context||(o.context=a(o.url,o.line));var r=/ '([^']+)' /.exec(s);if(r&&(o.column=d(r[1],o.url,o.line)),e.stack.length>0&&e.stack[0].url===o.url){if(e.stack[0].line===o.line)return!1;if(!e.stack[0].line&&e.stack[0].func===o.func)return e.stack[0].line=o.line,e.stack[0].context=o.context,!1}return e.stack.unshift(o),e.partial=!0,!0}return e.incomplete=!0,!1}function v(e,t){for(var n,a,s,o=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,r=[],l={},c=!1,u=v.caller;u&&!c;u=u.caller)if(u!==b&&u!==M.report){if(a={url:null,func:D,line:null,column:null},u.name?a.func=u.name:(n=o.exec(""+u))&&(a.func=n[1]),void 0===a.func)try{a.func=n.input.substring(0,n.input.indexOf("{"))}catch(m){}if(s=h(u)){a.url=s.url,a.line=s.line,a.func===D&&(a.func=i(a.url,a.line));var p=/ '([^']+)' /.exec(e.message||e.description);p&&(a.column=d(p[1],s.url,s.line))}l[""+u]?c=!0:l[""+u]=!0,r.push(a)}t&&r.splice(0,t);var f={name:e.name,message:e.message,url:document.location.href,stack:r};return g(f,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),f}function b(e,t){var n=null;t=null==t?0:+t;try{if(n=p(e))return n}catch(i){if(M.debug)throw i}try{if(n=m(e))return n}catch(i){if(M.debug)throw i}try{if(n=f(e))return n}catch(i){if(M.debug)throw i}try{if(n=v(e,t+1))return n}catch(i){if(M.debug)throw i}return{name:e.name,message:e.message,url:document.location.href}}var w={};return b.augmentStackTraceWithInitialElement=g,b.computeStackTraceFromStackProp=m,b.guessFunctionName=i,b.gatherContext=a,b}();var V,R,N,O,I,U,L=e.Raven,q=!("object"!=typeof JSON||!JSON.stringify),H={logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],crossOrigin:"anonymous",collectWindowErrors:!0,tags:{},maxMessageLength:100,extra:{}},j=!1,$=Object.prototype,z=e.console||{},B={},W=w();for(var G in z)B[G]=z[G];var Y={VERSION:"1.1.22",debug:!0,noConflict:function(){return e.Raven=L,Y},config:function(e,t){if(N)return E("error","Error: Raven has already been configured"),Y;if(!e)return Y;var n=a(e),i=n.path.lastIndexOf("/"),s=n.path.substr(1,i);return t&&h(t,function(e,t){H[e]=t}),H.ignoreErrors.push(/^Script error\.?$/),H.ignoreErrors.push(/^Javascript error: Script error\.? on line 0$/),H.ignoreErrors=T(H.ignoreErrors),H.ignoreUrls=H.ignoreUrls.length?T(H.ignoreUrls):!1,H.whitelistUrls=H.whitelistUrls.length?T(H.whitelistUrls):!1,H.includePaths=T(H.includePaths),I=n.user,U=n.path.substr(i+1),N="//"+n.host+(n.port?":"+n.port:"")+"/"+s+"api/"+U+"/store/",n.protocol&&(N=n.protocol+":"+N),H.fetchContext&&(M.remoteFetching=!0),H.linesOfContext&&(M.linesOfContext=H.linesOfContext),M.collectWindowErrors=!!H.collectWindowErrors,Y},install:function(){return C()&&!j&&(M.report.subscribe(m),j=!0),Y},context:function(e,n,i){return o(e)&&(i=n||[],n=e,e=t),Y.wrap(e,n).apply(this,i)},wrap:function(e,n){function i(){for(var t=[],i=arguments.length,a=!e||e&&e.deep!==!1;i--;)t[i]=a?Y.wrap(e,arguments[i]):arguments[i];try{return n.apply(this,t)}catch(s){throw Y.captureException(s,e),s}}if(s(n)&&!o(e))return e;if(o(e)&&(n=e,e=t),!o(n))return n;if(n.__raven__)return n;for(var a in n)u(n,a)&&(i[a]=n[a]);return i.__raven__=!0,i.__inner__=n,i},uninstall:function(){return M.report.uninstall(),j=!1,Y},captureException:function(e,t){if(!d(e))return Y.captureMessage(e,t);V=e;try{var n=M.computeStackTrace(e);m(n,t)}catch(i){if(e!==i)throw i}return Y},captureMessage:function(e,t){return H.ignoreErrors.test&&H.ignoreErrors.test(e)?void 0:(y(v({message:e+""},t)),Y)},setUserContext:function(e){return O=e,Y},setExtraContext:function(e){return H.extra=e||{},Y},setTagsContext:function(e){return H.tags=e||{},Y},setReleaseContext:function(e){return H.release=e,Y},setDataCallback:function(e){return H.dataCallback=e,Y},setShouldSendCallback:function(e){return H.shouldSendCallback=e,Y},lastException:function(){return V},lastEventId:function(){return R},isSetup:function(){return C()}};Y.setUser=Y.setUserContext;var J="source protocol user pass host port path".split(" "),K=/^(?:(\w+):)?\/\/(?:(\w+)(:\w+)?@)?([\w\.-]+)(?::(\d+))?(\/.*)/;i.prototype=Error(),i.prototype.constructor=i;var X;F(),"function"==typeof define&&define.amd?(e.Raven=Y,define("raven",[],function(){return Y})):"object"==typeof module?module.exports=Y:"object"==typeof exports?exports=Y:e.Raven=Y}("undefined"!=typeof window?window:this);
//# sourceMappingURL=main.js.map